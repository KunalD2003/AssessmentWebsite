function y2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Mo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $h(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function wi(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var Oj={exports:{}},iC={},Dj={exports:{}},Pt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wb=Symbol.for("react.element"),dY=Symbol.for("react.portal"),hY=Symbol.for("react.fragment"),fY=Symbol.for("react.strict_mode"),pY=Symbol.for("react.profiler"),mY=Symbol.for("react.provider"),gY=Symbol.for("react.context"),yY=Symbol.for("react.forward_ref"),bY=Symbol.for("react.suspense"),vY=Symbol.for("react.memo"),wY=Symbol.for("react.lazy"),nF=Symbol.iterator;function xY(t){return t===null||typeof t!="object"?null:(t=nF&&t[nF]||t["@@iterator"],typeof t=="function"?t:null)}var Pj={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Lj=Object.assign,Fj={};function Jp(t,e,n){this.props=t,this.context=e,this.refs=Fj,this.updater=n||Pj}Jp.prototype.isReactComponent={};Jp.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Jp.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mj(){}Mj.prototype=Jp.prototype;function b2(t,e,n){this.props=t,this.context=e,this.refs=Fj,this.updater=n||Pj}var v2=b2.prototype=new Mj;v2.constructor=b2;Lj(v2,Jp.prototype);v2.isPureReactComponent=!0;var rF=Array.isArray,zj=Object.prototype.hasOwnProperty,w2={current:null},Bj={key:!0,ref:!0,__self:!0,__source:!0};function jj(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)zj.call(e,r)&&!Bj.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];s.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Wb,type:t,key:i,ref:o,props:s,_owner:w2.current}}function SY(t,e){return{$$typeof:Wb,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function x2(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wb}function CY(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sF=/\/+/g;function sI(t,e){return typeof t=="object"&&t!==null&&t.key!=null?CY(""+t.key):e.toString(36)}function i1(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wb:case dY:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+sI(o,0):r,rF(s)?(n="",t!=null&&(n=t.replace(sF,"$&/")+"/"),i1(s,e,n,"",function(c){return c})):s!=null&&(x2(s)&&(s=SY(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(sF,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",rF(t))for(var a=0;a<t.length;a++){i=t[a];var l=r+sI(i,a);o+=i1(i,e,n,l,s)}else if(l=xY(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=r+sI(i,a++),o+=i1(i,e,n,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function px(t,e,n){if(t==null)return t;var r=[],s=0;return i1(t,r,"","",function(i){return e.call(n,i,s++)}),r}function EY(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ws={current:null},o1={transition:null},_Y={ReactCurrentDispatcher:Ws,ReactCurrentBatchConfig:o1,ReactCurrentOwner:w2};function Vj(){throw Error("act(...) is not supported in production builds of React.")}Pt.Children={map:px,forEach:function(t,e,n){px(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return px(t,function(){e++}),e},toArray:function(t){return px(t,function(e){return e})||[]},only:function(t){if(!x2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Pt.Component=Jp;Pt.Fragment=hY;Pt.Profiler=pY;Pt.PureComponent=b2;Pt.StrictMode=fY;Pt.Suspense=bY;Pt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_Y;Pt.act=Vj;Pt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Lj({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=w2.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)zj.call(e,l)&&!Bj.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Wb,type:t.type,key:s,ref:i,props:r,_owner:o}};Pt.createContext=function(t){return t={$$typeof:gY,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mY,_context:t},t.Consumer=t};Pt.createElement=jj;Pt.createFactory=function(t){var e=jj.bind(null,t);return e.type=t,e};Pt.createRef=function(){return{current:null}};Pt.forwardRef=function(t){return{$$typeof:yY,render:t}};Pt.isValidElement=x2;Pt.lazy=function(t){return{$$typeof:wY,_payload:{_status:-1,_result:t},_init:EY}};Pt.memo=function(t,e){return{$$typeof:vY,type:t,compare:e===void 0?null:e}};Pt.startTransition=function(t){var e=o1.transition;o1.transition={};try{t()}finally{o1.transition=e}};Pt.unstable_act=Vj;Pt.useCallback=function(t,e){return Ws.current.useCallback(t,e)};Pt.useContext=function(t){return Ws.current.useContext(t)};Pt.useDebugValue=function(){};Pt.useDeferredValue=function(t){return Ws.current.useDeferredValue(t)};Pt.useEffect=function(t,e){return Ws.current.useEffect(t,e)};Pt.useId=function(){return Ws.current.useId()};Pt.useImperativeHandle=function(t,e,n){return Ws.current.useImperativeHandle(t,e,n)};Pt.useInsertionEffect=function(t,e){return Ws.current.useInsertionEffect(t,e)};Pt.useLayoutEffect=function(t,e){return Ws.current.useLayoutEffect(t,e)};Pt.useMemo=function(t,e){return Ws.current.useMemo(t,e)};Pt.useReducer=function(t,e,n){return Ws.current.useReducer(t,e,n)};Pt.useRef=function(t){return Ws.current.useRef(t)};Pt.useState=function(t){return Ws.current.useState(t)};Pt.useSyncExternalStore=function(t,e,n){return Ws.current.useSyncExternalStore(t,e,n)};Pt.useTransition=function(){return Ws.current.useTransition()};Pt.version="18.3.1";Dj.exports=Pt;var N=Dj.exports;const kn=$h(N),hu=y2({__proto__:null,default:kn},[N]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TY=N,kY=Symbol.for("react.element"),IY=Symbol.for("react.fragment"),NY=Object.prototype.hasOwnProperty,$Y=TY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,AY={key:!0,ref:!0,__self:!0,__source:!0};function Uj(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)NY.call(e,r)&&!AY.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:kY,type:t,key:i,ref:o,props:s,_owner:$Y.current}}iC.Fragment=IY;iC.jsx=Uj;iC.jsxs=Uj;Oj.exports=iC;var $=Oj.exports,LN={},Wj={exports:{}},Qi={},Hj={exports:{}},Gj={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,W){var L=V.length;V.push(W);e:for(;0<L;){var J=L-1>>>1,Z=V[J];if(0<s(Z,W))V[J]=W,V[L]=Z,L=J;else break e}}function n(V){return V.length===0?null:V[0]}function r(V){if(V.length===0)return null;var W=V[0],L=V.pop();if(L!==W){V[0]=L;e:for(var J=0,Z=V.length,ie=Z>>>1;J<ie;){var ue=2*(J+1)-1,de=V[ue],ye=ue+1,Ee=V[ye];if(0>s(de,L))ye<Z&&0>s(Ee,de)?(V[J]=Ee,V[ye]=L,J=ye):(V[J]=de,V[ue]=L,J=ue);else if(ye<Z&&0>s(Ee,L))V[J]=Ee,V[ye]=L,J=ye;else break e}}return W}function s(V,W){var L=V.sortIndex-W.sortIndex;return L!==0?L:V.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(V){for(var W=n(c);W!==null;){if(W.callback===null)r(c);else if(W.startTime<=V)r(c),W.sortIndex=W.expirationTime,e(l,W);else break;W=n(c)}}function w(V){if(m=!1,v(V),!p)if(n(l)!==null)p=!0,Q(C);else{var W=n(c);W!==null&&se(w,W.startTime-V)}}function C(V,W){p=!1,m&&(m=!1,y(I),I=-1),f=!0;var L=h;try{for(v(W),d=n(l);d!==null&&(!(d.expirationTime>W)||V&&!z());){var J=d.callback;if(typeof J=="function"){d.callback=null,h=d.priorityLevel;var Z=J(d.expirationTime<=W);W=t.unstable_now(),typeof Z=="function"?d.callback=Z:d===n(l)&&r(l),v(W)}else r(l);d=n(l)}if(d!==null)var ie=!0;else{var ue=n(c);ue!==null&&se(w,ue.startTime-W),ie=!1}return ie}finally{d=null,h=L,f=!1}}var _=!1,E=null,I=-1,O=5,R=-1;function z(){return!(t.unstable_now()-R<O)}function B(){if(E!==null){var V=t.unstable_now();R=V;var W=!0;try{W=E(!0,V)}finally{W?j():(_=!1,E=null)}}else _=!1}var j;if(typeof b=="function")j=function(){b(B)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,U=G.port2;G.port1.onmessage=B,j=function(){U.postMessage(null)}}else j=function(){g(B,0)};function Q(V){E=V,_||(_=!0,j())}function se(V,W){I=g(function(){V(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Q(C))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(V){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var L=h;h=W;try{return V()}finally{h=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,W){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var L=h;h=V;try{return W()}finally{h=L}},t.unstable_scheduleCallback=function(V,W,L){var J=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?J+L:J):L=J,V){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=L+Z,V={id:u++,callback:W,priorityLevel:V,startTime:L,expirationTime:Z,sortIndex:-1},L>J?(V.sortIndex=L,e(c,V),n(l)===null&&V===n(c)&&(m?(y(I),I=-1):m=!0,se(w,L-J))):(V.sortIndex=Z,e(l,V),p||f||(p=!0,Q(C))),V},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(V){var W=h;return function(){var L=h;h=W;try{return V.apply(this,arguments)}finally{h=L}}}})(Gj);Hj.exports=Gj;var RY=Hj.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var OY=N,Ui=RY;function ke(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kj=new Set,Hy={};function Ah(t,e){bp(t,e),bp(t+"Capture",e)}function bp(t,e){for(Hy[t]=e,t=0;t<e.length;t++)Kj.add(e[t])}var Gl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),FN=Object.prototype.hasOwnProperty,DY=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iF={},oF={};function PY(t){return FN.call(oF,t)?!0:FN.call(iF,t)?!1:DY.test(t)?oF[t]=!0:(iF[t]=!0,!1)}function LY(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function FY(t,e,n,r){if(e===null||typeof e>"u"||LY(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Hs(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ss={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ss[t]=new Hs(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ss[e]=new Hs(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ss[t]=new Hs(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ss[t]=new Hs(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ss[t]=new Hs(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ss[t]=new Hs(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ss[t]=new Hs(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ss[t]=new Hs(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ss[t]=new Hs(t,5,!1,t.toLowerCase(),null,!1,!1)});var S2=/[\-:]([a-z])/g;function C2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(S2,C2);ss[e]=new Hs(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(S2,C2);ss[e]=new Hs(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(S2,C2);ss[e]=new Hs(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ss[t]=new Hs(t,1,!1,t.toLowerCase(),null,!1,!1)});ss.xlinkHref=new Hs("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ss[t]=new Hs(t,1,!1,t.toLowerCase(),null,!0,!0)});function E2(t,e,n,r){var s=ss.hasOwnProperty(e)?ss[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(FY(e,n,s,r)&&(n=null),r||s===null?PY(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ac=OY.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,mx=Symbol.for("react.element"),Bf=Symbol.for("react.portal"),jf=Symbol.for("react.fragment"),_2=Symbol.for("react.strict_mode"),MN=Symbol.for("react.profiler"),qj=Symbol.for("react.provider"),Xj=Symbol.for("react.context"),T2=Symbol.for("react.forward_ref"),zN=Symbol.for("react.suspense"),BN=Symbol.for("react.suspense_list"),k2=Symbol.for("react.memo"),Dc=Symbol.for("react.lazy"),Yj=Symbol.for("react.offscreen"),aF=Symbol.iterator;function qg(t){return t===null||typeof t!="object"?null:(t=aF&&t[aF]||t["@@iterator"],typeof t=="function"?t:null)}var Jn=Object.assign,iI;function hy(t){if(iI===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);iI=e&&e[1]||""}return`
`+iI+t}var oI=!1;function aI(t,e){if(!t||oI)return"";oI=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{oI=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?hy(t):""}function MY(t){switch(t.tag){case 5:return hy(t.type);case 16:return hy("Lazy");case 13:return hy("Suspense");case 19:return hy("SuspenseList");case 0:case 2:case 15:return t=aI(t.type,!1),t;case 11:return t=aI(t.type.render,!1),t;case 1:return t=aI(t.type,!0),t;default:return""}}function jN(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case jf:return"Fragment";case Bf:return"Portal";case MN:return"Profiler";case _2:return"StrictMode";case zN:return"Suspense";case BN:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Xj:return(t.displayName||"Context")+".Consumer";case qj:return(t._context.displayName||"Context")+".Provider";case T2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case k2:return e=t.displayName||null,e!==null?e:jN(t.type)||"Memo";case Dc:e=t._payload,t=t._init;try{return jN(t(e))}catch{}}return null}function zY(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return jN(e);case 8:return e===_2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function fu(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qj(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function BY(t){var e=Qj(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function gx(t){t._valueTracker||(t._valueTracker=BY(t))}function Jj(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qj(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function P1(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function VN(t,e){var n=e.checked;return Jn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function lF(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=fu(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Zj(t,e){e=e.checked,e!=null&&E2(t,"checked",e,!1)}function UN(t,e){Zj(t,e);var n=fu(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?WN(t,e.type,n):e.hasOwnProperty("defaultValue")&&WN(t,e.type,fu(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cF(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function WN(t,e,n){(e!=="number"||P1(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var fy=Array.isArray;function tp(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+fu(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function HN(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Jn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uF(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ke(92));if(fy(n)){if(1<n.length)throw Error(ke(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:fu(n)}}function eV(t,e){var n=fu(e.value),r=fu(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dF(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function tV(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function GN(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?tV(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var yx,nV=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(yx=yx||document.createElement("div"),yx.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=yx.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gy(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ky={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jY=["Webkit","ms","Moz","O"];Object.keys(ky).forEach(function(t){jY.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ky[e]=ky[t]})});function rV(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ky.hasOwnProperty(t)&&ky[t]?(""+e).trim():e+"px"}function sV(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=rV(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var VY=Jn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function KN(t,e){if(e){if(VY[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ke(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ke(62))}}function qN(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XN=null;function I2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var YN=null,np=null,rp=null;function hF(t){if(t=Kb(t)){if(typeof YN!="function")throw Error(ke(280));var e=t.stateNode;e&&(e=uC(e),YN(t.stateNode,t.type,e))}}function iV(t){np?rp?rp.push(t):rp=[t]:np=t}function oV(){if(np){var t=np,e=rp;if(rp=np=null,hF(t),e)for(t=0;t<e.length;t++)hF(e[t])}}function aV(t,e){return t(e)}function lV(){}var lI=!1;function cV(t,e,n){if(lI)return t(e,n);lI=!0;try{return aV(t,e,n)}finally{lI=!1,(np!==null||rp!==null)&&(lV(),oV())}}function Ky(t,e){var n=t.stateNode;if(n===null)return null;var r=uC(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ke(231,e,typeof n));return n}var QN=!1;if(Gl)try{var Xg={};Object.defineProperty(Xg,"passive",{get:function(){QN=!0}}),window.addEventListener("test",Xg,Xg),window.removeEventListener("test",Xg,Xg)}catch{QN=!1}function UY(t,e,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Iy=!1,L1=null,F1=!1,JN=null,WY={onError:function(t){Iy=!0,L1=t}};function HY(t,e,n,r,s,i,o,a,l){Iy=!1,L1=null,UY.apply(WY,arguments)}function GY(t,e,n,r,s,i,o,a,l){if(HY.apply(this,arguments),Iy){if(Iy){var c=L1;Iy=!1,L1=null}else throw Error(ke(198));F1||(F1=!0,JN=c)}}function Rh(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function uV(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fF(t){if(Rh(t)!==t)throw Error(ke(188))}function KY(t){var e=t.alternate;if(!e){if(e=Rh(t),e===null)throw Error(ke(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return fF(s),t;if(i===r)return fF(s),e;i=i.sibling}throw Error(ke(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(ke(189))}}if(n.alternate!==r)throw Error(ke(190))}if(n.tag!==3)throw Error(ke(188));return n.stateNode.current===n?t:e}function dV(t){return t=KY(t),t!==null?hV(t):null}function hV(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hV(t);if(e!==null)return e;t=t.sibling}return null}var fV=Ui.unstable_scheduleCallback,pF=Ui.unstable_cancelCallback,qY=Ui.unstable_shouldYield,XY=Ui.unstable_requestPaint,cr=Ui.unstable_now,YY=Ui.unstable_getCurrentPriorityLevel,N2=Ui.unstable_ImmediatePriority,pV=Ui.unstable_UserBlockingPriority,M1=Ui.unstable_NormalPriority,QY=Ui.unstable_LowPriority,mV=Ui.unstable_IdlePriority,oC=null,Ga=null;function JY(t){if(Ga&&typeof Ga.onCommitFiberRoot=="function")try{Ga.onCommitFiberRoot(oC,t,void 0,(t.current.flags&128)===128)}catch{}}var la=Math.clz32?Math.clz32:tQ,ZY=Math.log,eQ=Math.LN2;function tQ(t){return t>>>=0,t===0?32:31-(ZY(t)/eQ|0)|0}var bx=64,vx=4194304;function py(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function z1(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=py(a):(i&=o,i!==0&&(r=py(i)))}else o=n&~s,o!==0?r=py(o):i!==0&&(r=py(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-la(e),s=1<<n,r|=t[n],e&=~s;return r}function nQ(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function rQ(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-la(i),a=1<<o,l=s[o];l===-1?(!(a&n)||a&r)&&(s[o]=nQ(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function ZN(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function gV(){var t=bx;return bx<<=1,!(bx&4194240)&&(bx=64),t}function cI(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Hb(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-la(e),t[e]=n}function sQ(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-la(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function $2(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-la(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var sn=0;function yV(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bV,A2,vV,wV,xV,e$=!1,wx=[],Qc=null,Jc=null,Zc=null,qy=new Map,Xy=new Map,Mc=[],iQ="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mF(t,e){switch(t){case"focusin":case"focusout":Qc=null;break;case"dragenter":case"dragleave":Jc=null;break;case"mouseover":case"mouseout":Zc=null;break;case"pointerover":case"pointerout":qy.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xy.delete(e.pointerId)}}function Yg(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Kb(e),e!==null&&A2(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function oQ(t,e,n,r,s){switch(e){case"focusin":return Qc=Yg(Qc,t,e,n,r,s),!0;case"dragenter":return Jc=Yg(Jc,t,e,n,r,s),!0;case"mouseover":return Zc=Yg(Zc,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return qy.set(i,Yg(qy.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Xy.set(i,Yg(Xy.get(i)||null,t,e,n,r,s)),!0}return!1}function SV(t){var e=Ad(t.target);if(e!==null){var n=Rh(e);if(n!==null){if(e=n.tag,e===13){if(e=uV(n),e!==null){t.blockedOn=e,xV(t.priority,function(){vV(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function a1(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=t$(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);XN=r,n.target.dispatchEvent(r),XN=null}else return e=Kb(n),e!==null&&A2(e),t.blockedOn=n,!1;e.shift()}return!0}function gF(t,e,n){a1(t)&&n.delete(e)}function aQ(){e$=!1,Qc!==null&&a1(Qc)&&(Qc=null),Jc!==null&&a1(Jc)&&(Jc=null),Zc!==null&&a1(Zc)&&(Zc=null),qy.forEach(gF),Xy.forEach(gF)}function Qg(t,e){t.blockedOn===e&&(t.blockedOn=null,e$||(e$=!0,Ui.unstable_scheduleCallback(Ui.unstable_NormalPriority,aQ)))}function Yy(t){function e(s){return Qg(s,t)}if(0<wx.length){Qg(wx[0],t);for(var n=1;n<wx.length;n++){var r=wx[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qc!==null&&Qg(Qc,t),Jc!==null&&Qg(Jc,t),Zc!==null&&Qg(Zc,t),qy.forEach(e),Xy.forEach(e),n=0;n<Mc.length;n++)r=Mc[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mc.length&&(n=Mc[0],n.blockedOn===null);)SV(n),n.blockedOn===null&&Mc.shift()}var sp=ac.ReactCurrentBatchConfig,B1=!0;function lQ(t,e,n,r){var s=sn,i=sp.transition;sp.transition=null;try{sn=1,R2(t,e,n,r)}finally{sn=s,sp.transition=i}}function cQ(t,e,n,r){var s=sn,i=sp.transition;sp.transition=null;try{sn=4,R2(t,e,n,r)}finally{sn=s,sp.transition=i}}function R2(t,e,n,r){if(B1){var s=t$(t,e,n,r);if(s===null)vI(t,e,r,j1,n),mF(t,r);else if(oQ(s,t,e,n,r))r.stopPropagation();else if(mF(t,r),e&4&&-1<iQ.indexOf(t)){for(;s!==null;){var i=Kb(s);if(i!==null&&bV(i),i=t$(t,e,n,r),i===null&&vI(t,e,r,j1,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else vI(t,e,r,null,n)}}var j1=null;function t$(t,e,n,r){if(j1=null,t=I2(r),t=Ad(t),t!==null)if(e=Rh(t),e===null)t=null;else if(n=e.tag,n===13){if(t=uV(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return j1=t,null}function CV(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(YY()){case N2:return 1;case pV:return 4;case M1:case QY:return 16;case mV:return 536870912;default:return 16}default:return 16}}var Hc=null,O2=null,l1=null;function EV(){if(l1)return l1;var t,e=O2,n=e.length,r,s="value"in Hc?Hc.value:Hc.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return l1=s.slice(t,1<r?1-r:void 0)}function c1(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xx(){return!0}function yF(){return!1}function Ji(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xx:yF,this.isPropagationStopped=yF,this}return Jn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xx)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xx)},persist:function(){},isPersistent:xx}),e}var Zp={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},D2=Ji(Zp),Gb=Jn({},Zp,{view:0,detail:0}),uQ=Ji(Gb),uI,dI,Jg,aC=Jn({},Gb,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jg&&(Jg&&t.type==="mousemove"?(uI=t.screenX-Jg.screenX,dI=t.screenY-Jg.screenY):dI=uI=0,Jg=t),uI)},movementY:function(t){return"movementY"in t?t.movementY:dI}}),bF=Ji(aC),dQ=Jn({},aC,{dataTransfer:0}),hQ=Ji(dQ),fQ=Jn({},Gb,{relatedTarget:0}),hI=Ji(fQ),pQ=Jn({},Zp,{animationName:0,elapsedTime:0,pseudoElement:0}),mQ=Ji(pQ),gQ=Jn({},Zp,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),yQ=Ji(gQ),bQ=Jn({},Zp,{data:0}),vF=Ji(bQ),vQ={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wQ={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xQ={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function SQ(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=xQ[t])?!!e[t]:!1}function P2(){return SQ}var CQ=Jn({},Gb,{key:function(t){if(t.key){var e=vQ[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=c1(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wQ[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P2,charCode:function(t){return t.type==="keypress"?c1(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?c1(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),EQ=Ji(CQ),_Q=Jn({},aC,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wF=Ji(_Q),TQ=Jn({},Gb,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P2}),kQ=Ji(TQ),IQ=Jn({},Zp,{propertyName:0,elapsedTime:0,pseudoElement:0}),NQ=Ji(IQ),$Q=Jn({},aC,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),AQ=Ji($Q),RQ=[9,13,27,32],L2=Gl&&"CompositionEvent"in window,Ny=null;Gl&&"documentMode"in document&&(Ny=document.documentMode);var OQ=Gl&&"TextEvent"in window&&!Ny,_V=Gl&&(!L2||Ny&&8<Ny&&11>=Ny),xF=" ",SF=!1;function TV(t,e){switch(t){case"keyup":return RQ.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kV(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vf=!1;function DQ(t,e){switch(t){case"compositionend":return kV(e);case"keypress":return e.which!==32?null:(SF=!0,xF);case"textInput":return t=e.data,t===xF&&SF?null:t;default:return null}}function PQ(t,e){if(Vf)return t==="compositionend"||!L2&&TV(t,e)?(t=EV(),l1=O2=Hc=null,Vf=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return _V&&e.locale!=="ko"?null:e.data;default:return null}}var LQ={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function CF(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!LQ[t.type]:e==="textarea"}function IV(t,e,n,r){iV(r),e=V1(e,"onChange"),0<e.length&&(n=new D2("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var $y=null,Qy=null;function FQ(t){zV(t,0)}function lC(t){var e=Hf(t);if(Jj(e))return t}function MQ(t,e){if(t==="change")return e}var NV=!1;if(Gl){var fI;if(Gl){var pI="oninput"in document;if(!pI){var EF=document.createElement("div");EF.setAttribute("oninput","return;"),pI=typeof EF.oninput=="function"}fI=pI}else fI=!1;NV=fI&&(!document.documentMode||9<document.documentMode)}function _F(){$y&&($y.detachEvent("onpropertychange",$V),Qy=$y=null)}function $V(t){if(t.propertyName==="value"&&lC(Qy)){var e=[];IV(e,Qy,t,I2(t)),cV(FQ,e)}}function zQ(t,e,n){t==="focusin"?(_F(),$y=e,Qy=n,$y.attachEvent("onpropertychange",$V)):t==="focusout"&&_F()}function BQ(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lC(Qy)}function jQ(t,e){if(t==="click")return lC(e)}function VQ(t,e){if(t==="input"||t==="change")return lC(e)}function UQ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ha=typeof Object.is=="function"?Object.is:UQ;function Jy(t,e){if(ha(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!FN.call(e,s)||!ha(t[s],e[s]))return!1}return!0}function TF(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function kF(t,e){var n=TF(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=TF(n)}}function AV(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?AV(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function RV(){for(var t=window,e=P1();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=P1(t.document)}return e}function F2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function WQ(t){var e=RV(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&AV(n.ownerDocument.documentElement,n)){if(r!==null&&F2(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=kF(n,i);var o=kF(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var HQ=Gl&&"documentMode"in document&&11>=document.documentMode,Uf=null,n$=null,Ay=null,r$=!1;function IF(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;r$||Uf==null||Uf!==P1(r)||(r=Uf,"selectionStart"in r&&F2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ay&&Jy(Ay,r)||(Ay=r,r=V1(n$,"onSelect"),0<r.length&&(e=new D2("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Uf)))}function Sx(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wf={animationend:Sx("Animation","AnimationEnd"),animationiteration:Sx("Animation","AnimationIteration"),animationstart:Sx("Animation","AnimationStart"),transitionend:Sx("Transition","TransitionEnd")},mI={},OV={};Gl&&(OV=document.createElement("div").style,"AnimationEvent"in window||(delete Wf.animationend.animation,delete Wf.animationiteration.animation,delete Wf.animationstart.animation),"TransitionEvent"in window||delete Wf.transitionend.transition);function cC(t){if(mI[t])return mI[t];if(!Wf[t])return t;var e=Wf[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in OV)return mI[t]=e[n];return t}var DV=cC("animationend"),PV=cC("animationiteration"),LV=cC("animationstart"),FV=cC("transitionend"),MV=new Map,NF="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ru(t,e){MV.set(t,e),Ah(e,[t])}for(var gI=0;gI<NF.length;gI++){var yI=NF[gI],GQ=yI.toLowerCase(),KQ=yI[0].toUpperCase()+yI.slice(1);Ru(GQ,"on"+KQ)}Ru(DV,"onAnimationEnd");Ru(PV,"onAnimationIteration");Ru(LV,"onAnimationStart");Ru("dblclick","onDoubleClick");Ru("focusin","onFocus");Ru("focusout","onBlur");Ru(FV,"onTransitionEnd");bp("onMouseEnter",["mouseout","mouseover"]);bp("onMouseLeave",["mouseout","mouseover"]);bp("onPointerEnter",["pointerout","pointerover"]);bp("onPointerLeave",["pointerout","pointerover"]);Ah("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ah("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ah("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ah("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ah("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ah("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var my="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qQ=new Set("cancel close invalid load scroll toggle".split(" ").concat(my));function $F(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,GY(r,e,void 0,t),t.currentTarget=null}function zV(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;$F(s,a,c),i=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;$F(s,a,c),i=l}}}if(F1)throw t=JN,F1=!1,JN=null,t}function $n(t,e){var n=e[l$];n===void 0&&(n=e[l$]=new Set);var r=t+"__bubble";n.has(r)||(BV(e,t,2,!1),n.add(r))}function bI(t,e,n){var r=0;e&&(r|=4),BV(n,t,r,e)}var Cx="_reactListening"+Math.random().toString(36).slice(2);function Zy(t){if(!t[Cx]){t[Cx]=!0,Kj.forEach(function(n){n!=="selectionchange"&&(qQ.has(n)||bI(n,!1,t),bI(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cx]||(e[Cx]=!0,bI("selectionchange",!1,e))}}function BV(t,e,n,r){switch(CV(e)){case 1:var s=lQ;break;case 4:s=cQ;break;default:s=R2}n=s.bind(null,e,n,t),s=void 0,!QN||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function vI(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Ad(a),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}a=a.parentNode}}r=r.return}cV(function(){var c=i,u=I2(n),d=[];e:{var h=MV.get(t);if(h!==void 0){var f=D2,p=t;switch(t){case"keypress":if(c1(n)===0)break e;case"keydown":case"keyup":f=EQ;break;case"focusin":p="focus",f=hI;break;case"focusout":p="blur",f=hI;break;case"beforeblur":case"afterblur":f=hI;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=bF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=hQ;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=kQ;break;case DV:case PV:case LV:f=mQ;break;case FV:f=NQ;break;case"scroll":f=uQ;break;case"wheel":f=AQ;break;case"copy":case"cut":case"paste":f=yQ;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=wF}var m=(e&4)!==0,g=!m&&t==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var b=c,v;b!==null;){v=b;var w=v.stateNode;if(v.tag===5&&w!==null&&(v=w,y!==null&&(w=Ky(b,y),w!=null&&m.push(eb(b,w,v)))),g)break;b=b.return}0<m.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==XN&&(p=n.relatedTarget||n.fromElement)&&(Ad(p)||p[Kl]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?Ad(p):null,p!==null&&(g=Rh(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=bF,w="onMouseLeave",y="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(m=wF,w="onPointerLeave",y="onPointerEnter",b="pointer"),g=f==null?h:Hf(f),v=p==null?h:Hf(p),h=new m(w,b+"leave",f,n,u),h.target=g,h.relatedTarget=v,w=null,Ad(u)===c&&(m=new m(y,b+"enter",p,n,u),m.target=v,m.relatedTarget=g,w=m),g=w,f&&p)t:{for(m=f,y=p,b=0,v=m;v;v=xf(v))b++;for(v=0,w=y;w;w=xf(w))v++;for(;0<b-v;)m=xf(m),b--;for(;0<v-b;)y=xf(y),v--;for(;b--;){if(m===y||y!==null&&m===y.alternate)break t;m=xf(m),y=xf(y)}m=null}else m=null;f!==null&&AF(d,h,f,m,!1),p!==null&&g!==null&&AF(d,g,p,m,!0)}}e:{if(h=c?Hf(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var C=MQ;else if(CF(h))if(NV)C=VQ;else{C=BQ;var _=zQ}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=jQ);if(C&&(C=C(t,c))){IV(d,C,n,u);break e}_&&_(t,h,c),t==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&WN(h,"number",h.value)}switch(_=c?Hf(c):window,t){case"focusin":(CF(_)||_.contentEditable==="true")&&(Uf=_,n$=c,Ay=null);break;case"focusout":Ay=n$=Uf=null;break;case"mousedown":r$=!0;break;case"contextmenu":case"mouseup":case"dragend":r$=!1,IF(d,n,u);break;case"selectionchange":if(HQ)break;case"keydown":case"keyup":IF(d,n,u)}var E;if(L2)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Vf?TV(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(_V&&n.locale!=="ko"&&(Vf||I!=="onCompositionStart"?I==="onCompositionEnd"&&Vf&&(E=EV()):(Hc=u,O2="value"in Hc?Hc.value:Hc.textContent,Vf=!0)),_=V1(c,I),0<_.length&&(I=new vF(I,t,null,n,u),d.push({event:I,listeners:_}),E?I.data=E:(E=kV(n),E!==null&&(I.data=E)))),(E=OQ?DQ(t,n):PQ(t,n))&&(c=V1(c,"onBeforeInput"),0<c.length&&(u=new vF("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=E))}zV(d,e)})}function eb(t,e,n){return{instance:t,listener:e,currentTarget:n}}function V1(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Ky(t,n),i!=null&&r.unshift(eb(t,i,s)),i=Ky(t,e),i!=null&&r.push(eb(t,i,s))),t=t.return}return r}function xf(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function AF(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,s?(l=Ky(n,i),l!=null&&o.unshift(eb(n,l,a))):s||(l=Ky(n,i),l!=null&&o.push(eb(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var XQ=/\r\n?/g,YQ=/\u0000|\uFFFD/g;function RF(t){return(typeof t=="string"?t:""+t).replace(XQ,`
`).replace(YQ,"")}function Ex(t,e,n){if(e=RF(e),RF(t)!==e&&n)throw Error(ke(425))}function U1(){}var s$=null,i$=null;function o$(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var a$=typeof setTimeout=="function"?setTimeout:void 0,QQ=typeof clearTimeout=="function"?clearTimeout:void 0,OF=typeof Promise=="function"?Promise:void 0,JQ=typeof queueMicrotask=="function"?queueMicrotask:typeof OF<"u"?function(t){return OF.resolve(null).then(t).catch(ZQ)}:a$;function ZQ(t){setTimeout(function(){throw t})}function wI(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Yy(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Yy(e)}function eu(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function DF(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var em=Math.random().toString(36).slice(2),ja="__reactFiber$"+em,tb="__reactProps$"+em,Kl="__reactContainer$"+em,l$="__reactEvents$"+em,eJ="__reactListeners$"+em,tJ="__reactHandles$"+em;function Ad(t){var e=t[ja];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Kl]||n[ja]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=DF(t);t!==null;){if(n=t[ja])return n;t=DF(t)}return e}t=n,n=t.parentNode}return null}function Kb(t){return t=t[ja]||t[Kl],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hf(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ke(33))}function uC(t){return t[tb]||null}var c$=[],Gf=-1;function Ou(t){return{current:t}}function Rn(t){0>Gf||(t.current=c$[Gf],c$[Gf]=null,Gf--)}function Tn(t,e){Gf++,c$[Gf]=t.current,t.current=e}var pu={},vs=Ou(pu),ai=Ou(!1),th=pu;function vp(t,e){var n=t.type.contextTypes;if(!n)return pu;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function li(t){return t=t.childContextTypes,t!=null}function W1(){Rn(ai),Rn(vs)}function PF(t,e,n){if(vs.current!==pu)throw Error(ke(168));Tn(vs,e),Tn(ai,n)}function jV(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ke(108,zY(t)||"Unknown",s));return Jn({},n,r)}function H1(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||pu,th=vs.current,Tn(vs,t),Tn(ai,ai.current),!0}function LF(t,e,n){var r=t.stateNode;if(!r)throw Error(ke(169));n?(t=jV(t,e,th),r.__reactInternalMemoizedMergedChildContext=t,Rn(ai),Rn(vs),Tn(vs,t)):Rn(ai),Tn(ai,n)}var Al=null,dC=!1,xI=!1;function VV(t){Al===null?Al=[t]:Al.push(t)}function nJ(t){dC=!0,VV(t)}function Du(){if(!xI&&Al!==null){xI=!0;var t=0,e=sn;try{var n=Al;for(sn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Al=null,dC=!1}catch(s){throw Al!==null&&(Al=Al.slice(t+1)),fV(N2,Du),s}finally{sn=e,xI=!1}}return null}var Kf=[],qf=0,G1=null,K1=0,go=[],yo=0,nh=null,Ml=1,zl="";function bd(t,e){Kf[qf++]=K1,Kf[qf++]=G1,G1=t,K1=e}function UV(t,e,n){go[yo++]=Ml,go[yo++]=zl,go[yo++]=nh,nh=t;var r=Ml;t=zl;var s=32-la(r)-1;r&=~(1<<s),n+=1;var i=32-la(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ml=1<<32-la(e)+s|n<<s|r,zl=i+t}else Ml=1<<i|n<<s|r,zl=t}function M2(t){t.return!==null&&(bd(t,1),UV(t,1,0))}function z2(t){for(;t===G1;)G1=Kf[--qf],Kf[qf]=null,K1=Kf[--qf],Kf[qf]=null;for(;t===nh;)nh=go[--yo],go[yo]=null,zl=go[--yo],go[yo]=null,Ml=go[--yo],go[yo]=null}var zi=null,Di=null,jn=!1,sa=null;function WV(t,e){var n=wo(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function FF(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,zi=t,Di=eu(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,zi=t,Di=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=nh!==null?{id:Ml,overflow:zl}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=wo(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,zi=t,Di=null,!0):!1;default:return!1}}function u$(t){return(t.mode&1)!==0&&(t.flags&128)===0}function d$(t){if(jn){var e=Di;if(e){var n=e;if(!FF(t,e)){if(u$(t))throw Error(ke(418));e=eu(n.nextSibling);var r=zi;e&&FF(t,e)?WV(r,n):(t.flags=t.flags&-4097|2,jn=!1,zi=t)}}else{if(u$(t))throw Error(ke(418));t.flags=t.flags&-4097|2,jn=!1,zi=t}}}function MF(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;zi=t}function _x(t){if(t!==zi)return!1;if(!jn)return MF(t),jn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!o$(t.type,t.memoizedProps)),e&&(e=Di)){if(u$(t))throw HV(),Error(ke(418));for(;e;)WV(t,e),e=eu(e.nextSibling)}if(MF(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ke(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Di=eu(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Di=null}}else Di=zi?eu(t.stateNode.nextSibling):null;return!0}function HV(){for(var t=Di;t;)t=eu(t.nextSibling)}function wp(){Di=zi=null,jn=!1}function B2(t){sa===null?sa=[t]:sa.push(t)}var rJ=ac.ReactCurrentBatchConfig;function Zg(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ke(309));var r=n.stateNode}if(!r)throw Error(ke(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(ke(284));if(!n._owner)throw Error(ke(290,t))}return t}function Tx(t,e){throw t=Object.prototype.toString.call(e),Error(ke(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zF(t){var e=t._init;return e(t._payload)}function GV(t){function e(y,b){if(t){var v=y.deletions;v===null?(y.deletions=[b],y.flags|=16):v.push(b)}}function n(y,b){if(!t)return null;for(;b!==null;)e(y,b),b=b.sibling;return null}function r(y,b){for(y=new Map;b!==null;)b.key!==null?y.set(b.key,b):y.set(b.index,b),b=b.sibling;return y}function s(y,b){return y=su(y,b),y.index=0,y.sibling=null,y}function i(y,b,v){return y.index=v,t?(v=y.alternate,v!==null?(v=v.index,v<b?(y.flags|=2,b):v):(y.flags|=2,b)):(y.flags|=1048576,b)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,b,v,w){return b===null||b.tag!==6?(b=II(v,y.mode,w),b.return=y,b):(b=s(b,v),b.return=y,b)}function l(y,b,v,w){var C=v.type;return C===jf?u(y,b,v.props.children,w,v.key):b!==null&&(b.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Dc&&zF(C)===b.type)?(w=s(b,v.props),w.ref=Zg(y,b,v),w.return=y,w):(w=g1(v.type,v.key,v.props,null,y.mode,w),w.ref=Zg(y,b,v),w.return=y,w)}function c(y,b,v,w){return b===null||b.tag!==4||b.stateNode.containerInfo!==v.containerInfo||b.stateNode.implementation!==v.implementation?(b=NI(v,y.mode,w),b.return=y,b):(b=s(b,v.children||[]),b.return=y,b)}function u(y,b,v,w,C){return b===null||b.tag!==7?(b=Hd(v,y.mode,w,C),b.return=y,b):(b=s(b,v),b.return=y,b)}function d(y,b,v){if(typeof b=="string"&&b!==""||typeof b=="number")return b=II(""+b,y.mode,v),b.return=y,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case mx:return v=g1(b.type,b.key,b.props,null,y.mode,v),v.ref=Zg(y,null,b),v.return=y,v;case Bf:return b=NI(b,y.mode,v),b.return=y,b;case Dc:var w=b._init;return d(y,w(b._payload),v)}if(fy(b)||qg(b))return b=Hd(b,y.mode,v,null),b.return=y,b;Tx(y,b)}return null}function h(y,b,v,w){var C=b!==null?b.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return C!==null?null:a(y,b,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case mx:return v.key===C?l(y,b,v,w):null;case Bf:return v.key===C?c(y,b,v,w):null;case Dc:return C=v._init,h(y,b,C(v._payload),w)}if(fy(v)||qg(v))return C!==null?null:u(y,b,v,w,null);Tx(y,v)}return null}function f(y,b,v,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(v)||null,a(b,y,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case mx:return y=y.get(w.key===null?v:w.key)||null,l(b,y,w,C);case Bf:return y=y.get(w.key===null?v:w.key)||null,c(b,y,w,C);case Dc:var _=w._init;return f(y,b,v,_(w._payload),C)}if(fy(w)||qg(w))return y=y.get(v)||null,u(b,y,w,C,null);Tx(b,w)}return null}function p(y,b,v,w){for(var C=null,_=null,E=b,I=b=0,O=null;E!==null&&I<v.length;I++){E.index>I?(O=E,E=null):O=E.sibling;var R=h(y,E,v[I],w);if(R===null){E===null&&(E=O);break}t&&E&&R.alternate===null&&e(y,E),b=i(R,b,I),_===null?C=R:_.sibling=R,_=R,E=O}if(I===v.length)return n(y,E),jn&&bd(y,I),C;if(E===null){for(;I<v.length;I++)E=d(y,v[I],w),E!==null&&(b=i(E,b,I),_===null?C=E:_.sibling=E,_=E);return jn&&bd(y,I),C}for(E=r(y,E);I<v.length;I++)O=f(E,y,I,v[I],w),O!==null&&(t&&O.alternate!==null&&E.delete(O.key===null?I:O.key),b=i(O,b,I),_===null?C=O:_.sibling=O,_=O);return t&&E.forEach(function(z){return e(y,z)}),jn&&bd(y,I),C}function m(y,b,v,w){var C=qg(v);if(typeof C!="function")throw Error(ke(150));if(v=C.call(v),v==null)throw Error(ke(151));for(var _=C=null,E=b,I=b=0,O=null,R=v.next();E!==null&&!R.done;I++,R=v.next()){E.index>I?(O=E,E=null):O=E.sibling;var z=h(y,E,R.value,w);if(z===null){E===null&&(E=O);break}t&&E&&z.alternate===null&&e(y,E),b=i(z,b,I),_===null?C=z:_.sibling=z,_=z,E=O}if(R.done)return n(y,E),jn&&bd(y,I),C;if(E===null){for(;!R.done;I++,R=v.next())R=d(y,R.value,w),R!==null&&(b=i(R,b,I),_===null?C=R:_.sibling=R,_=R);return jn&&bd(y,I),C}for(E=r(y,E);!R.done;I++,R=v.next())R=f(E,y,I,R.value,w),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?I:R.key),b=i(R,b,I),_===null?C=R:_.sibling=R,_=R);return t&&E.forEach(function(B){return e(y,B)}),jn&&bd(y,I),C}function g(y,b,v,w){if(typeof v=="object"&&v!==null&&v.type===jf&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case mx:e:{for(var C=v.key,_=b;_!==null;){if(_.key===C){if(C=v.type,C===jf){if(_.tag===7){n(y,_.sibling),b=s(_,v.props.children),b.return=y,y=b;break e}}else if(_.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===Dc&&zF(C)===_.type){n(y,_.sibling),b=s(_,v.props),b.ref=Zg(y,_,v),b.return=y,y=b;break e}n(y,_);break}else e(y,_);_=_.sibling}v.type===jf?(b=Hd(v.props.children,y.mode,w,v.key),b.return=y,y=b):(w=g1(v.type,v.key,v.props,null,y.mode,w),w.ref=Zg(y,b,v),w.return=y,y=w)}return o(y);case Bf:e:{for(_=v.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===v.containerInfo&&b.stateNode.implementation===v.implementation){n(y,b.sibling),b=s(b,v.children||[]),b.return=y,y=b;break e}else{n(y,b);break}else e(y,b);b=b.sibling}b=NI(v,y.mode,w),b.return=y,y=b}return o(y);case Dc:return _=v._init,g(y,b,_(v._payload),w)}if(fy(v))return p(y,b,v,w);if(qg(v))return m(y,b,v,w);Tx(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,b!==null&&b.tag===6?(n(y,b.sibling),b=s(b,v),b.return=y,y=b):(n(y,b),b=II(v,y.mode,w),b.return=y,y=b),o(y)):n(y,b)}return g}var xp=GV(!0),KV=GV(!1),q1=Ou(null),X1=null,Xf=null,j2=null;function V2(){j2=Xf=X1=null}function U2(t){var e=q1.current;Rn(q1),t._currentValue=e}function h$(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ip(t,e){X1=t,j2=Xf=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ii=!0),t.firstContext=null)}function Do(t){var e=t._currentValue;if(j2!==t)if(t={context:t,memoizedValue:e,next:null},Xf===null){if(X1===null)throw Error(ke(308));Xf=t,X1.dependencies={lanes:0,firstContext:t}}else Xf=Xf.next=t;return e}var Rd=null;function W2(t){Rd===null?Rd=[t]:Rd.push(t)}function qV(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,W2(e)):(n.next=s.next,s.next=n),e.interleaved=n,ql(t,r)}function ql(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pc=!1;function H2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function XV(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ul(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function tu(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,jt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ql(t,n)}return s=r.interleaved,s===null?(e.next=e,W2(r)):(e.next=s.next,s.next=e),r.interleaved=e,ql(t,n)}function u1(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$2(t,n)}}function BF(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Y1(t,e,n,r){var s=t.updateQueue;Pc=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?i=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=s.baseState;o=0,u=c=l=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Jn({},d,h);break e;case 2:Pc=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=s.effects,h===null?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;h=a,a=h.next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}while(!0);if(u===null&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);sh|=o,t.lanes=o,t.memoizedState=d}}function jF(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ke(191,s));s.call(r)}}}var qb={},Ka=Ou(qb),nb=Ou(qb),rb=Ou(qb);function Od(t){if(t===qb)throw Error(ke(174));return t}function G2(t,e){switch(Tn(rb,e),Tn(nb,t),Tn(Ka,qb),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:GN(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=GN(e,t)}Rn(Ka),Tn(Ka,e)}function Sp(){Rn(Ka),Rn(nb),Rn(rb)}function YV(t){Od(rb.current);var e=Od(Ka.current),n=GN(e,t.type);e!==n&&(Tn(nb,t),Tn(Ka,n))}function K2(t){nb.current===t&&(Rn(Ka),Rn(nb))}var Xn=Ou(0);function Q1(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var SI=[];function q2(){for(var t=0;t<SI.length;t++)SI[t]._workInProgressVersionPrimary=null;SI.length=0}var d1=ac.ReactCurrentDispatcher,CI=ac.ReactCurrentBatchConfig,rh=0,Qn=null,$r=null,zr=null,J1=!1,Ry=!1,sb=0,sJ=0;function us(){throw Error(ke(321))}function X2(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ha(t[n],e[n]))return!1;return!0}function Y2(t,e,n,r,s,i){if(rh=i,Qn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,d1.current=t===null||t.memoizedState===null?lJ:cJ,t=n(r,s),Ry){i=0;do{if(Ry=!1,sb=0,25<=i)throw Error(ke(301));i+=1,zr=$r=null,e.updateQueue=null,d1.current=uJ,t=n(r,s)}while(Ry)}if(d1.current=Z1,e=$r!==null&&$r.next!==null,rh=0,zr=$r=Qn=null,J1=!1,e)throw Error(ke(300));return t}function Q2(){var t=sb!==0;return sb=0,t}function Pa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?Qn.memoizedState=zr=t:zr=zr.next=t,zr}function Po(){if($r===null){var t=Qn.alternate;t=t!==null?t.memoizedState:null}else t=$r.next;var e=zr===null?Qn.memoizedState:zr.next;if(e!==null)zr=e,$r=t;else{if(t===null)throw Error(ke(310));$r=t,t={memoizedState:$r.memoizedState,baseState:$r.baseState,baseQueue:$r.baseQueue,queue:$r.queue,next:null},zr===null?Qn.memoizedState=zr=t:zr=zr.next=t}return zr}function ib(t,e){return typeof e=="function"?e(t):e}function EI(t){var e=Po(),n=e.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=t;var r=$r,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,l=null,c=i;do{var u=c.lane;if((rh&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Qn.lanes|=u,sh|=u}c=c.next}while(c!==null&&c!==i);l===null?o=r:l.next=a,ha(r,e.memoizedState)||(ii=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Qn.lanes|=i,sh|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function _I(t){var e=Po(),n=e.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ha(i,e.memoizedState)||(ii=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function QV(){}function JV(t,e){var n=Qn,r=Po(),s=e(),i=!ha(r.memoizedState,s);if(i&&(r.memoizedState=s,ii=!0),r=r.queue,J2(tU.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||zr!==null&&zr.memoizedState.tag&1){if(n.flags|=2048,ob(9,eU.bind(null,n,r,s,e),void 0,null),Ur===null)throw Error(ke(349));rh&30||ZV(n,e,s)}return s}function ZV(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qn.updateQueue,e===null?(e={lastEffect:null,stores:null},Qn.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function eU(t,e,n,r){e.value=n,e.getSnapshot=r,nU(e)&&rU(t)}function tU(t,e,n){return n(function(){nU(e)&&rU(t)})}function nU(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ha(t,n)}catch{return!0}}function rU(t){var e=ql(t,1);e!==null&&ca(e,t,1,-1)}function VF(t){var e=Pa();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ib,lastRenderedState:t},e.queue=t,t=t.dispatch=aJ.bind(null,Qn,t),[e.memoizedState,t]}function ob(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qn.updateQueue,e===null?(e={lastEffect:null,stores:null},Qn.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function sU(){return Po().memoizedState}function h1(t,e,n,r){var s=Pa();Qn.flags|=t,s.memoizedState=ob(1|e,n,void 0,r===void 0?null:r)}function hC(t,e,n,r){var s=Po();r=r===void 0?null:r;var i=void 0;if($r!==null){var o=$r.memoizedState;if(i=o.destroy,r!==null&&X2(r,o.deps)){s.memoizedState=ob(e,n,i,r);return}}Qn.flags|=t,s.memoizedState=ob(1|e,n,i,r)}function UF(t,e){return h1(8390656,8,t,e)}function J2(t,e){return hC(2048,8,t,e)}function iU(t,e){return hC(4,2,t,e)}function oU(t,e){return hC(4,4,t,e)}function aU(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function lU(t,e,n){return n=n!=null?n.concat([t]):null,hC(4,4,aU.bind(null,e,t),n)}function Z2(){}function cU(t,e){var n=Po();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&X2(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function uU(t,e){var n=Po();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&X2(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function dU(t,e,n){return rh&21?(ha(n,e)||(n=gV(),Qn.lanes|=n,sh|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ii=!0),t.memoizedState=n)}function iJ(t,e){var n=sn;sn=n!==0&&4>n?n:4,t(!0);var r=CI.transition;CI.transition={};try{t(!1),e()}finally{sn=n,CI.transition=r}}function hU(){return Po().memoizedState}function oJ(t,e,n){var r=ru(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},fU(t))pU(e,n);else if(n=qV(t,e,n,r),n!==null){var s=Ds();ca(n,t,r,s),mU(n,e,r)}}function aJ(t,e,n){var r=ru(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(fU(t))pU(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ha(a,o)){var l=e.interleaved;l===null?(s.next=s,W2(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}n=qV(t,e,s,r),n!==null&&(s=Ds(),ca(n,t,r,s),mU(n,e,r))}}function fU(t){var e=t.alternate;return t===Qn||e!==null&&e===Qn}function pU(t,e){Ry=J1=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function mU(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,$2(t,n)}}var Z1={readContext:Do,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useInsertionEffect:us,useLayoutEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useDeferredValue:us,useTransition:us,useMutableSource:us,useSyncExternalStore:us,useId:us,unstable_isNewReconciler:!1},lJ={readContext:Do,useCallback:function(t,e){return Pa().memoizedState=[t,e===void 0?null:e],t},useContext:Do,useEffect:UF,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,h1(4194308,4,aU.bind(null,e,t),n)},useLayoutEffect:function(t,e){return h1(4194308,4,t,e)},useInsertionEffect:function(t,e){return h1(4,2,t,e)},useMemo:function(t,e){var n=Pa();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Pa();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=oJ.bind(null,Qn,t),[r.memoizedState,t]},useRef:function(t){var e=Pa();return t={current:t},e.memoizedState=t},useState:VF,useDebugValue:Z2,useDeferredValue:function(t){return Pa().memoizedState=t},useTransition:function(){var t=VF(!1),e=t[0];return t=iJ.bind(null,t[1]),Pa().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qn,s=Pa();if(jn){if(n===void 0)throw Error(ke(407));n=n()}else{if(n=e(),Ur===null)throw Error(ke(349));rh&30||ZV(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,UF(tU.bind(null,r,i,t),[t]),r.flags|=2048,ob(9,eU.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Pa(),e=Ur.identifierPrefix;if(jn){var n=zl,r=Ml;n=(r&~(1<<32-la(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=sb++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=sJ++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},cJ={readContext:Do,useCallback:cU,useContext:Do,useEffect:J2,useImperativeHandle:lU,useInsertionEffect:iU,useLayoutEffect:oU,useMemo:uU,useReducer:EI,useRef:sU,useState:function(){return EI(ib)},useDebugValue:Z2,useDeferredValue:function(t){var e=Po();return dU(e,$r.memoizedState,t)},useTransition:function(){var t=EI(ib)[0],e=Po().memoizedState;return[t,e]},useMutableSource:QV,useSyncExternalStore:JV,useId:hU,unstable_isNewReconciler:!1},uJ={readContext:Do,useCallback:cU,useContext:Do,useEffect:J2,useImperativeHandle:lU,useInsertionEffect:iU,useLayoutEffect:oU,useMemo:uU,useReducer:_I,useRef:sU,useState:function(){return _I(ib)},useDebugValue:Z2,useDeferredValue:function(t){var e=Po();return $r===null?e.memoizedState=t:dU(e,$r.memoizedState,t)},useTransition:function(){var t=_I(ib)[0],e=Po().memoizedState;return[t,e]},useMutableSource:QV,useSyncExternalStore:JV,useId:hU,unstable_isNewReconciler:!1};function ea(t,e){if(t&&t.defaultProps){e=Jn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function f$(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Jn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var fC={isMounted:function(t){return(t=t._reactInternals)?Rh(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ds(),s=ru(t),i=Ul(r,s);i.payload=e,n!=null&&(i.callback=n),e=tu(t,i,s),e!==null&&(ca(e,t,s,r),u1(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ds(),s=ru(t),i=Ul(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=tu(t,i,s),e!==null&&(ca(e,t,s,r),u1(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ds(),r=ru(t),s=Ul(n,r);s.tag=2,e!=null&&(s.callback=e),e=tu(t,s,r),e!==null&&(ca(e,t,r,n),u1(e,t,r))}};function WF(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Jy(n,r)||!Jy(s,i):!0}function gU(t,e,n){var r=!1,s=pu,i=e.contextType;return typeof i=="object"&&i!==null?i=Do(i):(s=li(e)?th:vs.current,r=e.contextTypes,i=(r=r!=null)?vp(t,s):pu),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=fC,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function HF(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&fC.enqueueReplaceState(e,e.state,null)}function p$(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},H2(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Do(i):(i=li(e)?th:vs.current,s.context=vp(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(f$(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&fC.enqueueReplaceState(s,s.state,null),Y1(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Cp(t,e){try{var n="",r=e;do n+=MY(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function TI(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function m$(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var dJ=typeof WeakMap=="function"?WeakMap:Map;function yU(t,e,n){n=Ul(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tS||(tS=!0,_$=r),m$(t,e)},n}function bU(t,e,n){n=Ul(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){m$(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){m$(t,e),typeof r!="function"&&(nu===null?nu=new Set([this]):nu.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function GF(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new dJ;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=_J.bind(null,t,e,n),e.then(t,t))}function KF(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function qF(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ul(-1,1),e.tag=2,tu(n,e,1))),n.lanes|=1),t)}var hJ=ac.ReactCurrentOwner,ii=!1;function As(t,e,n,r){e.child=t===null?KV(e,null,n,r):xp(e,t.child,n,r)}function XF(t,e,n,r,s){n=n.render;var i=e.ref;return ip(e,s),r=Y2(t,e,n,r,i,s),n=Q2(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xl(t,e,s)):(jn&&n&&M2(e),e.flags|=1,As(t,e,r,s),e.child)}function YF(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!aR(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,vU(t,e,i,r,s)):(t=g1(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Jy,n(o,r)&&t.ref===e.ref)return Xl(t,e,s)}return e.flags|=1,t=su(i,r),t.ref=e.ref,t.return=e,e.child=t}function vU(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Jy(i,r)&&t.ref===e.ref)if(ii=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(ii=!0);else return e.lanes=t.lanes,Xl(t,e,s)}return g$(t,e,n,r,s)}function wU(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Tn(Qf,Ni),Ni|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Tn(Qf,Ni),Ni|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Tn(Qf,Ni),Ni|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Tn(Qf,Ni),Ni|=r;return As(t,e,s,n),e.child}function xU(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function g$(t,e,n,r,s){var i=li(n)?th:vs.current;return i=vp(e,i),ip(e,s),n=Y2(t,e,n,r,i,s),r=Q2(),t!==null&&!ii?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Xl(t,e,s)):(jn&&r&&M2(e),e.flags|=1,As(t,e,n,s),e.child)}function QF(t,e,n,r,s){if(li(n)){var i=!0;H1(e)}else i=!1;if(ip(e,s),e.stateNode===null)f1(t,e),gU(e,n,r),p$(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Do(c):(c=li(n)?th:vs.current,c=vp(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&HF(e,o,r,c),Pc=!1;var h=e.memoizedState;o.state=h,Y1(e,r,o,s),l=e.memoizedState,a!==r||h!==l||ai.current||Pc?(typeof u=="function"&&(f$(e,n,u,r),l=e.memoizedState),(a=Pc||WF(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,XV(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:ea(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Do(l):(l=li(n)?th:vs.current,l=vp(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&HF(e,o,r,l),Pc=!1,h=e.memoizedState,o.state=h,Y1(e,r,o,s);var p=e.memoizedState;a!==d||h!==p||ai.current||Pc?(typeof f=="function"&&(f$(e,n,f,r),p=e.memoizedState),(c=Pc||WF(e,n,c,r,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return y$(t,e,n,r,i,s)}function y$(t,e,n,r,s,i){xU(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&LF(e,n,!1),Xl(t,e,i);r=e.stateNode,hJ.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=xp(e,t.child,null,i),e.child=xp(e,null,a,i)):As(t,e,a,i),e.memoizedState=r.state,s&&LF(e,n,!0),e.child}function SU(t){var e=t.stateNode;e.pendingContext?PF(t,e.pendingContext,e.pendingContext!==e.context):e.context&&PF(t,e.context,!1),G2(t,e.containerInfo)}function JF(t,e,n,r,s){return wp(),B2(s),e.flags|=256,As(t,e,n,r),e.child}var b$={dehydrated:null,treeContext:null,retryLane:0};function v$(t){return{baseLanes:t,cachePool:null,transitions:null}}function CU(t,e,n){var r=e.pendingProps,s=Xn.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Tn(Xn,s&1),t===null)return d$(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=gC(o,r,0,null),t=Hd(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=v$(n),e.memoizedState=b$,t):eR(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return fJ(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=su(s,l),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=su(a,i):(i=Hd(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?v$(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=b$,r}return i=t.child,t=i.sibling,r=su(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function eR(t,e){return e=gC({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function kx(t,e,n,r){return r!==null&&B2(r),xp(e,t.child,null,n),t=eR(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function fJ(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=TI(Error(ke(422))),kx(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=gC({mode:"visible",children:r.children},s,0,null),i=Hd(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&xp(e,t.child,null,o),e.child.memoizedState=v$(o),e.memoizedState=b$,i);if(!(e.mode&1))return kx(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(ke(419)),r=TI(i,r,void 0),kx(t,e,o,r)}if(a=(o&t.childLanes)!==0,ii||a){if(r=Ur,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ql(t,s),ca(r,t,s,-1))}return oR(),r=TI(Error(ke(421))),kx(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=TJ.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Di=eu(s.nextSibling),zi=e,jn=!0,sa=null,t!==null&&(go[yo++]=Ml,go[yo++]=zl,go[yo++]=nh,Ml=t.id,zl=t.overflow,nh=e),e=eR(e,r.children),e.flags|=4096,e)}function ZF(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),h$(t.return,e,n)}function kI(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function EU(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(As(t,e,r.children,n),r=Xn.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ZF(t,n,e);else if(t.tag===19)ZF(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Tn(Xn,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Q1(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),kI(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Q1(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}kI(e,!0,n,null,i);break;case"together":kI(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function f1(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Xl(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),sh|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ke(153));if(e.child!==null){for(t=e.child,n=su(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=su(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function pJ(t,e,n){switch(e.tag){case 3:SU(e),wp();break;case 5:YV(e);break;case 1:li(e.type)&&H1(e);break;case 4:G2(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Tn(q1,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Tn(Xn,Xn.current&1),e.flags|=128,null):n&e.child.childLanes?CU(t,e,n):(Tn(Xn,Xn.current&1),t=Xl(t,e,n),t!==null?t.sibling:null);Tn(Xn,Xn.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return EU(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Tn(Xn,Xn.current),r)break;return null;case 22:case 23:return e.lanes=0,wU(t,e,n)}return Xl(t,e,n)}var _U,w$,TU,kU;_U=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};w$=function(){};TU=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Od(Ka.current);var i=null;switch(n){case"input":s=VN(t,s),r=VN(t,r),i=[];break;case"select":s=Jn({},s,{value:void 0}),r=Jn({},r,{value:void 0}),i=[];break;case"textarea":s=HN(t,s),r=HN(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=U1)}KN(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Hy.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Hy.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&$n("scroll",t),i||a===l||(i=[])):(i=i||[]).push(c,l))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};kU=function(t,e,n,r){n!==r&&(e.flags|=4)};function ey(t,e){if(!jn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ds(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function mJ(t,e,n){var r=e.pendingProps;switch(z2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ds(e),null;case 1:return li(e.type)&&W1(),ds(e),null;case 3:return r=e.stateNode,Sp(),Rn(ai),Rn(vs),q2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_x(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sa!==null&&(I$(sa),sa=null))),w$(t,e),ds(e),null;case 5:K2(e);var s=Od(rb.current);if(n=e.type,t!==null&&e.stateNode!=null)TU(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ke(166));return ds(e),null}if(t=Od(Ka.current),_x(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[ja]=e,r[tb]=i,t=(e.mode&1)!==0,n){case"dialog":$n("cancel",r),$n("close",r);break;case"iframe":case"object":case"embed":$n("load",r);break;case"video":case"audio":for(s=0;s<my.length;s++)$n(my[s],r);break;case"source":$n("error",r);break;case"img":case"image":case"link":$n("error",r),$n("load",r);break;case"details":$n("toggle",r);break;case"input":lF(r,i),$n("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},$n("invalid",r);break;case"textarea":uF(r,i),$n("invalid",r)}KN(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ex(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ex(r.textContent,a,t),s=["children",""+a]):Hy.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&$n("scroll",r)}switch(n){case"input":gx(r),cF(r,i,!0);break;case"textarea":gx(r),dF(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=U1)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=tV(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[ja]=e,t[tb]=r,_U(t,e,!1,!1),e.stateNode=t;e:{switch(o=qN(n,r),n){case"dialog":$n("cancel",t),$n("close",t),s=r;break;case"iframe":case"object":case"embed":$n("load",t),s=r;break;case"video":case"audio":for(s=0;s<my.length;s++)$n(my[s],t);s=r;break;case"source":$n("error",t),s=r;break;case"img":case"image":case"link":$n("error",t),$n("load",t),s=r;break;case"details":$n("toggle",t),s=r;break;case"input":lF(t,r),s=VN(t,r),$n("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Jn({},r,{value:void 0}),$n("invalid",t);break;case"textarea":uF(t,r),s=HN(t,r),$n("invalid",t);break;default:s=r}KN(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?sV(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nV(t,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Gy(t,l):typeof l=="number"&&Gy(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Hy.hasOwnProperty(i)?l!=null&&i==="onScroll"&&$n("scroll",t):l!=null&&E2(t,i,l,o))}switch(n){case"input":gx(t),cF(t,r,!1);break;case"textarea":gx(t),dF(t);break;case"option":r.value!=null&&t.setAttribute("value",""+fu(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?tp(t,!!r.multiple,i,!1):r.defaultValue!=null&&tp(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=U1)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ds(e),null;case 6:if(t&&e.stateNode!=null)kU(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ke(166));if(n=Od(rb.current),Od(Ka.current),_x(e)){if(r=e.stateNode,n=e.memoizedProps,r[ja]=e,(i=r.nodeValue!==n)&&(t=zi,t!==null))switch(t.tag){case 3:Ex(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ex(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ja]=e,e.stateNode=r}return ds(e),null;case 13:if(Rn(Xn),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(jn&&Di!==null&&e.mode&1&&!(e.flags&128))HV(),wp(),e.flags|=98560,i=!1;else if(i=_x(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(ke(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ke(317));i[ja]=e}else wp(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ds(e),i=!1}else sa!==null&&(I$(sa),sa=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Xn.current&1?Or===0&&(Or=3):oR())),e.updateQueue!==null&&(e.flags|=4),ds(e),null);case 4:return Sp(),w$(t,e),t===null&&Zy(e.stateNode.containerInfo),ds(e),null;case 10:return U2(e.type._context),ds(e),null;case 17:return li(e.type)&&W1(),ds(e),null;case 19:if(Rn(Xn),i=e.memoizedState,i===null)return ds(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ey(i,!1);else{if(Or!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Q1(t),o!==null){for(e.flags|=128,ey(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Tn(Xn,Xn.current&1|2),e.child}t=t.sibling}i.tail!==null&&cr()>Ep&&(e.flags|=128,r=!0,ey(i,!1),e.lanes=4194304)}else{if(!r)if(t=Q1(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ey(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!jn)return ds(e),null}else 2*cr()-i.renderingStartTime>Ep&&n!==1073741824&&(e.flags|=128,r=!0,ey(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=cr(),e.sibling=null,n=Xn.current,Tn(Xn,r?n&1|2:n&1),e):(ds(e),null);case 22:case 23:return iR(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ni&1073741824&&(ds(e),e.subtreeFlags&6&&(e.flags|=8192)):ds(e),null;case 24:return null;case 25:return null}throw Error(ke(156,e.tag))}function gJ(t,e){switch(z2(e),e.tag){case 1:return li(e.type)&&W1(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Sp(),Rn(ai),Rn(vs),q2(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return K2(e),null;case 13:if(Rn(Xn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));wp()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Rn(Xn),null;case 4:return Sp(),null;case 10:return U2(e.type._context),null;case 22:case 23:return iR(),null;case 24:return null;default:return null}}var Ix=!1,ms=!1,yJ=typeof WeakSet=="function"?WeakSet:Set,Ke=null;function Yf(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){rr(t,e,r)}else n.current=null}function x$(t,e,n){try{n()}catch(r){rr(t,e,r)}}var eM=!1;function bJ(t,e){if(s$=B1,t=RV(),F2(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===s&&(a=o),h===i&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(i$={focusedElem:t,selectionRange:n},B1=!1,Ke=e;Ke!==null;)if(e=Ke,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ke=t;else for(;Ke!==null;){e=Ke;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=e.stateNode,b=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:ea(e.type,m),g);y.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(w){rr(e,e.return,w)}if(t=e.sibling,t!==null){t.return=e.return,Ke=t;break}Ke=e.return}return p=eM,eM=!1,p}function Oy(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&x$(e,n,i)}s=s.next}while(s!==r)}}function pC(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function S$(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function IU(t){var e=t.alternate;e!==null&&(t.alternate=null,IU(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ja],delete e[tb],delete e[l$],delete e[eJ],delete e[tJ])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NU(t){return t.tag===5||t.tag===3||t.tag===4}function tM(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NU(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function C$(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=U1));else if(r!==4&&(t=t.child,t!==null))for(C$(t,e,n),t=t.sibling;t!==null;)C$(t,e,n),t=t.sibling}function E$(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(E$(t,e,n),t=t.sibling;t!==null;)E$(t,e,n),t=t.sibling}var ts=null,na=!1;function $c(t,e,n){for(n=n.child;n!==null;)$U(t,e,n),n=n.sibling}function $U(t,e,n){if(Ga&&typeof Ga.onCommitFiberUnmount=="function")try{Ga.onCommitFiberUnmount(oC,n)}catch{}switch(n.tag){case 5:ms||Yf(n,e);case 6:var r=ts,s=na;ts=null,$c(t,e,n),ts=r,na=s,ts!==null&&(na?(t=ts,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ts.removeChild(n.stateNode));break;case 18:ts!==null&&(na?(t=ts,n=n.stateNode,t.nodeType===8?wI(t.parentNode,n):t.nodeType===1&&wI(t,n),Yy(t)):wI(ts,n.stateNode));break;case 4:r=ts,s=na,ts=n.stateNode.containerInfo,na=!0,$c(t,e,n),ts=r,na=s;break;case 0:case 11:case 14:case 15:if(!ms&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&x$(n,e,o),s=s.next}while(s!==r)}$c(t,e,n);break;case 1:if(!ms&&(Yf(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){rr(n,e,a)}$c(t,e,n);break;case 21:$c(t,e,n);break;case 22:n.mode&1?(ms=(r=ms)||n.memoizedState!==null,$c(t,e,n),ms=r):$c(t,e,n);break;default:$c(t,e,n)}}function nM(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new yJ),e.forEach(function(r){var s=kJ.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jo(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ts=a.stateNode,na=!1;break e;case 3:ts=a.stateNode.containerInfo,na=!0;break e;case 4:ts=a.stateNode.containerInfo,na=!0;break e}a=a.return}if(ts===null)throw Error(ke(160));$U(i,o,s),ts=null,na=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(c){rr(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)AU(e,t),e=e.sibling}function AU(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jo(e,t),Oa(t),r&4){try{Oy(3,t,t.return),pC(3,t)}catch(m){rr(t,t.return,m)}try{Oy(5,t,t.return)}catch(m){rr(t,t.return,m)}}break;case 1:Jo(e,t),Oa(t),r&512&&n!==null&&Yf(n,n.return);break;case 5:if(Jo(e,t),Oa(t),r&512&&n!==null&&Yf(n,n.return),t.flags&32){var s=t.stateNode;try{Gy(s,"")}catch(m){rr(t,t.return,m)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Zj(s,i),qN(a,o);var c=qN(a,i);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?sV(s,d):u==="dangerouslySetInnerHTML"?nV(s,d):u==="children"?Gy(s,d):E2(s,u,d,c)}switch(a){case"input":UN(s,i);break;case"textarea":eV(s,i);break;case"select":var h=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?tp(s,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?tp(s,!!i.multiple,i.defaultValue,!0):tp(s,!!i.multiple,i.multiple?[]:"",!1))}s[tb]=i}catch(m){rr(t,t.return,m)}}break;case 6:if(Jo(e,t),Oa(t),r&4){if(t.stateNode===null)throw Error(ke(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(m){rr(t,t.return,m)}}break;case 3:if(Jo(e,t),Oa(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yy(e.containerInfo)}catch(m){rr(t,t.return,m)}break;case 4:Jo(e,t),Oa(t);break;case 13:Jo(e,t),Oa(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(rR=cr())),r&4&&nM(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ms=(c=ms)||u,Jo(e,t),ms=c):Jo(e,t),Oa(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ke=t,u=t.child;u!==null;){for(d=Ke=u;Ke!==null;){switch(h=Ke,f=h.child,h.tag){case 0:case 11:case 14:case 15:Oy(4,h,h.return);break;case 1:Yf(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){rr(r,n,m)}}break;case 5:Yf(h,h.return);break;case 22:if(h.memoizedState!==null){sM(d);continue}}f!==null?(f.return=h,Ke=f):sM(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=rV("display",o))}catch(m){rr(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){rr(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Jo(e,t),Oa(t),r&4&&nM(t);break;case 21:break;default:Jo(e,t),Oa(t)}}function Oa(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NU(n)){var r=n;break e}n=n.return}throw Error(ke(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Gy(s,""),r.flags&=-33);var i=tM(t);E$(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=tM(t);C$(t,a,o);break;default:throw Error(ke(161))}}catch(l){rr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function vJ(t,e,n){Ke=t,RU(t)}function RU(t,e,n){for(var r=(t.mode&1)!==0;Ke!==null;){var s=Ke,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ix;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||ms;a=Ix;var c=ms;if(Ix=o,(ms=l)&&!c)for(Ke=s;Ke!==null;)o=Ke,l=o.child,o.tag===22&&o.memoizedState!==null?iM(s):l!==null?(l.return=o,Ke=l):iM(s);for(;i!==null;)Ke=i,RU(i),i=i.sibling;Ke=s,Ix=a,ms=c}rM(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Ke=i):rM(t)}}function rM(t){for(;Ke!==null;){var e=Ke;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ms||pC(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ms)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ea(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&jF(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jF(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Yy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}ms||e.flags&512&&S$(e)}catch(h){rr(e,e.return,h)}}if(e===t){Ke=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function sM(t){for(;Ke!==null;){var e=Ke;if(e===t){Ke=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ke=n;break}Ke=e.return}}function iM(t){for(;Ke!==null;){var e=Ke;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pC(4,e)}catch(l){rr(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(l){rr(e,s,l)}}var i=e.return;try{S$(e)}catch(l){rr(e,i,l)}break;case 5:var o=e.return;try{S$(e)}catch(l){rr(e,o,l)}}}catch(l){rr(e,e.return,l)}if(e===t){Ke=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ke=a;break}Ke=e.return}}var wJ=Math.ceil,eS=ac.ReactCurrentDispatcher,tR=ac.ReactCurrentOwner,To=ac.ReactCurrentBatchConfig,jt=0,Ur=null,vr=null,rs=0,Ni=0,Qf=Ou(0),Or=0,ab=null,sh=0,mC=0,nR=0,Dy=null,ri=null,rR=0,Ep=1/0,$l=null,tS=!1,_$=null,nu=null,Nx=!1,Gc=null,nS=0,Py=0,T$=null,p1=-1,m1=0;function Ds(){return jt&6?cr():p1!==-1?p1:p1=cr()}function ru(t){return t.mode&1?jt&2&&rs!==0?rs&-rs:rJ.transition!==null?(m1===0&&(m1=gV()),m1):(t=sn,t!==0||(t=window.event,t=t===void 0?16:CV(t.type)),t):1}function ca(t,e,n,r){if(50<Py)throw Py=0,T$=null,Error(ke(185));Hb(t,n,r),(!(jt&2)||t!==Ur)&&(t===Ur&&(!(jt&2)&&(mC|=n),Or===4&&zc(t,rs)),ci(t,r),n===1&&jt===0&&!(e.mode&1)&&(Ep=cr()+500,dC&&Du()))}function ci(t,e){var n=t.callbackNode;rQ(t,e);var r=z1(t,t===Ur?rs:0);if(r===0)n!==null&&pF(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&pF(n),e===1)t.tag===0?nJ(oM.bind(null,t)):VV(oM.bind(null,t)),JQ(function(){!(jt&6)&&Du()}),n=null;else{switch(yV(r)){case 1:n=N2;break;case 4:n=pV;break;case 16:n=M1;break;case 536870912:n=mV;break;default:n=M1}n=BU(n,OU.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function OU(t,e){if(p1=-1,m1=0,jt&6)throw Error(ke(327));var n=t.callbackNode;if(op()&&t.callbackNode!==n)return null;var r=z1(t,t===Ur?rs:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rS(t,r);else{e=r;var s=jt;jt|=2;var i=PU();(Ur!==t||rs!==e)&&($l=null,Ep=cr()+500,Wd(t,e));do try{CJ();break}catch(a){DU(t,a)}while(!0);V2(),eS.current=i,jt=s,vr!==null?e=0:(Ur=null,rs=0,e=Or)}if(e!==0){if(e===2&&(s=ZN(t),s!==0&&(r=s,e=k$(t,s))),e===1)throw n=ab,Wd(t,0),zc(t,r),ci(t,cr()),n;if(e===6)zc(t,r);else{if(s=t.current.alternate,!(r&30)&&!xJ(s)&&(e=rS(t,r),e===2&&(i=ZN(t),i!==0&&(r=i,e=k$(t,i))),e===1))throw n=ab,Wd(t,0),zc(t,r),ci(t,cr()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ke(345));case 2:vd(t,ri,$l);break;case 3:if(zc(t,r),(r&130023424)===r&&(e=rR+500-cr(),10<e)){if(z1(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ds(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=a$(vd.bind(null,t,ri,$l),e);break}vd(t,ri,$l);break;case 4:if(zc(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-la(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=cr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wJ(r/1960))-r,10<r){t.timeoutHandle=a$(vd.bind(null,t,ri,$l),r);break}vd(t,ri,$l);break;case 5:vd(t,ri,$l);break;default:throw Error(ke(329))}}}return ci(t,cr()),t.callbackNode===n?OU.bind(null,t):null}function k$(t,e){var n=Dy;return t.current.memoizedState.isDehydrated&&(Wd(t,e).flags|=256),t=rS(t,e),t!==2&&(e=ri,ri=n,e!==null&&I$(e)),t}function I$(t){ri===null?ri=t:ri.push.apply(ri,t)}function xJ(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ha(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function zc(t,e){for(e&=~nR,e&=~mC,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-la(e),r=1<<n;t[n]=-1,e&=~r}}function oM(t){if(jt&6)throw Error(ke(327));op();var e=z1(t,0);if(!(e&1))return ci(t,cr()),null;var n=rS(t,e);if(t.tag!==0&&n===2){var r=ZN(t);r!==0&&(e=r,n=k$(t,r))}if(n===1)throw n=ab,Wd(t,0),zc(t,e),ci(t,cr()),n;if(n===6)throw Error(ke(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,vd(t,ri,$l),ci(t,cr()),null}function sR(t,e){var n=jt;jt|=1;try{return t(e)}finally{jt=n,jt===0&&(Ep=cr()+500,dC&&Du())}}function ih(t){Gc!==null&&Gc.tag===0&&!(jt&6)&&op();var e=jt;jt|=1;var n=To.transition,r=sn;try{if(To.transition=null,sn=1,t)return t()}finally{sn=r,To.transition=n,jt=e,!(jt&6)&&Du()}}function iR(){Ni=Qf.current,Rn(Qf)}function Wd(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QQ(n)),vr!==null)for(n=vr.return;n!==null;){var r=n;switch(z2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&W1();break;case 3:Sp(),Rn(ai),Rn(vs),q2();break;case 5:K2(r);break;case 4:Sp();break;case 13:Rn(Xn);break;case 19:Rn(Xn);break;case 10:U2(r.type._context);break;case 22:case 23:iR()}n=n.return}if(Ur=t,vr=t=su(t.current,null),rs=Ni=e,Or=0,ab=null,nR=mC=sh=0,ri=Dy=null,Rd!==null){for(e=0;e<Rd.length;e++)if(n=Rd[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Rd=null}return t}function DU(t,e){do{var n=vr;try{if(V2(),d1.current=Z1,J1){for(var r=Qn.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}J1=!1}if(rh=0,zr=$r=Qn=null,Ry=!1,sb=0,tR.current=null,n===null||n.return===null){Or=1,ab=e,vr=null;break}e:{var i=t,o=n.return,a=n,l=e;if(e=rs,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=KF(o);if(f!==null){f.flags&=-257,qF(f,o,a,i,e),f.mode&1&&GF(i,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){GF(i,c,e),oR();break e}l=Error(ke(426))}}else if(jn&&a.mode&1){var g=KF(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),qF(g,o,a,i,e),B2(Cp(l,a));break e}}i=l=Cp(l,a),Or!==4&&(Or=2),Dy===null?Dy=[i]:Dy.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=yU(i,l,e);BF(i,y);break e;case 1:a=l;var b=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(nu===null||!nu.has(v)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=bU(i,a,e);BF(i,w);break e}}i=i.return}while(i!==null)}FU(n)}catch(C){e=C,vr===n&&n!==null&&(vr=n=n.return);continue}break}while(!0)}function PU(){var t=eS.current;return eS.current=Z1,t===null?Z1:t}function oR(){(Or===0||Or===3||Or===2)&&(Or=4),Ur===null||!(sh&268435455)&&!(mC&268435455)||zc(Ur,rs)}function rS(t,e){var n=jt;jt|=2;var r=PU();(Ur!==t||rs!==e)&&($l=null,Wd(t,e));do try{SJ();break}catch(s){DU(t,s)}while(!0);if(V2(),jt=n,eS.current=r,vr!==null)throw Error(ke(261));return Ur=null,rs=0,Or}function SJ(){for(;vr!==null;)LU(vr)}function CJ(){for(;vr!==null&&!qY();)LU(vr)}function LU(t){var e=zU(t.alternate,t,Ni);t.memoizedProps=t.pendingProps,e===null?FU(t):vr=e,tR.current=null}function FU(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=gJ(n,e),n!==null){n.flags&=32767,vr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Or=6,vr=null;return}}else if(n=mJ(n,e,Ni),n!==null){vr=n;return}if(e=e.sibling,e!==null){vr=e;return}vr=e=t}while(e!==null);Or===0&&(Or=5)}function vd(t,e,n){var r=sn,s=To.transition;try{To.transition=null,sn=1,EJ(t,e,n,r)}finally{To.transition=s,sn=r}return null}function EJ(t,e,n,r){do op();while(Gc!==null);if(jt&6)throw Error(ke(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ke(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(sQ(t,i),t===Ur&&(vr=Ur=null,rs=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Nx||(Nx=!0,BU(M1,function(){return op(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=To.transition,To.transition=null;var o=sn;sn=1;var a=jt;jt|=4,tR.current=null,bJ(t,n),AU(n,t),WQ(i$),B1=!!s$,i$=s$=null,t.current=n,vJ(n),XY(),jt=a,sn=o,To.transition=i}else t.current=n;if(Nx&&(Nx=!1,Gc=t,nS=s),i=t.pendingLanes,i===0&&(nu=null),JY(n.stateNode),ci(t,cr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tS)throw tS=!1,t=_$,_$=null,t;return nS&1&&t.tag!==0&&op(),i=t.pendingLanes,i&1?t===T$?Py++:(Py=0,T$=t):Py=0,Du(),null}function op(){if(Gc!==null){var t=yV(nS),e=To.transition,n=sn;try{if(To.transition=null,sn=16>t?16:t,Gc===null)var r=!1;else{if(t=Gc,Gc=null,nS=0,jt&6)throw Error(ke(331));var s=jt;for(jt|=4,Ke=t.current;Ke!==null;){var i=Ke,o=i.child;if(Ke.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ke=c;Ke!==null;){var u=Ke;switch(u.tag){case 0:case 11:case 15:Oy(8,u,i)}var d=u.child;if(d!==null)d.return=u,Ke=d;else for(;Ke!==null;){u=Ke;var h=u.sibling,f=u.return;if(IU(u),u===c){Ke=null;break}if(h!==null){h.return=f,Ke=h;break}Ke=f}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}Ke=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ke=o;else e:for(;Ke!==null;){if(i=Ke,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oy(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,Ke=y;break e}Ke=i.return}}var b=t.current;for(Ke=b;Ke!==null;){o=Ke;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ke=v;else e:for(o=b;Ke!==null;){if(a=Ke,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:pC(9,a)}}catch(C){rr(a,a.return,C)}if(a===o){Ke=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,Ke=w;break e}Ke=a.return}}if(jt=s,Du(),Ga&&typeof Ga.onPostCommitFiberRoot=="function")try{Ga.onPostCommitFiberRoot(oC,t)}catch{}r=!0}return r}finally{sn=n,To.transition=e}}return!1}function aM(t,e,n){e=Cp(n,e),e=yU(t,e,1),t=tu(t,e,1),e=Ds(),t!==null&&(Hb(t,1,e),ci(t,e))}function rr(t,e,n){if(t.tag===3)aM(t,t,n);else for(;e!==null;){if(e.tag===3){aM(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(nu===null||!nu.has(r))){t=Cp(n,t),t=bU(e,t,1),e=tu(e,t,1),t=Ds(),e!==null&&(Hb(e,1,t),ci(e,t));break}}e=e.return}}function _J(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ds(),t.pingedLanes|=t.suspendedLanes&n,Ur===t&&(rs&n)===n&&(Or===4||Or===3&&(rs&130023424)===rs&&500>cr()-rR?Wd(t,0):nR|=n),ci(t,e)}function MU(t,e){e===0&&(t.mode&1?(e=vx,vx<<=1,!(vx&130023424)&&(vx=4194304)):e=1);var n=Ds();t=ql(t,e),t!==null&&(Hb(t,e,n),ci(t,n))}function TJ(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),MU(t,n)}function kJ(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(e),MU(t,n)}var zU;zU=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ai.current)ii=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ii=!1,pJ(t,e,n);ii=!!(t.flags&131072)}else ii=!1,jn&&e.flags&1048576&&UV(e,K1,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;f1(t,e),t=e.pendingProps;var s=vp(e,vs.current);ip(e,n),s=Y2(null,e,r,t,s,n);var i=Q2();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,li(r)?(i=!0,H1(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,H2(e),s.updater=fC,e.stateNode=s,s._reactInternals=e,p$(e,r,t,n),e=y$(null,e,r,!0,i,n)):(e.tag=0,jn&&i&&M2(e),As(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(f1(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=NJ(r),t=ea(r,t),s){case 0:e=g$(null,e,r,t,n);break e;case 1:e=QF(null,e,r,t,n);break e;case 11:e=XF(null,e,r,t,n);break e;case 14:e=YF(null,e,r,ea(r.type,t),n);break e}throw Error(ke(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ea(r,s),g$(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ea(r,s),QF(t,e,r,s,n);case 3:e:{if(SU(e),t===null)throw Error(ke(387));r=e.pendingProps,i=e.memoizedState,s=i.element,XV(t,e),Y1(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Cp(Error(ke(423)),e),e=JF(t,e,r,n,s);break e}else if(r!==s){s=Cp(Error(ke(424)),e),e=JF(t,e,r,n,s);break e}else for(Di=eu(e.stateNode.containerInfo.firstChild),zi=e,jn=!0,sa=null,n=KV(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wp(),r===s){e=Xl(t,e,n);break e}As(t,e,r,n)}e=e.child}return e;case 5:return YV(e),t===null&&d$(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,o$(r,s)?o=null:i!==null&&o$(r,i)&&(e.flags|=32),xU(t,e),As(t,e,o,n),e.child;case 6:return t===null&&d$(e),null;case 13:return CU(t,e,n);case 4:return G2(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xp(e,null,r,n):As(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ea(r,s),XF(t,e,r,s,n);case 7:return As(t,e,e.pendingProps,n),e.child;case 8:return As(t,e,e.pendingProps.children,n),e.child;case 12:return As(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Tn(q1,r._currentValue),r._currentValue=o,i!==null)if(ha(i.value,o)){if(i.children===s.children&&!ai.current){e=Xl(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=Ul(-1,n&-n),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),h$(i.return,n,e),a.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ke(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),h$(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}As(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ip(e,n),s=Do(s),r=r(s),e.flags|=1,As(t,e,r,n),e.child;case 14:return r=e.type,s=ea(r,e.pendingProps),s=ea(r.type,s),YF(t,e,r,s,n);case 15:return vU(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ea(r,s),f1(t,e),e.tag=1,li(r)?(t=!0,H1(e)):t=!1,ip(e,n),gU(e,r,s),p$(e,r,s,n),y$(null,e,r,!0,t,n);case 19:return EU(t,e,n);case 22:return wU(t,e,n)}throw Error(ke(156,e.tag))};function BU(t,e){return fV(t,e)}function IJ(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wo(t,e,n,r){return new IJ(t,e,n,r)}function aR(t){return t=t.prototype,!(!t||!t.isReactComponent)}function NJ(t){if(typeof t=="function")return aR(t)?1:0;if(t!=null){if(t=t.$$typeof,t===T2)return 11;if(t===k2)return 14}return 2}function su(t,e){var n=t.alternate;return n===null?(n=wo(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function g1(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")aR(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case jf:return Hd(n.children,s,i,e);case _2:o=8,s|=8;break;case MN:return t=wo(12,n,e,s|2),t.elementType=MN,t.lanes=i,t;case zN:return t=wo(13,n,e,s),t.elementType=zN,t.lanes=i,t;case BN:return t=wo(19,n,e,s),t.elementType=BN,t.lanes=i,t;case Yj:return gC(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qj:o=10;break e;case Xj:o=9;break e;case T2:o=11;break e;case k2:o=14;break e;case Dc:o=16,r=null;break e}throw Error(ke(130,t==null?t:typeof t,""))}return e=wo(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Hd(t,e,n,r){return t=wo(7,t,r,e),t.lanes=n,t}function gC(t,e,n,r){return t=wo(22,t,r,e),t.elementType=Yj,t.lanes=n,t.stateNode={isHidden:!1},t}function II(t,e,n){return t=wo(6,t,null,e),t.lanes=n,t}function NI(t,e,n){return e=wo(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $J(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cI(0),this.expirationTimes=cI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cI(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function lR(t,e,n,r,s,i,o,a,l){return t=new $J(t,e,n,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=wo(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},H2(i),t}function AJ(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bf,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function jU(t){if(!t)return pu;t=t._reactInternals;e:{if(Rh(t)!==t||t.tag!==1)throw Error(ke(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(li(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ke(171))}if(t.tag===1){var n=t.type;if(li(n))return jV(t,n,e)}return e}function VU(t,e,n,r,s,i,o,a,l){return t=lR(n,r,!0,t,s,i,o,a,l),t.context=jU(null),n=t.current,r=Ds(),s=ru(n),i=Ul(r,s),i.callback=e??null,tu(n,i,s),t.current.lanes=s,Hb(t,s,r),ci(t,r),t}function yC(t,e,n,r){var s=e.current,i=Ds(),o=ru(s);return n=jU(n),e.context===null?e.context=n:e.pendingContext=n,e=Ul(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=tu(s,e,o),t!==null&&(ca(t,s,o,i),u1(t,s,o)),o}function sS(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lM(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function cR(t,e){lM(t,e),(t=t.alternate)&&lM(t,e)}function RJ(){return null}var UU=typeof reportError=="function"?reportError:function(t){console.error(t)};function uR(t){this._internalRoot=t}bC.prototype.render=uR.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ke(409));yC(t,e,null,null)};bC.prototype.unmount=uR.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ih(function(){yC(null,t,null,null)}),e[Kl]=null}};function bC(t){this._internalRoot=t}bC.prototype.unstable_scheduleHydration=function(t){if(t){var e=wV();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mc.length&&e!==0&&e<Mc[n].priority;n++);Mc.splice(n,0,t),n===0&&SV(t)}};function dR(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function vC(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cM(){}function OJ(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=sS(o);i.call(c)}}var o=VU(e,r,t,0,null,!1,!1,"",cM);return t._reactRootContainer=o,t[Kl]=o.current,Zy(t.nodeType===8?t.parentNode:t),ih(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=sS(l);a.call(c)}}var l=lR(t,0,!1,null,null,!1,!1,"",cM);return t._reactRootContainer=l,t[Kl]=l.current,Zy(t.nodeType===8?t.parentNode:t),ih(function(){yC(e,l,n,r)}),l}function wC(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=sS(o);a.call(l)}}yC(e,o,t,s)}else o=OJ(n,e,t,s,r);return sS(o)}bV=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=py(e.pendingLanes);n!==0&&($2(e,n|1),ci(e,cr()),!(jt&6)&&(Ep=cr()+500,Du()))}break;case 13:ih(function(){var r=ql(t,1);if(r!==null){var s=Ds();ca(r,t,1,s)}}),cR(t,1)}};A2=function(t){if(t.tag===13){var e=ql(t,134217728);if(e!==null){var n=Ds();ca(e,t,134217728,n)}cR(t,134217728)}};vV=function(t){if(t.tag===13){var e=ru(t),n=ql(t,e);if(n!==null){var r=Ds();ca(n,t,e,r)}cR(t,e)}};wV=function(){return sn};xV=function(t,e){var n=sn;try{return sn=t,e()}finally{sn=n}};YN=function(t,e,n){switch(e){case"input":if(UN(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=uC(r);if(!s)throw Error(ke(90));Jj(r),UN(r,s)}}}break;case"textarea":eV(t,n);break;case"select":e=n.value,e!=null&&tp(t,!!n.multiple,e,!1)}};aV=sR;lV=ih;var DJ={usingClientEntryPoint:!1,Events:[Kb,Hf,uC,iV,oV,sR]},ty={findFiberByHostInstance:Ad,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},PJ={bundleType:ty.bundleType,version:ty.version,rendererPackageName:ty.rendererPackageName,rendererConfig:ty.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ac.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dV(t),t===null?null:t.stateNode},findFiberByHostInstance:ty.findFiberByHostInstance||RJ,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $x=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$x.isDisabled&&$x.supportsFiber)try{oC=$x.inject(PJ),Ga=$x}catch{}}Qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DJ;Qi.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!dR(e))throw Error(ke(200));return AJ(t,e,null,n)};Qi.createRoot=function(t,e){if(!dR(t))throw Error(ke(299));var n=!1,r="",s=UU;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=lR(t,1,!1,null,null,n,!1,r,s),t[Kl]=e.current,Zy(t.nodeType===8?t.parentNode:t),new uR(e)};Qi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ke(188)):(t=Object.keys(t).join(","),Error(ke(268,t)));return t=dV(e),t=t===null?null:t.stateNode,t};Qi.flushSync=function(t){return ih(t)};Qi.hydrate=function(t,e,n){if(!vC(e))throw Error(ke(200));return wC(null,t,e,!0,n)};Qi.hydrateRoot=function(t,e,n){if(!dR(t))throw Error(ke(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=UU;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=VU(e,null,t,1,n??null,s,!1,i,o),t[Kl]=e.current,Zy(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new bC(e)};Qi.render=function(t,e,n){if(!vC(e))throw Error(ke(200));return wC(null,t,e,!1,n)};Qi.unmountComponentAtNode=function(t){if(!vC(t))throw Error(ke(40));return t._reactRootContainer?(ih(function(){wC(null,null,t,!1,function(){t._reactRootContainer=null,t[Kl]=null})}),!0):!1};Qi.unstable_batchedUpdates=sR;Qi.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!vC(n))throw Error(ke(200));if(t==null||t._reactInternals===void 0)throw Error(ke(38));return wC(t,e,n,!1,r)};Qi.version="18.3.1-next-f1338f8080-20240426";function WU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WU)}catch(t){console.error(t)}}WU(),Wj.exports=Qi;var hR=Wj.exports;const Dd=$h(hR),LJ=y2({__proto__:null,default:Dd},[hR]);var uM=hR;LN.createRoot=uM.createRoot,LN.hydrateRoot=uM.hydrateRoot;var HU={exports:{}},GU={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xb=N;function FJ(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var MJ=typeof Object.is=="function"?Object.is:FJ,zJ=Xb.useSyncExternalStore,BJ=Xb.useRef,jJ=Xb.useEffect,VJ=Xb.useMemo,UJ=Xb.useDebugValue;GU.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=BJ(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=VJ(function(){function l(f){if(!c){if(c=!0,u=f,f=r(f),s!==void 0&&o.hasValue){var p=o.value;if(s(p,f))return d=p}return d=f}if(p=d,MJ(u,f))return p;var m=r(f);return s!==void 0&&s(p,m)?p:(u=f,d=m)}var c=!1,u,d,h=n===void 0?null:n;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,n,r,s]);var a=zJ(t,i[0],i[1]);return jJ(function(){o.hasValue=!0,o.value=a},[a]),UJ(a),a};HU.exports=GU;var WJ=HU.exports,Pi="default"in hu?kn:hu,dM=Symbol.for("react-redux-context"),hM=typeof globalThis<"u"?globalThis:{};function HJ(){if(!Pi.createContext)return{};const t=hM[dM]??(hM[dM]=new Map);let e=t.get(Pi.createContext);return e||(e=Pi.createContext(null),t.set(Pi.createContext,e)),e}var mu=HJ(),GJ=()=>{throw new Error("uSES not initialized!")};function fR(t=mu){return function(){return Pi.useContext(t)}}var KU=fR(),qU=GJ,KJ=t=>{qU=t},qJ=(t,e)=>t===e;function XJ(t=mu){const e=t===mu?KU:fR(t),n=(r,s={})=>{const{equalityFn:i=qJ,devModeChecks:o={}}=typeof s=="function"?{equalityFn:s}:s,{store:a,subscription:l,getServerState:c,stabilityCheck:u,identityFunctionCheck:d}=e();Pi.useRef(!0);const h=Pi.useCallback({[r.name](p){return r(p)}}[r.name],[r,u,o.stabilityCheck]),f=qU(l.addNestedSub,a.getState,c||a.getState,h,i);return Pi.useDebugValue(f),f};return Object.assign(n,{withTypes:()=>n}),n}var pR=XJ();function YJ(t){t()}function QJ(){let t=null,e=null;return{clear(){t=null,e=null},notify(){YJ(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const s=e={callback:n,next:null,prev:e};return s.prev?s.prev.next=s:t=s,function(){!r||t===null||(r=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:t=s.next)}}}}var fM={notify(){},get:()=>[]};function JJ(t,e){let n,r=fM,s=0,i=!1;function o(m){u();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),d())}}function a(){r.notify()}function l(){p.onStateChange&&p.onStateChange()}function c(){return i}function u(){s++,n||(n=t.subscribe(l),r=QJ())}function d(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=fM)}function h(){i||(i=!0,u())}function f(){i&&(i=!1,d())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:l,isSubscribed:c,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>r};return p}var ZJ=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",eZ=typeof navigator<"u"&&navigator.product==="ReactNative",tZ=ZJ||eZ?Pi.useLayoutEffect:Pi.useEffect;function nZ({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",identityFunctionCheck:i="once"}){const o=Pi.useMemo(()=>{const c=JJ(t);return{store:t,subscription:c,getServerState:r?()=>r:void 0,stabilityCheck:s,identityFunctionCheck:i}},[t,r,s,i]),a=Pi.useMemo(()=>t.getState(),[t]);tZ(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),a!==t.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,a]);const l=e||mu;return Pi.createElement(l.Provider,{value:o},n)}var rZ=nZ;function XU(t=mu){const e=t===mu?KU:fR(t),n=()=>{const{store:r}=e();return r};return Object.assign(n,{withTypes:()=>n}),n}var sZ=XU();function iZ(t=mu){const e=t===mu?sZ:XU(t),n=()=>e().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var xC=iZ();KJ(WJ.useSyncExternalStoreWithSelector);function es(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var oZ=typeof Symbol=="function"&&Symbol.observable||"@@observable",pM=oZ,$I=()=>Math.random().toString(36).substring(7).split("").join("."),aZ={INIT:`@@redux/INIT${$I()}`,REPLACE:`@@redux/REPLACE${$I()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${$I()}`},iS=aZ;function mR(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function YU(t,e,n){if(typeof t!="function")throw new Error(es(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(es(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(es(1));return n(YU)(t,e)}let r=t,s=e,i=new Map,o=i,a=0,l=!1;function c(){o===i&&(o=new Map,i.forEach((g,y)=>{o.set(y,g)}))}function u(){if(l)throw new Error(es(3));return s}function d(g){if(typeof g!="function")throw new Error(es(4));if(l)throw new Error(es(5));let y=!0;c();const b=a++;return o.set(b,g),function(){if(y){if(l)throw new Error(es(6));y=!1,c(),o.delete(b),i=null}}}function h(g){if(!mR(g))throw new Error(es(7));if(typeof g.type>"u")throw new Error(es(8));if(typeof g.type!="string")throw new Error(es(17));if(l)throw new Error(es(9));try{l=!0,s=r(s,g)}finally{l=!1}return(i=o).forEach(b=>{b()}),g}function f(g){if(typeof g!="function")throw new Error(es(10));r=g,h({type:iS.REPLACE})}function p(){const g=d;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(es(11));function b(){const w=y;w.next&&w.next(u())}return b(),{unsubscribe:g(b)}},[pM](){return this}}}return h({type:iS.INIT}),{dispatch:h,subscribe:d,getState:u,replaceReducer:f,[pM]:p}}function lZ(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:iS.INIT})>"u")throw new Error(es(12));if(typeof n(void 0,{type:iS.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(es(13))})}function cZ(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const o=e[i];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let s;try{lZ(n)}catch(i){s=i}return function(o={},a){if(s)throw s;let l=!1;const c={};for(let u=0;u<r.length;u++){const d=r[u],h=n[d],f=o[d],p=h(f,a);if(typeof p>"u")throw a&&a.type,new Error(es(14));c[d]=p,l=l||p!==f}return l=l||r.length!==Object.keys(o).length,l?c:o}}function oS(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function uZ(...t){return e=>(n,r)=>{const s=e(n,r);let i=()=>{throw new Error(es(15))};const o={getState:s.getState,dispatch:(l,...c)=>i(l,...c)},a=t.map(l=>l(o));return i=oS(...a)(s.dispatch),{...s,dispatch:i}}}function dZ(t){return mR(t)&&"type"in t&&typeof t.type=="string"}var QU=Symbol.for("immer-nothing"),mM=Symbol.for("immer-draftable"),Wi=Symbol.for("immer-state");function aa(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var _p=Object.getPrototypeOf;function gu(t){return!!t&&!!t[Wi]}function Yl(t){var e;return t?JU(t)||Array.isArray(t)||!!t[mM]||!!((e=t.constructor)!=null&&e[mM])||CC(t)||EC(t):!1}var hZ=Object.prototype.constructor.toString();function JU(t){if(!t||typeof t!="object")return!1;const e=_p(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===hZ}function aS(t,e){SC(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,r)=>e(r,n,t))}function SC(t){const e=t[Wi];return e?e.type_:Array.isArray(t)?1:CC(t)?2:EC(t)?3:0}function N$(t,e){return SC(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function ZU(t,e,n){const r=SC(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function fZ(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function CC(t){return t instanceof Map}function EC(t){return t instanceof Set}function wd(t){return t.copy_||t.base_}function $$(t,e){if(CC(t))return new Map(t);if(EC(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=JU(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[Wi];let s=Reflect.ownKeys(r);for(let i=0;i<s.length;i++){const o=s[i],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:t[o]})}return Object.create(_p(t),r)}else{const r=_p(t);if(r!==null&&n)return{...t};const s=Object.create(r);return Object.assign(s,t)}}function gR(t,e=!1){return _C(t)||gu(t)||!Yl(t)||(SC(t)>1&&(t.set=t.add=t.clear=t.delete=pZ),Object.freeze(t),e&&Object.entries(t).forEach(([n,r])=>gR(r,!0))),t}function pZ(){aa(2)}function _C(t){return Object.isFrozen(t)}var mZ={};function oh(t){const e=mZ[t];return e||aa(0,t),e}var lb;function e4(){return lb}function gZ(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function gM(t,e){e&&(oh("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function A$(t){R$(t),t.drafts_.forEach(yZ),t.drafts_=null}function R$(t){t===lb&&(lb=t.parent_)}function yM(t){return lb=gZ(lb,t)}function yZ(t){const e=t[Wi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function bM(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Wi].modified_&&(A$(e),aa(4)),Yl(t)&&(t=lS(e,t),e.parent_||cS(e,t)),e.patches_&&oh("Patches").generateReplacementPatches_(n[Wi].base_,t,e.patches_,e.inversePatches_)):t=lS(e,n,[]),A$(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==QU?t:void 0}function lS(t,e,n){if(_C(e))return e;const r=e[Wi];if(!r)return aS(e,(s,i)=>vM(t,r,e,s,i,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return cS(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const s=r.copy_;let i=s,o=!1;r.type_===3&&(i=new Set(s),s.clear(),o=!0),aS(i,(a,l)=>vM(t,r,s,a,l,n,o)),cS(t,s,!1),n&&t.patches_&&oh("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function vM(t,e,n,r,s,i,o){if(gu(s)){const a=i&&e&&e.type_!==3&&!N$(e.assigned_,r)?i.concat(r):void 0,l=lS(t,s,a);if(ZU(n,r,l),gu(l))t.canAutoFreeze_=!1;else return}else o&&n.add(s);if(Yl(s)&&!_C(s)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;lS(t,s),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&cS(t,s)}}function cS(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&gR(e,n)}function bZ(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:e4(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let s=r,i=yR;n&&(s=[r],i=cb);const{revoke:o,proxy:a}=Proxy.revocable(s,i);return r.draft_=a,r.revoke_=o,a}var yR={get(t,e){if(e===Wi)return t;const n=wd(t);if(!N$(n,e))return vZ(t,n,e);const r=n[e];return t.finalized_||!Yl(r)?r:r===AI(t.base_,e)?(RI(t),t.copy_[e]=D$(r,t)):r},has(t,e){return e in wd(t)},ownKeys(t){return Reflect.ownKeys(wd(t))},set(t,e,n){const r=t4(wd(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const s=AI(wd(t),e),i=s==null?void 0:s[Wi];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(fZ(n,s)&&(n!==void 0||N$(t.base_,e)))return!0;RI(t),O$(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return AI(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,RI(t),O$(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=wd(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){aa(11)},getPrototypeOf(t){return _p(t.base_)},setPrototypeOf(){aa(12)}},cb={};aS(yR,(t,e)=>{cb[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});cb.deleteProperty=function(t,e){return cb.set.call(this,t,e,void 0)};cb.set=function(t,e,n){return yR.set.call(this,t[0],e,n,t[0])};function AI(t,e){const n=t[Wi];return(n?wd(n):t)[e]}function vZ(t,e,n){var s;const r=t4(e,n);return r?"value"in r?r.value:(s=r.get)==null?void 0:s.call(t.draft_):void 0}function t4(t,e){if(!(e in t))return;let n=_p(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=_p(n)}}function O$(t){t.modified_||(t.modified_=!0,t.parent_&&O$(t.parent_))}function RI(t){t.copy_||(t.copy_=$$(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var wZ=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const o=this;return function(l=i,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&aa(6),r!==void 0&&typeof r!="function"&&aa(7);let s;if(Yl(e)){const i=yM(this),o=D$(e,void 0);let a=!0;try{s=n(o),a=!1}finally{a?A$(i):R$(i)}return gM(i,r),bM(s,i)}else if(!e||typeof e!="object"){if(s=n(e),s===void 0&&(s=e),s===QU&&(s=void 0),this.autoFreeze_&&gR(s,!0),r){const i=[],o=[];oh("Patches").generateReplacementPatches_(e,s,i,o),r(i,o)}return s}else aa(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,s;return[this.produce(e,n,(o,a)=>{r=o,s=a}),r,s]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){Yl(t)||aa(8),gu(t)&&(t=n4(t));const e=yM(this),n=D$(t,void 0);return n[Wi].isManual_=!0,R$(e),n}finishDraft(t,e){const n=t&&t[Wi];(!n||!n.isManual_)&&aa(9);const{scope_:r}=n;return gM(r,e),bM(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const s=e[n];if(s.path.length===0&&s.op==="replace"){t=s.value;break}}n>-1&&(e=e.slice(n+1));const r=oh("Patches").applyPatches_;return gu(t)?r(t,e):this.produce(t,s=>r(s,e))}};function D$(t,e){const n=CC(t)?oh("MapSet").proxyMap_(t,e):EC(t)?oh("MapSet").proxySet_(t,e):bZ(t,e);return(e?e.scope_:e4()).drafts_.push(n),n}function n4(t){return gu(t)||aa(10,t),r4(t)}function r4(t){if(!Yl(t)||_C(t))return t;const e=t[Wi];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=$$(t,e.scope_.immer_.useStrictShallowCopy_)}else n=$$(t,!0);return aS(n,(r,s)=>{ZU(n,r,r4(s))}),e&&(e.finalized_=!1),n}var Hi=new wZ,s4=Hi.produce;Hi.produceWithPatches.bind(Hi);Hi.setAutoFreeze.bind(Hi);Hi.setUseStrictShallowCopy.bind(Hi);Hi.applyPatches.bind(Hi);Hi.createDraft.bind(Hi);Hi.finishDraft.bind(Hi);function xZ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function SZ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function CZ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var wM=t=>Array.isArray(t)?t:[t];function EZ(t){const e=Array.isArray(t[0])?t[0]:t;return CZ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function _Z(t,e){const n=[],{length:r}=t;for(let s=0;s<r;s++)n.push(t[s].apply(null,e));return n}var TZ=class{constructor(t){this.value=t}deref(){return this.value}},kZ=typeof WeakRef<"u"?WeakRef:TZ,IZ=0,xM=1;function Ax(){return{s:IZ,v:void 0,o:null,p:null}}function bR(t,e={}){let n=Ax();const{resultEqualityCheck:r}=e;let s,i=0;function o(){var d;let a=n;const{length:l}=arguments;for(let h=0,f=l;h<f;h++){const p=arguments[h];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=Ax(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=Ax(),m.set(p,a)):a=g}}const c=a;let u;if(a.s===xM?u=a.v:(u=t.apply(null,arguments),i++),c.s=xM,r){const h=((d=s==null?void 0:s.deref)==null?void 0:d.call(s))??s;h!=null&&r(h,u)&&(u=h,i!==0&&i--),s=typeof u=="object"&&u!==null||typeof u=="function"?new kZ(u):u}return c.v=u,u}return o.clearCache=()=>{n=Ax(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function i4(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...s)=>{let i=0,o=0,a,l={},c=s.pop();typeof c=="object"&&(l=c,c=s.pop()),xZ(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...n,...l},{memoize:d,memoizeOptions:h=[],argsMemoize:f=bR,argsMemoizeOptions:p=[],devModeChecks:m={}}=u,g=wM(h),y=wM(p),b=EZ(s),v=d(function(){return i++,c.apply(null,arguments)},...g),w=f(function(){o++;const _=_Z(b,arguments);return a=v.apply(null,_),a},...y);return Object.assign(w,{resultFunc:c,memoizedResultFunc:v,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:d,argsMemoize:f})};return Object.assign(r,{withTypes:()=>r}),r}var NZ=i4(bR),$Z=Object.assign((t,e=NZ)=>{SZ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(i=>t[i]);return e(r,(...i)=>i.reduce((o,a,l)=>(o[n[l]]=a,o),{}))},{withTypes:()=>$Z});function o4(t){return({dispatch:n,getState:r})=>s=>i=>typeof i=="function"?i(n,r,t):s(i)}var AZ=o4(),RZ=o4,OZ=(...t)=>{const e=i4(...t),n=Object.assign((...r)=>{const s=e(...r),i=(o,...a)=>s(gu(o)?n4(o):o,...a);return Object.assign(i,s),i},{withTypes:()=>n});return n};OZ(bR);var DZ=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?oS:oS.apply(null,arguments)};function Tp(t,e){function n(...r){if(e){let s=e(...r);if(!s)throw new Error(ui(0));return{type:t,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>dZ(r)&&r.type===t,n}var a4=class gy extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,gy.prototype)}static get[Symbol.species](){return gy}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new gy(...e[0].concat(this)):new gy(...e.concat(this))}};function SM(t){return Yl(t)?s4(t,()=>{}):t}function CM(t,e,n){if(t.has(e)){let s=t.get(e);return n.update&&(s=n.update(s,e,t),t.set(e,s)),s}if(!n.insert)throw new Error(ui(10));const r=n.insert(e,t);return t.set(e,r),r}function PZ(t){return typeof t=="boolean"}var LZ=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let o=new a4;return n&&(PZ(n)?o.push(AZ):o.push(RZ(n.extraArgument))),o},FZ="RTK_autoBatch",l4=t=>e=>{setTimeout(e,t)},MZ=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:l4(10),zZ=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let s=!0,i=!1,o=!1;const a=new Set,l=t.type==="tick"?queueMicrotask:t.type==="raf"?MZ:t.type==="callback"?t.queueNotification:l4(t.timeout),c=()=>{o=!1,i&&(i=!1,a.forEach(u=>u()))};return Object.assign({},r,{subscribe(u){const d=()=>s&&u(),h=r.subscribe(d);return a.add(u),()=>{h(),a.delete(u)}},dispatch(u){var d;try{return s=!((d=u==null?void 0:u.meta)!=null&&d[FZ]),i=!s,i&&(o||(o=!0,l(c))),r.dispatch(u)}finally{s=!0}}})},BZ=t=>function(n){const{autoBatch:r=!0}=n??{};let s=new a4(t);return r&&s.push(zZ(typeof r=="object"?r:void 0)),s},jZ=!0;function VZ(t){const e=LZ(),{reducer:n=void 0,middleware:r,devTools:s=!0,preloadedState:i=void 0,enhancers:o=void 0}=t||{};let a;if(typeof n=="function")a=n;else if(mR(n))a=cZ(n);else throw new Error(ui(1));let l;typeof r=="function"?l=r(e):l=e();let c=oS;s&&(c=DZ({trace:!jZ,...typeof s=="object"&&s}));const u=uZ(...l),d=BZ(u);let h=typeof o=="function"?o(d):d();const f=c(...h);return YU(a,i,f)}function c4(t){const e={},n=[];let r;const s={addCase(i,o){const a=typeof i=="string"?i:i.type;if(!a)throw new Error(ui(28));if(a in e)throw new Error(ui(29));return e[a]=o,s},addMatcher(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase(i){return r=i,s}};return t(s),[e,n,r]}function UZ(t){return typeof t=="function"}function WZ(t,e){let[n,r,s]=c4(e),i;if(UZ(t))i=()=>SM(t());else{const a=SM(t);i=()=>a}function o(a=i(),l){let c=[n[l.type],...r.filter(({matcher:u})=>u(l)).map(({reducer:u})=>u)];return c.filter(u=>!!u).length===0&&(c=[s]),c.reduce((u,d)=>{if(d)if(gu(u)){const f=d(u,l);return f===void 0?u:f}else{if(Yl(u))return s4(u,h=>d(h,l));{const h=d(u,l);if(h===void 0){if(u===null)return u;throw new Error(ui(9))}return h}}return u},a)}return o.getInitialState=i,o}var HZ="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Pd=(t=21)=>{let e="",n=t;for(;n--;)e+=HZ[Math.random()*64|0];return e},GZ=Symbol.for("rtk-slice-createasyncthunk");function KZ(t,e){return`${t}/${e}`}function qZ({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[GZ];return function(s){const{name:i,reducerPath:o=i}=s;if(!i)throw new Error(ui(11));typeof process<"u";const a=(typeof s.reducers=="function"?s.reducers(QZ()):s.reducers)||{},l=Object.keys(a),c={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},u={addCase(v,w){const C=typeof v=="string"?v:v.type;if(!C)throw new Error(ui(12));if(C in c.sliceCaseReducersByType)throw new Error(ui(13));return c.sliceCaseReducersByType[C]=w,u},addMatcher(v,w){return c.sliceMatchers.push({matcher:v,reducer:w}),u},exposeAction(v,w){return c.actionCreators[v]=w,u},exposeCaseReducer(v,w){return c.sliceCaseReducersByName[v]=w,u}};l.forEach(v=>{const w=a[v],C={reducerName:v,type:KZ(i,v),createNotation:typeof s.reducers=="function"};ZZ(w)?tee(C,w,u,e):JZ(C,w,u)});function d(){const[v={},w=[],C=void 0]=typeof s.extraReducers=="function"?c4(s.extraReducers):[s.extraReducers],_={...v,...c.sliceCaseReducersByType};return WZ(s.initialState,E=>{for(let I in _)E.addCase(I,_[I]);for(let I of c.sliceMatchers)E.addMatcher(I.matcher,I.reducer);for(let I of w)E.addMatcher(I.matcher,I.reducer);C&&E.addDefaultCase(C)})}const h=v=>v,f=new Map;let p;function m(v,w){return p||(p=d()),p(v,w)}function g(){return p||(p=d()),p.getInitialState()}function y(v,w=!1){function C(E){let I=E[v];return typeof I>"u"&&w&&(I=g()),I}function _(E=h){const I=CM(f,w,{insert:()=>new WeakMap});return CM(I,E,{insert:()=>{const O={};for(const[R,z]of Object.entries(s.selectors??{}))O[R]=XZ(z,E,g,w);return O}})}return{reducerPath:v,getSelectors:_,get selectors(){return _(C)},selectSlice:C}}const b={name:i,reducer:m,actions:c.actionCreators,caseReducers:c.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(v,{reducerPath:w,...C}={}){const _=w??o;return v.inject({reducerPath:_,reducer:m},C),{...b,...y(_,!0)}}};return b}}function XZ(t,e,n,r){function s(i,...o){let a=e(i);return typeof a>"u"&&r&&(a=n()),t(a,...o)}return s.unwrapped=t,s}var YZ=qZ();function QZ(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function JZ({type:t,reducerName:e,createNotation:n},r,s){let i,o;if("reducer"in r){if(n&&!eee(r))throw new Error(ui(17));i=r.reducer,o=r.prepare}else i=r;s.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,o?Tp(t,o):Tp(t))}function ZZ(t){return t._reducerDefinitionType==="asyncThunk"}function eee(t){return t._reducerDefinitionType==="reducerWithPrepare"}function tee({type:t,reducerName:e},n,r,s){if(!s)throw new Error(ui(18));const{payloadCreator:i,fulfilled:o,pending:a,rejected:l,settled:c,options:u}=n,d=s(t,i,u);r.exposeAction(e,d),o&&r.addCase(d.fulfilled,o),a&&r.addCase(d.pending,a),l&&r.addCase(d.rejected,l),c&&r.addMatcher(d.settled,c),r.exposeCaseReducer(e,{fulfilled:o||Rx,pending:a||Rx,rejected:l||Rx,settled:c||Rx})}function Rx(){}var nee=(t,e)=>{if(typeof t!="function")throw new Error(ui(32))},vR="listenerMiddleware",ree=t=>{let{type:e,actionCreator:n,matcher:r,predicate:s,effect:i}=t;if(e)s=Tp(e).match;else if(n)e=n.type,s=n.match;else if(r)s=r;else if(!s)throw new Error(ui(21));return nee(i),{predicate:s,type:e,effect:i}},see=Object.assign(t=>{const{type:e,predicate:n,effect:r}=ree(t);return{id:Pd(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ui(22))}}},{withTypes:()=>see}),iee=Object.assign(Tp(`${vR}/add`),{withTypes:()=>iee});Tp(`${vR}/removeAll`);var oee=Object.assign(Tp(`${vR}/remove`),{withTypes:()=>oee});function ui(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}function u4(t,e){return function(){return t.apply(e,arguments)}}const{toString:aee}=Object.prototype,{getPrototypeOf:wR}=Object,TC=(t=>e=>{const n=aee.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),pl=t=>(t=t.toLowerCase(),e=>TC(e)===t),kC=t=>e=>typeof e===t,{isArray:tm}=Array,ub=kC("undefined");function lee(t){return t!==null&&!ub(t)&&t.constructor!==null&&!ub(t.constructor)&&ko(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const d4=pl("ArrayBuffer");function cee(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&d4(t.buffer),e}const uee=kC("string"),ko=kC("function"),h4=kC("number"),IC=t=>t!==null&&typeof t=="object",dee=t=>t===!0||t===!1,y1=t=>{if(TC(t)!=="object")return!1;const e=wR(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},hee=pl("Date"),fee=pl("File"),pee=pl("Blob"),mee=pl("FileList"),gee=t=>IC(t)&&ko(t.pipe),yee=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||ko(t.append)&&((e=TC(t))==="formdata"||e==="object"&&ko(t.toString)&&t.toString()==="[object FormData]"))},bee=pl("URLSearchParams"),vee=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Yb(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),tm(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(r=0;r<o;r++)a=i[r],e.call(null,t[a],a,t)}}function f4(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const p4=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,m4=t=>!ub(t)&&t!==p4;function P$(){const{caseless:t}=m4(this)&&this||{},e={},n=(r,s)=>{const i=t&&f4(e,s)||s;y1(e[i])&&y1(r)?e[i]=P$(e[i],r):y1(r)?e[i]=P$({},r):tm(r)?e[i]=r.slice():e[i]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&Yb(arguments[r],n);return e}const wee=(t,e,n,{allOwnKeys:r}={})=>(Yb(e,(s,i)=>{n&&ko(s)?t[i]=u4(s,n):t[i]=s},{allOwnKeys:r}),t),xee=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),See=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},Cee=(t,e,n,r)=>{let s,i,o;const a={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=n!==!1&&wR(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},Eee=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},_ee=t=>{if(!t)return null;if(tm(t))return t;let e=t.length;if(!h4(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},Tee=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&wR(Uint8Array)),kee=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},Iee=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},Nee=pl("HTMLFormElement"),$ee=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),EM=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),Aee=pl("RegExp"),g4=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Yb(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},Ree=t=>{g4(t,(e,n)=>{if(ko(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(ko(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Oee=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return tm(t)?r(t):r(String(t).split(e)),n},Dee=()=>{},Pee=(t,e)=>(t=+t,Number.isFinite(t)?t:e),OI="abcdefghijklmnopqrstuvwxyz",_M="0123456789",y4={DIGIT:_M,ALPHA:OI,ALPHA_DIGIT:OI+OI.toUpperCase()+_M},Lee=(t=16,e=y4.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function Fee(t){return!!(t&&ko(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const Mee=t=>{const e=new Array(10),n=(r,s)=>{if(IC(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[s]=r;const i=tm(r)?[]:{};return Yb(r,(o,a)=>{const l=n(o,s+1);!ub(l)&&(i[a]=l)}),e[s]=void 0,i}}return r};return n(t,0)},zee=pl("AsyncFunction"),Bee=t=>t&&(IC(t)||ko(t))&&ko(t.then)&&ko(t.catch),we={isArray:tm,isArrayBuffer:d4,isBuffer:lee,isFormData:yee,isArrayBufferView:cee,isString:uee,isNumber:h4,isBoolean:dee,isObject:IC,isPlainObject:y1,isUndefined:ub,isDate:hee,isFile:fee,isBlob:pee,isRegExp:Aee,isFunction:ko,isStream:gee,isURLSearchParams:bee,isTypedArray:Tee,isFileList:mee,forEach:Yb,merge:P$,extend:wee,trim:vee,stripBOM:xee,inherits:See,toFlatObject:Cee,kindOf:TC,kindOfTest:pl,endsWith:Eee,toArray:_ee,forEachEntry:kee,matchAll:Iee,isHTMLForm:Nee,hasOwnProperty:EM,hasOwnProp:EM,reduceDescriptors:g4,freezeMethods:Ree,toObjectSet:Oee,toCamelCase:$ee,noop:Dee,toFiniteNumber:Pee,findKey:f4,global:p4,isContextDefined:m4,ALPHABET:y4,generateString:Lee,isSpecCompliantForm:Fee,toJSONObject:Mee,isAsyncFn:zee,isThenable:Bee};function Mt(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}we.inherits(Mt,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:we.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const b4=Mt.prototype,v4={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{v4[t]={value:t}});Object.defineProperties(Mt,v4);Object.defineProperty(b4,"isAxiosError",{value:!0});Mt.from=(t,e,n,r,s,i)=>{const o=Object.create(b4);return we.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),Mt.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const jee=null;function L$(t){return we.isPlainObject(t)||we.isArray(t)}function w4(t){return we.endsWith(t,"[]")?t.slice(0,-2):t}function TM(t,e,n){return t?t.concat(e).map(function(s,i){return s=w4(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function Vee(t){return we.isArray(t)&&!t.some(L$)}const Uee=we.toFlatObject(we,{},null,function(e){return/^is[A-Z]/.test(e)});function NC(t,e,n){if(!we.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=we.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(m,g){return!we.isUndefined(g[m])});const r=n.metaTokens,s=n.visitor||u,i=n.dots,o=n.indexes,l=(n.Blob||typeof Blob<"u"&&Blob)&&we.isSpecCompliantForm(e);if(!we.isFunction(s))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(we.isDate(p))return p.toISOString();if(!l&&we.isBlob(p))throw new Mt("Blob is not supported. Use a Buffer instead.");return we.isArrayBuffer(p)||we.isTypedArray(p)?l&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,m,g){let y=p;if(p&&!g&&typeof p=="object"){if(we.endsWith(m,"{}"))m=r?m:m.slice(0,-2),p=JSON.stringify(p);else if(we.isArray(p)&&Vee(p)||(we.isFileList(p)||we.endsWith(m,"[]"))&&(y=we.toArray(p)))return m=w4(m),y.forEach(function(v,w){!(we.isUndefined(v)||v===null)&&e.append(o===!0?TM([m],w,i):o===null?m:m+"[]",c(v))}),!1}return L$(p)?!0:(e.append(TM(g,m,i),c(p)),!1)}const d=[],h=Object.assign(Uee,{defaultVisitor:u,convertValue:c,isVisitable:L$});function f(p,m){if(!we.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+m.join("."));d.push(p),we.forEach(p,function(y,b){(!(we.isUndefined(y)||y===null)&&s.call(e,y,we.isString(b)?b.trim():b,m,h))===!0&&f(y,m?m.concat(b):[b])}),d.pop()}}if(!we.isObject(t))throw new TypeError("data must be an object");return f(t),e}function kM(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function xR(t,e){this._pairs=[],t&&NC(t,this,e)}const x4=xR.prototype;x4.append=function(e,n){this._pairs.push([e,n])};x4.toString=function(e){const n=e?function(r){return e.call(this,r,kM)}:kM;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function Wee(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function S4(t,e,n){if(!e)return t;const r=n&&n.encode||Wee,s=n&&n.serialize;let i;if(s?i=s(e,n):i=we.isURLSearchParams(e)?e.toString():new xR(e,n).toString(r),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class IM{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){we.forEach(this.handlers,function(r){r!==null&&e(r)})}}const C4={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Hee=typeof URLSearchParams<"u"?URLSearchParams:xR,Gee=typeof FormData<"u"?FormData:null,Kee=typeof Blob<"u"?Blob:null,qee={isBrowser:!0,classes:{URLSearchParams:Hee,FormData:Gee,Blob:Kee},protocols:["http","https","file","blob","url","data"]},E4=typeof window<"u"&&typeof document<"u",Xee=(t=>E4&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Yee=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Qee=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:E4,hasStandardBrowserEnv:Xee,hasStandardBrowserWebWorkerEnv:Yee},Symbol.toStringTag,{value:"Module"})),Va={...Qee,...qee};function Jee(t,e){return NC(t,new Va.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,i){return Va.isNode&&we.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function Zee(t){return we.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ete(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function _4(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=n.length;return o=!o&&we.isArray(s)?s.length:o,l?(we.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!a):((!s[o]||!we.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&we.isArray(s[o])&&(s[o]=ete(s[o])),!a)}if(we.isFormData(t)&&we.isFunction(t.entries)){const n={};return we.forEachEntry(t,(r,s)=>{e(Zee(r),s,n,0)}),n}return null}function tte(t,e,n){if(we.isString(t))try{return(e||JSON.parse)(t),we.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Qb={transitional:C4,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=we.isObject(e);if(i&&we.isHTMLForm(e)&&(e=new FormData(e)),we.isFormData(e))return s?JSON.stringify(_4(e)):e;if(we.isArrayBuffer(e)||we.isBuffer(e)||we.isStream(e)||we.isFile(e)||we.isBlob(e))return e;if(we.isArrayBufferView(e))return e.buffer;if(we.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return Jee(e,this.formSerializer).toString();if((a=we.isFileList(e))||r.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return NC(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),tte(e)):e}],transformResponse:[function(e){const n=this.transitional||Qb.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(e&&we.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?Mt.from(a,Mt.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Va.classes.FormData,Blob:Va.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};we.forEach(["delete","get","head","post","put","patch"],t=>{Qb.headers[t]={}});const nte=we.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rte=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&nte[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},NM=Symbol("internals");function ny(t){return t&&String(t).trim().toLowerCase()}function b1(t){return t===!1||t==null?t:we.isArray(t)?t.map(b1):String(t)}function ste(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const ite=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function DI(t,e,n,r,s){if(we.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!we.isString(e)){if(we.isString(r))return e.indexOf(r)!==-1;if(we.isRegExp(r))return r.test(e)}}function ote(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function ate(t,e){const n=we.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}class Io{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(a,l,c){const u=ny(l);if(!u)throw new Error("header name must be a non-empty string");const d=we.findKey(s,u);(!d||s[d]===void 0||c===!0||c===void 0&&s[d]!==!1)&&(s[d||l]=b1(a))}const o=(a,l)=>we.forEach(a,(c,u)=>i(c,u,l));return we.isPlainObject(e)||e instanceof this.constructor?o(e,n):we.isString(e)&&(e=e.trim())&&!ite(e)?o(rte(e),n):e!=null&&i(n,e,r),this}get(e,n){if(e=ny(e),e){const r=we.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return ste(s);if(we.isFunction(n))return n.call(this,s,r);if(we.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ny(e),e){const r=we.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||DI(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=ny(o),o){const a=we.findKey(r,o);a&&(!n||DI(r,r[a],a,n))&&(delete r[a],s=!0)}}return we.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||DI(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return we.forEach(this,(s,i)=>{const o=we.findKey(r,i);if(o){n[o]=b1(s),delete n[i];return}const a=e?ote(i):String(i).trim();a!==i&&delete n[i],n[a]=b1(s),r[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return we.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&we.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[NM]=this[NM]={accessors:{}}).accessors,s=this.prototype;function i(o){const a=ny(o);r[a]||(ate(s,o),r[a]=!0)}return we.isArray(e)?e.forEach(i):i(e),this}}Io.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);we.reduceDescriptors(Io.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});we.freezeMethods(Io);function PI(t,e){const n=this||Qb,r=e||n,s=Io.from(r.headers);let i=r.data;return we.forEach(t,function(a){i=a.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function T4(t){return!!(t&&t.__CANCEL__)}function Jb(t,e,n){Mt.call(this,t??"canceled",Mt.ERR_CANCELED,e,n),this.name="CanceledError"}we.inherits(Jb,Mt,{__CANCEL__:!0});function lte(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Mt("Request failed with status code "+n.status,[Mt.ERR_BAD_REQUEST,Mt.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const cte=Va.hasStandardBrowserEnv?{write(t,e,n,r,s,i){const o=[t+"="+encodeURIComponent(e)];we.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),we.isString(r)&&o.push("path="+r),we.isString(s)&&o.push("domain="+s),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function ute(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function dte(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function k4(t,e){return t&&!ute(e)?dte(t,e):e}const hte=Va.hasStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function s(i){let o=i;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=s(window.location.href),function(o){const a=we.isString(o)?s(o):o;return a.protocol===r.protocol&&a.host===r.host}}():function(){return function(){return!0}}();function fte(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function pte(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const c=Date.now(),u=r[i];o||(o=c),n[s]=l,r[s]=c;let d=i,h=0;for(;d!==s;)h+=n[d++],d=d%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),c-o<e)return;const f=u&&c-u;return f?Math.round(h*1e3/f):void 0}}function $M(t,e){let n=0;const r=pte(50,250);return s=>{const i=s.loaded,o=s.lengthComputable?s.total:void 0,a=i-n,l=r(a),c=i<=o;n=i;const u={loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&c?(o-i)/l:void 0,event:s};u[e?"download":"upload"]=!0,t(u)}}const mte=typeof XMLHttpRequest<"u",gte=mte&&function(t){return new Promise(function(n,r){let s=t.data;const i=Io.from(t.headers).normalize();let{responseType:o,withXSRFToken:a}=t,l;function c(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}let u;if(we.isFormData(s)){if(Va.hasStandardBrowserEnv||Va.hasStandardBrowserWebWorkerEnv)i.setContentType(!1);else if((u=i.getContentType())!==!1){const[m,...g]=u?u.split(";").map(y=>y.trim()).filter(Boolean):[];i.setContentType([m||"multipart/form-data",...g].join("; "))}}let d=new XMLHttpRequest;if(t.auth){const m=t.auth.username||"",g=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";i.set("Authorization","Basic "+btoa(m+":"+g))}const h=k4(t.baseURL,t.url);d.open(t.method.toUpperCase(),S4(h,t.params,t.paramsSerializer),!0),d.timeout=t.timeout;function f(){if(!d)return;const m=Io.from("getAllResponseHeaders"in d&&d.getAllResponseHeaders()),y={data:!o||o==="text"||o==="json"?d.responseText:d.response,status:d.status,statusText:d.statusText,headers:m,config:t,request:d};lte(function(v){n(v),c()},function(v){r(v),c()},y),d=null}if("onloadend"in d?d.onloadend=f:d.onreadystatechange=function(){!d||d.readyState!==4||d.status===0&&!(d.responseURL&&d.responseURL.indexOf("file:")===0)||setTimeout(f)},d.onabort=function(){d&&(r(new Mt("Request aborted",Mt.ECONNABORTED,t,d)),d=null)},d.onerror=function(){r(new Mt("Network Error",Mt.ERR_NETWORK,t,d)),d=null},d.ontimeout=function(){let g=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const y=t.transitional||C4;t.timeoutErrorMessage&&(g=t.timeoutErrorMessage),r(new Mt(g,y.clarifyTimeoutError?Mt.ETIMEDOUT:Mt.ECONNABORTED,t,d)),d=null},Va.hasStandardBrowserEnv&&(a&&we.isFunction(a)&&(a=a(t)),a||a!==!1&&hte(h))){const m=t.xsrfHeaderName&&t.xsrfCookieName&&cte.read(t.xsrfCookieName);m&&i.set(t.xsrfHeaderName,m)}s===void 0&&i.setContentType(null),"setRequestHeader"in d&&we.forEach(i.toJSON(),function(g,y){d.setRequestHeader(y,g)}),we.isUndefined(t.withCredentials)||(d.withCredentials=!!t.withCredentials),o&&o!=="json"&&(d.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&d.addEventListener("progress",$M(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&d.upload&&d.upload.addEventListener("progress",$M(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=m=>{d&&(r(!m||m.type?new Jb(null,t,d):m),d.abort(),d=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const p=fte(h);if(p&&Va.protocols.indexOf(p)===-1){r(new Mt("Unsupported protocol "+p+":",Mt.ERR_BAD_REQUEST,t));return}d.send(s||null)})},F$={http:jee,xhr:gte};we.forEach(F$,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const AM=t=>`- ${t}`,yte=t=>we.isFunction(t)||t===null||t===!1,I4={getAdapter:t=>{t=we.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let i=0;i<e;i++){n=t[i];let o;if(r=n,!yte(n)&&(r=F$[(o=String(n)).toLowerCase()],r===void 0))throw new Mt(`Unknown adapter '${o}'`);if(r)break;s[o||"#"+i]=r}if(!r){const i=Object.entries(s).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(AM).join(`
`):" "+AM(i[0]):"as no adapter specified";throw new Mt("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return r},adapters:F$};function LI(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Jb(null,t)}function RM(t){return LI(t),t.headers=Io.from(t.headers),t.data=PI.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),I4.getAdapter(t.adapter||Qb.adapter)(t).then(function(r){return LI(t),r.data=PI.call(t,t.transformResponse,r),r.headers=Io.from(r.headers),r},function(r){return T4(r)||(LI(t),r&&r.response&&(r.response.data=PI.call(t,t.transformResponse,r.response),r.response.headers=Io.from(r.response.headers))),Promise.reject(r)})}const OM=t=>t instanceof Io?{...t}:t;function kp(t,e){e=e||{};const n={};function r(c,u,d){return we.isPlainObject(c)&&we.isPlainObject(u)?we.merge.call({caseless:d},c,u):we.isPlainObject(u)?we.merge({},u):we.isArray(u)?u.slice():u}function s(c,u,d){if(we.isUndefined(u)){if(!we.isUndefined(c))return r(void 0,c,d)}else return r(c,u,d)}function i(c,u){if(!we.isUndefined(u))return r(void 0,u)}function o(c,u){if(we.isUndefined(u)){if(!we.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function a(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(c,u)=>s(OM(c),OM(u),!0)};return we.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=l[u]||s,h=d(t[u],e[u],u);we.isUndefined(h)&&d!==a||(n[u]=h)}),n}const N4="1.6.8",SR={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{SR[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const DM={};SR.transitional=function(e,n,r){function s(i,o){return"[Axios v"+N4+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,a)=>{if(e===!1)throw new Mt(s(o," has been removed"+(n?" in "+n:"")),Mt.ERR_DEPRECATED);return n&&!DM[o]&&(DM[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,a):!0}};function bte(t,e,n){if(typeof t!="object")throw new Mt("options must be an object",Mt.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new Mt("option "+i+" must be "+l,Mt.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Mt("Unknown option "+i,Mt.ERR_BAD_OPTION)}}const M$={assertOptions:bte,validators:SR},Ac=M$.validators;class Gd{constructor(e){this.defaults=e,this.interceptors={request:new IM,response:new IM}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=kp(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&M$.assertOptions(r,{silentJSONParsing:Ac.transitional(Ac.boolean),forcedJSONParsing:Ac.transitional(Ac.boolean),clarifyTimeoutError:Ac.transitional(Ac.boolean)},!1),s!=null&&(we.isFunction(s)?n.paramsSerializer={serialize:s}:M$.assertOptions(s,{encode:Ac.function,serialize:Ac.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&we.merge(i.common,i[n.method]);i&&we.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=Io.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(m){typeof m.runWhen=="function"&&m.runWhen(n)===!1||(l=l&&m.synchronous,a.unshift(m.fulfilled,m.rejected))});const c=[];this.interceptors.response.forEach(function(m){c.push(m.fulfilled,m.rejected)});let u,d=0,h;if(!l){const p=[RM.bind(this),void 0];for(p.unshift.apply(p,a),p.push.apply(p,c),h=p.length,u=Promise.resolve(n);d<h;)u=u.then(p[d++],p[d++]);return u}h=a.length;let f=n;for(d=0;d<h;){const p=a[d++],m=a[d++];try{f=p(f)}catch(g){m.call(this,g);break}}try{u=RM.call(this,f)}catch(p){return Promise.reject(p)}for(d=0,h=c.length;d<h;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=kp(this.defaults,e);const n=k4(e.baseURL,e.url);return S4(n,e.params,e.paramsSerializer)}}we.forEach(["delete","get","head","options"],function(e){Gd.prototype[e]=function(n,r){return this.request(kp(r||{},{method:e,url:n,data:(r||{}).data}))}});we.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,a){return this.request(kp(a||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Gd.prototype[e]=n(),Gd.prototype[e+"Form"]=n(!0)});class CR{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(a=>{r.subscribe(a),i=a}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,a){r.reason||(r.reason=new Jb(i,o,a),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new CR(function(s){e=s}),cancel:e}}}function vte(t){return function(n){return t.apply(null,n)}}function wte(t){return we.isObject(t)&&t.isAxiosError===!0}const z$={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(z$).forEach(([t,e])=>{z$[e]=t});function $4(t){const e=new Gd(t),n=u4(Gd.prototype.request,e);return we.extend(n,Gd.prototype,e,{allOwnKeys:!0}),we.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return $4(kp(t,s))},n}const bn=$4(Qb);bn.Axios=Gd;bn.CanceledError=Jb;bn.CancelToken=CR;bn.isCancel=T4;bn.VERSION=N4;bn.toFormData=NC;bn.AxiosError=Mt;bn.Cancel=bn.CanceledError;bn.all=function(e){return Promise.all(e)};bn.spread=vte;bn.isAxiosError=wte;bn.mergeConfig=kp;bn.AxiosHeaders=Io;bn.formToJSON=t=>_4(we.isHTMLForm(t)?new FormData(t):t);bn.getAdapter=I4.getAdapter;bn.HttpStatusCode=z$;bn.default=bn;function A4(){const[t,e]=N.useState();return xC(),N.useEffect(()=>{bn.get("/api/codingProblems").then(n=>n.data).then(n=>(n.map(r=>{r.code="",r.sectionSwitchType="coding"}),e(n)))},[]),t}const FI=[{id:Pd(),sectionType:"coding",sectionName:"Coding"},{id:Pd(),sectionType:"MCQ",sectionName:"Logical Aptitude"}],xte={questionBank:FI,codingQuestions:null,currentPage:`${FI[0].sectionName}`,currentPageType:`${FI[0].sectionType}`,authStatus:!1,userDetails:null},R4=YZ({name:"assessmentQuestions",initialState:xte,reducers:{setQuestionSection:(t,e)=>{console.log(e),t.currentPage!=e.payload[0]&&(t.currentPage=e.payload[0],t.currentPageType=e.payload[1])},setCodingQuestion:(t,e)=>{console.log(e.payload),t.questionBank=e.payload},setLoginStatus:(t,e)=>{t.authStatus||(t.authStatus=!0),console.log(e.payload),t.userDetails=e.payload},setLogoutStatus:t=>{t.authStatus=!1,t.userDetails=null}}}),{setQuestionSection:Ste,setCodingQuestion:kHe,setLoginStatus:Cte,setLogoutStatus:IHe}=R4.actions,Ete=R4.reducer;var _te={exports:{}};(function(t,e){(function(n,r){t.exports=r(N)})(Mo,n=>(()=>{var r={703:(a,l,c)=>{var u=c(414);function d(){}function h(){}h.resetWarningCache=d,a.exports=function(){function f(g,y,b,v,w,C){if(C!==u){var _=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw _.name="Invariant Violation",_}}function p(){return f}f.isRequired=f;var m={array:f,bigint:f,bool:f,func:f,number:f,object:f,string:f,symbol:f,any:f,arrayOf:p,element:f,elementType:f,instanceOf:p,node:f,objectOf:p,oneOf:p,oneOfType:p,shape:p,exact:p,checkPropTypes:h,resetWarningCache:d};return m.PropTypes=m,m}},697:(a,l,c)=>{a.exports=c(703)()},414:a=>{a.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},98:a=>{a.exports=n}},s={};function i(a){var l=s[a];if(l!==void 0)return l.exports;var c=s[a]={exports:{}};return r[a](c,c.exports,i),c.exports}i.n=a=>{var l=a&&a.__esModule?()=>a.default:()=>a;return i.d(l,{a:l}),l},i.d=(a,l)=>{for(var c in l)i.o(l,c)&&!i.o(a,c)&&Object.defineProperty(a,c,{enumerable:!0,get:l[c]})},i.o=(a,l)=>Object.prototype.hasOwnProperty.call(a,l),i.r=a=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var o={};return(()=>{i.r(o),i.d(o,{default:()=>z});var a=i(98),l=i.n(a),c=i(697),u=i.n(c);function d(){return d=Object.assign?Object.assign.bind():function(B){for(var j=1;j<arguments.length;j++){var G=arguments[j];for(var U in G)Object.prototype.hasOwnProperty.call(G,U)&&(B[U]=G[U])}return B},d.apply(this,arguments)}var h=function(B){var j=B.pageClassName,G=B.pageLinkClassName,U=B.page,Q=B.selected,se=B.activeClassName,V=B.activeLinkClassName,W=B.getEventListener,L=B.pageSelectedHandler,J=B.href,Z=B.extraAriaContext,ie=B.pageLabelBuilder,ue=B.rel,de=B.ariaLabel||"Page "+U+(Z?" "+Z:""),ye=null;return Q&&(ye="page",de=B.ariaLabel||"Page "+U+" is your current page",j=j!==void 0?j+" "+se:se,G!==void 0?V!==void 0&&(G=G+" "+V):G=V),l().createElement("li",{className:j},l().createElement("a",d({rel:ue,role:J?void 0:"button",className:G,href:J,tabIndex:Q?"-1":"0","aria-label":de,"aria-current":ye,onKeyPress:L},W(L)),ie(U)))};h.propTypes={pageSelectedHandler:u().func.isRequired,selected:u().bool.isRequired,pageClassName:u().string,pageLinkClassName:u().string,activeClassName:u().string,activeLinkClassName:u().string,extraAriaContext:u().string,href:u().string,ariaLabel:u().string,page:u().number.isRequired,getEventListener:u().func.isRequired,pageLabelBuilder:u().func.isRequired,rel:u().string};const f=h;function p(){return p=Object.assign?Object.assign.bind():function(B){for(var j=1;j<arguments.length;j++){var G=arguments[j];for(var U in G)Object.prototype.hasOwnProperty.call(G,U)&&(B[U]=G[U])}return B},p.apply(this,arguments)}var m=function(B){var j=B.breakLabel,G=B.breakAriaLabel,U=B.breakClassName,Q=B.breakLinkClassName,se=B.breakHandler,V=B.getEventListener,W=U||"break";return l().createElement("li",{className:W},l().createElement("a",p({className:Q,role:"button",tabIndex:"0","aria-label":G,onKeyPress:se},V(se)),j))};m.propTypes={breakLabel:u().oneOfType([u().string,u().node]),breakAriaLabel:u().string,breakClassName:u().string,breakLinkClassName:u().string,breakHandler:u().func.isRequired,getEventListener:u().func.isRequired};const g=m;function y(B){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return B??j}function b(B){return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(j){return typeof j}:function(j){return j&&typeof Symbol=="function"&&j.constructor===Symbol&&j!==Symbol.prototype?"symbol":typeof j},b(B)}function v(){return v=Object.assign?Object.assign.bind():function(B){for(var j=1;j<arguments.length;j++){var G=arguments[j];for(var U in G)Object.prototype.hasOwnProperty.call(G,U)&&(B[U]=G[U])}return B},v.apply(this,arguments)}function w(B,j){for(var G=0;G<j.length;G++){var U=j[G];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(B,U.key,U)}}function C(B,j){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(G,U){return G.__proto__=U,G},C(B,j)}function _(B,j){if(j&&(b(j)==="object"||typeof j=="function"))return j;if(j!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E(B)}function E(B){if(B===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return B}function I(B){return I=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(j){return j.__proto__||Object.getPrototypeOf(j)},I(B)}function O(B,j,G){return j in B?Object.defineProperty(B,j,{value:G,enumerable:!0,configurable:!0,writable:!0}):B[j]=G,B}var R=function(B){(function(W,L){if(typeof L!="function"&&L!==null)throw new TypeError("Super expression must either be null or a function");W.prototype=Object.create(L&&L.prototype,{constructor:{value:W,writable:!0,configurable:!0}}),Object.defineProperty(W,"prototype",{writable:!1}),L&&C(W,L)})(V,B);var j,G,U,Q,se=(U=V,Q=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(),function(){var W,L=I(U);if(Q){var J=I(this).constructor;W=Reflect.construct(L,arguments,J)}else W=L.apply(this,arguments);return _(this,W)});function V(W){var L,J;return function(Z,ie){if(!(Z instanceof ie))throw new TypeError("Cannot call a class as a function")}(this,V),O(E(L=se.call(this,W)),"handlePreviousPage",function(Z){var ie=L.state.selected;L.handleClick(Z,null,ie>0?ie-1:void 0,{isPrevious:!0})}),O(E(L),"handleNextPage",function(Z){var ie=L.state.selected,ue=L.props.pageCount;L.handleClick(Z,null,ie<ue-1?ie+1:void 0,{isNext:!0})}),O(E(L),"handlePageSelected",function(Z,ie){if(L.state.selected===Z)return L.callActiveCallback(Z),void L.handleClick(ie,null,void 0,{isActive:!0});L.handleClick(ie,null,Z)}),O(E(L),"handlePageChange",function(Z){L.state.selected!==Z&&(L.setState({selected:Z}),L.callCallback(Z))}),O(E(L),"getEventListener",function(Z){return O({},L.props.eventListener,Z)}),O(E(L),"handleClick",function(Z,ie,ue){var de=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},ye=de.isPrevious,Ee=ye!==void 0&&ye,ge=de.isNext,Pe=ge!==void 0&&ge,We=de.isBreak,le=We!==void 0&&We,Ve=de.isActive,Je=Ve!==void 0&&Ve;Z.preventDefault?Z.preventDefault():Z.returnValue=!1;var at=L.state.selected,_e=L.props.onClick,ze=ue;if(_e){var it=_e({index:ie,selected:at,nextSelectedPage:ue,event:Z,isPrevious:Ee,isNext:Pe,isBreak:le,isActive:Je});if(it===!1)return;Number.isInteger(it)&&(ze=it)}ze!==void 0&&L.handlePageChange(ze)}),O(E(L),"handleBreakClick",function(Z,ie){var ue=L.state.selected;L.handleClick(ie,Z,ue<Z?L.getForwardJump():L.getBackwardJump(),{isBreak:!0})}),O(E(L),"callCallback",function(Z){L.props.onPageChange!==void 0&&typeof L.props.onPageChange=="function"&&L.props.onPageChange({selected:Z})}),O(E(L),"callActiveCallback",function(Z){L.props.onPageActive!==void 0&&typeof L.props.onPageActive=="function"&&L.props.onPageActive({selected:Z})}),O(E(L),"getElementPageRel",function(Z){var ie=L.state.selected,ue=L.props,de=ue.nextPageRel,ye=ue.prevPageRel,Ee=ue.selectedPageRel;return ie-1===Z?ye:ie===Z?Ee:ie+1===Z?de:void 0}),O(E(L),"pagination",function(){var Z=[],ie=L.props,ue=ie.pageRangeDisplayed,de=ie.pageCount,ye=ie.marginPagesDisplayed,Ee=ie.breakLabel,ge=ie.breakClassName,Pe=ie.breakLinkClassName,We=ie.breakAriaLabels,le=L.state.selected;if(de<=ue)for(var Ve=0;Ve<de;Ve++)Z.push(L.getPageElement(Ve));else{var Je=ue/2,at=ue-Je;le>de-ue/2?Je=ue-(at=de-le):le<ue/2&&(at=ue-(Je=le));var _e,ze,it=function(Bt){return L.getPageElement(Bt)},Xe=[];for(_e=0;_e<de;_e++){var xn=_e+1;if(xn<=ye)Xe.push({type:"page",index:_e,display:it(_e)});else if(xn>de-ye)Xe.push({type:"page",index:_e,display:it(_e)});else if(_e>=le-Je&&_e<=le+(le===0&&ue>1?at-1:at))Xe.push({type:"page",index:_e,display:it(_e)});else if(Ee&&Xe.length>0&&Xe[Xe.length-1].display!==ze&&(ue>0||ye>0)){var Ne=_e<le?We.backward:We.forward;ze=l().createElement(g,{key:_e,breakAriaLabel:Ne,breakLabel:Ee,breakClassName:ge,breakLinkClassName:Pe,breakHandler:L.handleBreakClick.bind(null,_e),getEventListener:L.getEventListener}),Xe.push({type:"break",index:_e,display:ze})}}Xe.forEach(function(Bt,At){var Sn=Bt;Bt.type==="break"&&Xe[At-1]&&Xe[At-1].type==="page"&&Xe[At+1]&&Xe[At+1].type==="page"&&Xe[At+1].index-Xe[At-1].index<=2&&(Sn={type:"page",index:Bt.index,display:it(Bt.index)}),Z.push(Sn.display)})}return Z}),W.initialPage!==void 0&&W.forcePage!==void 0&&console.warn("(react-paginate): Both initialPage (".concat(W.initialPage,") and forcePage (").concat(W.forcePage,") props are provided, which is discouraged.")+` Use exclusively forcePage prop for a controlled component.
See https://reactjs.org/docs/forms.html#controlled-components`),J=W.initialPage?W.initialPage:W.forcePage?W.forcePage:0,L.state={selected:J},L}return j=V,(G=[{key:"componentDidMount",value:function(){var W=this.props,L=W.initialPage,J=W.disableInitialCallback,Z=W.extraAriaContext,ie=W.pageCount,ue=W.forcePage;L===void 0||J||this.callCallback(L),Z&&console.warn("DEPRECATED (react-paginate): The extraAriaContext prop is deprecated. You should now use the ariaLabelBuilder instead."),Number.isInteger(ie)||console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(ie,"). Did you forget a Math.ceil()?")),L!==void 0&&L>ie-1&&console.warn("(react-paginate): The initialPage prop provided is greater than the maximum page index from pageCount prop (".concat(L," > ").concat(ie-1,").")),ue!==void 0&&ue>ie-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(ue," > ").concat(ie-1,")."))}},{key:"componentDidUpdate",value:function(W){this.props.forcePage!==void 0&&this.props.forcePage!==W.forcePage&&(this.props.forcePage>this.props.pageCount-1&&console.warn("(react-paginate): The forcePage prop provided is greater than the maximum page index from pageCount prop (".concat(this.props.forcePage," > ").concat(this.props.pageCount-1,").")),this.setState({selected:this.props.forcePage})),Number.isInteger(W.pageCount)&&!Number.isInteger(this.props.pageCount)&&console.warn("(react-paginate): The pageCount prop value provided is not an integer (".concat(this.props.pageCount,"). Did you forget a Math.ceil()?"))}},{key:"getForwardJump",value:function(){var W=this.state.selected,L=this.props,J=L.pageCount,Z=W+L.pageRangeDisplayed;return Z>=J?J-1:Z}},{key:"getBackwardJump",value:function(){var W=this.state.selected-this.props.pageRangeDisplayed;return W<0?0:W}},{key:"getElementHref",value:function(W){var L=this.props,J=L.hrefBuilder,Z=L.pageCount,ie=L.hrefAllControls;if(J)return ie||W>=0&&W<Z?J(W+1,Z,this.state.selected):void 0}},{key:"ariaLabelBuilder",value:function(W){var L=W===this.state.selected;if(this.props.ariaLabelBuilder&&W>=0&&W<this.props.pageCount){var J=this.props.ariaLabelBuilder(W+1,L);return this.props.extraAriaContext&&!L&&(J=J+" "+this.props.extraAriaContext),J}}},{key:"getPageElement",value:function(W){var L=this.state.selected,J=this.props,Z=J.pageClassName,ie=J.pageLinkClassName,ue=J.activeClassName,de=J.activeLinkClassName,ye=J.extraAriaContext,Ee=J.pageLabelBuilder;return l().createElement(f,{key:W,pageSelectedHandler:this.handlePageSelected.bind(null,W),selected:L===W,rel:this.getElementPageRel(W),pageClassName:Z,pageLinkClassName:ie,activeClassName:ue,activeLinkClassName:de,extraAriaContext:ye,href:this.getElementHref(W),ariaLabel:this.ariaLabelBuilder(W),page:W+1,pageLabelBuilder:Ee,getEventListener:this.getEventListener})}},{key:"render",value:function(){var W=this.props.renderOnZeroPageCount;if(this.props.pageCount===0&&W!==void 0)return W&&W(this.props);var L=this.props,J=L.disabledClassName,Z=L.disabledLinkClassName,ie=L.pageCount,ue=L.className,de=L.containerClassName,ye=L.previousLabel,Ee=L.previousClassName,ge=L.previousLinkClassName,Pe=L.previousAriaLabel,We=L.prevRel,le=L.nextLabel,Ve=L.nextClassName,Je=L.nextLinkClassName,at=L.nextAriaLabel,_e=L.nextRel,ze=this.state.selected,it=ze===0,Xe=ze===ie-1,xn="".concat(y(Ee)).concat(it?" ".concat(y(J)):""),Ne="".concat(y(Ve)).concat(Xe?" ".concat(y(J)):""),Bt="".concat(y(ge)).concat(it?" ".concat(y(Z)):""),At="".concat(y(Je)).concat(Xe?" ".concat(y(Z)):""),Sn=it?"true":"false",Wt=Xe?"true":"false";return l().createElement("ul",{className:ue||de,role:"navigation","aria-label":"Pagination"},l().createElement("li",{className:xn},l().createElement("a",v({className:Bt,href:this.getElementHref(ze-1),tabIndex:it?"-1":"0",role:"button",onKeyPress:this.handlePreviousPage,"aria-disabled":Sn,"aria-label":Pe,rel:We},this.getEventListener(this.handlePreviousPage)),ye)),this.pagination(),l().createElement("li",{className:Ne},l().createElement("a",v({className:At,href:this.getElementHref(ze+1),tabIndex:Xe?"-1":"0",role:"button",onKeyPress:this.handleNextPage,"aria-disabled":Wt,"aria-label":at,rel:_e},this.getEventListener(this.handleNextPage)),le)))}}])&&w(j.prototype,G),Object.defineProperty(j,"prototype",{writable:!1}),V}(a.Component);O(R,"propTypes",{pageCount:u().number.isRequired,pageRangeDisplayed:u().number,marginPagesDisplayed:u().number,previousLabel:u().node,previousAriaLabel:u().string,prevPageRel:u().string,prevRel:u().string,nextLabel:u().node,nextAriaLabel:u().string,nextPageRel:u().string,nextRel:u().string,breakLabel:u().oneOfType([u().string,u().node]),breakAriaLabels:u().shape({forward:u().string,backward:u().string}),hrefBuilder:u().func,hrefAllControls:u().bool,onPageChange:u().func,onPageActive:u().func,onClick:u().func,initialPage:u().number,forcePage:u().number,disableInitialCallback:u().bool,containerClassName:u().string,className:u().string,pageClassName:u().string,pageLinkClassName:u().string,pageLabelBuilder:u().func,activeClassName:u().string,activeLinkClassName:u().string,previousClassName:u().string,nextClassName:u().string,previousLinkClassName:u().string,nextLinkClassName:u().string,disabledClassName:u().string,disabledLinkClassName:u().string,breakClassName:u().string,breakLinkClassName:u().string,extraAriaContext:u().string,ariaLabelBuilder:u().func,eventListener:u().string,renderOnZeroPageCount:u().func,selectedPageRel:u().string}),O(R,"defaultProps",{pageRangeDisplayed:2,marginPagesDisplayed:3,activeClassName:"selected",previousLabel:"Previous",previousClassName:"previous",previousAriaLabel:"Previous page",prevPageRel:"prev",prevRel:"prev",nextLabel:"Next",nextClassName:"next",nextAriaLabel:"Next page",nextPageRel:"next",nextRel:"next",breakLabel:"...",breakAriaLabels:{forward:"Jump forward",backward:"Jump backward"},disabledClassName:"disabled",disableInitialCallback:!1,pageLabelBuilder:function(B){return B},eventListener:"onClick",renderOnZeroPageCount:void 0,selectedPageRel:"canonical",hrefAllControls:!1});const z=R})(),o})())})(_te);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tte=1e-7,kte=1e-4;class ER{constructor(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap,this.dataIdsCount=0}get(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)}set(e,n){this.dataIdsCount++,this.data.set(e,n)}has(e){return this.data.has(e)}delete(e){return this.dataIdsCount--,this.data.delete(e)}numDataIds(){return this.dataIdsCount}}class $C{refCount(e){return ei("refCount")}incRef(e){return ei("incRef")}timerAvailable(){return!0}time(e){return ei("time")}read(e){return ei("read")}readSync(e){return ei("readSync")}readToGPU(e,n){return ei("readToGPU")}numDataIds(){return ei("numDataIds")}disposeData(e,n){return ei("disposeData")}write(e,n,r){return ei("write")}move(e,n,r,s,i){return ei("move")}createTensorFromGPUData(e,n,r){return ei("createTensorFromGPUData")}memory(){return ei("memory")}floatPrecision(){return ei("floatPrecision")}epsilon(){return this.floatPrecision()===32?Tte:kte}dispose(){return ei("dispose")}}function ei(t){throw new Error(`'${t}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _R(t){let e=t.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Ll(t,e,n)}function Ite(t,e){if(t.length!==e.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${t.length}Second array length was ${e.length}`);let n=t.length,r=0;for(;n>0;)r=Math.random()*n|0,n--,Ll(t,n,r),Ll(e,n,r)}function yu(t,e,n){return Math.max(t,Math.min(e,n))}function AC(t){return t%2===0?t:t+1}function Ll(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function O4(t){let e=0;for(let n=0;n<t.length;n++)e+=t[n];return e}function Nte(t,e){const n=Math.random();return e*n+(1-n)*t}function $te(t,e){let n=0;for(let r=0;r<t.length;r++){const s=Number(t[r])-Number(e[r]);n+=s*s}return n}function P(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Gr(t,e,n=""){P(Nt(t,e),()=>n+` Shapes ${t} and ${e} must match`)}function Oh(t){P(t!=null,()=>"The input to the tensor constructor must be a non-null value.")}function fe(t){if(t.length===0)return 1;let e=t[0];for(let n=1;n<t.length;n++)e*=t[n];return e}function Ate(t){return t.length===0}function D4(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==null&&e[n]!==null&&t[n]!==e[n])return!1;return!0}function Nt(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function ah(t){return t%1===0}function Rte(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;{const e=Math.exp(2*t);return(e-1)/(e+1)}}function uS(t){const e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Ote(t){const e=new Uint32Array(t);for(let n=0;n<t;++n)e[n]=n;return _R(e),e}function Kd(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function B$(t,e=s=>0,n,r){return new Promise((s,i)=>{let o=0;const a=()=>{if(t()){s();return}o++;const l=e(o);if(n!=null&&o>=n){i();return}r!=null?r(a,l):setTimeout(a,l)};a()})}function TR(t,e){let n=1,r=-1;for(let i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${r} and dim ${i}`);r=i}else if(t[i]<0)throw Error(`Shapes can not be < 0. Found ${t[i]} at dim ${i}`);if(r===-1){if(e>0&&e!==n)throw Error(`Size(${e}) must match the product of shape ${t}`);return t}if(n===0)throw Error(`Cannot infer the missing size in [${t}] when there are 0 elements`);if(e%n!==0)throw Error(`The implicit shape can't be a fractional number. Got ${e} / ${n}`);const s=t.slice();return s[r]=e/n,s}function Tt(t,e){const n=e.length;return t=t==null?e.map((r,s)=>s):[].concat(t),P(t.every(r=>r>=-n&&r<n),()=>`All values in axis param must be in range [-${n}, ${n}) but got axis ${t}`),P(t.every(r=>ah(r)),()=>`All values in axis param must be integers but got axis ${t}`),t.map(r=>r<0?n+r:r)}function lc(t,e){const n=[],r=[],s=e!=null&&Array.isArray(e)&&e.length===0,i=e==null||s?null:Tt(e,t).sort();let o=0;for(let a=0;a<t.length;++a){if(i!=null){if(i[o]===a&&t[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${t[a]}' is not 1`);(i[o]==null||i[o]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),i[o]<=a&&o++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function Pr(t,e){return Yn(t,e)}function Yn(t,e){let n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else if(t==="string")n=new Array(e);else throw new Error(`Unknown data type ${t}`);return n}function P4(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(isNaN(r)||!isFinite(r))throw Error(`A tensor of type ${e} being uploaded contains ${r}.`)}}function L4(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function kR(t,e){return!(e==="complex64"||e==="float32"&&t!=="complex64"||e==="int32"&&t!=="float32"&&t!=="complex64"||e==="bool"&&t==="bool")}function db(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error(`Unknown dtype ${t}`)}function F4(t){if(t==null)return 0;let e=0;return t.forEach(n=>e+=n.length),e}function Ua(t){return typeof t=="string"||t instanceof String}function M4(t){return typeof t=="boolean"}function dS(t){return typeof t=="number"}function Dh(t){return Array.isArray(t)?Dh(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray?"int32":dS(t)?"float32":Ua(t)?"string":M4(t)?"bool":"float32"}function bu(t){return!!(t&&t.constructor&&t.call&&t.apply)}function hS(t,e){for(let n=e;n<t;++n)if(t%n===0)return n;return t}function et(t){const e=t.length;if(e<2)return[];const n=new Array(e-1);n[e-2]=t[e-1];for(let r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function z4(t,e,n,r=!1){const s=new Array;if(e.length===1){const i=e[0]*(r?2:1);for(let o=0;o<i;o++)s[o]=n[t+o]}else{const i=e[0],o=e.slice(1),a=o.reduce((l,c)=>l*c)*(r?2:1);for(let l=0;l<i;l++)s[l]=z4(t+l*a,o,n,r)}return s}function Bi(t,e,n=!1){if(t.length===0)return e[0];const r=t.reduce((s,i)=>s*i)*(n?2:1);if(r===0)return[];if(r!==e.length)throw new Error(`[${t}] does not match the input size ${e.length}${n?" for a complex tensor":""}.`);return z4(0,t,e,n)}function B4(t,e){if(Array.isArray(t))return t;if(e==="float32")return t instanceof Float32Array?t:new Float32Array(t);if(e==="int32")return t instanceof Int32Array?t:new Int32Array(t);if(e==="bool"||e==="string")return Uint8Array.from(new Int32Array(t));throw new Error(`Unknown dtype ${e}`)}function RC(t,e){const n=Hr(t,e);for(let r=0;r<n.length;r++)n[r]=1;return n}function Hr(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error(`Unknown data type ${e}`)}function IR(t,e){const n=t.reduce((r,s)=>r*s,1);if(e==null||e==="float32")return Bi(t,new Float32Array(n));if(e==="int32")return Bi(t,new Int32Array(n));if(e==="bool")return Bi(t,new Uint8Array(n));throw new Error(`Unknown data type ${e}`)}function xi(t){t.forEach(e=>{P(Number.isInteger(e)&&e>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${t}].`)})}function ua(t,e,n){if(e===0)return 0;if(e===1)return t[0];let r=t[t.length-1];for(let s=0;s<t.length-1;++s)r+=n[s]*t[s];return r}function Ph(t,e,n){if(e===0)return[];if(e===1)return[t];const r=new Array(e);for(let s=0;s<r.length-1;++s)r[s]=Math.floor(t/n[s]),t-=r[s]*n[s];return r[r.length-1]=t,r}function vu(t){return t&&t.then&&typeof t.then=="function"}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PM="tfjsflags";class j4{constructor(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=Dte,this.populateURLFlags()}setPlatform(e,n){this.platform!=null&&(ce().getBool("IS_TEST")||ce().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${e}.`)),this.platformName=e,this.platform=n}registerFlag(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){const s=this.urlFlags[e];ce().getBool("IS_TEST")||ce().getBool("PROD")||console.warn(`Setting feature override from URL ${e}: ${s}.`),this.set(e,s)}}async getAsync(e){return e in this.flags?this.flags[e]:(this.flags[e]=await this.evaluateFlag(e),this.flags[e])}get(e){if(e in this.flags)return this.flags[e];const n=this.evaluateFlag(e);if(vu(n))throw new Error(`Flag ${e} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[e]=n,this.flags[e]}getNumber(e){return this.get(e)}getBool(e){return this.get(e)}getString(e){return this.get(e)}getFlags(){return this.flags}get features(){return this.flags}set(e,n){if(this.flagRegistry[e]==null)throw new Error(`Cannot set flag ${e} as it has not been registered.`);this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)}evaluateFlag(e){if(this.flagRegistry[e]==null)throw new Error(`Cannot evaluate flag '${e}': no evaluation function found.`);return this.flagRegistry[e].evaluationFn()}setFlags(e){this.flags=Object.assign({},e)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;const e=this.getQueryParams(this.global.location.search);PM in e&&e[PM].split(",").forEach(r=>{const[s,i]=r.split(":");this.urlFlags[s]=Lte(s,i)})}}function Dte(t){const e={};return t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(n,...r)=>(Pte(e,r[0],r[1]),r.join("="))),e}function Pte(t,e,n){t[decodeURIComponent(e)]=decodeURIComponent(n||"")}function Lte(t,e){const n=e.toLowerCase();return n==="true"||n==="false"?n==="true":`${+n}`===n?+n:e}function ce(){return NR}let NR=null;function Fte(t){NR=t}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let MI;function V4(){if(MI==null){let t;if(typeof window<"u")t=window;else if(typeof global<"u")t=global;else if(typeof process<"u")t=process;else if(typeof self<"u")t=self;else throw new Error("Could not find a global object");MI=t}return MI}function Mte(){const t=V4();return t._tfGlobals==null&&(t._tfGlobals=new Map),t._tfGlobals}function $R(t,e){const n=Mte();if(n.has(t))return n.get(t);{const r=e();return n.set(t,r),n.get(t)}}const Zb="Abs",nm="Acos",rm="Acosh",Lh="Add",ev="AddN",OC="All",DC="Any",tv="ArgMax",nv="ArgMin",sm="Asin",im="Asinh",om="Atan",am="Atanh",lm="Atan2",rv="AvgPool",PC="AvgPoolGrad",sv="AvgPool3D",LC="AvgPool3DGrad",iv="BatchMatMul",ov="BatchToSpaceND",FC="Bincount",av="BitwiseAnd",U4="BroadcastTo",MC="BroadcastArgs",cm="Cast",um="Ceil",dm="ClipByValue",zC="Complex",lv="ComplexAbs",cv="Concat",uv="Conv2D",BC="Conv2DBackpropFilter",dv="Conv2DBackpropInput",hv="Conv3D",jC="Conv3DBackpropFilterV2",VC="Conv3DBackpropInputV2",hm="Cos",fm="Cosh",UC="Cumprod",fv="Cumsum",WC="CropAndResize",HC="DenseBincount",GC="DepthToSpace",pv="DepthwiseConv2dNative",KC="DepthwiseConv2dNativeBackpropFilter",qC="DepthwiseConv2dNativeBackpropInput",XC="Diag",mv="Dilation2D",fS="Dilation2DBackpropInput",pS="Dilation2DBackpropFilter",YC="Draw",pm="RealDiv",QC="Einsum",mm="Elu",JC="EluGrad",gm="Erf",gv="Equal",ym="Exp",yv="ExpandDims",bm="Expm1",ZC="FFT",eE="Fill",tE="FlipLeftRight",vm="Floor",wm="FloorDiv",bv="FusedBatchNorm",vv="GatherV2",nE="GatherNd",wv="Greater",xm="GreaterEqual",Sm="Identity",rE="IFFT",sE="Imag",Cm="IsFinite",Em="IsInf",_m="IsNan",xv="LeakyRelu",Sv="Less",Cv="LessEqual",iE="LinSpace",Tm="Log",km="Log1p",Ev="LogicalAnd",_v="LogicalNot",Tv="LogicalOr",zte="LogicalXor",W4="LogSoftmax",Bte="LowerBound",kv="LRN",oE="LRNGrad",jte="MatrixBandPart",Iv="Max",Im="Maximum",Nv="MaxPool",aE="MaxPoolGrad",$v="MaxPool3D",lE="MaxPool3DGrad",cE="MaxPoolWithArgmax",Av="Mean",Rv="Min",Nm="Minimum",Ov="MirrorPad",$m="Mod",uE="Multinomial",Am="Multiply",Dv="Neg",Pv="NotEqual",dE="NonMaxSuppressionV3",hE="NonMaxSuppressionV4",fE="NonMaxSuppressionV5",Lv="OnesLike",Fv="OneHot",Mv="Pack",zv="PadV2",Vte="Pool",Rm="Pow",Bv="Prelu",jv="Prod",pE="RaggedGather",mE="RaggedRange",gE="RaggedTensorToTensor",yE="Range",bE="Real",Om="Reciprocal",Dm="Relu",Vv="Reshape",Uv="ResizeNearestNeighbor",vE="ResizeNearestNeighborGrad",Wv="ResizeBilinear",wE="ResizeBilinearGrad",Pm="Relu6",Hv="Reverse",Lm="Round",Fm="Rsqrt",xE="ScatterNd",SE="TensorScatterUpdate",CE="SearchSorted",Gv="Select",Mm="Selu",Kv="Slice",zm="Sin",Bm="Sinh",jm="Sign",Vm="Sigmoid",Um="Softplus",Wm="Sqrt",qv="Sum",Xv="SpaceToBatchND",Yv="SplitV",Qv="Softmax",EE="SparseFillEmptyRows",_E="SparseReshape",TE="SparseSegmentMean",kE="SparseSegmentSum",IE="SparseToDense",Hm="SquaredDifference",NE="Square",Jv="StaticRegexReplace",$E="StridedSlice",AE="StringNGrams",RE="StringSplit",OE="StringToHashBucketFast",Gm="Sub",Km="Tan",qm="Tanh",Xm="Tile",DE="TopK",PE="Transform",qd="Transpose",LE="Unique",Zv="Unpack",e0="UnsortedSegmentSum",Ute="UpperBound",t0="ZerosLike",Ym="Step",mS="FromPixels",FE="RotateWithOffset",hb="_FusedMatMul",fb="FusedConv2D",pb="FusedDepthwiseConv2D";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ai(...t){ce().getBool("IS_TEST")||ce().getBool("PROD")||console.warn(...t)}function Wte(...t){ce().getBool("IS_TEST")||ce().getBool("PROD")||console.log(...t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ip=$R("kernelRegistry",()=>new Map),mb=$R("gradRegistry",()=>new Map);function gb(t,e){const n=AR(t,e);return Ip.get(n)}function j$(t){return mb.get(t)}function gS(t){const e=Ip.entries(),n=[];for(;;){const{done:r,value:s}=e.next();if(r)break;const[i,o]=s,[a]=i.split("_");a===t&&n.push(o)}return n}function ME(t){const{kernelName:e,backendName:n}=t,r=AR(e,n);Ip.has(r)&&Ai(`The kernel '${e}' for backend '${n}' is already registered`),Ip.set(r,t)}function H4(t){const{kernelName:e}=t;mb.has(e)&&ce().getBool("DEBUG")&&Ai(`Overriding the gradient for '${e}'`),mb.set(e,t)}function Hte(t,e){const n=AR(t,e);if(!Ip.has(n))throw new Error(`The kernel '${t}' for backend '${e}' is not registered`);Ip.delete(n)}function Gte(t){if(!mb.has(t))throw new Error(`The gradient '${t}' for backend is not registered`);mb.delete(t)}function Kte(t,e){gS(t).forEach(r=>{const s=Object.assign({},r,{backendName:e});ME(s)})}function AR(t,e){return`${e}_${t}`}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function G4(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray}var K4=In,xo=null;try{xo=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function In(t,e,n){this.low=t|0,this.high=e|0,this.unsigned=!!n}In.prototype.__isLong__;Object.defineProperty(In.prototype,"__isLong__",{value:!0});function Si(t){return(t&&t.__isLong__)===!0}In.isLong=Si;var LM={},FM={};function Fh(t,e){var n,r,s;return e?(t>>>=0,(s=0<=t&&t<256)&&(r=FM[t],r)?r:(n=Nn(t,(t|0)<0?-1:0,!0),s&&(FM[t]=n),n)):(t|=0,(s=-128<=t&&t<128)&&(r=LM[t],r)?r:(n=Nn(t,t<0?-1:0,!1),s&&(LM[t]=n),n))}In.fromInt=Fh;function So(t,e){if(isNaN(t))return e?Ld:Co;if(e){if(t<0)return Ld;if(t>=q4)return Q4}else{if(t<=-zM)return oi;if(t+1>=zM)return Y4}return t<0?So(-t,e).neg():Nn(t%Np|0,t/Np|0,e)}In.fromNumber=So;function Nn(t,e,n){return new In(t,e,n)}In.fromBits=Nn;var yS=Math.pow;function RR(t,e,n){if(t.length===0)throw Error("empty string");if(t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return Co;if(typeof e=="number"?(n=e,e=!1):e=!!e,n=n||10,n<2||36<n)throw RangeError("radix");var r;if((r=t.indexOf("-"))>0)throw Error("interior hyphen");if(r===0)return RR(t.substring(1),e,n).neg();for(var s=So(yS(n,8)),i=Co,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),l=parseInt(t.substring(o,o+a),n);if(a<8){var c=So(yS(n,a));i=i.mul(c).add(So(l))}else i=i.mul(s),i=i.add(So(l))}return i.unsigned=e,i}In.fromString=RR;function va(t,e){return typeof t=="number"?So(t,e):typeof t=="string"?RR(t,e):Nn(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}In.fromValue=va;var MM=65536,qte=1<<24,Np=MM*MM,q4=Np*Np,zM=q4/2,BM=Fh(qte),Co=Fh(0);In.ZERO=Co;var Ld=Fh(0,!0);In.UZERO=Ld;var Jf=Fh(1);In.ONE=Jf;var X4=Fh(1,!0);In.UONE=X4;var V$=Fh(-1);In.NEG_ONE=V$;var Y4=Nn(-1,2147483647,!1);In.MAX_VALUE=Y4;var Q4=Nn(-1,-1,!0);In.MAX_UNSIGNED_VALUE=Q4;var oi=Nn(0,-2147483648,!1);In.MIN_VALUE=oi;var De=In.prototype;De.toInt=function(){return this.unsigned?this.low>>>0:this.low};De.toNumber=function(){return this.unsigned?(this.high>>>0)*Np+(this.low>>>0):this.high*Np+(this.low>>>0)};De.toString=function(e){if(e=e||10,e<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(oi)){var n=So(e),r=this.div(n),s=r.mul(n).sub(this);return r.toString(e)+s.toInt().toString(e)}else return"-"+this.neg().toString(e);for(var i=So(yS(e,6),this.unsigned),o=this,a="";;){var l=o.div(i),c=o.sub(l.mul(i)).toInt()>>>0,u=c.toString(e);if(o=l,o.isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}};De.getHighBits=function(){return this.high};De.getHighBitsUnsigned=function(){return this.high>>>0};De.getLowBits=function(){return this.low};De.getLowBitsUnsigned=function(){return this.low>>>0};De.getNumBitsAbs=function(){if(this.isNegative())return this.eq(oi)?64:this.neg().getNumBitsAbs();for(var e=this.high!=0?this.high:this.low,n=31;n>0&&!(e&1<<n);n--);return this.high!=0?n+33:n+1};De.isZero=function(){return this.high===0&&this.low===0};De.eqz=De.isZero;De.isNegative=function(){return!this.unsigned&&this.high<0};De.isPositive=function(){return this.unsigned||this.high>=0};De.isOdd=function(){return(this.low&1)===1};De.isEven=function(){return(this.low&1)===0};De.equals=function(e){return Si(e)||(e=va(e)),this.unsigned!==e.unsigned&&this.high>>>31===1&&e.high>>>31===1?!1:this.high===e.high&&this.low===e.low};De.eq=De.equals;De.notEquals=function(e){return!this.eq(e)};De.neq=De.notEquals;De.ne=De.notEquals;De.lessThan=function(e){return this.comp(e)<0};De.lt=De.lessThan;De.lessThanOrEqual=function(e){return this.comp(e)<=0};De.lte=De.lessThanOrEqual;De.le=De.lessThanOrEqual;De.greaterThan=function(e){return this.comp(e)>0};De.gt=De.greaterThan;De.greaterThanOrEqual=function(e){return this.comp(e)>=0};De.gte=De.greaterThanOrEqual;De.ge=De.greaterThanOrEqual;De.compare=function(e){if(Si(e)||(e=va(e)),this.eq(e))return 0;var n=this.isNegative(),r=e.isNegative();return n&&!r?-1:!n&&r?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1};De.comp=De.compare;De.negate=function(){return!this.unsigned&&this.eq(oi)?oi:this.not().add(Jf)};De.neg=De.negate;De.add=function(e){Si(e)||(e=va(e));var n=this.high>>>16,r=this.high&65535,s=this.low>>>16,i=this.low&65535,o=e.high>>>16,a=e.high&65535,l=e.low>>>16,c=e.low&65535,u=0,d=0,h=0,f=0;return f+=i+c,h+=f>>>16,f&=65535,h+=s+l,d+=h>>>16,h&=65535,d+=r+a,u+=d>>>16,d&=65535,u+=n+o,u&=65535,Nn(h<<16|f,u<<16|d,this.unsigned)};De.subtract=function(e){return Si(e)||(e=va(e)),this.add(e.neg())};De.sub=De.subtract;De.multiply=function(e){if(this.isZero())return Co;if(Si(e)||(e=va(e)),xo){var n=xo.mul(this.low,this.high,e.low,e.high);return Nn(n,xo.get_high(),this.unsigned)}if(e.isZero())return Co;if(this.eq(oi))return e.isOdd()?oi:Co;if(e.eq(oi))return this.isOdd()?oi:Co;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(BM)&&e.lt(BM))return So(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,s=this.high&65535,i=this.low>>>16,o=this.low&65535,a=e.high>>>16,l=e.high&65535,c=e.low>>>16,u=e.low&65535,d=0,h=0,f=0,p=0;return p+=o*u,f+=p>>>16,p&=65535,f+=i*u,h+=f>>>16,f&=65535,f+=o*c,h+=f>>>16,f&=65535,h+=s*u,d+=h>>>16,h&=65535,h+=i*c,d+=h>>>16,h&=65535,h+=o*l,d+=h>>>16,h&=65535,d+=r*u+s*c+i*l+o*a,d&=65535,Nn(f<<16|p,d<<16|h,this.unsigned)};De.mul=De.multiply;De.divide=function(e){if(Si(e)||(e=va(e)),e.isZero())throw Error("division by zero");if(xo){if(!this.unsigned&&this.high===-2147483648&&e.low===-1&&e.high===-1)return this;var n=(this.unsigned?xo.div_u:xo.div_s)(this.low,this.high,e.low,e.high);return Nn(n,xo.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Ld:Co;var r,s,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return Ld;if(e.gt(this.shru(1)))return X4;i=Ld}else{if(this.eq(oi)){if(e.eq(Jf)||e.eq(V$))return oi;if(e.eq(oi))return Jf;var o=this.shr(1);return r=o.div(e).shl(1),r.eq(Co)?e.isNegative()?Jf:V$:(s=this.sub(e.mul(r)),i=r.add(s.div(e)),i)}else if(e.eq(oi))return this.unsigned?Ld:Co;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=Co}for(s=this;s.gte(e);){r=Math.max(1,Math.floor(s.toNumber()/e.toNumber()));for(var a=Math.ceil(Math.log(r)/Math.LN2),l=a<=48?1:yS(2,a-48),c=So(r),u=c.mul(e);u.isNegative()||u.gt(s);)r-=l,c=So(r,this.unsigned),u=c.mul(e);c.isZero()&&(c=Jf),i=i.add(c),s=s.sub(u)}return i};De.div=De.divide;De.modulo=function(e){if(Si(e)||(e=va(e)),xo){var n=(this.unsigned?xo.rem_u:xo.rem_s)(this.low,this.high,e.low,e.high);return Nn(n,xo.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))};De.mod=De.modulo;De.rem=De.modulo;De.not=function(){return Nn(~this.low,~this.high,this.unsigned)};De.and=function(e){return Si(e)||(e=va(e)),Nn(this.low&e.low,this.high&e.high,this.unsigned)};De.or=function(e){return Si(e)||(e=va(e)),Nn(this.low|e.low,this.high|e.high,this.unsigned)};De.xor=function(e){return Si(e)||(e=va(e)),Nn(this.low^e.low,this.high^e.high,this.unsigned)};De.shiftLeft=function(e){return Si(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Nn(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):Nn(0,this.low<<e-32,this.unsigned)};De.shl=De.shiftLeft;De.shiftRight=function(e){return Si(e)&&(e=e.toInt()),(e&=63)===0?this:e<32?Nn(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):Nn(this.high>>e-32,this.high>=0?0:-1,this.unsigned)};De.shr=De.shiftRight;De.shiftRightUnsigned=function(e){if(Si(e)&&(e=e.toInt()),e&=63,e===0)return this;var n=this.high;if(e<32){var r=this.low;return Nn(r>>>e|n<<32-e,n>>>e,this.unsigned)}else return e===32?Nn(n,0,this.unsigned):Nn(n>>>e-32,0,this.unsigned)};De.shru=De.shiftRightUnsigned;De.shr_u=De.shiftRightUnsigned;De.toSigned=function(){return this.unsigned?Nn(this.low,this.high,!1):this};De.toUnsigned=function(){return this.unsigned?this:Nn(this.low,this.high,!0)};De.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()};De.toBytesLE=function(){var e=this.high,n=this.low;return[n&255,n>>>8&255,n>>>16&255,n>>>24,e&255,e>>>8&255,e>>>16&255,e>>>24]};De.toBytesBE=function(){var e=this.high,n=this.low;return[e>>>24,e>>>16&255,e>>>8&255,e&255,n>>>24,n>>>16&255,n>>>8&255,n&255]};In.fromBytes=function(e,n,r){return r?In.fromBytesLE(e,n):In.fromBytesBE(e,n)};In.fromBytesLE=function(e,n){return new In(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)};In.fromBytesBE=function(e,n){return new In(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)};const J4=$h(K4),Xte=y2({__proto__:null,default:J4},[K4]);/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _d=J4||Xte;function n0(t){return _d.fromString(t,!0,16)}const Z4=n0("c3a5c85c97cb3127"),xd=n0("b492b66fbe98f273"),gs=n0("9ae16a3b2f90404f");function U$(t){return t.xor(t.shru(47))}function eW(t,e,n){const r=t.slice(e,e+n);return _d.fromBytes(Array.from(r),!0,!0)}function gn(t,e){return eW(t,e,8)}function jM(t,e){return eW(t,e,4)}function Ar(t,e){return e===0?t:t.shru(e).or(t.shl(64-e))}function iu(t,e,n=n0("9ddfea08eb382d69")){let r=t.xor(e).mul(n);r=r.xor(r.shru(47));let s=e.xor(r).mul(n);return s=s.xor(s.shru(47)),s=s.mul(n),s}function Yte(t,e,n,r,s,i){s=s.add(t),i=Ar(i.add(s).add(r),21);const o=s;return s=s.add(e),s=s.add(n),i=i.add(Ar(s,44)),[s.add(r),i.add(o)]}function Ox(t,e,n,r){return Yte(gn(t,e),gn(t,e+8),gn(t,e+16),gn(t,e+24),n,r)}function Qte(t,e=t.length){if(e>=8){const n=gs.add(e*2),r=gn(t,0).add(gs),s=gn(t,e-8),i=Ar(s,37).mul(n).add(r),o=Ar(r,25).add(s).mul(n);return iu(i,o,n)}if(e>=4){const n=gs.add(e*2),r=jM(t,0);return iu(r.shl(3).add(e),jM(t,e-4),n)}if(e>0){const n=t[0],r=t[e>>1],s=t[e-1],i=n+(r<<8),o=e+(s<<2);return U$(gs.mul(i).xor(Z4.mul(o))).mul(gs)}return gs}function Jte(t,e=t.length){const n=gs.add(e*2),r=gn(t,0).mul(xd),s=gn(t,8),i=gn(t,e-8).mul(n),o=gn(t,e-16).mul(gs);return iu(Ar(r.add(s),43).add(Ar(i,30)).add(o),r.add(Ar(s.add(gs),18)).add(i),n)}function Zte(t,e=t.length){const n=gs.add(e*2),r=gn(t,0).mul(gs),s=gn(t,8),i=gn(t,e-8).mul(n),o=gn(t,e-16).mul(gs),a=Ar(r.add(s),43).add(Ar(i,30)).add(o),l=iu(a,r.add(Ar(s.add(gs),18)).add(i),n),c=gn(t,16).mul(n),u=gn(t,24),d=a.add(gn(t,e-32)).mul(n),h=l.add(gn(t,e-24)).mul(n);return iu(Ar(c.add(u),43).add(Ar(d,30)).add(h),c.add(Ar(u.add(r),18)).add(d),n)}function tW(t,e=t.length){const n=_d.fromNumber(81,!0);if(e<=32)return e<=16?Qte(t,e):Jte(t,e);if(e<=64)return Zte(t,e);let r=n,s=n.mul(xd).add(113),i=U$(s.mul(gs).add(113)).mul(gs),o=[_d.UZERO,_d.UZERO],a=[_d.UZERO,_d.UZERO];r=r.mul(gs).add(gn(t,0));let l=0;const c=(e-1>>6)*64,u=c+(e-1&63)-63;do r=Ar(r.add(s).add(o[0]).add(gn(t,l+8)),37).mul(xd),s=Ar(s.add(o[1]).add(gn(t,l+48)),42).mul(xd),r=r.xor(a[1]),s=s.add(o[0]).add(gn(t,l+40)),i=Ar(i.add(a[0]),33).mul(xd),o=Ox(t,l,o[1].mul(xd),r.add(a[0])),a=Ox(t,l+32,i.add(a[1]),s.add(gn(t,l+16))),[i,r]=[r,i],l+=64;while(l!==c);const d=xd.add(i.and(255).shl(1));return l=u,a[0]=a[0].add(e-1&63),o[0]=o[0].add(a[0]),a[0]=a[0].add(o[0]),r=Ar(r.add(s).add(o[0]).add(gn(t,l+8)),37).mul(d),s=Ar(s.add(o[1]).add(gn(t,l+48)),42).mul(d),r=r.xor(a[1].mul(9)),s=s.add(o[0].mul(9).add(gn(t,l+40))),i=Ar(i.add(a[0]),33).mul(d),o=Ox(t,l,o[1].mul(d),r.add(a[0])),a=Ox(t,l+32,i.add(a[1]),s.add(gn(t,l+16))),[i,r]=[r,i],iu(iu(o[0],a[0],d).add(U$(s).mul(Z4)).add(i),iu(o[1],a[1],d).add(r),d)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cc(t,e){return e==="string"?qa(t):Pu([t],e)}function ene(t,e){return t instanceof Float32Array&&e==="float32"||t instanceof Int32Array&&e==="int32"||t instanceof Uint8Array&&e==="bool"}function Pu(t,e){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=ol(t)),ce().getBool("DEBUG")&&P4(t,e),ene(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){const n=new Uint8Array(t.length);for(let r=0;r<n.length;++r)Math.round(t[r])!==0&&(n[r]=1);return n}else throw new Error(`Unknown data type ${e}`)}function fs(){return ce().platform.now()}function tne(t,e){return ce().platform.fetch(t,e)}function qa(t,e="utf-8"){return e=e||"utf-8",ce().platform.encode(t,e)}function Ql(t,e="utf-8"){return e=e||"utf-8",ce().platform.decode(t,e)}function Rr(t){return ce().platform.isTypedArray!=null?ce().platform.isTypedArray(t):G4(t)}function ol(t,e=[],n=!1){if(e==null&&(e=[]),typeof t=="boolean"||typeof t=="number"||typeof t=="string"||vu(t)||t==null||Rr(t)&&n)e.push(t);else if(Array.isArray(t)||Rr(t))for(let r=0;r<t.length;++r)ol(t[r],e,n);else{let r=-1;for(const s of Object.keys(t))/^([1-9]+[0-9]*|0)$/.test(s)&&(r=Math.max(r,Number(s)));for(let s=0;s<=r;s++)ol(t[s],e,n)}return e}const nne=Object.freeze(Object.defineProperty({__proto__:null,arraysEqual:Nt,arraysEqualWithNull:D4,assert:P,assertNonNegativeIntegerDimensions:xi,assertNonNull:Oh,assertShapesMatch:Gr,bytesFromStringArray:F4,bytesPerElement:db,checkConversionForErrors:P4,clamp:yu,computeStrides:et,convertBackendValuesAndArrayBuffer:B4,createScalarValue:cc,createShuffledIndices:Ote,decodeString:Ql,distSquared:$te,encodeString:qa,fetch:tne,fingerPrint64:tW,flatten:ol,getArrayFromDType:Yn,getTypedArrayFromDType:Pr,hasEncodingLoss:kR,hexToLong:n0,indexToLoc:Ph,inferDtype:Dh,inferFromImplicitShape:TR,isBoolean:M4,isFunction:bu,isInt:ah,isNumber:dS,isPromise:vu,isScalarShape:Ate,isString:Ua,isTypedArray:Rr,isValidDtype:L4,locToIndex:ua,makeOnesTypedArray:RC,makeZerosNestedTypedArray:IR,makeZerosTypedArray:Hr,nearestDivisor:hS,nearestLargerEven:AC,now:fs,parseAxisParam:Tt,randUniform:Nte,repeatedTry:B$,rightPad:Kd,shuffle:_R,shuffleCombo:Ite,sizeFromShape:fe,sizeToSquarishShape:uS,squeezeShape:lc,sum:O4,swap:Ll,tanh:Rte,toNestedArray:Bi,toTypedArray:Pu},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rne{constructor(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new ine)}profileKernel(e,n,r){let s;const i=()=>{s=r()};let o;const a=fs();if(this.backendTimer.timerAvailable())o=this.backendTimer.time(i);else{i();for(const c of s)c.dataSync();o=Promise.resolve({kernelMs:fs()-a})}if(ce().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let c=0;c<s.length;c++){const u=s[c];u.data().then(d=>{sne(d,u.dtype,e)})}return{kernelName:e,outputs:s,inputs:n,timeMs:o.then(c=>c.kernelMs),extraInfo:o.then(c=>c.getExtraProfileInfo!=null?c.getExtraProfileInfo():"")}}logKernelProfile(e){const{kernelName:n,outputs:r,timeMs:s,inputs:i,extraInfo:o}=e;r.forEach(a=>{Promise.all([a.data(),s,o]).then(l=>{this.logger.logKernelProfile(n,a,l[0],l[1],i,l[2])})})}}function sne(t,e,n){if(e!=="float32")return!1;for(let r=0;r<t.length;r++){const s=t[r];if(isNaN(s)||!isFinite(s))return console.warn(`Found ${s} in the result of '${n}'`),!0}return!1}let ine=class{logKernelProfile(e,n,r,s,i,o){const a=typeof s=="number"?Kd(`${s}ms`,9):s.error,l=Kd(e,25),c=n.rank,u=n.size,d=Kd(n.shape.toString(),14);let h="";for(const f in i){const p=i[f];if(p!=null){const m=p.shape||n.shape,g=m.length;h+=`${f}: ${g}D ${g>0?m:""} `}}console.log(`%c${l}	%c${a}	%c${c}D ${d}	%c${u}	%c${h}	%c${o}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function one(t,e,n){const r={},s={};for(let l=0;l<e.length;l++)r[e[l].id]=!0;for(let l=0;l<t.length;l++){const c=t[l],u=c.inputs;for(const d in u){const h=u[d];let f=!1;for(let p=0;p<e.length;p++)if(r[h.id]){c.outputs.forEach(m=>r[m.id]=!0),f=!0,s[c.id]=!0;break}if(f)break}}const i={};i[n.id]=!0;const o={};for(let l=t.length-1;l>=0;l--){const c=t[l],u=c.inputs;for(let d=0;d<c.outputs.length;d++)if(i[c.outputs[d].id]){for(const h in u)i[u[h].id]=!0,o[c.id]=!0;break}}const a=[];for(let l=0;l<t.length;l++){const c=t[l];if(s[c.id]&&o[c.id]){const u={};for(const h in c.inputs){const f=c.inputs[h];r[f.id]&&(u[h]=f)}const d=Object.assign({},c);d.inputs=u,d.outputs=c.outputs,a.push(d)}}return a}function ane(t,e,n,r){for(let s=e.length-1;s>=0;s--){const i=e[s],o=[];if(i.outputs.forEach(l=>{const c=t[l.id];c!=null?o.push(c):o.push(null)}),i.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${i.kernelName}.`);const a=i.gradient(o);for(const l in i.inputs){if(!(l in a))throw new Error(`Cannot backprop through input ${l}. Available gradients found: ${Object.keys(a)}.`);const c=n(()=>a[l]());if(c.dtype!=="float32")throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input ${l} must have 'float32' dtype, but has '${c.dtype}'`);const u=i.inputs[l];if(!Nt(c.shape,u.shape))throw new Error(`Error in gradient for op ${i.kernelName}. The gradient of input '${l}' has shape '${c.shape}', which does not match the shape of the input '${u.shape}'`);if(t[u.id]==null)t[u.id]=c;else{const d=t[u.id];t[u.id]=r(d,c),d.dispose()}}}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const VM=20,ry=3,zI=7;function lne(t,e,n,r){const s=et(e),i=cne(t,e,n,s),o=e.length,a=v1(t,e,n,s,i),l=["Tensor"];return r&&(l.push(`  dtype: ${n}`),l.push(`  rank: ${o}`),l.push(`  shape: [${e}]`),l.push("  values:")),l.push(a.map(c=>"    "+c).join(`
`)),l.join(`
`)}function cne(t,e,n,r){const s=fe(e),i=r[r.length-1],o=new Array(i).fill(0),a=e.length,l=n==="complex64"?by(t):t;if(a>1)for(let c=0;c<s/i;c++){const u=c*i;for(let d=0;d<i;d++)o[d]=Math.max(o[d],yy(l[u+d],0,n).length)}return o}function yy(t,e,n){let r;return Array.isArray(t)?r=`${parseFloat(t[0].toFixed(zI))} + ${parseFloat(t[1].toFixed(zI))}j`:Ua(t)?r=`'${t}'`:n==="bool"?r=nW(t):r=parseFloat(t.toFixed(zI)).toString(),Kd(r,e)}function nW(t){return t===0?"false":"true"}function v1(t,e,n,r,s,i=!0){const o=n==="complex64"?2:1,a=e[0],l=e.length;if(l===0){if(n==="complex64"){const m=by(t);return[yy(m[0],0,n)]}return n==="bool"?[nW(t[0])]:[t[0].toString()]}if(l===1){if(a>VM){const g=ry*o;let y=Array.from(t.slice(0,g)),b=Array.from(t.slice((a-ry)*o,a*o));return n==="complex64"&&(y=by(y),b=by(b)),["["+y.map((v,w)=>yy(v,s[w],n)).join(", ")+", ..., "+b.map((v,w)=>yy(v,s[a-ry+w],n)).join(", ")+"]"]}return["["+(n==="complex64"?by(t):Array.from(t)).map((g,y)=>yy(g,s[y],n)).join(", ")+"]"]}const c=e.slice(1),u=r.slice(1),d=r[0]*o,h=[];if(a>VM){for(let m=0;m<ry;m++){const g=m*d,y=g+d;h.push(...v1(t.slice(g,y),c,n,u,s,!1))}h.push("...");for(let m=a-ry;m<a;m++){const g=m*d,y=g+d;h.push(...v1(t.slice(g,y),c,n,u,s,m===a-1))}}else for(let m=0;m<a;m++){const g=m*d,y=g+d;h.push(...v1(t.slice(g,y),c,n,u,s,m===a-1))}const f=l===2?",":"";h[0]="["+(a>0?h[0]+f:"");for(let m=1;m<h.length-1;m++)h[m]=" "+h[m]+f;let p=`,
`;for(let m=2;m<l;m++)p+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(i?"":p),h}function by(t){const e=[];for(let n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dr{constructor(e,n,r){if(this.dtype=n,this.shape=e.slice(),this.size=fe(e),r!=null){const s=r.length;P(s===this.size,()=>`Length of values '${s}' does not match the size inferred by the shape '${this.size}'.`)}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||Yn(n,this.size),this.strides=et(e)}set(e,...n){n.length===0&&(n=[0]),P(n.length===this.rank,()=>`The number of provided coordinates (${n.length}) must match the rank (${this.rank})`);const r=this.locToIndex(n);this.values[r]=e}get(...e){e.length===0&&(e=[0]);let n=0;for(const s of e){if(s<0||s>=this.shape[n]){const i=`Requested out of range element at ${e}.   Buffer shape=${this.shape}`;throw new Error(i)}n++}let r=e[e.length-1];for(let s=0;s<e.length-1;++s)r+=this.strides[s]*e[s];return this.values[r]}locToIndex(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];let n=e[e.length-1];for(let r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n}indexToLoc(e){if(this.rank===0)return[];if(this.rank===1)return[e];const n=new Array(this.shape.length);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n}get rank(){return this.shape.length}toTensor(){return ia().makeTensor(this.values,this.shape,this.dtype)}}let ia=null,Df=null;function une(t){ia=t}function dne(t){Df=t}class Ot{constructor(e,n,r,s){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=fe(e),this.strides=et(e),this.dataId=r,this.id=s,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}async buffer(){const e=await this.data();return Df.buffer(this.shape,this.dtype,e)}bufferSync(){return Df.buffer(this.shape,this.dtype,this.dataSync())}async array(){const e=await this.data();return Bi(this.shape,e,this.dtype==="complex64")}arraySync(){return Bi(this.shape,this.dataSync(),this.dtype==="complex64")}async data(){this.throwIfDisposed();const e=ia().read(this.dataId);if(this.dtype==="string"){const n=await e;try{return n.map(r=>Ql(r))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return e}dataToGPU(e){return this.throwIfDisposed(),ia().readToGPU(this.dataId,e)}dataSync(){this.throwIfDisposed();const e=ia().readSync(this.dataId);if(this.dtype==="string")try{return e.map(n=>Ql(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e}async bytes(){this.throwIfDisposed();const e=await ia().read(this.dataId);return this.dtype==="string"?e:new Uint8Array(e.buffer)}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ia().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(e=!1){return Df.print(this,e)}clone(){return this.throwIfDisposed(),Df.clone(this)}toString(e=!1){const n=this.dataSync();return lne(n,this.shape,this.dtype,e)}cast(e){return this.throwIfDisposed(),Df.cast(this,e)}variable(e=!0,n,r){return this.throwIfDisposed(),ia().makeVariable(this,e,n,r)}}Object.defineProperty(Ot,Symbol.hasInstance,{value:t=>!!t&&t.data!=null&&t.dataSync!=null&&t.throwIfDisposed!=null});function pe(){return $R("Tensor",()=>Ot)}pe();class yb extends Ot{constructor(e,n,r,s){super(e.shape,e.dtype,e.dataId,s),this.trainable=n,this.name=r}assign(e){if(e.dtype!==this.dtype)throw new Error(`dtype of the new value (${e.dtype}) and previous value (${this.dtype}) must match`);if(!Nt(e.shape,this.shape))throw new Error(`shape of the new value (${e.shape}) and previous value (${this.shape}) must match`);ia().disposeTensor(this),this.dataId=e.dataId,ia().incRef(this,null)}dispose(){ia().disposeVariable(this),this.isDisposedInternal=!0}}Object.defineProperty(yb,Symbol.hasInstance,{value:t=>t instanceof Ot&&t.assign!=null&&t.assign instanceof Function});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var W$;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(W$||(W$={}));var H$;(function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"})(H$||(H$={}));var G$;(function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"})(G$||(G$={}));var K$;(function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"})(K$||(K$={}));var q$;(function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"})(q$||(q$={}));const hne={float32:K$,int32:H$,bool:G$,complex64:q$};function Ms(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error(`Can not upcast ${t} with ${e}`)}return hne[t][e]}function zE(t){return Ms(t,"int32")}function rW(t){return t!=null&&typeof t=="object"&&"texture"in t&&t.texture instanceof WebGLTexture}function sW(t){return typeof GPUBuffer<"u"&&t!=null&&typeof t=="object"&&"buffer"in t&&t.buffer instanceof GPUBuffer}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hn(t,e){if(t.dtype===e.dtype)return[t,e];const n=Ms(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function iW(t,e){P(t.dtype===e.dtype,()=>`The dtypes of the first(${t.dtype}) and second(${e.dtype}) input must match`)}function fne(t,e){return e.some(n=>n.id===t.id)}function OR(t){const e=[];return oW(t,e,new Set),e}function oW(t,e,n){if(t==null)return;if(t instanceof Ot){e.push(t);return}if(!pne(t))return;const r=t;for(const s in r){const i=r[s];n.has(i)||(n.add(i),oW(i,e,n))}}function pne(t){return Array.isArray(t)||typeof t=="object"}const mne=Object.freeze(Object.defineProperty({__proto__:null,assertTypesMatch:iW,getTensorsInContainer:OR,isTensorInList:fne,makeTypesMatch:Hn},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BI(t){return t.kernelName!=null}class UM{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(e=>e.name)))}}}dispose(){for(const e in this.registeredVariables)this.registeredVariables[e].dispose()}}class $p{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new UM}async ready(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n];if(await this.initializeBackend(r).success){await this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){const{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){const{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(Ai(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}async setBackend(e){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;const{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?await n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new rne(this.backendInstance),!0}setupRegisteredKernels(){gS(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){gS(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){const n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{const r=n.factory();if(r&&!(r instanceof $C)&&typeof r.then=="function"){const s=++this.pendingBackendInitId,i=r.then(o=>s<this.pendingBackendInitId?!1:(this.registry[e]=o,this.pendingBackendInit=null,!0)).catch(o=>(s<this.pendingBackendInitId||(this.pendingBackendInit=null,Ai(`Initialization of backend ${e} failed`),Ai(o.stack||o.message)),!1));return this.pendingBackendInit=i,{success:i,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return Ai(`Initialization of backend ${e} failed`),Ai(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){const e=this.getSortedBackends();for(let n=0;n<e.length;n++){const r=e[n],{success:s,asyncInit:i}=this.initializeBackend(r);if(i||s)return{name:r,asyncInit:i}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){const r=this.state.tensorInfo.get(n),s=r.backend,i=this.readSync(n),o=s.refCount(n);s.disposeData(n,!0),r.backend=e,e.move(n,i,r.shape,r.dtype,o),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let s;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(s),()=>(s=n(),s instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),s))}scopedRun(e,n,r){e();try{const s=r();return n(),s}catch(s){throw n(),s}}nextTensorId(){return $p.nextTensorId++}nextVariableId(){return $p.nextVariableId++}clone(e){const n=K.runKernel(Sm,{x:e}),r={x:e},s=o=>({x:()=>{const a="float32",l={x:o},c={dtype:a};return K.runKernel(cm,l,c)}}),i=[];return this.addTapeNode(this.state.activeScope.name,r,[n],s,i,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(gb(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){const s=this.backend.numDataIds();let i=0;r.forEach(l=>{i+=l.dtype==="complex64"?3:1});const o=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],a=s-n-i-o;if(a>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${a} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[];const s=this.isTapeOn(),i=this.state.numBytes,o=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let a;this.backendName==null&&this.backend;let l;const c=BI(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(BI(e)){const{kernelName:p,inputs:m,attrs:g}=e;this.backendName==null&&this.backend;const y=gb(p,this.backendName);P(y!=null,()=>`Cannot find registered kernel '${p}' for backend '${this.backendName}'`),a=()=>{const b=this.backend.numDataIds();l=y.kernelFunc({inputs:m,attrs:g,backend:this.backend});const v=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(p,b,v);const w=v.map(C=>C.rank!=null?C:this.makeTensorFromTensorInfo(C));if(s){const C=this.getTensorsForGradient(p,m,w);r=this.saveTensorsForBackwardMode(C)}return w}}else{const{forwardFunc:p}=e,m=g=>{s&&(r=g.map(y=>this.keep(this.clone(y))))};a=()=>{const g=this.backend.numDataIds();l=this.tidy(()=>p(this.backend,m));const y=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(c,g,y),y}}const{inputs:u,attrs:d}=e,h=BI(e)?null:e.backwardsFunc;let f;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=a():(f=this.profiler.profileKernel(c,u,()=>a()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(f),n=f.outputs)}),s&&this.addTapeNode(c,u,n,h,r,d),this.state.profiling&&this.state.activeProfile.kernels.push({name:c,bytesAdded:this.state.numBytes-i,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-o,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(p=>u[p]!=null?u[p].shape:null),outputShapes:n.map(p=>p.shape),kernelTimeMs:f.timeMs,extraInfo:f.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){const s=j$(e);if(s!=null){const i=s.inputsToSave||[],o=s.outputsToSave||[];let a;s.saveAllInputs?(P(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),a=Object.keys(n).map(c=>n[c])):a=i.map(c=>n[c]);const l=r.filter((c,u)=>o[u]);return a.concat(l)}return[]}makeTensor(e,n,r,s){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",s=s||this.backend;let i=e;r==="string"&&Ua(e[0])&&(i=e.map(l=>qa(l)));const o=s.write(i,n,r),a=new Ot(n,r,o,this.nextTensorId());if(this.trackTensor(a,s),r==="string"){const l=this.state.tensorInfo.get(o),c=F4(i);this.state.numBytes+=c-l.bytes,l.bytes=c}return a}makeTensorFromDataId(e,n,r,s){r=r||"float32";const i={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(i,s)}makeTensorFromTensorInfo(e,n){const{dataId:r,shape:s,dtype:i}=e,o=new Ot(s,i,r,this.nextTensorId());return this.trackTensor(o,n),o}makeVariable(e,n=!0,r,s){r=r||this.nextVariableId().toString(),s!=null&&s!==e.dtype&&(e=e.cast(s));const i=new yb(e,n,r,this.nextTensorId());if(this.state.registeredVariables[i.name]!=null)throw new Error(`Variable with name ${i.name} was already registered`);return this.state.registeredVariables[i.name]=i,this.incRef(i,this.backend),i}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*db(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof yb||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;const n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){const r=e.size*db(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(const e in this.state.registeredVariables){const n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){const e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}async profile(e){this.state.profiling=!0;const n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=await e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(s=>s.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(const s of this.state.activeProfile.kernels)s.kernelTimeMs=await s.kernelTimeMs,s.extraInfo=await s.extraInfo;return this.state.activeProfile}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,s,i,o){const a={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:i},l=j$(e);l!=null&&(s=l.gradFunc),s!=null&&(a.gradient=c=>(c=c.map((u,d)=>{if(u==null){const h=r[d],f=Hr(h.size,h.dtype);return this.makeTensor(f,h.shape,h.dtype)}return u}),s(c.length>1?c:c[0],i,o))),this.state.activeTape.push(a)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){const n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){const n=OR(e),r=new Set(n.map(i=>i.id));for(let i=0;i<this.state.activeScope.track.length;i++){const o=this.state.activeScope.track[i];!o.kept&&!r.has(o.id)&&o.dispose()}const s=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(i=>{!i.kept&&i.scopeId===s.id&&this.track(i)})}gradients(e,n,r,s=!1){if(P(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);const i=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));P(i instanceof Ot,()=>"The result y returned by f() must be a tensor.");const o=one(this.state.activeTape,n,i);if(!s&&o.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{const a={};a[i.id]=r??gne(i.shape),ane(a,o,c=>this.tidy(c),yne);const l=n.map(c=>a[c.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(c=>{for(const u of c.saved)u.dispose()}),this.state.activeTape=null),{value:i,grads:l}})}customGrad(e){return P(bu(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{P(n.every(a=>a instanceof Ot),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r;const s={};n.forEach((a,l)=>{s[l]=a});const i=(a,l)=>(r=e(...n,l),P(r.value instanceof Ot,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),P(bu(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),o=(a,l)=>{const c=r.gradFunc(a,l),u=Array.isArray(c)?c:[c];P(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),P(u.every(h=>h instanceof Ot),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");const d={};return u.forEach((h,f)=>{d[f]=()=>h}),d};return this.runKernelFunc({forwardFunc:i,backwardsFunc:o,inputs:s})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}async time(e){const n=fs(),r=await this.backend.time(e);return r.wallMs=fs()-n,r}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new UM;for(const e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}$p.nextTensorId=0;$p.nextVariableId=0;function gne(t){const e=RC(fe(t),"float32");return K.makeTensor(e,t,"float32")}function aW(){const t=V4();if(t._tfengine==null){const e=new j4(t);t._tfengine=new $p(e)}return Fte(t._tfengine.ENV),une(()=>t._tfengine),t._tfengine}const K=aW();function yne(t,e){const n={a:t,b:e};return K.runKernel(Lh,n)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bne(){return typeof navigator<"u"&&navigator!=null}let X$;function vne(t){X$=t}function DR(t){if(X$!==void 0)return X$;if(t||bne()){if(t||(t=navigator),t.product==="ReactNative")return!0;const e=t.userAgent||t.vendor||(typeof window<"u"?window.opera:"");if(!e){const n=t;return n.userAgentData&&n.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))}return!1}function PR(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}const wne=Object.freeze(Object.defineProperty({__proto__:null,isBrowser:PR,isMobile:DR,mockIsMobile:vne},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zs=ce();zs.registerFlag("DEBUG",()=>!1,t=>{t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});zs.registerFlag("IS_BROWSER",()=>PR());zs.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");zs.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));zs.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));zs.registerFlag("PROD",()=>!1);zs.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>zs.getBool("DEBUG"));zs.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);zs.registerFlag("IS_TEST",()=>!1);zs.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>zs.getBool("DEBUG"));zs.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);zs.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);zs.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function al(t,e){let n=t;if(Rr(t))return e==="string"?[]:[t.length];if(rW(t)){const s=t.channels||"RGBA";return[t.height,t.width*s.length]}else if(sW(t))return[t.buffer.size/(e==null?4:db(e))];if(!Array.isArray(t))return[];const r=[];for(;Array.isArray(n)||Rr(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&ce().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&lW(t,r,[]),r}function lW(t,e,n){if(n=n||[],!Array.isArray(t)&&!Rr(t)){P(e.length===0,()=>`Element arr[${n.join("][")}] is a primitive, but should be an array/TypedArray of ${e[0]} elements`);return}P(e.length>0,()=>`Element arr[${n.join("][")}] should be a primitive, but is an array of ${t.length} elements`),P(t.length===e[0],()=>`Element arr[${n.join("][")}] should have ${e[0]} elements, but has ${t.length} elements`);const r=e.slice(1);for(let s=0;s<t.length;++s)lW(t[s],r,n.concat(s))}function WM(t,e,n,r){if(t!=="string_or_numeric"){if(t==null)throw new Error("Expected dtype cannot be null.");if(t!=="numeric"&&t!==e||t==="numeric"&&e==="string")throw new Error(`Argument '${n}' passed to '${r}' must be ${t} tensor, but got ${e} tensor`)}}function F(t,e,n,r="numeric"){if(t instanceof pe())return WM(r,t.dtype,e,n),t;let s=Dh(t);if(s!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(s=r),WM(r,s,e,n),t==null||!Rr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){const l=t==null?"null":t.constructor.name;throw new Error(`Argument '${e}' passed to '${n}' must be a Tensor or TensorLike, but got '${l}'`)}const i=al(t,s);!Rr(t)&&!Array.isArray(t)&&(t=[t]);const a=s!=="string"?Pu(t,s):ol(t,[],!0);return K.makeTensor(a,i,s)}function bb(t,e,n,r="numeric"){if(!Array.isArray(t))throw new Error(`Argument ${e} passed to ${n} must be a \`Tensor[]\` or \`TensorLike[]\``);return t.map((i,o)=>F(i,`${e}[${o}]`,n,r))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LR="__op";function q(t){const e=Object.keys(t);if(e.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${e.length} keys.`);let n=e[0];const r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1)),n=n+LR;const s=(...i)=>{K.startScope(n);try{const o=r(...i);return vu(o)&&console.error("Cannot return a Promise inside of tidy."),K.endScope(o),o}catch(o){throw K.endScope(null),o}};return Object.defineProperty(s,"name",{value:n,configurable:!0}),s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xne(t,e){const n=F(t,"real","complex"),r=F(e,"imag","complex");Gr(n.shape,r.shape,`real and imag shapes, ${n.shape} and ${r.shape}, must match in call to tf.complex().`);const s={real:n,imag:r};return K.runKernel(zC,s)}const Jl=q({complex_:xne});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lu(t,e,n,r){if(r==null)r=Dh(t);else if(r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(sW(t)||rW(t)){if(r!=="float32"&&r!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${r}.`);return K.backend.createTensorFromGPUData(t,e||n,r)}if(!Rr(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){xi(e);const s=fe(e),i=fe(n);P(s===i,()=>`Based on the provided shape, [${e}], the tensor should have ${s} values but has ${i}`);for(let o=0;o<n.length;++o){const a=n[o],l=o===n.length-1?a!==fe(e.slice(o)):!0;P(n[o]===e[o]||!l,()=>`Error creating a new Tensor. Inferred shape (${n}) does not match the provided shape (${e}). `)}}return!Rr(t)&&!Array.isArray(t)&&(t=[t]),e=e||n,t=r!=="string"?Pu(t,r):ol(t,[],!0),K.makeTensor(t,e,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function No(t,e,n){const r=al(t,n);return Lu(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lh={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8};class wa{static join(e){return new wa(e).slice()}constructor(e){if(this.shards=[],this.previousShardIndex=0,e==null||(e instanceof Array||(e=[e]),e=e.map(r=>Rr(r)?r.buffer:r),e.length===0))return;this.bufferUniformSize=e[0].byteLength;let n=0;for(let r=0;r<e.length;r++){const s=e[r];r!==e.length-1&&s.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);const i=n+s.byteLength;this.shards.push({buffer:s,start:n,end:i}),n=i}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(e=0,n=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(e=isNaN(Number(e))?0:e,n=isNaN(Number(n))?0:n,e=Math.max(0,e),n=Math.min(this.byteLength,n),n<=e)return new ArrayBuffer(0);const r=this.findShardForByte(e);if(r===-1)throw new Error(`Could not find start shard for byte ${e}`);const s=n-e,i=new ArrayBuffer(s),o=new Uint8Array(i);let a=0;for(let l=r;l<this.shards.length;l++){const c=this.shards[l],d=e+a-c.start,h=a,p=Math.min(n,c.end)-c.start,m=new Uint8Array(c.buffer,d,p-d);if(o.set(m,h),a+=m.length,n<c.end)break}return i}findShardForByte(e){if(this.shards.length===0||e<0||e>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(e/this.bufferUniformSize),this.previousShardIndex;function n(s){return e<s.start?-1:e>=s.end?1:0}if(n(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;const r=Sne(this.shards,n);return r===-1?-1:(this.previousShardIndex=r,this.previousShardIndex)}}function Sne(t,e){let n=0,r=t.length;for(;n<=r;){const s=Math.floor((r-n)/2)+n,i=e(t[s]);if(i===0)return s;i<0?r=s:n=s+1}return-1}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cne(){ce().set("PROD",!0)}function Ene(){ce().set("DEBUG",!0)}function _ne(){ce().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function Tne(t){ce().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function kne(){K.disposeVariables()}function ta(){return K}function Y$(){return K.memory()}function Ine(t){return K.profile(t)}function oe(t,e){return K.tidy(t,e)}function _t(t){OR(t).forEach(n=>n.dispose())}function xr(t){return K.keep(t)}function Nne(t){return K.time(t)}function cW(t){return K.setBackend(t)}function uW(){return K.ready()}function dW(){return K.backendName}function $ne(t){K.removeBackend(t)}function Ane(t){return K.findBackend(t)}function Rne(t){return K.findBackendFactory(t)}function FR(t,e,n=1){return K.registerBackend(t,e,n)}function MR(){return K.backend}function One(t,e){ce().setPlatform(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wu=4;async function Q$(t,e){const n=[],r=[],s=Array.isArray(t)?t.map(o=>o.name):Object.keys(t);for(let o=0;o<s.length;++o){const a=s[o],l=Array.isArray(t)?t[o].tensor:t[a];if(l.dtype!=="float32"&&l.dtype!=="int32"&&l.dtype!=="bool"&&l.dtype!=="string"&&l.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${l.dtype}`);const c={name:a,shape:l.shape,dtype:l.dtype};if(l.dtype==="string"){const u=new Promise(async d=>{const h=await l.bytes(),f=h.reduce((g,y)=>g+y.length,0)+wu*h.length,p=new Uint8Array(f);let m=0;for(let g=0;g<h.length;g++){const y=h[g],b=new Uint8Array(new Uint32Array([y.length]).buffer);p.set(b,m),m+=wu,p.set(y,m),m+=y.length}d(p)});r.push(u)}else r.push(l.data());e!=null&&(c.group=e),n.push(c)}const i=await Promise.all(r);return{data:Lne(i),specs:n}}function hW(t,e){const n=new wa(t),r={};let s=0;for(const i of e){const o=Dne(i,(a,l)=>n.slice(s+a,s+l));r[i.name]=fW(i,n.slice(s,s+o)),s+=o}return r}function Dne(t,e){const n=fe(t.shape);let r;if("quantization"in t){const s=t.quantization;r=lh[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=wu+new Uint32Array(e(s,s+wu))[0];return s}else r=lh[t.dtype];return n*r}async function Pne(t,e){const n=fe(t.shape);let r;if("quantization"in t){const s=t.quantization;r=lh[s.dtype]}else if(t.dtype==="string"){let s=0;for(let i=0;i<n;i++)s+=wu+new Uint32Array(await e(s,s+wu))[0];return s}else r=lh[t.dtype];return n*r}function fW(t,e){const n=t.name,r=t.dtype,s=t.shape,i=fe(s);let o,a=0;if("quantization"in t){const l=t.quantization;if(l.dtype==="uint8"||l.dtype==="uint16"){if(!("min"in l&&"scale"in l))throw new Error(`Weight ${t.name} with quantization ${l.dtype} doesn't have corresponding metadata min and scale.`)}else if(l.dtype==="float16"){if(r!=="float32")throw new Error(`Weight ${t.name} is quantized with ${l.dtype} which only supports weights of type float32 not ${r}.`)}else throw new Error(`Weight ${t.name} has unknown quantization dtype ${l.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);const c=lh[l.dtype],u=l.dtype==="uint8"?new Uint8Array(e):new Uint16Array(e);if(r==="float32")if(l.dtype==="uint8"||l.dtype==="uint16"){o=new Float32Array(u.length);for(let d=0;d<u.length;d++){const h=u[d];o[d]=h*l.scale+l.min}}else if(l.dtype==="float16")o=Vne()(u);else throw new Error(`Unsupported quantization type ${l.dtype} for weight type float32.`);else if(r==="int32"){if(l.dtype!=="uint8"&&l.dtype!=="uint16")throw new Error(`Unsupported quantization type ${l.dtype} for weight type int32.`);o=new Int32Array(u.length);for(let d=0;d<u.length;d++){const h=u[d];o[d]=Math.round(h*l.scale+l.min)}}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*c}else if(r==="string"){const l=fe(t.shape);o=[];for(let c=0;c<l;c++){const u=new Uint32Array(e.slice(a,a+wu))[0];a+=wu;const d=new Uint8Array(e.slice(a,a+u));o.push(d),a+=u}}else{const l=lh[r];if(r==="float32")o=new Float32Array(e);else if(r==="int32")o=new Int32Array(e);else if(r==="bool")o=new Uint8Array(e);else if(r==="complex64"){o=new Float32Array(e);const c=new Float32Array(o.length/2),u=new Float32Array(o.length/2);for(let p=0;p<c.length;p++)c[p]=o[p*2],u[p]=o[p*2+1];const d=No(c,s,"float32"),h=No(u,s,"float32"),f=Jl(d,h);return d.dispose(),h.dispose(),f}else throw new Error(`Unsupported dtype in weight '${n}': ${r}`);a+=i*l}return No(o,s,r)}async function HM(t,e,n){let r=new Uint8Array(e);for(;r.byteLength<n;){const{done:s,value:i}=await t.read();if(s&&i==null){const a=n-r.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}const o=new Uint8Array(r.length+i.byteLength);o.set(r,0),o.set(new Uint8Array(i),r.length),r=o}return r.buffer}async function pW(t,e){const n={},r=t.getReader();let s=new ArrayBuffer(0);for(const i of e){const o=await Pne(i,async(c,u)=>(s=await HM(r,s,u),s.slice(c,u)));s=await HM(r,s,o);const a=s.slice(0,o);s=s.slice(o);const l=fW(i,a);if(n[i.name]=l,dW()==="webgpu"){const c=MR();"uploadToGPU"in c&&fe(l.shape)>=ce().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&c.uploadToGPU(l.dataId)}}return n}function Lne(t){if(t===null)throw new Error(`Invalid input value: ${JSON.stringify(t)}`);let e=0;const n=[];t.forEach(i=>{if(e+=i.byteLength,n.push(i.byteLength===i.buffer.byteLength?i:new i.constructor(i)),!(i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${i.constructor.name}`)});const r=new Uint8Array(e);let s=0;return n.forEach(i=>{r.set(new Uint8Array(i.buffer),s),s+=i.byteLength}),r.buffer}const zR=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function GM(t){return zR?Buffer.byteLength(t,"utf8"):new Blob([t]).size}function Fne(t){if(zR)return Buffer.from(t).toString("base64");const e=new Uint8Array(t);let n="";for(let r=0,s=e.length;r<s;r++)n+=String.fromCharCode(e[r]);return btoa(n)}function Mne(t){if(zR){const r=Buffer.from(t,"base64");return r.buffer.slice(r.byteOffset,r.byteOffset+r.byteLength)}const e=atob(t),n=new Uint8Array(e.length);for(let r=0;r<e.length;++r)n.set([e.charCodeAt(r)],r);return n.buffer}function mW(t){return wa.join(t)}function KM(t){const e="/";for(t=t.trim();t.endsWith(e);)t=t.slice(0,t.length-1);const n=t.split(e);return n[n.length-1]}function gW(t,e){const n={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy,weightsManifest:e};return t.signature!=null&&(n.signature=t.signature),t.userDefinedMetadata!=null&&(n.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(n.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(n.initializerSignature=t.initializerSignature),t.trainingConfig!=null&&(n.trainingConfig=t.trainingConfig),n}function BR(t,e,n){const r={modelTopology:t.modelTopology,format:t.format,generatedBy:t.generatedBy,convertedBy:t.convertedBy};if(t.trainingConfig!=null&&(r.trainingConfig=t.trainingConfig),t.weightsManifest!=null){if(!e)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!n)throw new Error("modelJSON has weightsManifest but weightData is null");r.weightSpecs=e,r.weightData=n}return t.signature!=null&&(r.signature=t.signature),t.userDefinedMetadata!=null&&(r.userDefinedMetadata=t.userDefinedMetadata),t.modelInitializer!=null&&(r.modelInitializer=t.modelInitializer),t.initializerSignature!=null&&(r.initializerSignature=t.initializerSignature),r}async function jR(t,e){let n,r;return t.weightsManifest!=null&&([n,r]=await e(t.weightsManifest)),BR(t,n,r)}function r0(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:GM(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:GM(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:new wa(t.weightData).byteLength}}function bS(t){const e=[];for(const n of t)e.push(...n.weights);return e}function zne(){const t=n=>{let r=n<<13,s=0;for(;!(r&8388608);)s-=8388608,r<<=1;return r&=-8388609,s+=947912704,r|s},e=new Uint32Array(2048);e[0]=0;for(let n=1;n<1024;n++)e[n]=t(n);for(let n=1024;n<2048;n++)e[n]=939524096+(n-1024<<13);return e}function Bne(){const t=new Uint32Array(64);t[0]=0,t[31]=1199570944,t[32]=2147483648,t[63]=3347054592;for(let e=1;e<31;e++)t[e]=e<<23;for(let e=33;e<63;e++)t[e]=2147483648+(e-32<<23);return t}function jne(){const t=new Uint32Array(64);for(let e=0;e<64;e++)t[e]=1024;return t[0]=t[32]=0,t}function Vne(){const t=zne(),e=Bne(),n=jne();return r=>{const s=new ArrayBuffer(4*r.length),i=new Uint32Array(s);for(let o=0;o<r.length;o++){const a=r[o],l=t[n[a>>10]+(a&1023)]+e[a>>10];i[o]=l}return new Float32Array(s)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class zn{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return zn.instance==null&&(zn.instance=new zn),zn.instance}static registerSaveRouter(e){zn.getInstance().saveRouters.push(e)}static registerLoadRouter(e){zn.getInstance().loadRouters.push(e)}static getSaveHandlers(e){return zn.getHandlers(e,"save")}static getLoadHandlers(e,n){return zn.getHandlers(e,"load",n)}static getHandlers(e,n,r){const s=[];return(n==="load"?zn.getInstance().loadRouters:zn.getInstance().saveRouters).forEach(o=>{const a=o(e,r);a!==null&&s.push(a)}),s}}const Une=t=>zn.registerSaveRouter(t),Wne=t=>zn.registerLoadRouter(t),yW=t=>zn.getSaveHandlers(t),Hne=(t,e)=>zn.getLoadHandlers(t,e);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J$="tensorflowjs",Z$=1,Fd="models_store",Kc="model_info_store";function bW(){if(!ce().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");const t=typeof window>"u"?self:window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function eA(t){const e=t.result;e.createObjectStore(Fd,{keyPath:"modelPath"}),e.createObjectStore(Kc,{keyPath:"modelPath"})}class ch{constructor(e){if(this.indexedDB=bW(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)}async load(){return this.databaseAction(this.modelPath)}databaseAction(e,n){return new Promise((r,s)=>{const i=this.indexedDB.open(J$,Z$);i.onupgradeneeded=()=>eA(i),i.onsuccess=()=>{const o=i.result;if(n==null){const a=o.transaction(Fd,"readonly"),c=a.objectStore(Fd).get(this.modelPath);c.onsuccess=()=>{if(c.result==null)return o.close(),s(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(c.result.modelArtifacts)},c.onerror=u=>(o.close(),s(c.error)),a.oncomplete=()=>o.close()}else{n.weightData=wa.join(n.weightData);const a=r0(n),l=o.transaction(Kc,"readwrite");let c=l.objectStore(Kc),u;try{u=c.put({modelPath:this.modelPath,modelArtifactsInfo:a})}catch(h){return s(h)}let d;u.onsuccess=()=>{d=o.transaction(Fd,"readwrite");const h=d.objectStore(Fd);let f;try{f=h.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:a})}catch(p){return s(p)}f.onsuccess=()=>r({modelArtifactsInfo:a}),f.onerror=p=>{c=l.objectStore(Kc);const m=c.delete(this.modelPath);m.onsuccess=()=>(o.close(),s(f.error)),m.onerror=g=>(o.close(),s(f.error))}},u.onerror=h=>(o.close(),s(u.error)),l.oncomplete=()=>{d==null?o.close():d.oncomplete=()=>o.close()}}},i.onerror=o=>s(i.error)})}}ch.URL_SCHEME="indexeddb://";const vW=t=>ce().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(ch.URL_SCHEME)?Gne(t.slice(ch.URL_SCHEME.length)):null;zn.registerSaveRouter(vW);zn.registerLoadRouter(vW);function Gne(t){return new ch(t)}function Kne(t){return t.startsWith(ch.URL_SCHEME)?t.slice(ch.URL_SCHEME.length):t}class qne{constructor(){this.indexedDB=bW()}async listModels(){return new Promise((e,n)=>{const r=this.indexedDB.open(J$,Z$);r.onupgradeneeded=()=>eA(r),r.onsuccess=()=>{const s=r.result,i=s.transaction(Kc,"readonly"),a=i.objectStore(Kc).getAll();a.onsuccess=()=>{const l={};for(const c of a.result)l[c.modelPath]=c.modelArtifactsInfo;e(l)},a.onerror=l=>(s.close(),n(a.error)),i.oncomplete=()=>s.close()},r.onerror=s=>n(r.error)})}async removeModel(e){return e=Kne(e),new Promise((n,r)=>{const s=this.indexedDB.open(J$,Z$);s.onupgradeneeded=()=>eA(s),s.onsuccess=()=>{const i=s.result,o=i.transaction(Kc,"readwrite"),a=o.objectStore(Kc),l=a.get(e);let c;l.onsuccess=()=>{if(l.result==null)return i.close(),r(new Error(`Cannot find model with path '${e}' in IndexedDB.`));{const u=a.delete(e),d=()=>{c=i.transaction(Fd,"readwrite");const f=c.objectStore(Fd).delete(e);f.onsuccess=()=>n(l.result.modelArtifactsInfo),f.onerror=p=>r(l.error)};u.onsuccess=d,u.onerror=h=>(d(),i.close(),r(l.error))}},l.onerror=u=>(i.close(),r(l.error)),o.oncomplete=()=>{c==null?i.close():c.oncomplete=()=>i.close()}},s.onerror=i=>r(s.error)})}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fl="/",Pf="tensorflowjs_models",wW="info",Xne="model_topology",Yne="weight_specs",Qne="weight_data",Jne="model_metadata";function xW(t){return{info:[Pf,t,wW].join(Fl),topology:[Pf,t,Xne].join(Fl),weightSpecs:[Pf,t,Yne].join(Fl),weightData:[Pf,t,Qne].join(Fl),modelMetadata:[Pf,t,Jne].join(Fl)}}function SW(t){for(const e of Object.values(t))window.localStorage.removeItem(e)}function Zne(t){const e=t.split(Fl);if(e.length<3)throw new Error(`Invalid key format: ${t}`);return e.slice(1,e.length-1).join(Fl)}function ere(t){return t.startsWith(uh.URL_SCHEME)?t.slice(uh.URL_SCHEME.length):t}class uh{constructor(e){if(!ce().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=xW(this.modelPath)}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{const n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),s=r0(e),i=wa.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(s)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,Fne(i));const o={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(o)),{modelArtifactsInfo:s}}catch{throw SW(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${s.modelTopologyBytes}, weightSpecsBytes=${s.weightSpecsBytes}, weightDataBytes=${s.weightDataBytes}.`)}}}async load(){const e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");const n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;const s=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(s==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=s;const i=this.LS.getItem(this.keys.modelMetadata);if(i!=null){const a=JSON.parse(i);n.format=a.format,n.generatedBy=a.generatedBy,n.convertedBy=a.convertedBy,a.signature!=null&&(n.signature=a.signature),a.userDefinedMetadata!=null&&(n.userDefinedMetadata=a.userDefinedMetadata),a.modelInitializer!=null&&(n.modelInitializer=a.modelInitializer),a.initializerSignature!=null&&(n.initializerSignature=a.initializerSignature),a.trainingConfig!=null&&(n.trainingConfig=a.trainingConfig)}const o=this.LS.getItem(this.keys.weightData);if(o==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=Mne(o),n}}uh.URL_SCHEME="localstorage://";const CW=t=>ce().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(uh.URL_SCHEME)?tre(t.slice(uh.URL_SCHEME.length)):null;zn.registerSaveRouter(CW);zn.registerLoadRouter(CW);function tre(t){return new uh(t)}class nre{constructor(){P(ce().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),P(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}async listModels(){const e={},n=Pf+Fl,r=Fl+wW;for(let s=0;s<this.LS.length;++s){const i=this.LS.key(s);if(i.startsWith(n)&&i.endsWith(r)){const o=Zne(i);e[o]=JSON.parse(this.LS.getItem(i))}}return e}async removeModel(e){e=ere(e);const n=xW(e);if(this.LS.getItem(n.info)==null)throw new Error(`Cannot find model at path '${e}'`);const r=JSON.parse(this.LS.getItem(n.info));return SW(n),r}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ap="://";class ps{constructor(){this.managers={}}static getInstance(){return ps.instance==null&&(ps.instance=new ps),ps.instance}static registerManager(e,n){P(e!=null,()=>"scheme must not be undefined or null."),e.endsWith(ap)&&(e=e.slice(0,e.indexOf(ap))),P(e.length>0,()=>"scheme must not be an empty string.");const r=ps.getInstance();P(r.managers[e]==null,()=>`A model store manager is already registered for scheme '${e}'.`),r.managers[e]=n}static getManager(e){const n=ps.getInstance().managers[e];if(n==null)throw new Error(`Cannot find model manager for scheme '${e}'`);return n}static getSchemes(){return Object.keys(ps.getInstance().managers)}}function w1(t){if(t.indexOf(ap)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${ps.getSchemes().join(",")}`);return{scheme:t.split(ap)[0],path:t.split(ap)[1]}}async function EW(t,e,n=!1){P(t!==e,()=>`Old path and new path are the same: '${t}'`);const r=zn.getLoadHandlers(t);P(r.length>0,()=>`Copying failed because no load handler is found for source URL ${t}.`),P(r.length<2,()=>`Copying failed because more than one (${r.length}) load handlers for source URL ${t}.`);const s=r[0],i=zn.getSaveHandlers(e);P(i.length>0,()=>`Copying failed because no save handler is found for destination URL ${e}.`),P(i.length<2,()=>`Copying failed because more than one (${r.length}) save handlers for destination URL ${e}.`);const o=i[0],a=w1(t).scheme,l=w1(t).path,c=a===w1(t).scheme,u=await s.load();n&&c&&await ps.getManager(a).removeModel(l);const d=await o.save(u);return n&&!c&&await ps.getManager(a).removeModel(l),d.modelArtifactsInfo}async function rre(){const t=ps.getSchemes(),e={};for(const n of t){const r=await ps.getManager(n).listModels();for(const s in r){const i=n+ap+s;e[i]=r[s]}}return e}async function sre(t){const e=w1(t);return ps.getManager(e.scheme).removeModel(e.path)}async function ire(t,e){return EW(t,e,!1)}async function ore(t,e){return EW(t,e,!0)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class are{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(e,n){return fetch(e,n)}now(){return performance.now()}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${n}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)}decode(e,n){return new TextDecoder(n).decode(e)}setTimeoutCustom(e,n){if(typeof window>"u"||!ce().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(e,n);return}this.functionRefs.push(e),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},n),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",r=>{if(r.source===window&&r.data.name===this.messageName){r.stopPropagation();const s=this.functionRefs[r.data.index];s(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(e){return G4(e)}}if(ce().get("IS_BROWSER")){ce().setPlatform("browser",new are);try{ps.registerManager(uh.URL_SCHEME,new nre)}catch{}try{ps.registerManager(ch.URL_SCHEME,new qne)}catch{}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lre={importFetch:()=>require("node-fetch")};let jI;class cre{constructor(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}fetch(e,n){return ce().global.fetch!=null?ce().global.fetch(e,n):(jI==null&&(jI=lre.importFetch()),jI(e,n))}now(){const e=process.hrtime();return e[0]*1e3+e[1]/1e6}encode(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${n}`);return this.textEncoder.encode(e)}decode(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)}isTypedArray(e){return this.util.types.isFloat32Array(e)||this.util.types.isInt32Array(e)||this.util.types.isUint8Array(e)||this.util.types.isUint8ClampedArray(e)}}ce().get("IS_NODE")&&!ce().get("IS_BROWSER")&&ce().setPlatform("node",new cre);/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xt(t,e="float32",n){return e=e||"float32",xi(t),new dr(t,e,n)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ure(t,e){const n=F(t,"x","cast");if(!L4(e))throw new Error(`Failed to cast to unknown dtype ${e}`);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");const r={x:n},s={dtype:e};return K.runKernel(cm,r,s)}const $e=q({cast_:ure});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dre(t){const n={x:F(t,"x","clone","string_or_numeric")};return K.runKernel(Sm,n)}const Xa=q({clone_:dre});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VR(t,e=!1){console.log(t.toString(e))}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */aW();const hre={buffer:xt,cast:$e,clone:Xa,print:VR};dne(hre);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fre(t,e){let n=F(t,"a","add"),r=F(e,"b","add");[n,r]=Hn(n,r);const s={a:n,b:r};return K.runKernel(Lh,s)}const xe=q({add_:fre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pre(t,e){let n=F(t,"a","floorDiv"),r=F(e,"b","floorDiv");[n,r]=Hn(n,r);const s={a:n,b:r};return K.runKernel(wm,s)}const BE=q({floorDiv_:pre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mre(t,e){let n=F(t,"a","div"),r=F(e,"b","div");if([n,r]=Hn(n,r),n.dtype==="int32"&&r.dtype==="int32")return BE(n,r);const s={a:n,b:r},i={};return K.runKernel(pm,s,i)}const Ue=q({div_:mre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gre(t,e){let n=F(t,"a","mul"),r=F(e,"b","mul");[n,r]=Hn(n,r);const s={a:n,b:r};return K.runKernel(Am,s)}const Y=q({mul_:gre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yre(t){const e=F(t,"x","abs");if(e.dtype==="complex64"){const n={x:e};return K.runKernel(lv,n)}else{const n={x:e};return K.runKernel(Zb,n)}}const lr=q({abs_:yre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bre(t){const n={x:F(t,"x","acos")};return K.runKernel(nm,n)}const UR=q({acos_:bre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vre(t){const n={x:F(t,"x","acosh")};return K.runKernel(rm,n)}const WR=q({acosh_:vre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wre(t){P(Array.isArray(t),()=>"The argument passed to tf.addN() must be a list of tensors"),P(t.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${t.length}`);const e=t.map((s,i)=>F(s,`tensors${i}`,"addN")),n=e[0];e.forEach(s=>{if(s.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(s=>{if(!Nt(s.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});const r=e;return K.runKernel(ev,r)}const _W=q({addN_:wre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xre(t,e=null,n=!1){const s={x:F(t,"x","all","bool")},i={axis:e,keepDims:n};return K.runKernel(OC,s,i)}const jE=q({all_:xre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sre(t,e=null,n=!1){const s={x:F(t,"x","any","bool")},i={axis:e,keepDims:n};return K.runKernel(DC,s,i)}const vb=q({any_:Sre});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cre(t,e=0){const r={x:F(t,"x","argMax")},s={axis:e};return K.runKernel(tv,r,s)}const dh=q({argMax_:Cre});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ere(t,e=0){const r={x:F(t,"x","argMin")},s={axis:e};return K.runKernel(nv,r,s)}const HR=q({argMin_:Ere});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _re(t){const n={x:F(t,"x","asin")};return K.runKernel(sm,n)}const GR=q({asin_:_re});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tre(t){const n={x:F(t,"x","asinh")};return K.runKernel(im,n)}const KR=q({asinh_:Tre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kre(t){const n={x:F(t,"x","atan")};return K.runKernel(om,n)}const qR=q({atan_:kre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ire(t,e){let n=F(t,"a","atan2"),r=F(e,"b","atan2");[n,r]=Hn(n,r);const s={a:n,b:r};return K.runKernel(lm,s)}const XR=q({atan2_:Ire});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nre(t){const n={x:F(t,"x","atanh")};return K.runKernel(am,n)}const YR=q({atanh_:Nre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s0(t,e,n,r,s="NHWC",i){const o=t[3],a=[...e,o],l=dc(s);return Fr(t,a,n,i,r,null,null,l)}function zo(t,e,n,r,s,i,o="channelsLast"){const[a,l]=wb(e);let c;if(o==="channelsLast")c=[a,l,t[3],t[3]];else if(o==="channelsFirst")c=[a,l,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Fr(t,c,n,r,s,i,!1,o)}function uc(t,e,n,r,s,i,o="NDHWC"){const[a,l,c]=tA(e);let u,d;if(o==="NDHWC")d="channelsLast",u=[a,l,c,t[4],t[4]];else if(o==="NCDHW")d="channelsFirst",u=[a,l,c,t[1],t[1]];else throw new Error(`Unknown dataFormat ${o}`);return Fu(t,u,n,r,s,!1,d,i)}function Fr(t,e,n,r,s,i,o=!1,a="channelsLast"){let[l,c,u,d]=[-1,-1,-1,-1];if(a==="channelsLast")[l,c,u,d]=t;else if(a==="channelsFirst")[l,d,c,u]=t;else throw new Error(`Unknown dataFormat ${a}`);const[h,f,,p]=e,[m,g]=wb(n),[y,b]=wb(r),v=lp(h,y),w=lp(f,b),{padInfo:C,outHeight:_,outWidth:E}=Rre(s,c,u,m,g,v,w,i,a),I=o?p*d:p;let O;return a==="channelsFirst"?O=[l,I,_,E]:a==="channelsLast"&&(O=[l,_,E,I]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:u,inChannels:d,outHeight:_,outWidth:E,outChannels:I,padInfo:C,strideHeight:m,strideWidth:g,filterHeight:h,filterWidth:f,effectiveFilterHeight:v,effectiveFilterWidth:w,dilationHeight:y,dilationWidth:b,inShape:t,outShape:O,filterShape:e}}function Fu(t,e,n,r,s,i=!1,o="channelsLast",a){let[l,c,u,d,h]=[-1,-1,-1,-1,-1];if(o==="channelsLast")[l,c,u,d,h]=t;else if(o==="channelsFirst")[l,h,c,u,d]=t;else throw new Error(`Unknown dataFormat ${o}`);const[f,p,m,,g]=e,[y,b,v]=tA(n),[w,C,_]=tA(r),E=lp(f,w),I=lp(p,C),O=lp(m,_),{padInfo:R,outDepth:z,outHeight:B,outWidth:j}=Ore(s,c,u,d,y,b,v,E,I,O,a),G=i?g*h:g;let U;return o==="channelsFirst"?U=[l,G,z,B,j]:o==="channelsLast"&&(U=[l,z,B,j,G]),{batchSize:l,dataFormat:o,inDepth:c,inHeight:u,inWidth:d,inChannels:h,outDepth:z,outHeight:B,outWidth:j,outChannels:G,padInfo:R,strideDepth:y,strideHeight:b,strideWidth:v,filterDepth:f,filterHeight:p,filterWidth:m,effectiveFilterDepth:E,effectiveFilterHeight:I,effectiveFilterWidth:O,dilationDepth:w,dilationHeight:C,dilationWidth:_,inShape:t,outShape:U,filterShape:e}}function $re(t,e,n,r,s){r==null&&(r=QR(t,e,n));const i=t[0],o=t[1],a=xb((i-e+2*r)/n+1,s),l=xb((o-e+2*r)/n+1,s);return[a,l]}function Are(t,e,n,r,s,i){s==null&&(s=QR(t,e[0],r[0]));const o=[0,0,0,n];for(let a=0;a<3;a++)t[a]+2*s>=e[a]&&(o[a]=xb((t[a]-e[a]+2*s)/r[a]+1,i));return o}function QR(t,e,n,r=1){const s=lp(e,r);return Math.floor((t[0]*(n-1)-n+s)/2)}function wb(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function tA(t){return typeof t=="number"?[t,t,t]:t}function lp(t,e){return e<=1?t:t+(t-1)*(e-1)}function Rre(t,e,n,r,s,i,o,a,l){let c,u,d;if(typeof t=="number"){c={top:t,bottom:t,left:t,right:t,type:t===0?"VALID":"NUMBER"};const f=$re([e,n],i,r,t,a);u=f[0],d=f[1]}else if(t==="same"){u=Math.ceil(e/r),d=Math.ceil(n/s);const h=Math.max(0,(u-1)*r+i-e),f=Math.max(0,(d-1)*s+o-n),p=Math.floor(h/2),m=h-p,g=Math.floor(f/2),y=f-g;c={top:p,bottom:m,left:g,right:y,type:"SAME"}}else if(t==="valid")c={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((e-i+1)/r),d=Math.ceil((n-o+1)/s);else if(typeof t=="object"){const h=l==="channelsLast"?t[1][0]:t[2][0],f=l==="channelsLast"?t[1][1]:t[2][1],p=l==="channelsLast"?t[2][0]:t[3][0],m=l==="channelsLast"?t[2][1]:t[3][1];c={top:h,bottom:f,left:p,right:m,type:h===0&&f===0&&p===0&&m===0?"VALID":"EXPLICIT"},u=xb((e-i+h+f)/r+1,a),d=xb((n-o+p+m)/s+1,a)}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:c,outHeight:u,outWidth:d}}function Ore(t,e,n,r,s,i,o,a,l,c,u){let d,h,f,p;if(t==="valid"&&(t=0),typeof t=="number"){d={top:t,bottom:t,left:t,right:t,front:t,back:t,type:t===0?"VALID":"NUMBER"};const g=Are([e,n,r,1],[a,l,c],1,[s,i,o],t,u);h=g[0],f=g[1],p=g[2]}else if(t==="same"){h=Math.ceil(e/s),f=Math.ceil(n/i),p=Math.ceil(r/o);const m=(h-1)*s+a-e,g=(f-1)*i+l-n,y=(p-1)*o+c-r,b=Math.floor(m/2),v=m-b,w=Math.floor(g/2),C=g-w,_=Math.floor(y/2),E=y-_;d={top:w,bottom:C,left:_,right:E,front:b,back:v,type:"SAME"}}else throw Error(`Unknown padding parameter: ${t}`);return{padInfo:d,outDepth:h,outHeight:f,outWidth:p}}function xb(t,e){if(!e)return Math.trunc(t);switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error(`Unknown roundingMode ${e}`)}}function xu(t){const[e,n,r]=wb(t);return e===1&&n===1&&r===1}function Kr(t,e){return xu(t)||xu(e)}function hh(t){return wb(t).every(e=>e>0)}function dc(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${t}`)}function Ss(t,e,n){if(n!=null){if(typeof e=="string")throw Error(`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);if(typeof e=="number")P(ah(e),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${e}.`);else if(typeof e=="object")e.forEach(r=>{r.forEach(s=>{P(ah(s),()=>`Error in ${t}: pad must be an integer when using dimRoundingMode ${n} but got pad ${s}.`)})});else throw Error(`Error in ${t}: Unknown padding parameter: ${e}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dre(t,e){const r={x:F(t,"x","reshape","string_or_numeric")},s={shape:e};return K.runKernel(Vv,r,s)}const ee=q({reshape_:Dre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pre(t,e,n,r,s){const i=F(t,"x","avgPool","float32"),o=1;P(Kr(n,o),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`);let a=i,l=!1;i.rank===3&&(l=!0,a=ee(i,[1,i.shape[0],i.shape[1],i.shape[2]])),P(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Ss("avgPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s};let d=K.runKernel(rv,c,u);return d=$e(d,i.dtype),l?ee(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const i0=q({avgPool_:Pre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lre(t,e,n,r,s,i="NDHWC"){const o=F(t,"x","avgPool3d","float32");let a=o,l=!1;o.rank===4&&(l=!0,a=ee(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),P(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),P(i==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),P(typeof n=="number"&&n>0||Array.isArray(n)&&n[0]>0&&n[1]>0&&n[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${n}'`),Ss("avgPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i};let d=K.runKernel(sv,c,u);return d=$e(d,a.dtype),l?ee(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const JR=q({avgPool3d_:Lre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fre(t,e=0){P(t.length>=1,()=>"Pass at least one tensor to concat");const n=bb(t,"tensors","concat","string_or_numeric");if(n[0].dtype==="complex64"&&n.forEach(i=>{if(i.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${i.dtype}. `)}),n.length===1)return Xa(n[0]);const r=n,s={axis:e};return K.runKernel(cv,r,s)}const Wn=q({concat_:Fre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mre(t,e,n=!1,r=!1){let s=F(t,"a","matMul"),i=F(e,"b","matMul");[s,i]=Hn(s,i);const o={a:s,b:i},a={transposeA:n,transposeB:r};return K.runKernel(iv,o,a)}const Et=q({matMul_:Mre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zre(t){const n={x:F(t,"x","sigmoid","float32")};return K.runKernel(Vm,n)}const $o=q({sigmoid_:zre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bre(t,e,n){const r=F(t,"x","slice","string_or_numeric");if(r.rank===0)throw new Error("Slicing scalar is not possible");const s={x:r},i={begin:e,size:n};return K.runKernel(Kv,s,i)}const ot=q({slice_:Bre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jre(t){const n={x:F(t,"x","tanh","float32")};return K.runKernel(qm,n)}const Su=q({tanh_:jre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vre(t,e,n,r,s,i){const o=F(t,"forgetBias","basicLSTMCell"),a=F(e,"lstmKernel","basicLSTMCell"),l=F(n,"lstmBias","basicLSTMCell"),c=F(r,"data","basicLSTMCell"),u=F(s,"c","basicLSTMCell"),d=F(i,"h","basicLSTMCell"),h=Wn([c,d],1),f=Et(h,a),p=xe(f,l),m=p.shape[0],g=p.shape[1]/4,y=[m,g],b=ot(p,[0,0],y),v=ot(p,[0,g],y),w=ot(p,[0,g*2],y),C=ot(p,[0,g*3],y),_=xe(Y($o(b),Su(v)),Y(u,$o(xe(o,w)))),E=Y(Su(_),$o(C));return[_,E]}const TW=q({basicLSTMCell_:Vre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ure(t,e,n){const r=F(t,"x","batchToSpaceND"),s=e.reduce((a,l)=>a*l);P(r.rank>=1+e.length,()=>`input rank is ${r.rank} but should be > than blockShape.length ${e.length}`),P(n.length===e.length,()=>`crops.length is ${n.length} but should be equal to blockShape.length  ${e.length}`),P(r.shape[0]%s===0,()=>`input tensor batch is ${r.shape[0]} but is not divisible by the product of the elements of blockShape ${e.join(" * ")} === ${s}`);const i={x:r},o={blockShape:e,crops:n};return K.runKernel(ov,i,o)}const o0=q({batchToSpaceND_:Ure});function Wre(t){let e;return t.rank===0||t.rank===1?e=ee(t,[1,1,1,t.size]):t.rank===2?e=ee(t,[1,1,t.shape[0],t.shape[1]]):t.rank===3?e=ee(t,[1,t.shape[0],t.shape[1],t.shape[2]]):e=t,e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hre(t,e,n,r,s,i){i==null&&(i=.001);const o=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),l=F(n,"variance","batchNorm");let c;s!=null&&(c=F(s,"scale","batchNorm"));let u;r!=null&&(u=F(r,"offset","batchNorm")),P(a.rank===l.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),P(u==null||a.rank===u.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),P(c==null||a.rank===c.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");const h={x:Wre(o),scale:c,offset:u,mean:a,variance:l},f={varianceEpsilon:i},p=K.runKernel(bv,h,f);return ee(p,o.shape)}const Qm=q({batchNorm_:Hre});function Gre(t,e,n,r,s,i){const o=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),l=F(n,"variance","batchNorm");let c;s!=null&&(c=F(s,"scale","batchNorm"));let u;return r!=null&&(u=F(r,"offset","batchNorm")),P(o.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${o.rank}.`),P(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),P(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${l.rank}.`),c!=null&&P(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${c.rank}.`),u!=null&&P(u.rank===2||u.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${u.rank}.`),Qm(o,a,l,u,c,i)}const ZR=q({batchNorm2d_:Gre});function Kre(t,e,n,r,s,i){const o=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),l=F(n,"variance","batchNorm");let c;s!=null&&(c=F(s,"scale","batchNorm"));let u;return r!=null&&(u=F(r,"offset","batchNorm")),P(o.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${o.rank}.`),P(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),P(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${l.rank}.`),c!=null&&P(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${c.rank}.`),u!=null&&P(u.rank===3||u.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${u.rank}.`),Qm(o,a,l,u,c,i)}const eO=q({batchNorm3d_:Kre});function qre(t,e,n,r,s,i){const o=F(t,"x","batchNorm"),a=F(e,"mean","batchNorm"),l=F(n,"variance","batchNorm");let c;s!=null&&(c=F(s,"scale","batchNorm"));let u;return r!=null&&(u=F(r,"offset","batchNorm")),P(o.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${o.rank}.`),P(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),P(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${l.rank}.`),c!=null&&P(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${c.rank}.`),u!=null&&P(u.rank===4||u.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${u.rank}.`),Qm(o,a,l,u,c,i)}const tO=q({batchNorm4d_:qre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xre(t,e,n){const r=F(t,"x","bincount"),s=F(e,"weights","bincount");P(r.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${r.dtype}`),P(n>=0,()=>`size must be non-negative, but got ${n}.`),P(s.size===r.size||s.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${r.shape}, weights shape: ${s.shape}.`);const i={x:r,weights:s},o={size:n};return K.runKernel(FC,i,o)}const nO=q({bincount_:Xre});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yre(t,e){const n=F(t,"x","bitwiseAnd"),r=F(e,"y","bitwiseAnd");if(!Nt(n.shape,r.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${n.shape}, y: ${r.shape}`);if(n.dtype!=="int32"||r.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${n.dtype} and type of y: ${r.dtype}`);const s={a:n,b:r};return K.runKernel(av,s)}const kW=q({bitwiseAnd_:Yre});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qre(t,e){const n=F(t,"s0","broadcastArgs","int32"),r=F(e,"s1","broadcastArgs","int32");if(n.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${n.rank}`);if(r.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${r.rank}`);const s={s0:n,s1:r};return K.runKernel(MC,s)}const IW=q({broadcastArgs_:Qre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jre(t,e){let n=F(t,"broadcastTo","x");const r=n.shape;if(xi(e),e.length<n.rank)throw new Error(`broadcastTo(): shape.length=${e.length} < input.rank=${n.rank}.`);if(e.length>n.rank){const c=n.shape.slice();for(;c.length<e.length;)c.unshift(1);n=ee(n,c)}const s=n.shape,i=Array.from(e);for(let c=e.length-1;c>=0;c--)if(s[c]===e[c])i[c]=1;else if(n.shape[c]!==1)throw new Error(`broadcastTo(): [${r}] cannot be broadcast to [${e}].`);if(i.map((c,u)=>c>1?u:-1).filter(c=>c>=0).length===0)return Xa(n);const a={x:n},l={reps:i};return K.runKernel(Xm,a,l)}const Xd=q({broadcastTo_:Jre});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zre(t){const n={x:F(t,"x","ceil","float32")};return K.runKernel(um,n)}const rO=q({ceil_:Zre});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mh(t,e,n){xi(t),n=n||Dh(e);const r={shape:t,value:e,dtype:n};return K.runKernel(eE,{},r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ese(t,e,n){const r=F(t,"x","clipByValue");if(P(e<=n,()=>`Error in clip: min (${e}) must be less than or equal to max (${n}).`),e===n)return Mh(r.shape,e,r.dtype);const s={x:r},i={clipValueMin:e,clipValueMax:n};return K.runKernel(dm,s,i)}const Bs=q({clipByValue_:ese});function tse(t){return Wn(t,0)}const sO=q({concat1d_:tse});function nse(t,e){return Wn(t,e)}const a0=q({concat2d_:nse});function rse(t,e){return Wn(t,e)}const iO=q({concat3d_:rse});function sse(t,e){return Wn(t,e)}const oO=q({concat4d_:sse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ise(t,e,n,r,s="NHWC",i=[1,1],o){const a=F(t,"x","conv2d","float32"),l=F(e,"filter","conv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=ee(a,[1,a.shape[0],a.shape[1],a.shape[2]])),P(c.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${c.rank}.`),P(l.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${l.rank}.`),Ss("conv2d",r,o);const d=s==="NHWC"?c.shape[3]:c.shape[1];P(d===l.shape[2],()=>`Error in conv2d: depth of input (${d}) must match input depth for filter ${l.shape[2]}.`),P(Kr(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),P(hh(i),()=>"Error in conv2D: Dilated rates should be larger than 0."),P(hh(n),()=>"Error in conv2D: Strides should be larger than 0.");const h={x:c,filter:l},f={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},p=K.runKernel(uv,h,f);return u?ee(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Zl=q({conv2d_:ise});function ose(t,e,n,r,s="NWC",i=1,o){const a=F(t,"x","conv1d"),l=F(e,"filter","conv1d");let c=a,u=!1;a.rank===2&&(u=!0,c=ee(a,[1,a.shape[0],a.shape[1]])),P(c.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${c.rank}.`),P(l.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${l.rank}.`),Ss("conv1d",r,o),P(c.shape[2]===l.shape[1],()=>`Error in conv1d: depth of input (${c.shape[2]}) must match input depth for filter ${l.shape[1]}.`),P(Kr(n,i),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${n} and dilation '${i}'`),P(hh(i),()=>"Error in conv1D: Dilated rates should be larger than 0."),P(hh(n),()=>"Error in conv1D: Stride should be larger than 0."),P(s==="NWC",()=>`Error in conv1d: got dataFormat of ${s} but only NWC is currently supported.`);const d=ee(l,[1,l.shape[0],l.shape[1],l.shape[2]]),h=ee(c,[c.shape[0],1,c.shape[1],c.shape[2]]),g=Zl(h,d,[1,n],r,"NHWC",[1,i],o);return u?ee(g,[g.shape[2],g.shape[3]]):ee(g,[g.shape[0],g.shape[2],g.shape[3]])}const VE=q({conv1d_:ose});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ase(t,e,n,r,s,i="NHWC",o){P(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let a=t,l=e,c=!1;e.rank===3&&(c=!0,l=ee(e,[1,e.shape[0],e.shape[1],e.shape[2]]),a=[1,t[0],t[1],t[2]]),P(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),P(l.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${l.rank}`),P(n.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${n.rank}`);const u=i==="NHWC"?a[3]:a[1],d=i==="NHWC"?l.shape[3]:l.shape[1];P(u===n.shape[2],()=>`Error in conv2dDerInput: depth of input (${u}) must match input depth for filter ${n.shape[2]}.`),P(d===n.shape[3],()=>`Error in conv2dDerInput: depth of output (${d}) must match output depth for filter ${n.shape[3]}.`),Ss("conv2dDerInput",s,o);const h={dy:l,filter:n},f={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,inputShape:a},p=K.runKernel(dv,h,f);return c?ee(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const aO=q({conv2DBackpropInput_:ase});function lse(t,e,n,r,s,i){const o=F(t,"x","conv2dTranspose"),a=F(e,"filter","conv2dTranspose");return aO(n,o,a,r,s,"NHWC",i)}const UE=q({conv2dTranspose_:lse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cse(t,e,n,r,s="NDHWC",i=[1,1,1]){const o=F(t,"x","conv3d"),a=F(e,"filter","conv3d");let l=o,c=!1;o.rank===4&&(c=!0,l=ee(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),P(l.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${l.rank}.`),P(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),P(l.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${l.shape[4]}) must match input depth for filter ${a.shape[3]}.`),P(Kr(n,i),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),P(s==="NDHWC",()=>`Error in conv3d: got dataFormat of ${s} but only NDHWC is currently supported.`),P(hh(i),()=>"Error in conv3D: Dilated rates should be larger than 0."),P(hh(n),()=>"Error in conv3D: Strides should be larger than 0.");const u={x:l,filter:a},d={strides:n,pad:r,dataFormat:s,dilations:i},h=K.runKernel(hv,u,d);return c?ee(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const lO=q({conv3d_:cse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function use(t,e,n,r,s){P(t.length===e.rank,()=>`Length of inShape (${t.length}) and rank of dy (${e.rank}) must match`);let i=t,o=e,a=!1;e.rank===4&&(a=!0,o=ee(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]]),i=[1,t[0],t[1],t[2],t[3]]);const l=i[4],c=o.shape[4];P(i.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${i.length}.`),P(o.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${o.rank}`),P(n.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${n.rank}`),P(l===n.shape[3],()=>`Error in conv3dDerInput: depth of input (${l}) must match input depth for filter ${n.shape[3]}.`),P(c===n.shape[4],()=>`Error in conv3dDerInput: depth of output (${c}) must match output depth for filter ${n.shape[4]}.`);const u={dy:o,filter:n},d={pad:s,strides:r,inputShape:i},h=K.runKernel(VC,u,d);return a?ee(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}const NW=q({conv3DBackpropInput_:use});function dse(t,e,n,r,s){const i=F(t,"x","conv3dTranspose"),o=F(e,"filter","conv3dTranspose");return NW(n,i,o,r,s)}const cO=q({conv3dTranspose_:dse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hse(t){const n={x:F(t,"x","cos","float32")};return K.runKernel(hm,n)}const l0=q({cos_:hse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fse(t){const n={x:F(t,"x","cosh","float32")};return K.runKernel(fm,n)}const WE=q({cosh_:fse});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pse(t,e=0,n=!1,r=!1){const i={x:F(t,"x","cumprod")},o={axis:e,exclusive:n,reverse:r};return K.runKernel(UC,i,o)}const Sb=q({cumprod_:pse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mse(t,e=0,n=!1,r=!1){const i={x:F(t,"x","cumsum")},o={axis:e,exclusive:n,reverse:r};return K.runKernel(fv,i,o)}const HE=q({cumsum_:mse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gse(t,e,n,r=!1){const s=F(t,"x","denseBincount"),i=F(e,"weights","denseBincount");P(s.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${s.dtype}`),P(s.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${s.rank}.`),P(n>=0,()=>`size must be non-negative, but got ${n}.`),P(i.size===s.size||i.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${s.shape}, weights shape: ${i.shape}.`);const o={x:s,weights:i},a={size:n,binaryOutput:r};return K.runKernel(HC,o,a)}const vS=q({denseBincount_:gse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yse(t,e,n="NHWC"){const r=F(t,"x","depthToSpace","float32"),s=n==="NHWC"?r.shape[1]:r.shape[2],i=n==="NHWC"?r.shape[2]:r.shape[3],o=n==="NHWC"?r.shape[3]:r.shape[1];P(e>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${e}`),P(s*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${s} and ${e}  for depthToSpace with input shape
    ${r.shape}`),P(i*e>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${i} and ${e} for depthToSpace with input shape
        ${r.shape}`),P(o%(e*e)===0,()=>`Dimension size must be evenly divisible by ${e*e} but is ${o} for depthToSpace with input shape ${r.shape}`);const a={x:r},l={blockSize:e,dataFormat:n};return K.runKernel(GC,a,l)}const uO=q({depthToSpace_:yse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bse(t,e,n,r,s="NHWC",i=[1,1],o){const a=F(t,"x","depthwiseConv2d","float32"),l=F(e,"filter","depthwiseConv2d","float32");let c=a,u=!1;a.rank===3&&(u=!0,c=ee(a,[1,a.shape[0],a.shape[1],a.shape[2]])),P(c.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${c.rank}.`),P(l.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${l.rank}.`);const d=s==="NHWC"?c.shape[3]:c.shape[1];P(d===l.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${d}) must match the inChannels dimension in filter ${l.shape[2]}.`),Ss("depthwiseConv2d",r,o);const h={x:c,filter:l},f={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o},p=K.runKernel(pv,h,f);return u?ee(p,[p.shape[1],p.shape[2],p.shape[3]]):p}const Jm=q({depthwiseConv2d_:bse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vse(t){const n={x:F(t,"x","diag")};return K.runKernel(XC,n)}const $W=q({diag_:vse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wse(t,e,n,r,s=[1,1],i="NHWC"){const o=F(t,"x","dilation2d"),a=F(e,"filter","dilation2d");P(o.rank===3||o.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${o.rank}.`),P(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),P(i==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${i}`);let l=o,c=!1;o.rank===3&&(l=ee(o,[1,o.shape[0],o.shape[1],o.shape[2]]),c=!0),P(l.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${l.shape[3]} vs ${a.shape[2]}`);const u={x:l,filter:a},d={strides:n,pad:r,dilations:s},h=K.runKernel(mv,u,d);return c?ee(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const dO=q({dilation2d_:wse});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fh(t,e){const n=t.length,r=[];for(let s=0;s<n;s++){const i=n-1-s,o=t[i]||1;(e[e.length-1-s]||1)>1&&o===1&&r.unshift(i)}return r}function hr(t,e){const n=[];for(let r=0;r<e.length;r++){const s=t[t.length-r-1],i=e.length-r-1,o=e[i];(s==null||s===1&&o>1)&&n.unshift(i)}return n}function yt(t,e){const n=Math.max(t.length,e.length),r=new Array(n);for(let s=0;s<n;s++){let i=t[t.length-s-1];i==null&&(i=1);let o=e[e.length-s-1];if(o==null&&(o=1),i===1)r[n-s-1]=o;else if(o===1)r[n-s-1]=i;else if(i!==o){const a=`Operands could not be broadcast together with shapes ${t} and ${e}.`;throw Error(a)}else r[n-s-1]=i}return r}const xse=Object.freeze(Object.defineProperty({__proto__:null,assertAndGetBroadcastShape:yt,getBroadcastDims:fh,getReductionAxes:hr},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sse(t,e){let n=F(t,"a","equal","string_or_numeric"),r=F(e,"b","equal","string_or_numeric");[n,r]=Hn(n,r),yt(n.shape,r.shape);const s={a:n,b:r};return K.runKernel(gv,s)}const Lo=q({equal_:Sse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cse(t,e,n){const r=F(e,"a","where"),s=F(n,"b","where"),i=F(t,"condition","where","bool"),o=yt(yt(i.shape,r.shape),s.shape),a=Xd(i,o),l=Xd(r,o),c=Xd(s,o),u={condition:a,t:l,e:c};return K.runKernel(Gv,u)}const Wr=q({where_:Cse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ese(t){const n={x:F(t,"x","zerosLike")};return K.runKernel(t0,n)}const Dt=q({zerosLike_:Ese});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _se(t,e){let n=F(t,"a","div"),r=F(e,"b","div");[n,r]=Hn(n,r);const s=Ue(n,r),i=Dt(s),o=Lo(r,i);return Wr(o,i,s)}const hO=q({divNoNan_:_se});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tse(t,e){const n=F(t,"t1","dot"),r=F(e,"t2","dot");P((n.rank===1||n.rank===2)&&(r.rank===1||r.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${n.rank} and ${r.rank}.`);const s=n.rank===1?n.size:n.shape[1],i=r.rank===1?r.size:r.shape[0];if(P(s===i,()=>`Error in dot: inner dimensions of inputs must match, but got ${s} and ${i}.`),n.rank===1&&r.rank===1){const o=ee(n,[1,-1]),a=ee(r,[-1,1]),l=Et(o,a);return ee(l,[])}else if(n.rank===1&&r.rank===2){const o=ee(n,[1,-1]),a=ee(r,[r.shape[0],r.shape[1]]),l=Et(o,a);return ee(l,[l.size])}else if(n.rank===2&&r.rank===1){const o=ee(r,[-1,1]),a=Et(n,o);return ee(a,[a.size])}else{const o=ee(r,[r.shape[0],r.shape[1]]);return Et(n,o)}}const fO=q({dot_:Tse});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kse(t,...e){const n=e.map((s,i)=>F(s,`tensors${i}`,"einsum")),r={equation:t};return K.runKernel(QC,n,r)}const Td=q({einsum_:kse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ise(t){const n={x:F(t,"x","elu","float32")};return K.runKernel(mm,n)}const Zm=q({elu_:Ise});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nse(t,e){const n=F(t,"x","ensureShape","string_or_numeric");if(!D4(n.shape,e))throw new Error(`EnsureShape: Shape of tensor ${n.shape} is not compatible with expected shape ${e}`);return t}const AW=q({ensureShape_:Nse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $se(t){let e=F(t,"x","erf");P(e.dtype==="int32"||e.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),e.dtype==="int32"&&(e=$e(e,"float32"));const n={x:e};return K.runKernel(gm,n)}const GE=q({erf_:$se});/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pO(t,e){for(let n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function RW(t,e,n){const r=t.length+e.length,s=[];let i=0,o=0;for(let a=0;a<r;a++)n.indexOf(a)===-1?s.push(t[i++]):s.push(e[o++]);return s}function Mr(t,e){const n=[],r=t.length;for(let i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);const s=e.map(i=>t[i]);return[n,s]}function sr(t,e){const n=e.map(r=>1);return RW(t,n,e)}function qr(t,e,n){P(pO(e,n),()=>`${t} supports only inner-most axes for now. Got axes ${e} and rank-${n} input.`)}function Gn(t,e){if(pO(t,e))return null;const n=[];for(let r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(r=>n.push(r)),n}function Mu(t){return t.map((e,n)=>[n,e]).sort((e,n)=>e[1]-n[1]).map(e=>e[0])}function ir(t,e){const n=[];for(let r=e-t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ase(t,e=null,n=!1){const s={x:F(t,"x","max")},i={reductionIndices:e,keepDims:n};return K.runKernel(Iv,s,i)}const ji=q({max_:Ase});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rse(t,e=null,n=!1){const s={x:F(t,"x","min")},i={axis:e,keepDims:n};return K.runKernel(Rv,s,i)}const Ap=q({min_:Rse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ose(t,e){let n=F(t,"base","pow"),r=F(e,"exp","pow");[n,r]=Hn(n,r);const s={a:n,b:r};return K.runKernel(Rm,s)}const ll=q({pow_:Ose});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tt(t,e){if((Rr(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&Rr(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return Lu(t,[],[],e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dse(t){const n={x:F(t,"x","sqrt","float32")};return K.runKernel(Wm,n)}const Lr=q({sqrt_:Dse});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pse(t){const e=F(t,"x","square"),n={};return K.runKernel("Square",{x:e},n)}const rn=q({square_:Pse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lse(t,e=null,n=!1){let r=F(t,"x","sum");r.dtype==="bool"&&(r=$e(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return K.runKernel(qv,s,i)}const qe=q({sum_:Lse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Fse(t,e="euclidean",n=null,r=!1){t=F(t,"x","norm");const s=OW(t,e,n);let i=s.shape;if(r){const o=Tt(n,t.shape);i=sr(s.shape,o)}return ee(s,i)}function OW(t,e,n=null){if(t.rank===0)return lr(t);if(t.rank!==1&&n===null)return OW(ee(t,[-1]),e,n);if(t.rank===1||typeof n=="number"||Array.isArray(n)&&n.length===1){if(e===1)return qe(lr(t),n);if(e===1/0)return ji(lr(t),n);if(e===-1/0)return Ap(lr(t),n);if(e==="euclidean"||e===2)return Lr(qe(ll(lr(t),tt(2,"int32")),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}if(Array.isArray(n)&&n.length===2){if(e===1)return ji(qe(lr(t),n[0]),n[1]-1);if(e===1/0)return ji(qe(lr(t),n[1]),n[0]);if(e===-1/0)return Ap(qe(lr(t),n[1]),n[0]);if(e==="fro"||e==="euclidean")return Lr(qe(rn(t),n));throw new Error(`Error in norm: invalid ord value: ${e}`)}throw new Error(`Error in norm: invalid axis: ${n}`)}const eg=q({norm_:Fse});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mse(t,e=null,n=!1){return eg(t,"euclidean",e,n)}const mO=q({euclideanNorm_:Mse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zse(t){const n={x:F(t,"x","exp")};return K.runKernel(ym,n)}const js=q({exp_:zse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bse(t,e=0){const n=F(t,"x","expandDims","string_or_numeric");P(e<=n.rank,()=>"Axis must be <= rank of the tensor");const r={input:n},s={dim:e};return K.runKernel(yv,r,s)}const Br=q({expandDims_:Bse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jse(t){const n={x:F(t,"x","expm1")};return K.runKernel(bm,n)}const gO=q({expm1_:jse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vse(t,e){const n=F(t,"x","tile","string_or_numeric");P(n.rank===e.length,()=>`Error in transpose: rank of input ${n.rank} must match length of reps ${e}.`);const r={x:n},s={reps:e};return K.runKernel(Xm,r,s)}const Li=q({tile_:Vse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Use(t,e,n,r="float32"){e==null&&(e=t);const s=xt([t,e],r),i=t<=e?t:e;for(let a=0;a<i;++a)s.set(1,a,a);const o=ee(s.toTensor(),[t,e]);if(n==null)return o;if(n.length===1)return Li(Br(o,0),[n[0],1,1]);if(n.length===2)return Li(Br(Br(o,0),0),[n[0],n[1],1,1]);if(n.length===3)return Li(Br(Br(Br(o,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${n.length}D.`)}const KE=q({eye_:Use});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wse(t){const n={x:F(t,"x","floor","float32")};return K.runKernel(vm,n)}const tg=q({floor_:Wse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hse(t,e,n=0,r=0){const s=F(t,"x","gather"),i=F(e,"indices","gather","int32"),o={x:s,indices:i},a={axis:n,batchDims:r};return K.runKernel(vv,o,a)}const ng=q({gather_:Hse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gse(t,e){let n=F(t,"a","greater","string_or_numeric"),r=F(e,"b","greater","string_or_numeric");[n,r]=Hn(n,r),yt(n.shape,r.shape);const s={a:n,b:r};return K.runKernel(wv,s)}const Gs=q({greater_:Gse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kse(t,e){let n=F(t,"a","greaterEqual","string_or_numeric"),r=F(e,"b","greaterEqual","string_or_numeric");[n,r]=Hn(n,r),yt(n.shape,r.shape);const s={a:n,b:r};return K.runKernel(xm,s)}const hc=q({greaterEqual_:Kse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qse(t){const n={input:F(t,"input","imag")};return K.runKernel(sE,n)}const c0=q({imag_:qse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xse(t){const n={x:F(t,"x","isFinite")};return K.runKernel(Cm,n)}const yO=q({isFinite_:Xse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yse(t){const n={x:F(t,"x","isInf")};return K.runKernel(Em,n)}const bO=q({isInf_:Yse});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qse(t){const n={x:F(t,"x","isNaN")};return K.runKernel(_m,n)}const vO=q({isNaN_:Qse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jse(t,e=.2){const r={x:F(t,"x","leakyRelu")},s={alpha:e};return K.runKernel(xv,r,s)}const u0=q({leakyRelu_:Jse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zse(t,e){let n=F(t,"a","less","string_or_numeric"),r=F(e,"b","less","string_or_numeric");[n,r]=Hn(n,r),yt(n.shape,r.shape);const s={a:n,b:r};return K.runKernel(Sv,s)}const Rp=q({less_:Zse});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eie(t,e){let n=F(t,"a","lessEqual","string_or_numeric"),r=F(e,"b","lessEqual","string_or_numeric");[n,r]=Hn(n,r),yt(n.shape,r.shape);const s={a:n,b:r};return K.runKernel(Cv,s)}const zu=q({lessEqual_:eie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DW(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");const r={start:t,stop:e,num:n};return K.runKernel(iE,{},r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tie(t,e=5,n=1,r=1,s=.5){const i=F(t,"x","localResponseNormalization");P(i.rank===4||i.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${i.rank}.`),P(ah(e),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${e}.`);let o=i,a=!1;i.rank===3&&(a=!0,o=ee(i,[1,i.shape[0],i.shape[1],i.shape[2]]));const l={x:o},c={depthRadius:e,bias:n,alpha:r,beta:s},u=K.runKernel(kv,l,c);return a?ee(u,[u.shape[1],u.shape[2],u.shape[3]]):u}const wO=q({localResponseNormalization_:tie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nie(t){const n={x:F(t,"x","log","float32")};return K.runKernel(Tm,n)}const fi=q({log_:nie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rie(t){const n={x:F(t,"x","log1p")};return K.runKernel(km,n)}const d0=q({log1p_:rie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sie(t){return P(bu(t),()=>"The f passed in grad(f) must be a function"),(e,n)=>{const r=F(e,"x","tf.grad","string_or_numeric"),s=n!=null?F(n,"dy","tf.grad"):null;return K.tidy(()=>{const{value:i,grads:o}=K.gradients(()=>t(r),[r],s);return s!=null&&Gr(i.shape,s.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),qE(o),o[0]})}}function iie(t){return P(bu(t),()=>"The f passed in grads(f) must be a function"),(e,n)=>{P(Array.isArray(e),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");const r=bb(e,"args","tf.grads","string_or_numeric"),s=n!=null?F(n,"dy","tf.grads"):null;return K.tidy(()=>{const{value:i,grads:o}=K.gradients(()=>t(...r),r,s);return s!=null&&Gr(i.shape,s.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),qE(o),o})}}function oie(t){return P(bu(t),()=>"The f passed in valueAndGrad(f) must be a function"),(e,n)=>{P(e instanceof Ot,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),P(n==null||n instanceof Ot,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");const{grads:r,value:s}=K.gradients(()=>t(e),[e],n);return qE(r),{grad:r[0],value:s}}}function aie(t){return P(bu(t),()=>"The f passed in valueAndGrads(f) must be a function"),(e,n)=>{P(Array.isArray(e)&&e.every(s=>s instanceof Ot),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),P(n==null||n instanceof Ot,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");const r=K.gradients(()=>t(...e),e,n);return n!=null&&Gr(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),qE(r.grads),r}}function PW(t,e){P(bu(t),()=>"The f passed in variableGrads(f) must be a function"),P(e==null||Array.isArray(e)&&e.every(c=>c instanceof yb),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");const n=e!=null;if(!n){e=[];for(const c in K.registeredVariables)e.push(K.registeredVariables[c])}const r=n?e.filter(c=>!c.trainable):null,s=e.length;e=e.filter(c=>c.trainable),P(e.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${s} variables is trainable.`);const i=!0,{value:o,grads:a}=K.gradients(t,e,null,i);P(a.some(c=>c!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),P(o.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${o.rank} tensor`);const l={};return e.forEach((c,u)=>{a[u]!=null&&(l[c.name]=a[u])}),r!=null&&r.forEach(c=>l[c.name]=null),{value:o,grads:l}}function cl(t){return K.customGrad(t)}function qE(t){if(t.filter(n=>n==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lie(t){const n={x:F(t,"x","neg")};return K.runKernel(Dv,n)}const yn=q({neg_:lie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cie(t){const n={x:F(t,"x","softplus")};return K.runKernel(Um,n)}const zh=q({softplus_:cie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uie(t){const e=F(t,"x","logSigmoid");return cl(r=>({value:yn(zh(yn(r))),gradFunc:o=>Y(o,$o(yn(r)))}))(e)}const xO=q({logSigmoid_:uie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function die(t,e){let n=F(t,"a","sub"),r=F(e,"b","sub");[n,r]=Hn(n,r);const s={a:n,b:r};return K.runKernel(Gm,s)}const Fe=q({sub_:die});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hie(t,e=-1){const n=F(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and axis was ${e}`);return cl((s,i)=>{const a=ji(s,e,!0),l=Fe(s,a),c=Fe($e(l,"float32"),fi(qe(js(l),e,!0)));return i([c]),{value:c,gradFunc:(d,h)=>{const[f]=h,p=!0,m=js(f);return Fe(d,Y(qe(d,e,p),m))}}})(n)}const XE=q({logSoftmax_:hie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fie(t,e=null,n=!1){const r=F(t,"x","logSumExp"),s=Tt(e,r.shape),i=ji(r,s,!0),o=Fe(r,i),a=js(o),l=qe(a,s),c=fi(l),u=xe(ee(i,c.shape),c);if(n){const d=sr(u.shape,s);return ee(u,d)}return u}const h0=q({logSumExp_:fie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pie(t,e){const n=F(t,"a","logicalAnd","bool"),r=F(e,"b","logicalAnd","bool");yt(n.shape,r.shape);const s={a:n,b:r};return K.runKernel(Ev,s)}const fa=q({logicalAnd_:pie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mie(t){const n={x:F(t,"x","logicalNot","bool")};return K.runKernel(_v,n)}const f0=q({logicalNot_:mie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gie(t,e){const n=F(t,"a","logicalOr","bool"),r=F(e,"b","logicalOr","bool");yt(n.shape,r.shape);const s={a:n,b:r};return K.runKernel(Tv,s)}const YE=q({logicalOr_:gie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yie(t,e){const n=F(t,"a","logicalXor","bool"),r=F(e,"b","logicalXor","bool");return yt(n.shape,r.shape),fa(YE(t,e),f0(fa(t,e)))}const SO=q({logicalXor_:yie});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dx=2147483648;function bie(t,e,n="left"){const r=F(t,"sortedSequence","searchSorted"),s=F(e,"values","searchSorted"),i=r.shape[r.shape.length-1],o=s.shape[s.shape.length-1],a=ee(r,[-1,i]),l=ee(s,[-1,o]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==l.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(fe(l.shape)>=Dx)throw new Error(`values tensor size must less than ${Dx}`);if(a.shape[1]>=Dx)throw new Error(`trailing dim_size must less than ${Dx} for int32 output type, was ${a.shape[1]}`);const c={sortedSequence:a,values:l},u={side:n};return K.runKernel(CE,c,u)}const QE=q({searchSorted_:bie});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LW(t,e){return QE(t,e,"left")}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vie(t,e,n,r,s){const i=F(t,"x","maxPool"),o=1;let a=i,l=!1;i.rank===3&&(l=!0,a=ee(i,[1,i.shape[0],i.shape[1],i.shape[2]])),P(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),P(Kr(n,o),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${n} and dilations '${o}'`),Ss("maxPool",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s},d=K.runKernel(Nv,c,u);return l?ee(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const p0=q({maxPool_:vie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wie(t,e=[1,1,1],n,r,s,i="NDHWC"){const o=F(t,"x","maxPool3d");let a=o,l=!1;o.rank===4&&(l=!0,a=ee(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]])),P(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),P(i==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${i}`),Ss("maxPool3d",r,s);const c={x:a},u={filterSize:e,strides:n,pad:r,dimRoundingMode:s,dataFormat:i},d=K.runKernel($v,c,u);return l?ee(d,[d.shape[1],d.shape[2],d.shape[3],d.shape[4]]):d}const CO=q({maxPool3d_:wie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xie(t,e,n,r,s=!1){const o={x:F(t,"x","maxPoolWithArgmax")},a={filterSize:e,strides:n,pad:r,includeBatchInIndex:s},l=K.runKernel(cE,o,a);return{result:l[0],indexes:l[1]}}const FW=q({maxPoolWithArgmax_:xie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sie(t,e){let n=F(t,"a","maximum"),r=F(e,"b","maximum");[n,r]=Hn(n,r),n.dtype==="bool"&&(n=$e(n,"int32"),r=$e(r,"int32")),yt(n.shape,r.shape);const s={a:n,b:r};return K.runKernel(Im,s)}const ml=q({maximum_:Sie});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cie(t,e=null,n=!1){const s={x:F(t,"x","mean")},i={axis:e,keepDims:n};return K.runKernel(Av,s,i)}const Vn=q({mean_:Cie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ur(t,e="float32"){if(xi(t),e==="complex64"){const r=ur(t,"float32"),s=ur(t,"float32");return Jl(r,s)}const n=Hr(fe(t),e);return K.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Os(t,e="float32"){if(xi(t),e==="complex64"){const r=Os(t,"float32"),s=ur(t,"float32");return Jl(r,s)}const n=RC(fe(t),e);return K.makeTensor(n,t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MW(t,e,{indexing:n="xy"}={}){if(n!=="xy"&&n!=="ij")throw new TypeError(`${n} is not a valid third argument to meshgrid`);if(t===void 0)return[];let r=F(t,"x","meshgrid",t instanceof Ot?t.dtype:"float32");if(e===void 0)return[r];let s=F(e,"y","meshgrid",e instanceof Ot?e.dtype:"float32");const i=fe(r.shape),o=fe(s.shape);return n==="xy"?(r=ee(r,[1,-1]),s=ee(s,[-1,1]),[Et(Os([o,1],r.dtype),r),Et(s,Os([1,i],s.dtype))]):(r=ee(r,[-1,1]),s=ee(s,[1,-1]),[Et(r,Os([1,o],r.dtype)),Et(Os([i,1],s.dtype),s)])}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eie(t,e){let n=F(t,"a","minimum"),r=F(e,"b","minimum");[n,r]=Hn(n,r),n.dtype==="bool"&&(n=$e(n,"int32"),r=$e(r,"int32")),yt(n.shape,r.shape);const s={a:n,b:r};return K.runKernel(Nm,s)}const Cu=q({minimum_:Eie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ie(t,e,n){P(n==="reflect"||n==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${n}.`);const r=F(t,"x","mirrorPad");if(r.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");P(e.length===r.rank,()=>`Padding doesn't match input. Must be ${r.rank}. Got ${e.length}.`);const s=n==="reflect"?1:0;for(let a=0;a<r.rank;a++)P(e[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),P(e[a][0]>=0&&e[a][0]<=r.shape[a]-s&&e[a][1]>=0&&e[a][1]<=r.shape[a]-s,()=>`Padding in dimension ${a} cannot be greater than or equal to ${r.shape[a]-s} or less than 0 for input of shape ${r.shape}`);const i={paddings:e,mode:n},o={x:r};return K.runKernel(Ov,o,i)}const EO=q({mirrorPad_:_ie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tie(t,e){let n=F(t,"a","mod"),r=F(e,"b","mod");[n,r]=Hn(n,r);const s={a:n,b:r};return K.runKernel($m,s)}const _O=q({mod_:Tie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kie(t,e=null,n=!1){t=F(t,"x","moments");const r=Tt(e,t.shape),s=Vn(t,r,n);let i=s.shape;n||(i=sr(s.shape,r));const o=rn(Fe($e(t,"float32"),ee(s,i))),a=Vn(o,r,n);return{mean:s,variance:a}}const m0=q({moments_:kie});function Iie(t,e,n,r){const s=F(e,"data","multiRNNCell"),i=bb(n,"c","multiRNNCell"),o=bb(r,"h","multiRNNCell");let a=s;const l=[];for(let d=0;d<t.length;d++){const h=t[d](a,i[d],o[d]);l.push(h[0]),l.push(h[1]),a=h[1]}const c=[],u=[];for(let d=0;d<l.length;d+=2)c.push(l[d]),u.push(l[d+1]);return[c,u]}const zW=q({multiRNNCell_:Iie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nie(t,e,n,r=!1){const s=F(t,"logits","multinomial"),i=s.size,o=s.rank;if(i<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${i}.`);if(o>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${o}`);n=n||Math.random();const l={logits:o===1?ee(s,[1,-1]):s},c={numSamples:e,seed:n,normalized:r},u=K.runKernel(uE,l,c);return o===1?ee(u,[u.size]):u}const BW=q({multinomial_:Nie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ie(t,e){let n=F(t,"a","notEqual","string_or_numeric"),r=F(e,"b","notEqual","string_or_numeric");[n,r]=Hn(n,r),yt(n.shape,r.shape);const s={a:n,b:r};return K.runKernel(Pv,s)}const ph=q({notEqual_:$ie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aie(t,e,n=1,r=0,s="int32"){if(e<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${e}`);const o={indices:F(t,"indices","oneHot","int32")},a={dtype:s,depth:e,onValue:n,offValue:r};return K.runKernel(Fv,o,a)}const Op=q({oneHot_:Aie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rie(t){const n={x:F(t,"x","onesLike")};return K.runKernel(Lv,n)}const pi=q({onesLike_:Rie});function Oie(t,e){const n=F(t,"v1","outerProduct"),r=F(e,"v2","outerProduct");P(n.rank===1&&r.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${n.rank} and ${r.rank}.`);const s=ee(n,[-1,1]),i=ee(r,[1,-1]);return Et(s,i)}const jW=q({outerProduct_:Oie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Die(t,e,n=0){const r=F(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");const s={paddings:e,constantValue:n},i={x:r};return K.runKernel(zv,i,s)}const fc=q({pad_:Die});function Pie(t,e,n=0){return P(e.length===2,()=>"Invalid number of paddings. Must be length of 2."),fc(t,[e],n)}const VW=q({pad1d_:Pie});function Lie(t,e,n=0){return P(e.length===2&&e[0].length===2&&e[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),fc(t,e,n)}const UW=q({pad2d_:Lie});function Fie(t,e,n=0){return P(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),fc(t,e,n)}const WW=q({pad3d_:Fie});function Mie(t,e,n=0){return P(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),fc(t,e,n)}const HW=q({pad4d_:Mie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zie(t,e,n){const r=F(t,"x","spaceToBatchND");P(r.rank>=1+e.length,()=>`input rank ${r.rank} should be > than [blockShape] ${e.length}`),P(n.length===e.length,()=>`paddings.shape[0] ${n.length} must be equal to [blockShape] ${e.length}`),P(r.shape.reduce((o,a,l)=>l>0&&l<=e.length?o&&(a+n[l-1][0]+n[l-1][1])%e[l-1]===0:o,!0),()=>`input spatial dimensions ${r.shape.slice(1)} with paddings ${n.toString()} must be divisible by blockShapes ${e.toString()}`);const s={x:r},i={blockShape:e,paddings:n};return K.runKernel(Xv,s,i)}const g0=q({spaceToBatchND_:zie});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bie(t,e,n,r,s,i,o){s==null&&(s=[1,1]),i==null&&(i=1),r===0&&(r="valid");const a=F(t,"x","maxPool");let l=a,c=!1;a.rank===3&&(c=!0,l=ee(a,[1,a.shape[0],a.shape[1],a.shape[2]])),P(Kr(i,s),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${i} and dilations '${s}'`);const u=zo(l.shape,e,i,s,r),d=[u.dilationHeight,u.dilationWidth];let h;r==="same"?h=Vie([u.filterHeight,u.filterWidth],d):h=[[0,0],[0,0]];const f=d[0]===1&&d[1]===1,[p,m]=jie([u.inHeight,u.inWidth],d,h),g=f?r:"valid",y=f?l:g0(l,d,p),v=(n==="avg"?()=>i0(y,e,i,g,o):()=>p0(y,e,i,g,o))(),w=f?v:o0(v,d,m);return c?ee(w,[w.shape[1],w.shape[2],w.shape[3]]):w}function jie(t,e,n){const r=n.map(u=>u[0]),s=n.map(u=>u[1]),i=t.concat(r,s),o=e.map((u,d)=>(u-i[d]%u)%u),a=s.map((u,d)=>u+o[d]),l=e.map((u,d)=>[r[d],a[d]]),c=e.map((u,d)=>[0,o[d]]);return[l,c]}function Vie(t,e){const r=t.map((o,a)=>o+(o-1)*(e[a]-1)).map(o=>o-1),s=r.map(o=>Math.floor(o/2)),i=r.map((o,a)=>o-s[a]);return r.map((o,a)=>[s[a],i[a]])}const TO=q({pool_:Bie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uie(t,e){const n=F(t,"x","prelu"),r=F(e,"alpha","prelu"),s={x:n,alpha:r};return K.runKernel(Bv,s)}const y0=q({prelu_:Uie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wie(t,e=null,n=!1){let r=F(t,"x","prod");r.dtype==="bool"&&(r=$e(r,"int32"));const s={x:r},i={axis:e,keepDims:n};return K.runKernel(jv,s,i)}const kO=q({prod_:Wie});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hie(t,e,n,r){const s=t.map((u,d)=>F(u,`tensors${d}`,"raggedGather","int32")),i=F(e,"paramsDenseValues","raggedGather"),o=F(n,"indices","raggedGather","int32"),a={paramsNestedSplits:s,paramsDenseValues:i,indices:o},l={outputRaggedRank:r},c=K.runKernel(pE,a,l);return{outputNestedSplits:c.slice(0,c.length-1),outputDenseValues:c[c.length-1]}}const GW=q({raggedGather_:Hie});/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gie(t,e,n){const r=F(t,"starts","raggedRange"),s=F(e,"limits","raggedRange",r.dtype),i=F(n,"deltas","raggedRange",r.dtype),o={starts:r,limits:s,deltas:i},a=K.runKernel(mE,o);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}const KW=q({raggedRange_:Gie});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kie(t,e,n,r,s){const i=F(t,"shape","raggedTensorToTensor","int32"),o=F(e,"values","raggedTensorToTensor"),a=F(n,"defaultValue","raggedTensorToTensor",o.dtype),l=r.map((d,h)=>F(d,`tensors${h}`,"raggedTensorToTensor","int32")),c={shape:i,values:o,defaultValue:a,rowPartitionTensors:l},u={rowPartitionTypes:s};return K.runKernel(gE,c,u)}const qW=q({raggedTensorToTensor_:Kie});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qie(t,e,n){xi(t);const r=fe(t);let s=null;if(n==null||n==="float32")s=new Float32Array(r);else if(n==="int32")s=new Int32Array(r);else if(n==="bool")s=new Uint8Array(r);else throw new Error(`Unknown data type ${n}`);for(let i=0;i<r;i++)s[i]=e();return K.makeTensor(s,t,n)}const XW=q({rand_:qie});var IO={exports:{}};IO.exports;(function(t){(function(e,n,r){function s(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function i(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new s(l),d=c&&c.state,h=u.next;return h.int32=function(){return u.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&i(d,u),h.state=function(){return i(u,{})}),h}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:this.alea=o})(Mo,t)})(IO);var Xie=IO.exports,NO={exports:{}};NO.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xor128=o})(Mo,t)})(NO);var Yie=NO.exports,$O={exports:{}};$O.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function i(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xorwow=o})(Mo,t)})($O);var Qie=$O.exports,AO={exports:{}};AO.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.x,d=l.i,h,f;return h=u[d],h^=h>>>7,f=h^h<<24,h=u[d+1&7],f^=h^h>>>10,h=u[d+3&7],f^=h^h>>>3,h=u[d+4&7],f^=h^h<<7,h=u[d+7&7],h=h^h<<13,f^=h^h<<9,u[d]=f,l.i=d+1&7,f};function c(u,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],u.x=f,u.i=0,h=256;h>0;--h)u.next()}c(l,a)}function i(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.x&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xorshift7=o})(Mo,t)})(AO);var Jie=AO.exports,RO={exports:{}};RO.exports;(function(t){(function(e,n,r){function s(a){var l=this;l.next=function(){var u=l.w,d=l.X,h=l.i,f,p;return l.w=u=u+1640531527|0,p=d[h+34&127],f=d[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=d[h]=p^f,l.i=h,p+(u^u>>>16)|0};function c(u,d){var h,f,p,m,g,y=[],b=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,b=Math.max(b,d.length)),p=0,m=-32;m<b;++m)d&&(f^=d.charCodeAt((m+32)%d.length)),m===0&&(g=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(g=g+1640531527|0,h=y[m&127]^=f+g,p=h==0?p+1:0);for(p>=128&&(y[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)f=y[p+34&127],h=y[p=p+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,y[p]=f^h;u.w=g,u.X=y,u.i=p}c(l,a)}function i(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.X&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.xor4096=o})(Mo,t)})(RO);var Zie=RO.exports,OO={exports:{}};OO.exports;(function(t){(function(e,n,r){function s(a){var l=this,c="";l.next=function(){var d=l.b,h=l.c,f=l.d,p=l.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-f|0,l.d=f<<16^h>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function i(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new s(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&i(u,c),d.state=function(){return i(c,{})}),d}n&&n.exports?n.exports=o:this.tychei=o})(Mo,t)})(OO);var eoe=OO.exports,YW={exports:{}};const toe={},noe=Object.freeze(Object.defineProperty({__proto__:null,default:toe},Symbol.toStringTag,{value:"Module"})),roe=wi(noe);(function(t){(function(e,n,r){var s=256,i=6,o=52,a="random",l=r.pow(s,i),c=r.pow(2,o),u=c*2,d=s-1,h;function f(w,C,_){var E=[];C=C==!0?{entropy:!0}:C||{};var I=y(g(C.entropy?[w,v(n)]:w??b(),3),E),O=new p(E),R=function(){for(var z=O.g(i),B=l,j=0;z<c;)z=(z+j)*s,B*=s,j=O.g(1);for(;z>=u;)z/=2,B/=2,j>>>=1;return(z+j)/B};return R.int32=function(){return O.g(4)|0},R.quick=function(){return O.g(4)/4294967296},R.double=R,y(v(O.S),n),(C.pass||_||function(z,B,j,G){return G&&(G.S&&m(G,O),z.state=function(){return m(O,{})}),j?(r[a]=z,B):z})(R,I,"global"in C?C.global:this==r,C.state)}function p(w){var C,_=w.length,E=this,I=0,O=E.i=E.j=0,R=E.S=[];for(_||(w=[_++]);I<s;)R[I]=I++;for(I=0;I<s;I++)R[I]=R[O=d&O+w[I%_]+(C=R[I])],R[O]=C;(E.g=function(z){for(var B,j=0,G=E.i,U=E.j,Q=E.S;z--;)B=Q[G=d&G+1],j=j*s+Q[d&(Q[G]=Q[U=d&U+B])+(Q[U]=B)];return E.i=G,E.j=U,j})(s)}function m(w,C){return C.i=w.i,C.j=w.j,C.S=w.S.slice(),C}function g(w,C){var _=[],E=typeof w,I;if(C&&E=="object")for(I in w)try{_.push(g(w[I],C-1))}catch{}return _.length?_:E=="string"?w:w+"\0"}function y(w,C){for(var _=w+"",E,I=0;I<_.length;)C[d&I]=d&(E^=C[d&I]*19)+_.charCodeAt(I++);return v(C)}function b(){try{var w;return h&&(w=h.randomBytes)?w=w(s):(w=new Uint8Array(s),(e.crypto||e.msCrypto).getRandomValues(w)),v(w)}catch{var C=e.navigator,_=C&&C.plugins;return[+new Date,e,_,e.screen,v(n)]}}function v(w){return String.fromCharCode.apply(0,w)}if(y(r.random(),n),t.exports){t.exports=f;try{h=roe}catch{}}else r["seed"+a]=f})(typeof self<"u"?self:Mo,[],Math)})(YW);var soe=YW.exports,ioe=Xie,ooe=Yie,aoe=Qie,loe=Jie,coe=Zie,uoe=eoe,Bh=soe;Bh.alea=ioe;Bh.xor128=ooe;Bh.xorwow=aoe;Bh.xorshift7=loe;Bh.xor4096=coe;Bh.tychei=uoe;var JE=Bh;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const doe=.001,QW=.1;function hoe(t,e,n){return n==null&&(n=DO()),nA(t,e,(r,s)=>PO(r,s,n))}function DO(){return K.backend.floatPrecision()===32?doe:QW}function nA(t,e,n){let r=!0;if((Rr(t)||Rr(e))&&(r=!1),Rr(t)&&Rr(e)&&(r=!0),r){const o=t.constructor.name,a=e.constructor.name;if(o!==a)throw new Error(`Arrays are of different type. Actual: ${o}. Expected: ${a}`)}if(Array.isArray(t)&&Array.isArray(e)){const o=al(t),a=al(e);if(!Nt(o,a))throw new Error(`Arrays have different shapes. Actual: [${o}]. Expected: [${a}]`)}const s=Rr(t)?t:ol(t),i=Rr(e)?e:ol(e);if(s.length!==i.length)throw new Error(`Arrays have different lengths actual: ${s.length} vs expected: ${i.length}.
Actual:   ${s}.
Expected: ${i}.`);for(let o=0;o<i.length;++o){const a=s[o],l=i[o];if(!n(a,l))throw new Error(`Arrays differ: actual[${o}] = ${a}, expected[${o}] = ${l}.
Actual:   ${s}.
Expected: ${i}.`)}typeof expect<"u"&&expect().nothing()}function foe(t,e){t().then(()=>e.fail(),()=>e()),typeof expect<"u"&&expect().nothing()}function poe(t,e){const n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return Ua(t)||Ua(t[0])||Ua(e)||Ua(e[0])?nA(t,n,(r,s)=>r==s):nA(t,e,(r,s)=>PO(r,s,0))}function moe(t,e,n){if(n==null&&(n=DO()),!PO(t,e,n))throw new Error(`Numbers differ: actual === ${t}, expected === ${e}`);typeof expect<"u"&&expect().nothing()}function PO(t,e,n){return!isFinite(t)&&!isFinite(e)?!0:!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}function goe(t,e,n){for(let r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error(`Value out of range:${t[r]} low: ${e}, high: ${n}`)}function yoe(t,e){const n=new Float32Array(t),r=new Float32Array(e);if(n.length!==r.length)throw new Error(`Expected ArrayBuffer to be of length ${r.length}, but it was ${n.length}`);for(let s=0;s<r.length;s++)if(n[s]!==r[s])throw new Error(`Expected ArrayBuffer value at ${s} to be ${r[s]} but got ${n[s]} instead`)}function JW(t){for(let e=0;e<t.length;e++){const n=t[e];Array.isArray(n)?JW(n):t[e]=qa(n)}return t}function boe(t){const e=document.createElement("video");return"playsInline"in e&&(e.playsInline=!0),e.muted=!0,e.loop=!0,e.style.position="fixed",e.style.left="0px",e.style.top="0px",e.preload="auto",e.appendChild(t),new Promise(n=>{e.addEventListener("loadeddata",r=>n(e)),e.load()})}async function voe(t){await t.play(),"requestVideoFrameCallback"in t&&await new Promise(e=>{t.requestVideoFrameCallback(e)})}const woe=Object.freeze(Object.defineProperty({__proto__:null,TEST_EPSILON_FLOAT16:QW,createVideoElement:boe,encodeStrings:JW,expectArrayBuffersEqual:yoe,expectArraysClose:hoe,expectArraysEqual:poe,expectNumbersClose:moe,expectPromiseToFail:foe,expectValuesInRange:goe,play:voe,testEpsilon:DO},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LO{constructor(e,n,r,s,i){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=s,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);const o=i||Math.random();this.random=JE.alea(o.toString())}nextValue(){if(!isNaN(this.nextVal)){const s=this.nextVal;return this.nextVal=NaN,s}let e,n,r=!1;for(;!r;){let s,i,o;do s=2*this.random()-1,i=2*this.random()-1,o=s*s+i*i;while(o>=1||o===0);const a=Math.sqrt(-2*Math.log(o)/o);e=this.mean+this.stdDev*s*a,n=this.mean+this.stdDev*i*a,(!this.truncated||this.isValidTruncated(e))&&(r=!0)}return(!this.truncated||this.isValidTruncated(n))&&(this.nextVal=this.convertValue(n)),this.convertValue(e)}convertValue(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)}isValidTruncated(e){return e<=this.upper&&e>=this.lower}}class xoe{constructor(e,n,r,s){this.alpha=e,this.beta=1/n,this.dtype=r;const i=s||Math.random();this.randu=JE.alea(i.toString()),this.randn=new LO(0,1,r,!1,this.randu()),e<1?this.d=e+2/3:this.d=e-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let e,n,r,s,i,o;for(;;){do s=this.randn.nextValue(),o=1+this.c*s;while(o<=0);if(o*=o*o,e=s*s,n=1-.331*e*e,r=.5*e+this.d*(1-o+Math.log(o)),i=this.randu(),i<n||Math.log(i)<r)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)}convertValue(e){return this.dtype==="float32"?e:Math.round(e)}}class Soe{constructor(e=0,n=1,r,s){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=e,this.range=n-e,this.dtype=r,s==null&&(s=Math.random()),typeof s=="number"&&(s=s.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${e} - ${n} <= 1 and dtype is not float`);this.random=JE.alea(s)}convertValue(e){return this.canReturnFloat()?e:Math.round(e)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Coe(t,e,n=1,r="float32",s){if(xi(t),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error(`Unsupported data type ${r}`);const i=new xoe(e,n,r,s),o=xt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const ZW=q({randomGamma_:Coe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eoe(t,e=0,n=1,r,s){if(xi(t),r!=null&&r==="bool")throw new Error(`Unsupported data type ${r}`);const i=new LO(e,n,r,!1,s),o=xt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const ZE=q({randomNormal_:Eoe});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _oe(t,e,n){if(e!=null&&e==="bool")throw new Error(`Unsupported data type ${e}`);return ZE(t,0,1,e,n)}const eH=q({randomStandardNormal_:_oe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Toe(t,e=0,n=1,r="float32",s){xi(t);const i=xt(t,r),o=new Soe(e,n,null,s);for(let a=0;a<i.values.length;a++)i.values[a]=o.nextValue();return i.toTensor()}const Bu=q({randomUniform_:Toe});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function koe(t,e,n,r){return Bu(t,e,n,"int32",r)}const tH=q({randomUniformInt_:koe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mh(t,e,n=1,r="float32"){if(n===0)throw new Error("Cannot have a step of zero");const s={start:t,stop:e,step:n,dtype:r};return K.runKernel(yE,{},s)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ioe(t){const n={input:F(t,"input","real")};return K.runKernel(bE,n)}const Dp=q({real_:Ioe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Noe(t){const n={x:F(t,"x","reciprocal")};return K.runKernel(Om,n)}const FO=q({reciprocal_:Noe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $oe(t){const n={x:F(t,"x","relu")};return K.runKernel(Dm,n)}const xa=q({relu_:$oe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aoe(t){const n={x:F(t,"x","relu6")};return K.runKernel(Pm,n)}const e_=q({relu6_:Aoe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Roe(t,e){const r={x:F(t,"x","reverse")},s={dims:e};return K.runKernel(Hv,r,s)}const Gi=q({reverse_:Roe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ooe(t){const e=F(t,"x","reverse");return P(e.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${e.rank}.`),Gi(e,0)}const nH=q({reverse1d_:Ooe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Doe(t,e){const n=F(t,"x","reverse");return P(n.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${n.rank}.`),Gi(n,e)}const rH=q({reverse2d_:Doe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Poe(t,e){const n=F(t,"x","reverse");return P(n.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${n.rank}.`),Gi(n,e)}const sH=q({reverse3d_:Poe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Loe(t,e){const n=F(t,"x","reverse");return P(n.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${n.rank}.`),Gi(n,e)}const iH=q({reverse4d_:Loe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Foe(t){const n={x:F(t,"x","round")};return K.runKernel(Lm,n)}const t_=q({round_:Foe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Moe(t){const n={x:F(t,"x","rsqrt","float32")};return K.runKernel(Fm,n)}const n_=q({rsqrt_:Moe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zoe(t){const n={x:F(t,"x","selu")};return K.runKernel(Mm,n)}const r_=q({selu_:zoe});function Boe(t,e,n,r,s,i=[1,1],o="NHWC"){const a=F(t,"x","separableConv2d"),l=F(e,"depthwiseFilter","separableConv2d"),c=F(n,"pointwiseFilter","separableConv2d");let u=a,d=!1;if(a.rank===3&&(d=!0,u=ee(a,[1,a.shape[0],a.shape[1],a.shape[2]])),o==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");P(u.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${u.rank}.`),P(l.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${l.rank}.`),P(c.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${l.rank}.`),P(c.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${c.shape[0]}.`),P(c.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${c.shape[1]}.`);const h=l.shape[2],f=l.shape[3];P(c.shape[2]===h*f,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*f}, but got ${c.shape[2]}.`);const p=Jm(u,l,r,s,o,i),g=Zl(p,c,1,"valid",o);return d?ee(g,[g.shape[1],g.shape[2],g.shape[3]]):g}const s_=q({separableConv2d_:Boe});/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function joe(t,e){const n=F(t,"x","setdiff1d"),r=F(e,"y","setdiff1d");P(n.dtype===r.dtype,()=>`x and y should have the same dtype, but got x (${n.dtype}) and y (${r.dtype}).`),P(n.rank===1,()=>`x should be 1D tensor, but got x (${n.shape}).`),P(r.rank===1,()=>`y should be 1D tensor, but got y (${r.shape}).`);const s=await n.data(),i=await r.data(),o=new Set(i);let a=0;for(let u=0;u<s.length;u++)o.has(s[u])||a++;const l=new dr([a],n.dtype),c=new dr([a],"int32");for(let u=0,d=0;u<s.length;u++)o.has(s[u])||(l.values[d]=s[u],c.values[d]=u,d++);return[l.toTensor(),c.toTensor()]}const oH=joe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Voe(t){const n={x:F(t,"x","sign")};return K.runKernel(jm,n)}const MO=q({sign_:Voe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uoe(t){const n={x:F(t,"x","sin","float32")};return K.runKernel(zm,n)}const i_=q({sin_:Uoe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Woe(t){const n={x:F(t,"x","sinh")};return K.runKernel(Bm,n)}const o_=q({sinh_:Woe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hoe(t,e,n){const r=F(t,"x","slice1d");return P(r.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${r.rank} tensor`),ot(r,[e],[n])}const b0=q({slice1d_:Hoe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Goe(t,e,n){const r=F(t,"x","slice2d");return P(r.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${r.rank} tensor`),ot(r,e,n)}const a_=q({slice2d_:Goe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Koe(t,e,n){const r=F(t,"x","slice3d");return P(r.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${r.rank} tensor`),ot(r,e,n)}const v0=q({slice3d_:Koe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qoe(t,e,n){const r=F(t,"x","slice4d");return P(r.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${r.rank} tensor`),ot(r,e,n)}const Pp=q({slice4d_:qoe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xoe(t,e=-1){const n=F(t,"logits","softmax","float32");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${n.rank} and dim was ${e}`);const r={logits:n},s={dim:e};return K.runKernel(Qv,r,s)}const w0=q({softmax_:Xoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yoe(t){P(t.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${t.dtype}.`);const e={input:t};return K.runKernel(ZC,e)}const x0=q({fft_:Yoe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qoe(t){P(t.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${t.dtype}.`);const e={input:t};return K.runKernel(rE,e)}const Lp=q({ifft_:Qoe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Joe(t){const e=t.shape[t.shape.length-1],n=t.size/e;let r;if(e<=2){const s=ee(t,[n,e]);r=Lp(s)}else{const s=[n,2*(e-1)],i=ee(Dp(t),[n,e]),o=ee(c0(t),[n,e]),a=Gi(ot(i,[0,1],[n,e-2]),1),l=Y(Gi(ot(o,[0,1],[n,e-2]),1),tt(-1)),c=Wn([i,a],1),u=Wn([o,l],1),d=ee(Jl(c,u),[s[0],s[1]]);r=Lp(d)}if(r=Dp(r),t.rank===3&&t.shape[0]!==0){const s=r,i=t.shape[0];r=ee(r,[i,r.shape[0]/i,r.shape[1]]),s.dispose()}return r}const l_=q({irfft_:Joe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zoe(t,e,n=0){const s={x:F(t,"x","split")},i={numOrSizeSplits:e,axis:n};return K.runKernel(Yv,s,i)}const Ps=q({split_:Zoe});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eae(t,e){P(t.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${t.dtype}`);let n=t.shape[t.shape.length-1];const r=t.size/n;let s;if(e!=null&&e<n){const p=t.shape.map(g=>0),m=t.shape.map(g=>g);m[t.shape.length-1]=e,s=ot(t,p,m),n=e}else if(e!=null&&e>n){const p=t.shape.map(m=>m);p[t.shape.length-1]=e-n,s=Wn([t,ur(p)],t.shape.length-1),n=e}else s=t;const i=Dt(s),o=ee(Jl(s,i),[r,n]),a=x0(o),l=Math.floor(n/2)+1,c=Dp(a),u=c0(a),d=Ps(c,[l,n-l],c.shape.length-1),h=Ps(u,[l,n-l],u.shape.length-1),f=s.shape.slice();return f[s.shape.length-1]=l,ee(Jl(d[0],h[0]),f)}const S0=q({rfft_:eae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tae(t,e){let n=F(t,"a","squaredDifference"),r=F(e,"b","squaredDifference");[n,r]=Hn(n,r),yt(n.shape,r.shape);const s={a:n,b:r},i={};return K.runKernel(Hm,s,i)}const c_=q({squaredDifference_:tae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nae(t,e){const n=F(t,"x","squeeze","string_or_numeric");return ee(n,lc(n.shape,e).newShape)}const Ao=q({squeeze_:nae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rae(t,e=0){const n=bb(t,"tensors","stack","string_or_numeric");P(n.length>=1,()=>"Pass at least one tensor to tf.stack"),n.length>0&&P(e<=n[0].rank,()=>"Axis must be <= rank of the tensor");const r=n,s={axis:e};return K.runKernel(Mv,r,s)}const Vs=q({stack_:rae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sae(t,e=0){const r={x:F(t,"x","step")},s={alpha:e};return K.runKernel(Ym,r,s)}const jh=q({step_:sae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iae(t,e,n,r,s=0,i=0,o=0,a=0,l=0){const u={x:F(t,"x","stridedSlice","string_or_numeric")},d={begin:e,end:n,strides:r,beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};return K.runKernel($E,u,d)}const zO=q({stridedSlice_:iae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oae(t){const n={x:F(t,"x","tan","float32")};return K.runKernel(Km,n)}const BO=q({tan_:oae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sr(t,e){Oh(t);const n=al(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return Lu(t,null,n,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ou(t,e,n){if(Oh(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");const r=al(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return Lu(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jO(t,e,n){if(Oh(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");const r=al(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return Lu(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aH(t,e,n){if(Oh(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");const r=al(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return Lu(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lH(t,e,n){if(Oh(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");const r=al(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return Lu(t,e,r,n)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cH(t,e,n){if(Oh(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");const r=al(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return e=e||r,Lu(t,e,r,n)}function VO(t,e,n){const r=e.rank>1?e.shape[e.rank-1]:1,s=e.rank>1?e.rank-1:1,i=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${n.shape}, indices.shape: ${e.shape}, shape: ${t}, sliceDim: ${r}, and batchDim: ${s}.`;if(n.rank<s)throw new Error(i+` update.rank < ${s}. `);if(t.length<r+(n.rank-s))throw new Error(i+` Output shape length < ${r+(n.rank-s)}`);if(n.rank!==s+t.length-r)throw new Error(i+` update.rank != ${s+t.length-r}`);for(let o=0;o<s;++o)if(n.shape[o]!==e.shape[o])throw new Error(i+` updates.shape[${o}] (${n.shape[o]}) != indices.shape[${o}] (${e.shape[o]}).`);for(let o=0;o<n.rank-s;++o)if(n.shape[o+s]!==t[o+r])throw new Error(i+` updates.shape[${o+s}] (${n.shape[o+s]}) != shape[${o+s}] (${t[o+s]})`)}function u_(t,e,n){if(e.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${e.rank}.`);if(t.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${t.rank}.`);if(e.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${e.dtype}`);if(n.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${n}`);if(n.length===0){if(e.size===0)throw new Error(`Indices specified for empty output. indices shape: ${e.shape}`);if(t.size===0)throw new Error(`Updates specified for empty output. updates shape: ${t.shape}`)}VO(n,e,t)}function ju(t,e,n){const r=e.shape.length,s=r>1?e.shape[r-1]:1,i=n.length;let o=1;for(let d=s;d<i;++d)o*=n[d];const a=s<1?1:s,l=fe(e.shape)/a,c=[...et(n.slice(0,s)),1],u=fe(n);return{sliceRank:s,numUpdates:l,sliceSize:o,strides:c,outputSize:u}}const aae=Object.freeze(Object.defineProperty({__proto__:null,calculateShapes:ju,validateInput:u_,validateUpdateShape:VO},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lae(t,e,n){const r=F(t,"tensor","tensorScatterupdate"),s=F(e,"indices","tensorScatterupdate","int32"),i=F(n,"updates","tensorScatterupdate");if(u_(i,s,r.shape),r.dtype!==i.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${r.dtype} and ${i.dtype}.`);const o={tensor:r,indices:s,updates:i},a={};return K.runKernel(SE,o,a)}const uH=q({tensorScatterUpdate_:lae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cae(t,e=1,n=!0){const r=F(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");const s=r.shape[r.shape.length-1];if(e<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${e}`);if(e>s)throw new Error(`'k' passed to topk() must be <= the last dimension (${s}) but got ${e}`);const i={x:r},o={k:e,sorted:n},[a,l]=K.runKernel(DE,i,o);return{values:a,indices:l}}const UO=q({topk_:cae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uae(t,e=0,n=1,r,s){if(xi(t),r!=null&&r==="bool")throw new Error("Unsupported data type $ { dtype }");const i=new LO(e,n,r,!0,s),o=xt(t,r);for(let a=0;a<o.values.length;a++)o.values[a]=i.nextValue();return o.toTensor()}const d_=q({truncatedNormal_:uae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dae(t,e=0){const n=F(t,"x","unique","string_or_numeric");P(n.rank>0,()=>"The input tensor must be at least 1D");const r={x:n},s={axis:e},[i,o]=K.runKernel(LE,r,s);return{values:i,indices:o}}const WO=q({unique_:dae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hae(t,e,n){const r=F(t,"x","unsortedSegmentSum"),s=F(e,"segmentIds","unsortedSegmentSum","int32");P(ah(n),()=>"numSegments must be of dtype int");const i={x:r,segmentIds:s},o={numSegments:n};return K.runKernel(e0,i,o)}const h_=q({unsortedSegmentSum_:hae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fae(t,e=0){const n=F(t,"x","unstack","string_or_numeric");P(e>=-n.shape.length&&e<n.shape.length,()=>`Axis = ${e} is not in [-${n.shape.length}, ${n.shape.length})`);const r={value:n},s={axis:e};return K.runKernel(Zv,r,s)}const Ki=q({unstack_:fae});/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dH(t,e){return QE(t,e,"right")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HO(t,e=!0,n,r){return K.makeVariable(t,e,n,r)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f_(t,e){const n=[];for(let i=0;i<e.length;i++)e[i]&&n.push(i);const r=xt(t,"int32"),s=xt([n.length,t.length],"int32");for(let i=0;i<n.length;i++){const o=r.indexToLoc(n[i]),a=i*t.length;s.values.set(o,a)}return s.toTensor()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function pae(t){const e=F(t,"condition","whereAsync","bool"),n=await e.data(),r=f_(e.shape,n);return t!==e&&e.dispose(),r}const GO=pae;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function mae(t,e,n){const r=F(t,"tensor","boolMask"),s=F(e,"mask","boolMask","bool"),i=n??0,o=s.rank,a=r.shape;P(o>0,()=>"mask cannot be scalar"),Gr(a.slice(i,i+o),s.shape,"mask's shape must match the first K dimensions of tensor's shape,");let l=1;for(let m=i;m<i+o;m++)l*=a[m];const c=a.slice(0,i).concat([l],a.slice(i+o)),u=ee(r,c),d=ee(s,[-1]),h=await GO(d),f=Ao(h,[1]),p=ng(u,f,i);return t!==r&&r.dispose(),e!==s&&s.dispose(),f.dispose(),u.dispose(),d.dispose(),h.dispose(),p}const hH=mae;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gae(t,e,n){const r=F(t,"x","transpose");if(e==null&&(e=r.shape.map((o,a)=>a).reverse()),P(r.rank===e.length,()=>`Error in transpose: rank of input ${r.rank} must match length of perm ${e}.`),e.forEach(o=>{P(o>=0&&o<r.rank,()=>`All entries in 'perm' must be between 0 and ${r.rank-1} but got ${e}`)}),r.rank<=1)return r.clone();const s={x:r},i={perm:e};return r.dtype==="complex64"?oe(()=>{let o=Dp(r),a=c0(r);return o=K.runKernel(qd,{x:o},i),a=K.runKernel(qd,{x:a},i),n&&(a=yn(a)),Jl(o,a)}):K.runKernel(qd,s,i)}const $t=q({transpose_:gae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yae(t,e,n,r,s=!0){const i=F(t,"v","movingAverage"),o=F(e,"x","movingAverage"),a=F(n,"decay","movingAverage");iW(i,o),P(Nt(i.shape,o.shape),()=>"Shape mismatch in v and x");const l=tt(1),c=Fe(l,a);let u=Y(Fe(o,i),c);if(s){P(r!=null,()=>"When using zeroDebias: true, step is required.");const d=F(r,"step","movingAverage");u=Ue(u,Fe(l,ll(a,d)))}return xe(i,u)}const fH=q({movingAverage_:yae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bae(t,e,n){xi(n);const r=F(t,"indices","scatterND","int32"),s=F(e,"updates","scatterND");u_(s,r,n);const i={indices:r,updates:s},o={shape:n};return K.runKernel(xE,i,o)}const pH=q({scatterND_:bae});function vae(t,e,n,r){if(t.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${t.shape}.`);const s=t.rank>0?t.shape[0]:1,i=t.rank>1?t.shape[1]:1;if(n.length!==i)throw new Error(`outputShape has incorrect number of elements:, ${n.length}, should be: ${i}.`);const o=e.size;if(!(e.rank===0||e.rank===1&&o===s))throw new Error(`sparseValues has incorrect shape ${e.shape}, should be [] or [${s}]`);if(e.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wae(t,e,n,r=0){xi(n);const s=F(t,"sparseIndices","sparseToDense","int32"),i=F(e,"sparseValues","sparseToDense","string_or_numeric"),o=F(r,"defaultValue","sparseToDense",i.dtype);vae(s,i,n,o);const a={sparseIndices:s,sparseValues:i,defaultValue:o},l={outputShape:n};return K.runKernel(IE,a,l)}const mH=q({sparseToDense_:wae});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xae(t,e){const n=F(e,"indices","gatherND","int32"),s={params:F(t,"x","gatherND","string_or_numeric"),indices:n};return K.runKernel(nE,s)}const gH=q({gatherND_:xae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sae(t,e){if(e==null)return t.shape.slice();if(Nt(t.shape,e))return e;if(t.shape.length===e.length){const n=[];for(let r=0;r<t.shape.length;r++)e[r]==null&&t.shape[r]!=null?n.push(t.shape[r]):n.push(e[r]);return n}return e}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cae(t,e,n,r){const s=F(t,"x","dropout");if(P(s.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${s.dtype} tensor instead.`),P(e>=0&&e<1,()=>`rate must be a float in the range [0, 1), but got ${e}.`),e===0)return t instanceof Ot?s.clone():s;const i=Sae(s,n),o=1-e,a=Ue(tg(xe(Bu(i,0,1,"float32",r),o)),o);return Y(s,a)}const KO=q({dropout_:Cae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qO(t){return Math.floor(Math.pow(2,Math.ceil(Math.log(t)/Math.log(2))))}function p_(t,e,n){const r=1-t%2,s=new Float32Array(t);for(let i=0;i<t;++i){const o=2*Math.PI*i/(t+r-1);s[i]=e-n*Math.cos(o)}return Sr(s,"float32")}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function Eae(t,e,n=1){const r=F(t,"predictions","inTopK"),s=F(e,"targets","inTopK");P(r.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${r.rank}`),P(r.rank-1===s.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${r.rank} and targets rank ${s.rank}`),Gr(r.shape.slice(0,r.shape.length-1),s.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");const i=r.shape[r.shape.length-1];P(n>0&&n<=i,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${i}), but got ${n}`);const o=await r.data(),a=await s.data(),[l,c]=[o.length/i,i],u=Pr("bool",l);for(let d=0;d<l;d++){const h=d*c,f=o.subarray(h,h+c),p=[];for(let m=0;m<f.length;m++)p.push({value:f[m],index:m});p.sort((m,g)=>g.value-m.value),u[d]=0;for(let m=0;m<n;m++)if(p[m].index===a[d]){u[d]=1;break}}return t!==r&&r.dispose(),e!==s&&s.dispose(),No(u,s.shape,"bool")}const yH=Eae;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ae(t,e,n,r,s,i="NHWC",o){let a=t;t.rank===3&&(a=ee(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ee(e,[1,e.shape[0],e.shape[1],e.shape[2]])),P(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),P(l.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${l.shape}.`),P(n.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${n}.`);const c=i==="NHWC"?a.shape[3]:a.shape[1],u=i==="NHWC"?l.shape[3]:l.shape[1];P(c===n[2],()=>`Error in conv2dDerFilter: depth of input ${c}) must match input depth in filter (${n[2]}.`),P(u===n[3],()=>`Error in conv2dDerFilter: depth of dy (${u}) must match output depth for filter (${n[3]}).`),Ss("conv2dDerFilter",s,o);const d={x:a,dy:l},h={strides:r,pad:s,dataFormat:i,dimRoundingMode:o,filterShape:n};return K.runKernel(BC,d,h)}const XO=q({conv2DBackpropFilter_:_ae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function m_(t,e,n){if(n==null||n==="linear")return t;if(n==="relu")return Y(t,jh(e));throw new Error(`Cannot compute gradient for fused activation ${n}.`)}function g_(t,e){let n=e;const r=hr(t.shape,e.shape);return r.length>0&&(n=qe(n,r)),ee(n,t.shape)}function y_(t,e,n,r){if(e==="linear")return t;if(e==="relu")return xa(t);if(e==="elu")return Zm(t);if(e==="relu6")return e_(t);if(e==="prelu")return y0(t,n);if(e==="leakyrelu")return u0(t,r);if(e==="sigmoid")return $o(t);throw new Error(`Unknown fused activation ${e}.`)}const b_=(t,e)=>!(t>0)||e==="linear";/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tae({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(l=l||"linear",b_(K.state.gradientDepth,l)===!1){P(s==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${s} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let _=Zl(t,e,n,r,s,i,o);return a!=null&&(_=xe(_,a)),y_(_,l,c,u)}const d=F(t,"x","conv2d","float32"),h=F(e,"filter","conv2d","float32");let f=d,p=!1;d.rank===3&&(p=!0,f=ee(d,[1,d.shape[0],d.shape[1],d.shape[2]])),P(f.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${f.rank}.`),P(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),Ss("fused conv2d",r,o);const m=s==="NHWC"?f.shape[3]:f.shape[1];P(h.shape[2]===m,()=>`Error in conv2d: depth of input (${m}) must match input depth for filter ${h.shape[2]}.`),P(Kr(n,i),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`);const g=Fr(f.shape,h.shape,n,i,r,o);let y;a!=null&&(y=F(a,"bias","fused conv2d"),[y]=Hn(y,d),s==="NHWC"?yt(g.outShape,y.shape):(P(y.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${y.shape.length}.`),P(y.shape.length===0||y.shape[0]===g.outChannels||y.shape[0]===1,()=>`Error in fused conv2d: bias shape (${y.shape}) is not compatible with the number of output channels (${g.outChannels})`)));let b;if(c!=null){const _=c.shape;if(P(_.length<=1||_.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${_.length}.`),_.length===1)P(_[0]===1||_[0]===g.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${_}) is not compatible with the number of output channels (${g.outChannels}).`);else if(_.length===3)try{yt(_,g.outShape)}catch{const I=`Error in fused conv2d: PReLU activation weights (${_}) is not compatible with the output shape of the conv2d (${g.outShape}).`;throw Error(I)}b=F(c,"prelu weights","fused conv2d")}const v=(_,E)=>{P(s==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${s} but only NHWC is currently supported.`);const[I,O,R,z]=E,B=m_(_,R,l);P(xu(i),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`);const j=aO(O.shape,B,I,n,r),G=XO(O,B,I.shape,n,r),U=[j,G];if(z!=null){const Q=g_(z,B);U.push(Q)}return U},w={x:f,filter:h,bias:y,preluActivationWeights:b},C={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?cl((E,I,O)=>{let R=K.runKernel(fb,w,C);return O([I,E,R]),p&&(R=ee(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:v}})(f,h):cl((E,I,O,R)=>{let z=K.runKernel(fb,w,C);return R([I,E,z,O]),p&&(z=ee(z,[z.shape[1],z.shape[2],z.shape[3]])),{value:z,gradFunc:v}})(f,h,y)}const bH=q({fusedConv2d_:Tae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kae(t,e,n,r,s,i=[1,1],o){let a=t;t.rank===3&&(a=ee(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l=e;l.rank===3&&(l=ee(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={x:a,dy:l},u={strides:r,pad:s,dimRoundingMode:o,dilations:i,filterShape:n};return K.runKernel(KC,c,u)}const vH=q({depthwiseConv2dNativeBackpropFilter_:kae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Iae(t,e,n,r,s,i=[1,1],o){let a=e,l=!1;e.rank===3&&(l=!0,a=ee(e,[1,e.shape[0],e.shape[1],e.shape[2]]));const c={dy:a,filter:n},u={strides:r,pad:s,dimRoundingMode:o,dilations:i,inputShape:t},d=K.runKernel(qC,c,u);return l?ee(d,[d.shape[1],d.shape[2],d.shape[3]]):d}const wH=q({depthwiseConv2dNativeBackpropInput_:Iae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nae({x:t,filter:e,strides:n,pad:r,dataFormat:s="NHWC",dilations:i=[1,1],dimRoundingMode:o,bias:a,activation:l="linear",preluActivationWeights:c,leakyreluAlpha:u}){if(b_(K.state.gradientDepth,l)===!1){let C=Jm(t,e,n,r,s,i,o);return a!=null&&(C=xe(C,a)),y_(C,l,c,u)}const d=F(t,"x","depthwiseConv2d","float32"),h=F(e,"filter","depthwiseConv2d","float32");let f=d,p=!1;d.rank===3&&(p=!0,f=ee(d,[1,d.shape[0],d.shape[1],d.shape[2]])),P(f.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${f.rank}.`),P(h.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),P(f.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${f.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),i==null&&(i=[1,1]),P(Kr(n,i),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${n} and dilations '${i}'`),Ss("fused depthwiseConv2d",r,o);const m=Fr(f.shape,h.shape,n,i,r,o,!0);let g;a!=null&&(g=F(a,"bias","fused conv2d"),[g]=Hn(g,d),yt(m.outShape,g.shape));let y;c!=null&&(y=F(c,"prelu weights","fused depthwiseConv2d"));const b=(C,_)=>{P(xu(i),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${i}'`);const[E,I,O,R]=_,z=m_(C,O,l),B=wH(I.shape,z,E,n,r,i,o),j=vH(I,z,E.shape,n,r,i,o);if(R!=null){const G=g_(g,z);return[B,j,G]}return[B,j]},v={x:f,filter:h,bias:g,preluActivationWeights:y},w={strides:n,pad:r,dataFormat:s,dilations:i,dimRoundingMode:o,activation:l,leakyreluAlpha:u};return a==null?cl((_,E,I)=>{let O=K.runKernel(pb,v,w);return I([E,_,O]),p&&(O=ee(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:b}})(f,h):cl((_,E,I,O)=>{let R=K.runKernel(pb,v,w);return O([E,_,R,I]),p&&(R=ee(R,[R.shape[1],R.shape[2],R.shape[3]])),{value:R,gradFunc:b}})(f,h,g)}const $ae=q({fusedDepthwiseConv2d_:Nae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Aae({a:t,b:e,transposeA:n=!1,transposeB:r=!1,bias:s,activation:i="linear",preluActivationWeights:o,leakyreluAlpha:a=.2}){if(b_(K.state.gradientDepth,i)===!1){let z=Et(t,e,n,r);return s!=null&&(z=xe(z,s)),y_(z,i,o,a)}let l=F(t,"a","fused matMul"),c=F(e,"b","fused matMul");[l,c]=Hn(l,c);const u=n?l.shape[l.rank-2]:l.shape[l.rank-1],d=r?c.shape[c.rank-1]:c.shape[c.rank-2],h=n?l.shape[l.rank-1]:l.shape[l.rank-2],f=r?c.shape[c.rank-2]:c.shape[c.rank-1],p=l.shape.slice(0,-2),m=c.shape.slice(0,-2),g=fe(p),y=fe(m);P(u===d,()=>`Error in fused matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${l.shape} and ${c.shape} and transposeA=${n} and transposeB=${r} must match.`);const v=yt(l.shape.slice(0,-2),c.shape.slice(0,-2)).concat([h,f]),w=n?ee(l,[g,u,h]):ee(l,[g,h,u]),C=r?ee(c,[y,f,d]):ee(c,[y,d,f]);let _;s!=null&&(_=F(s,"bias","fused matMul"),[_]=Hn(_,l),yt(v,_.shape));let E;o!=null&&(E=F(o,"prelu weights","fused matMul"));const I=(z,B)=>{const[j,G,U,Q]=B,se=m_(ee(z,U.shape),U,i);let V,W;if(!n&&!r?(V=Et(se,G,!1,!0),W=Et(j,se,!0,!1)):!n&&r?(V=Et(se,G,!1,!1),W=Et(se,j,!0,!1)):n&&!r?(V=Et(G,se,!1,!0),W=Et(j,se,!1,!1)):(V=Et(G,se,!0,!0),W=Et(se,j,!0,!0)),s!=null){const L=g_(Q,se);return[V,W,L]}else return[V,W]},O={a:w,b:C,bias:_,preluActivationWeights:E},R={transposeA:n,transposeB:r,activation:i,leakyreluAlpha:a};return s==null?cl((B,j,G)=>{const U=K.runKernel(hb,O,R);return G([B,j,U]),{value:ee(U,v),gradFunc:I}})(w,C):cl((B,j,G,U)=>{const Q=K.runKernel(hb,O,R);return U([B,j,Q,G]),{value:ee(Q,v),gradFunc:I}})(w,C,_)}const rA=q({fusedMatMul_:Aae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xH=Object.freeze(Object.defineProperty({__proto__:null,conv2d:bH,depthwiseConv2d:$ae,matMul:rA},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rae(t){return p_(t,.54,.46)}const Oae=q({hammingWindow_:Rae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dae(t){return p_(t,.5,.5)}const SH=q({hannWindow_:Dae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pae(t,e,n,r=!1,s=0){let i=0;const o=[];for(;i+e<=t.size;)o.push(ot(t,i,e)),i+=n;if(r)for(;i<t.size;){const a=i+e-t.size,l=Wn([ot(t,i,e-a),Mh([a],s)]);o.push(l),i+=n}return o.length===0?ou([],[0,e]):ee(Wn(o),[o.length,e])}const CH=q({frame_:Pae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lae(t,e,n,r,s=SH){r==null&&(r=qO(e));const i=CH(t,e,n),o=Y(i,s(e));return S0(o,r)}const Fae=q({stft_:Lae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mae(t,e,n,r,s="bilinear",i=0){const o=F(t,"image","cropAndResize"),a=F(e,"boxes","cropAndResize","float32"),l=F(n,"boxInd","cropAndResize","int32"),c=a.shape[0];P(o.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${o.rank}.`),P(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${c},4] but had shape ${a.shape}.`),P(l.rank===1&&l.shape[0]===c,()=>`Error in cropAndResize: boxInd must be have size [${c}] but had shape ${a.shape}.`),P(r.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${r.length}.`),P(r[0]>=1&&r[1]>=1,()=>`cropSize must be atleast [1,1], but was ${r}`),P(s==="bilinear"||s==="nearest",()=>`method must be bilinear or nearest, but was ${s}`);const u={image:o,boxes:a,boxInd:l},d={method:s,extrapolationValue:i,cropSize:r};return K.runKernel(WC,u,d)}const zae=q({cropAndResize_:Mae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bae(t){const e=F(t,"image","flipLeftRight","float32");P(e.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${e.rank}.`);const n={image:e};return K.runKernel(tE,n,{})}const jae=q({flipLeftRight_:Bae});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vae(t){const e=F(t,"image","grayscaleToRGB"),n=e.rank-1,r=e.shape[n];P(e.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${e.rank}.`),P(r===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${r}.`);const s=new Array(e.rank);return s.fill(1,0,n),s[n]=3,Li(e,s)}const Uae=q({grayscaleToRGB_:Vae});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wae(t){const e=F(t,"image","RGBToGrayscale"),n=e.rank-1,r=e.shape[n];P(e.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${e.rank}.`),P(r===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${r}.`);const s=e.dtype,i=$e(e,"float32"),o=Sr([.2989,.587,.114]);let a;switch(e.rank){case 2:a=Td("ij,j->i",i,o);break;case 3:a=Td("ijk,k->ij",i,o);break;case 4:a=Td("ijkl,l->ijk",i,o);break;case 5:a=Td("ijklm,m->ijkl",i,o);break;case 6:a=Td("ijklmn,n->ijklm",i,o);break;default:throw new Error("Not a valid tensor rank.")}return a=Br(a,-1),$e(a,s)}const Hae=q({rgbToGrayscale_:Wae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gae(t,e,n=0,r=.5){const s=F(t,"image","rotateWithOffset","float32");P(s.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${s.rank}.`);const i={image:s},o={radians:e,fillValue:n,center:r};return K.runKernel(FE,i,o)}const Kae=q({rotateWithOffset_:Gae});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rg(t,e,n,r,s,i){r==null&&(r=.5),s==null&&(s=Number.NEGATIVE_INFINITY),i==null&&(i=0);const o=t.shape[0];return n=Math.min(n,o),P(0<=r&&r<=1,()=>`iouThreshold must be in [0, 1], but was '${r}'`),P(t.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${t.rank}'`),P(t.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${t.shape[1]}`),P(e.rank===1,()=>"scores must be a 1D tensor"),P(e.shape[0]===o,()=>`scores has incompatible shape with boxes. Expected ${o}, but was ${e.shape[0]}`),P(0<=i&&i<=1,()=>`softNmsSigma must be in [0, 1], but was '${i}'`),{maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qae(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=F(t,"boxes","nonMaxSuppression","float32"),o=F(e,"scores","nonMaxSuppression","float32"),a=rg(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l={maxOutputSize:n,iouThreshold:r,scoreThreshold:s};return K.runKernel(dE,{boxes:i,scores:o},l)}const Xae=q({nonMaxSuppression_:qae});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yae(t,e,n){const r=Qae(t,e,n),s=r<0?-(r+1):r;t.splice(s,0,e)}function Qae(t,e,n){return Zae(t,e,n||Jae)}function Jae(t,e){return t>e?1:t<e?-1:0}function Zae(t,e,n){let r=0,s=t.length,i=0,o=!1;for(;r<s;){i=r+(s-r>>>1);const a=n(e,t[i]);a>0?r=i+1:(s=i,o=!a)}return o?r:-r-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v_(t,e,n,r,s){return YO(t,e,n,r,s,0)}function w_(t,e,n,r,s,i){return YO(t,e,n,r,s,0,!1,i,!0)}function x_(t,e,n,r,s,i){return YO(t,e,n,r,s,i,!0)}function YO(t,e,n,r,s,i,o=!1,a=!1,l=!1){const c=[];for(let g=0;g<e.length;g++)e[g]>s&&c.push({score:e[g],boxIndex:g,suppressBeginIndex:0});c.sort(qM);const u=i>0?-.5/i:0,d=[],h=[];for(;d.length<n&&c.length>0;){const g=c.pop(),{score:y,boxIndex:b,suppressBeginIndex:v}=g;if(y<s)break;let w=!1;for(let C=d.length-1;C>=v;--C){const _=ele(t,b,d[C]);if(_>=r){w=!0;break}if(g.score=g.score*tle(r,u,_),g.score<=s)break}g.suppressBeginIndex=d.length,w||(g.score===y?(d.push(b),h.push(g.score)):g.score>s&&Yae(c,g,qM))}const f=d.length,p=n-f;a&&p>0&&(d.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));const m={selectedIndices:d};return o&&(m.selectedScores=h),l&&(m.validOutputs=f),m}function ele(t,e,n){const r=t.subarray(e*4,e*4+4),s=t.subarray(n*4,n*4+4),i=Math.min(r[0],r[2]),o=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),c=Math.min(s[0],s[2]),u=Math.min(s[1],s[3]),d=Math.max(s[0],s[2]),h=Math.max(s[1],s[3]),f=(a-i)*(l-o),p=(d-c)*(h-u);if(f<=0||p<=0)return 0;const m=Math.max(i,c),g=Math.max(o,u),y=Math.min(a,d),b=Math.min(l,h),v=Math.max(y-m,0)*Math.max(b-g,0);return v/(f+p-v)}function tle(t,e,n){const r=Math.exp(e*n*n);return n<=t?r:0}function qM(t,e){return t.score-e.score||t.score===e.score&&e.boxIndex-t.boxIndex}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function nle(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY){const i=F(t,"boxes","nonMaxSuppressionAsync"),o=F(e,"scores","nonMaxSuppressionAsync"),a=rg(i,o,n,r,s);n=a.maxOutputSize,r=a.iouThreshold,s=a.scoreThreshold;const l=await Promise.all([i.data(),o.data()]),c=l[0],u=l[1],{selectedIndices:d}=v_(c,u,n,r,s);return i!==t&&i.dispose(),o!==e&&o.dispose(),Sr(d,"int32")}const rle=nle;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sle(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=F(t,"boxes","nonMaxSuppression"),a=F(e,"scores","nonMaxSuppression"),l=rg(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c={boxes:o,scores:a},u={maxOutputSize:n,iouThreshold:r,scoreThreshold:s,softNmsSigma:i},d=K.runKernel(fE,c,u);return{selectedIndices:d[0],selectedScores:d[1]}}const ile=q({nonMaxSuppressionWithScore_:sle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ole(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=0){const o=F(t,"boxes","nonMaxSuppressionAsync"),a=F(e,"scores","nonMaxSuppressionAsync"),l=rg(o,a,n,r,s,i);n=l.maxOutputSize,r=l.iouThreshold,s=l.scoreThreshold,i=l.softNmsSigma;const c=await Promise.all([o.data(),a.data()]),u=c[0],d=c[1],{selectedIndices:h,selectedScores:f}=x_(u,d,n,r,s,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Sr(h,"int32"),selectedScores:Sr(f)}}const ale=ole;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lle(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=F(t,"boxes","nonMaxSuppression"),a=F(e,"scores","nonMaxSuppression"),l=rg(o,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,h={boxes:o,scores:a},f={maxOutputSize:c,iouThreshold:u,scoreThreshold:d,padToMaxOutputSize:i},p=K.runKernel(hE,h,f);return{selectedIndices:p[0],validOutputs:p[1]}}const cle=q({nonMaxSuppressionPadded_:lle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function ule(t,e,n,r=.5,s=Number.NEGATIVE_INFINITY,i=!1){const o=F(t,"boxes","nonMaxSuppressionAsync"),a=F(e,"scores","nonMaxSuppressionAsync"),l=rg(o,a,n,r,s,null),c=l.maxOutputSize,u=l.iouThreshold,d=l.scoreThreshold,[h,f]=await Promise.all([o.data(),a.data()]),{selectedIndices:p,validOutputs:m}=w_(h,f,c,u,d,i);return o!==t&&o.dispose(),a!==e&&a.dispose(),{selectedIndices:Sr(p,"int32"),validOutputs:tt(m,"int32")}}const dle=ule;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hle(t,e,n=!1,r=!1){const s=F(t,"images","resizeBilinear");P(s.rank===3||s.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${s.rank}.`),P(e.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${e}.`),P(r===!1||n===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=ee(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=K.runKernel(Wv,a,l);return o?ee(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const EH=q({resizeBilinear_:hle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fle(t,e,n=!1,r=!1){const s=F(t,"images","resizeNearestNeighbor");P(s.rank===3||s.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${s.rank}.`),P(e.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${e}.`),P(s.dtype==="float32"||s.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),P(r===!1||n===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let i=s,o=!1;s.rank===3&&(o=!0,i=ee(s,[1,s.shape[0],s.shape[1],s.shape[2]]));const a={images:i},l={alignCorners:n,halfPixelCenters:r,size:e},c=K.runKernel(Uv,a,l);return o?ee(c,[c.shape[1],c.shape[2],c.shape[3]]):c}const _H=q({resizeNearestNeighbor_:fle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ple(t,e="binary",n=!1,r=.5){const s=F(t,"image","threshold"),i=.2989,o=.587,a=.114,l=s.shape[0]*s.shape[1];let c=Y(Sr([r]),255),u,d,h,f;if(P(s.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${s.rank}.`),P(s.shape[2]===3||s.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${s.shape[2]}.`),P(s.dtype==="int32"||s.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${s.dtype}.`),P(e==="otsu"||e==="binary",()=>`Method must be binary or otsu, but was ${e}`),s.shape[2]===3){[u,d,h]=Ps(s,[1,1,1],-1);const g=Y(u,i),y=Y(d,o),b=Y(h,a);f=xe(xe(g,y),b)}else f=t;if(e==="otsu"){const g=nO($e(t_(f),"int32"),No([]),256);c=mle(g,l)}const p=n?zu(f,c):Gs(f,c);return $e(Y(p,255),"int32")}function mle(t,e){let n=Sr([-1]),r=Sr([0]),s=Sr([0]),i,o,a,l,c,u;for(let d=0;d<t.size-1;d++){i=ot(t,0,d+1),o=ot(t,d+1),c=Ue(qe(i),e),u=Ue(qe(o),e);const h=qe(Y(i,mh(0,i.size)));a=Ue(h,qe(i));const f=Mh(o.shape,i.size),p=xe(mh(0,o.size),f),m=Y(o,p);l=Ue(qe(m),qe(o));const g=Fe(a,l),y=Fe(a,l),b=Y(c,u);s=Y(Y(b,g),y);const v=Gs(s,r);r=Wr(v,s,r),n=Wr(v,Sr([d]),n)}return n}const gle=q({threshold_:ple});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yle(t,e,n="nearest",r="constant",s=0,i){const o=F(t,"image","transform","float32"),a=F(e,"transforms","transform","float32");P(o.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${o.rank}.`),P(a.rank===2&&(a.shape[0]===o.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),P(i==null||i.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${i}.`);const l={image:o,transforms:a},c={interpolation:n,fillMode:r,fillValue:s,outputShape:i};return K.runKernel(PE,l,c)}const ble=q({transform_:yle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vle(t,e,n){const r=F(t,"a","bandPart");P(r.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${r.rank}.`);const s=r.shape,[i,o]=r.shape.slice(-2);let a,l;typeof e=="number"?(P(e%1===0,()=>`bandPart(): numLower must be an integer, got ${e}.`),P(e<=i,()=>`bandPart(): numLower (${e}) must not be greater than the number of rows (${i}).`),a=F(e<0?i:e,"numLower","bandPart")):(P(e.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Wr(Rp(e,0),i,Cu(e,i))),typeof n=="number"?(P(n%1===0,()=>`bandPart(): numUpper must be an integer, got ${n}.`),P(n<=o,()=>`bandPart(): numUpper (${n}) must not be greater than the number of columns (${o}).`),l=F(n<0?o:n,"numUpper","bandPart")):(P(n.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),l=Wr(Rp(n,0),o,Cu(n,o)));const c=ee(mh(0,i,1,"int32"),[-1,1]),u=mh(0,o,1,"int32"),d=Fe(c,u),h=fa(zu(d,a),hc(d,yn(l))),f=ur([i,o],r.dtype);return ee(Vs(Ki(ee(r,[-1,i,o])).map(p=>Wr(h,p,f))),s)}const wle=q({bandPart_:vle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xle(t){let e;if(Array.isArray(t)){e=!1,P(t!=null&&t.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");const s=t[0].shape[0];for(let i=1;i<t.length;++i)P(t[i].shape[0]===s,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${t[i].shape[0]} vs. ${s})`)}else e=!0,t=Ps(t,t.shape[0],0).map(s=>Ao(s,[0]));P(t.length<=t[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${t.length}) exceeds number of dimensions (${t[0].shape[0]}).`);const n=[],r=t;for(let s=0;s<t.length;++s)n.push(K.tidy(()=>{let i=r[s];if(s>0)for(let o=0;o<s;++o){const a=Y(qe(Y(n[o],i)),n[o]);i=Fe(i,a)}return Ue(i,eg(i,"euclidean"))}));return e?Vs(n,0):n}const Sle=q({gramSchmidt_:xle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cle(t,e=!1){if(P(t.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${t.rank}`),t.rank===2)return XM(t,e);{const n=t.shape.slice(0,t.shape.length-2).reduce((l,c)=>l*c),r=Ki(ee(t,[n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),s=[],i=[];r.forEach(l=>{const[c,u]=XM(l,e);s.push(c),i.push(u)});const o=ee(Vs(s,0),t.shape),a=ee(Vs(i,0),t.shape);return[o,a]}}function XM(t,e=!1){return K.tidy(()=>{P(t.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${t.shape.length}D Tensor.`);const n=t.shape[0],r=t.shape[1];let s=KE(n),i=Xa(t);const o=ou([[1]],[1,1]);let a=Xa(o);const l=n>=r?r:n;for(let c=0;c<l;++c){const u=i,d=a,h=s;[a,i,s]=K.tidy(()=>{const f=ot(i,[c,c],[n-c,1]),p=eg(f),m=ot(i,[c,c],[1,1]),g=Wr(Gs(m,0),ou([[-1]]),ou([[1]])),y=Fe(m,Y(g,p)),b=Ue(f,y);b.shape[0]===1?a=Xa(o):a=Wn([o,ot(b,[1,0],[b.shape[0]-1,b.shape[1]])],0);const v=yn(Ue(Et(g,y),p)),w=ot(i,[c,0],[n-c,r]),C=Y(v,a),_=$t(a);if(c===0)i=Fe(w,Et(C,Et(_,w)));else{const O=Fe(w,Et(C,Et(_,w)));i=Wn([ot(i,[0,0],[c,r]),O],0)}const E=$t(C),I=ot(s,[0,c],[n,s.shape[1]-c]);if(c===0)s=Fe(I,Et(Et(I,a),E));else{const O=Fe(I,Et(Et(I,a),E));s=Wn([ot(s,[0,0],[n,c]),O],1)}return[a,i,s]}),_t([u,d,h])}return!e&&n>r&&(s=ot(s,[0,0],[n,r]),i=ot(i,[0,0],[r,r])),[s,i]})}const Ele=q({qr_:Cle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var ys;(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(ys||(ys={}));function _le(t,e,n=ys.SUM_BY_NONZERO_WEIGHTS){const r=F(t,"losses","computeWeightedLoss");let s=null;e!=null&&(s=F(e,"weights","computeWeightedLoss"));const i=s==null?r:Y(r,s);if(n===ys.NONE)return i;if(n===ys.SUM)return qe(i);if(n===ys.MEAN){if(s==null)return Vn(i);{const o=r.size/s.size,a=Ue(qe(i),qe(s));return o>1?Ue(a,tt(o)):a}}if(n===ys.SUM_BY_NONZERO_WEIGHTS){if(s==null)return Ue(qe(i),tt(r.size));{const o=Y(s,Os(r.shape)),a=$e(qe(ph(o,tt(0))),"float32");return Ue(qe(i),a)}}throw Error(`Unknown reduction: ${n}`)}const pc=q({computeWeightedLoss_:_le});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Tle(t,e,n,r=ys.SUM_BY_NONZERO_WEIGHTS){const s=F(t,"labels","absoluteDifference"),i=F(e,"predictions","absoluteDifference");let o=null;n!=null&&(o=F(n,"weights","absoluteDifference")),Gr(s.shape,i.shape,"Error in absoluteDifference: ");const a=lr(Fe(s,i));return pc(a,o,r)}const kle=q({absoluteDifference_:Tle});function Ile(t,e,n,r,s=ys.SUM_BY_NONZERO_WEIGHTS){const i=F(t,"labels","cosineDistance"),o=F(e,"predictions","cosineDistance");let a=null;r!=null&&(a=F(r,"weights","cosineDistance")),Gr(i.shape,o.shape,"Error in cosineDistance: ");const l=tt(1),c=Fe(l,qe(Y(i,o),n,!0));return pc(c,a,s)}const Nle=q({cosineDistance_:Ile});function $le(t,e,n,r=ys.SUM_BY_NONZERO_WEIGHTS){let s=F(t,"labels","hingeLoss");const i=F(e,"predictions","hingeLoss");let o=null;n!=null&&(o=F(n,"weights","hingeLoss")),Gr(s.shape,i.shape,"Error in hingeLoss: ");const a=tt(1);s=Fe(Y(tt(2),s),a);const l=xa(Fe(a,Y(s,i)));return pc(l,o,r)}const Ale=q({hingeLoss_:$le});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Rle(t,e,n,r=1,s=ys.SUM_BY_NONZERO_WEIGHTS){const i=F(t,"labels","huberLoss"),o=F(e,"predictions","huberLoss");let a=null;n!=null&&(a=F(n,"weights","huberLoss")),Gr(i.shape,o.shape,"Error in huberLoss: ");const l=tt(r),c=lr(Fe(o,i)),u=Cu(c,l),d=Fe(c,u),h=xe(Y(tt(.5),rn(u)),Y(l,d));return pc(h,a,s)}const Ole=q({huberLoss_:Rle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dle(t,e,n,r=1e-7,s=ys.SUM_BY_NONZERO_WEIGHTS){const i=F(t,"labels","logLoss"),o=F(e,"predictions","logLoss");let a=null;n!=null&&(a=F(n,"weights","logLoss")),Gr(i.shape,o.shape,"Error in logLoss: ");const l=tt(1),c=tt(r),u=yn(Y(i,fi(xe(o,c)))),d=Y(Fe(l,i),fi(xe(Fe(l,o),c))),h=Fe(u,d);return pc(h,a,s)}const Ple=q({logLoss_:Dle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lle(t,e,n,r=ys.SUM_BY_NONZERO_WEIGHTS){const s=F(t,"labels","meanSquaredError"),i=F(e,"predictions","meanSquaredError");let o=null;n!=null&&(o=F(n,"weights","meanSquaredError")),Gr(s.shape,i.shape,"Error in meanSquaredError: ");const a=c_(s,i);return pc(a,o,r)}const Fle=q({meanSquaredError_:Lle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mle(t,e){const n=F(t,"labels","sigmoidCrossEntropyWithLogits"),r=F(e,"logits","sigmoidCrossEntropyWithLogits");Gr(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");const s=xa(r),i=Y(r,n),o=d0(js(yn(lr(r))));return xe(Fe(s,i),o)}function zle(t,e,n,r=0,s=ys.SUM_BY_NONZERO_WEIGHTS){let i=F(t,"multiClassLabels","sigmoidCrossEntropy");const o=F(e,"logits","sigmoidCrossEntropy");let a=null;if(n!=null&&(a=F(n,"weights","sigmoidCrossEntropy")),Gr(i.shape,o.shape,"Error in sigmoidCrossEntropy: "),r>0){const c=tt(r),u=tt(1),d=tt(.5);i=xe(Y(i,Fe(u,c)),Y(d,c))}const l=Mle(i,o);return pc(l,a,s)}const Ble=q({sigmoidCrossEntropy_:zle});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jle(t,e,n=-1){if(n===-1&&(n=e.rank-1),n!==e.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${e.rank} and dim was ${n}`);return cl((s,i,o)=>{const l=h0(i,[n],!0),c=Fe($e(i,"float32"),l);o([s,c]);const u=yn(Y(c,s));return{value:qe(u,[n]),gradFunc:(f,p)=>{const[m,g]=p,y=sr(f.shape,[n]);return[Y(ee(f,y),Fe($e(m,"float32"),js(g))),Y(ee(f,y),Fe(js(g),$e(m,"float32")))]}}})(t,e)}function Vle(t,e,n,r=0,s=ys.SUM_BY_NONZERO_WEIGHTS){let i=F(t,"onehotLabels","softmaxCrossEntropy");const o=F(e,"logits","softmaxCrossEntropy");let a=null;if(n!=null&&(a=F(n,"weights","softmaxCrossEntropy")),Gr(i.shape,o.shape,"Error in softmaxCrossEntropy: "),r>0){const c=tt(r),u=tt(1),d=tt(i.shape[1]);i=xe(Y(i,Fe(u,c)),Ue(c,d))}const l=jle(i,o);return pc(l,a,s)}const Ule=q({softmaxCrossEntropy_:Vle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wle(t,e,n,r){const s=F(t,"indices","sparseFillEmptyRows","int32"),i=F(e,"values","sparseFillEmptyRows"),o=F(n,"denseShape","sparseFillEmptyRows","int32"),a=F(r,"defaultValue","sparseFillEmptyRows",i.dtype);if(s.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${s.shape}`);if(i.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${i.shape}`);if(o.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${o.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);const l={indices:s,values:i,denseShape:o,defaultValue:a},c=K.runKernel(EE,l);return{outputIndices:c[0],outputValues:c[1],emptyRowIndicator:c[2],reverseIndexMap:c[3]}}const Hle=q({sparseFillEmptyRows_:Wle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gle(t,e,n){const r=F(t,"inputIndices","sparseReshape","int32"),s=F(e,"inputShape","sparseReshape","int32"),i=F(n,"newShape","sparseReshape","int32");if(r.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${r.shape}`);if(s.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${s.shape}`);if(i.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${i.shape}`);const o={inputIndices:r,inputShape:s,newShape:i},a=K.runKernel(_E,o);return{outputIndices:a[0],outputShape:a[1]}}const Kle=q({sparseReshape_:Gle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qle(t,e,n){const r=F(t,"data","sparseSegmentMean"),s=F(e,"indices","sparseSegmentMean","int32"),i=F(n,"segmentIds","sparseSegmentMean","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return K.runKernel(TE,o)}const Xle=q({sparseSegmentMean_:qle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yle(t,e,n){const r=F(t,"data","sparseSegmentSum"),s=F(e,"indices","sparseSegmentSum","int32"),i=F(n,"segmentIds","sparseSegmentSum","int32");if(r.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${s.shape}`);if(i.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${i.shape}`);const o={data:r,indices:s,segmentIds:i};return K.runKernel(kE,o)}const Qle=q({sparseSegmentSum_:Yle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jle(t,e,n,r,s,i,o,a){const l=F(t,"data","stringNGrams","string");if(l.dtype!=="string")throw new Error("Data must be of datatype string");if(l.shape.length!==1)throw new Error(`Data must be a vector, saw: ${l.shape}`);const c=F(e,"dataSplits","stringNGrams");if(c.dtype!=="int32")throw new Error("Data splits must be of datatype int32");const u={separator:n,nGramWidths:r,leftPad:s,rightPad:i,padWidth:o,preserveShortSequences:a},d={data:l,dataSplits:c},h=K.runKernel(AE,d,u);return{nGrams:h[0],nGramsSplits:h[1]}}const Zle=q({stringNGrams_:Jle});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ece(t,e,n=!0){const r=F(t,"input","stringSplit","string"),s=F(e,"delimiter","stringSplit","string");if(r.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${r.shape}`);if(s.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${s.shape}`);const i={skipEmpty:n},o={input:r,delimiter:s},a=K.runKernel(RE,o,i);return{indices:a[0],values:a[1],shape:a[2]}}const tce=q({stringSplit_:ece});/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nce(t,e){const n=F(t,"input","stringToHashBucketFast","string"),r={numBuckets:e};if(e<=0)throw new Error("Number of buckets must be at least 1");const s={input:n};return K.runKernel(OE,s,r)}const rce=q({stringToHashBucketFast_:nce});/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sce(t,e,n,r=!0){const s=F(t,"input","staticRegexReplace","string"),i={pattern:e,rewrite:n,replaceGlobal:r};return K.runKernel(Jv,{x:s},i)}const ice=q({staticRegexReplace_:sce});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TH={fft:x0,ifft:Lp,rfft:S0,irfft:l_},kH={hammingWindow:Oae,hannWindow:SH,frame:CH,stft:Fae},Fi={flipLeftRight:jae,grayscaleToRGB:Uae,resizeNearestNeighbor:_H,resizeBilinear:EH,rgbToGrayscale:Hae,rotateWithOffset:Kae,cropAndResize:zae,nonMaxSuppression:Xae,nonMaxSuppressionAsync:rle,nonMaxSuppressionWithScore:ile,nonMaxSuppressionWithScoreAsync:ale,nonMaxSuppressionPadded:cle,nonMaxSuppressionPaddedAsync:dle,threshold:gle,transform:ble},QO={bandPart:wle,gramSchmidt:Sle,qr:Ele},IH={absoluteDifference:kle,computeWeightedLoss:pc,cosineDistance:Nle,hingeLoss:Ale,huberLoss:Ole,logLoss:Ple,meanSquaredError:Fle,sigmoidCrossEntropy:Ble,softmaxCrossEntropy:Ule},NH={sparseFillEmptyRows:Hle,sparseReshape:Kle,sparseSegmentMean:Xle,sparseSegmentSum:Qle},$H={stringNGrams:Zle,stringSplit:tce,stringToHashBucketFast:rce,staticRegexReplace:ice};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oce=new Map,sA=new Map;class Vh{getClassName(){return this.constructor.className}static fromConfig(e,n){return new e(n)}}class Ri{constructor(){this.classNameMap={}}static getMap(){return Ri.instance==null&&(Ri.instance=new Ri),Ri.instance}static register(e){Ri.getMap().classNameMap[e.className]=[e,e.fromConfig]}}function Ce(t,e,n){P(t.className!=null,()=>"Class being registered does not have the static className property defined."),P(typeof t.className=="string",()=>"className is required to be a string, but got type "+typeof t.className),P(t.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof e>"u"&&(e="Custom"),typeof n>"u"&&(n=t.className);const r=n,s=e+">"+r;return Ri.register(t),oce.set(s,t),sA.set(t,s),t}function ace(t){return sA.has(t)?sA.get(t):t.className}const lce=Object.freeze(Object.defineProperty({__proto__:null,Serializable:Vh,SerializationMap:Ri,getRegisteredName:ace,registerClass:Ce},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mc extends Vh{minimize(e,n=!1,r){const{value:s,grads:i}=this.computeGradients(e,r);if(r!=null){const o=r.map(a=>({name:a.name,tensor:i[a.name]}));this.applyGradients(o)}else this.applyGradients(i);return _t(i),n?s:(s.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(e,n){return PW(e,n)}dispose(){this.iterations_!=null&&_t(this.iterations_)}async saveIterations(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:tt(this.iterations_,"int32")}}async getWeights(){throw new Error("getWeights() is not implemented for this optimizer yet.")}async setWeights(e){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)}async extractIterations(e){return this.iterations_=(await e[0].tensor.data())[0],e.slice(1)}}Object.defineProperty(mc,Symbol.hasInstance,{value:t=>t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JO extends mc{static get className(){return"Adadelta"}constructor(e,n,r=null){super(),this.learningRate=e,this.rho=n,this.epsilon=r,this.accumulatedGrads=[],this.accumulatedUpdates=[],r==null&&(this.epsilon=K.backend.epsilon())}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=K.registeredVariables[r],o=!1;this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accum_grad`,variable:oe(()=>Dt(i).variable(o))}),this.accumulatedUpdates[s]==null&&(this.accumulatedUpdates[s]={originalName:`${r}/accum_var`,variable:oe(()=>Dt(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedGrads[s].variable,c=this.accumulatedUpdates[s].variable;oe(()=>{const u=xe(Y(l,this.rho),Y(rn(a),1-this.rho)),d=Y(Ue(Lr(xe(c,this.epsilon)),Lr(xe(l,this.epsilon))),a),h=xe(Y(c,this.rho),Y(rn(d),1-this.rho));l.assign(u),c.assign(h);const f=xe(Y(d,-this.learningRate),i);i.assign(f)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(_t(this.accumulatedGrads.map(e=>e.variable)),_t(this.accumulatedUpdates.map(e=>e.variable)))}async getWeights(){const e=[...this.accumulatedGrads,...this.accumulatedUpdates];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=e.length/2,r=!1;this.accumulatedGrads=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedUpdates=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.rho,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ZO extends mc{static get className(){return"Adagrad"}constructor(e,n=.1){super(),this.learningRate=e,this.initialAccumulatorValue=n,this.accumulatedGrads=[]}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=K.registeredVariables[r];this.accumulatedGrads[s]==null&&(this.accumulatedGrads[s]={originalName:`${r}/accumulator`,variable:oe(()=>Mh(i.shape,this.initialAccumulatorValue).variable(!1))});const o=Array.isArray(e)?e[s].tensor:e[r];if(o==null)return;const a=this.accumulatedGrads[s].variable;oe(()=>{const l=xe(a,rn(o));a.assign(l);const c=xe(Y(Ue(o,Lr(xe(l,K.backend.epsilon()))),-this.learningRate),i);i.assign(c)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&_t(this.accumulatedGrads.map(e=>e.variable))}async getWeights(){return[await this.saveIterations()].concat(this.accumulatedGrads.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulatedGrads=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(e,n){return new e(n.learningRate,n.initialAccumulatorValue)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class eD extends mc{static get className(){return"Adam"}constructor(e,n,r,s=null){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],oe(()=>{this.accBeta1=tt(n).variable(),this.accBeta2=tt(r).variable()}),s==null&&(this.epsilon=K.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);oe(()=>{const r=Fe(1,this.accBeta1),s=Fe(1,this.accBeta2);n.forEach((i,o)=>{const a=K.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:oe(()=>Dt(a).variable(l))}),this.accumulatedSecondMoment[o]==null&&(this.accumulatedSecondMoment[o]={originalName:`${i}/v`,variable:oe(()=>Dt(a).variable(l))});const c=Array.isArray(e)?e[o].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedSecondMoment[o].variable,h=xe(Y(u,this.beta1),Y(c,1-this.beta1)),f=xe(Y(d,this.beta2),Y(rn(c),1-this.beta2)),p=Ue(h,r),m=Ue(f,s);u.assign(h),d.assign(f);const g=xe(Y(Ue(p,xe(Lr(m),this.epsilon)),-this.learningRate),a);a.assign(g)}),this.accBeta1.assign(Y(this.accBeta1,this.beta1)),this.accBeta2.assign(Y(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&_t(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedSecondMoment!=null&&_t(this.accumulatedSecondMoment.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e),oe(()=>{this.accBeta1.assign(ll(this.beta1,this.iterations_+1)),this.accBeta2.assign(ll(this.beta2,this.iterations_+1))});const n=e.length/2,r=!1;this.accumulatedFirstMoment=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedSecondMoment=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)}))}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class tD extends mc{static get className(){return"Adamax"}constructor(e,n,r,s=null,i=0){super(),this.learningRate=e,this.beta1=n,this.beta2=r,this.epsilon=s,this.decay=i,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],oe(()=>{this.iteration=tt(0).variable(),this.accBeta1=tt(n).variable()}),s==null&&(this.epsilon=K.backend.epsilon())}applyGradients(e){const n=Array.isArray(e)?e.map(r=>r.name):Object.keys(e);oe(()=>{const r=Fe(1,this.accBeta1),s=Ue(-this.learningRate,xe(Y(this.iteration,this.decay),1));n.forEach((i,o)=>{const a=K.registeredVariables[i],l=!1;this.accumulatedFirstMoment[o]==null&&(this.accumulatedFirstMoment[o]={originalName:`${i}/m`,variable:Dt(a).variable(l)}),this.accumulatedWeightedInfNorm[o]==null&&(this.accumulatedWeightedInfNorm[o]={originalName:`${i}/v`,variable:Dt(a).variable(l)});const c=Array.isArray(e)?e[o].tensor:e[i];if(c==null)return;const u=this.accumulatedFirstMoment[o].variable,d=this.accumulatedWeightedInfNorm[o].variable,h=xe(Y(u,this.beta1),Y(c,1-this.beta1)),f=Y(d,this.beta2),p=lr(c),m=ml(f,p);u.assign(h),d.assign(m);const g=xe(Y(Ue(s,r),Ue(h,xe(m,this.epsilon))),a);a.assign(g)}),this.iteration.assign(xe(this.iteration,1)),this.accBeta1.assign(Y(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&_t(this.accumulatedFirstMoment.map(e=>e.variable)),this.accumulatedWeightedInfNorm!=null&&_t(this.accumulatedWeightedInfNorm.map(e=>e.variable))}async getWeights(){throw new Error("getWeights() is not implemented for Adamax yet.")}async setWeights(e){throw new Error("setWeights() is not implemented for Adamax yet.")}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(e,n){return new e(n.learningRate,n.beta1,n.beta2,n.epsilon,n.decay)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class S_ extends mc{static get className(){return"SGD"}constructor(e){super(),this.learningRate=e,this.setLearningRate(e)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=Array.isArray(e)?e[s].tensor:e[r];if(i==null)return;const o=K.registeredVariables[r];oe(()=>{const a=xe(Y(this.c,i),o);o.assign(a)})}),this.incrementIterations()}setLearningRate(e){this.learningRate=e,this.c!=null&&this.c.dispose(),this.c=xr(tt(-e))}dispose(){this.c.dispose()}async getWeights(){return[await this.saveIterations()]}async setWeights(e){if(e=await this.extractIterations(e),e.length!==0)throw new Error("SGD optimizer does not have settable weights.")}getConfig(){return{learningRate:this.learningRate}}static fromConfig(e,n){return new e(n.learningRate)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nD extends S_{static get className(){return"Momentum"}constructor(e,n,r=!1){super(e),this.learningRate=e,this.momentum=n,this.useNesterov=r,this.accumulations=[],this.m=tt(this.momentum)}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=K.registeredVariables[r];this.accumulations[s]==null&&(this.accumulations[s]={originalName:`${r}/momentum`,variable:oe(()=>Dt(i).variable(!1))});const o=this.accumulations[s].variable,a=Array.isArray(e)?e[s].tensor:e[r];a!=null&&oe(()=>{let l;const c=xe(Y(this.m,o),a);this.useNesterov?l=xe(Y(this.c,xe(a,Y(c,this.m))),i):l=xe(Y(this.c,c),i),o.assign(c),i.assign(l)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&_t(this.accumulations.map(e=>e.variable))}setMomentum(e){this.momentum=e}async getWeights(){return[await this.saveIterations()].concat(this.accumulations.map(e=>({name:e.originalName,tensor:e.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=!1;this.accumulations=e.map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(e,n){return new e(n.learningRate,n.momentum,n.useNesterov)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class rD extends mc{static get className(){return"RMSProp"}constructor(e,n=.9,r=0,s=null,i=!1){if(super(),this.learningRate=e,this.decay=n,this.momentum=r,this.epsilon=s,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=i,s==null&&(this.epsilon=K.backend.epsilon()),e==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(e){(Array.isArray(e)?e.map(r=>r.name):Object.keys(e)).forEach((r,s)=>{const i=K.registeredVariables[r],o=!1;this.accumulatedMeanSquares[s]==null&&(this.accumulatedMeanSquares[s]={originalName:`${r}/rms`,variable:oe(()=>Dt(i).variable(o))}),this.accumulatedMoments[s]==null&&(this.accumulatedMoments[s]={originalName:`${r}/momentum`,variable:oe(()=>Dt(i).variable(o))}),this.accumulatedMeanGrads[s]==null&&this.centered&&(this.accumulatedMeanGrads[s]={originalName:`${r}/mg`,variable:oe(()=>Dt(i).variable(o))});const a=Array.isArray(e)?e[s].tensor:e[r];if(a==null)return;const l=this.accumulatedMeanSquares[s].variable,c=this.accumulatedMoments[s].variable;oe(()=>{const u=xe(Y(l,this.decay),Y(rn(a),1-this.decay));if(this.centered){const d=this.accumulatedMeanGrads[s].variable,h=xe(Y(d,this.decay),Y(a,1-this.decay)),f=Ue(Y(a,this.learningRate),Lr(Fe(u,xe(rn(h),this.epsilon)))),p=xe(Y(c,this.momentum),f);l.assign(u),d.assign(h),c.assign(p);const m=Fe(i,p);i.assign(m)}else{const d=xe(Y(l,this.decay),Y(rn(a),1-this.decay)),h=xe(Y(c,this.momentum),Ue(Y(a,this.learningRate),Lr(xe(d,this.epsilon))));l.assign(d),c.assign(h);const f=Fe(i,h);i.assign(f)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&_t(this.accumulatedMeanSquares.map(e=>e.variable)),this.accumulatedMeanGrads!=null&&this.centered&&_t(this.accumulatedMeanGrads.map(e=>e.variable)),this.accumulatedMoments!=null&&_t(this.accumulatedMoments.map(e=>e.variable))}async getWeights(){const e=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&e.push(...this.accumulatedMeanGrads),[await this.saveIterations()].concat(e.map(n=>({name:n.originalName,tensor:n.variable})))}async setWeights(e){e=await this.extractIterations(e);const n=this.centered?e.length/3:e.length/2,r=!1;this.accumulatedMeanSquares=e.slice(0,n).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.accumulatedMoments=e.slice(n,n*2).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})),this.centered&&(this.accumulatedMeanGrads=e.slice(n*2,n*3).map(s=>({originalName:s.name,variable:s.tensor.variable(r)})))}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(e,n){return new e(n.learningRate,n.decay,n.momentum,n.epsilon,n.centered)}}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cce=[JO,ZO,eD,tD,nD,rD,S_];function uce(){for(const t of cce)Ce(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dce="model",hce=".json",fce=".weights.bin";function YM(t){return new Promise(e=>setTimeout(e)).then(t)}class gh{constructor(e){if(!ce().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(gh.URL_SCHEME)&&(e=e.slice(gh.URL_SCHEME.length)),(e==null||e.length===0)&&(e=dce),this.modelJsonFileName=e+hce,this.weightDataFileName=e+fce}async save(e){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");const n=wa.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{const s=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i=gW(e,s),o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),a=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(a.download=this.modelJsonFileName,a.href=o,await YM(()=>a.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){const l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,await YM(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:r0(e)}}}}gh.URL_SCHEME="downloads://";class pce{constructor(e){if(e==null||e.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${e}`);this.jsonFile=e[0],this.weightsFiles=e.slice(1)}async load(){return new Promise((e,n)=>{const r=new FileReader;r.onload=s=>{const i=JSON.parse(s.target.result),o=i.modelTopology;if(o==null){n(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(i.weightsManifest==null){n(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){e({modelTopology:o});return}const l=jR(i,c=>this.loadWeights(c));e(l)},r.onerror=s=>n(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),r.readAsText(this.jsonFile)})}loadWeights(e){const n=[],r=[];for(const o of e)n.push(...o.weights),r.push(...o.paths);const s=this.checkManifestAndWeightFiles(e),i=r.map(o=>this.loadWeightsFile(o,s[o]));return Promise.all(i).then(o=>[n,o])}loadWeightsFile(e,n){return new Promise((r,s)=>{const i=new FileReader;i.onload=o=>{const a=o.target.result;r(a)},i.onerror=o=>s(`Failed to weights data from file of path '${e}'.`),i.readAsArrayBuffer(n)})}checkManifestAndWeightFiles(e){const n=[],r=this.weightsFiles.map(i=>KM(i.name)),s={};for(const i of e)i.paths.forEach(o=>{const a=KM(o);if(n.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(n.push(a),r.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);s[o]=this.weightsFiles[r.indexOf(a)]});if(n.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${n.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return s}}const mce=t=>ce().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(gh.URL_SCHEME)?gce(t.slice(gh.URL_SCHEME.length)):null;zn.registerSaveRouter(mce);function gce(t="model"){return new gh(t)}function yce(t){return new pce(t)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QM(t,e,n,r){o(t),n=n??0,r=r??1,a(n,r);let s=0;const i=l=>(l.then(c=>{const u=n+ ++s/t.length*(r-n);return e(u),c}),l);function o(l){P(l!=null&&Array.isArray(l)&&l.length>0,()=>"promises must be a none empty array")}function a(l,c){P(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${l}`),P(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${c}`),P(c>=l,()=>`startFraction must be no more than endFraction, but got startFraction ${l} and endFraction ${c}`)}return Promise.all(t.map(i))}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */async function AH(t,e){e==null&&(e={});const n=e.fetchFunc==null?ce().platform.fetch:e.fetchFunc,r=t.map(d=>n(d,e.requestInit,{isBinary:!0})),a=(e.onProgress==null?await Promise.all(r):await QM(r,e.onProgress,0,.5)).map(d=>d.arrayBuffer());return e.onProgress==null?await Promise.all(a):await QM(a,e.onProgress,.5,1)}function bce(t,e){var n;const r=e.fetchFunc==null?ce().platform.fetch:e.fetchFunc;let s=0,i;return(n=e.onProgress)===null||n===void 0||n.call(e,0),new ReadableStream({pull:async o=>{for(var a;s<t.length;){i||(i=(await r(t[s],e.requestInit,{isBinary:!0})).body.getReader());const{done:l,value:c}=await i.read();if(l){s++,i=void 0,(a=e.onProgress)===null||a===void 0||a.call(e,s/t.length);continue}o.enqueue(c);return}o.close()}})}async function vce(t,e="",n,r){return RH(o=>AH(o,{requestInit:r}))(t,e,n)}function RH(t){return async(e,n="",r)=>{const s=e.map(()=>!1),i={},o=r!=null?r.map(()=>!1):[],a=[];if(e.forEach((f,p)=>{let m=0;f.weights.forEach(g=>{const y="quantization"in g?g.quantization.dtype:g.dtype,b=lh[y]*fe(g.shape),v=()=>{s[p]=!0,i[p]==null&&(i[p]=[]),i[p].push({manifestEntry:g,groupOffset:m,sizeBytes:b})};r!=null?r.forEach((w,C)=>{w===g.name&&(v(),o[C]=!0)}):v(),a.push(g.name),m+=b})}),!o.every(f=>f)){const f=r.filter((p,m)=>!o[m]);throw new Error(`Could not find weights in manifest with names: ${f.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}const l=s.reduce((f,p,m)=>(p&&f.push(m),f),[]),c=[];l.forEach(f=>{e[f].paths.forEach(p=>{const m=n+(n.endsWith("/")?"":"/")+p;c.push(m)})});const u=await t(c),d={};let h=0;return l.forEach(f=>{const p=e[f].paths.length,m=new wa(u.slice(h,h+p));i[f].forEach(y=>{const b=m.slice(y.groupOffset,y.groupOffset+y.sizeBytes),v=hW(b,[y.manifestEntry]);for(const w in v)d[w]=v[w]}),h+=p}),d}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wce="application/octet-stream",xce="application/json";class sD{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(P(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=ce().platform.fetch,P(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&P(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}async save(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");const n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;const r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],s=gW(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(s)],{type:xce}),"model.json"),e.weightData!=null){const o=wa.join(e.weightData);n.body.append("model.weights.bin",new Blob([o],{type:wce}),"model.weights.bin")}const i=await this.fetch(this.path,n);if(i.ok)return{modelArtifactsInfo:r0(e),responses:[i]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${i.status}.`)}async loadModelJSON(){const e=await this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=await e.json()}catch{let o=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?o+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":o+=" Please make sure the server is serving valid JSON for this request.",new Error(o)}const r=n.modelTopology,s=n.weightsManifest;if(r==null&&s==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n}async load(){if(this.loadOptions.streamWeights)return this.loadStream();const e=await this.loadModelJSON();return jR(e,n=>this.loadWeights(n))}async loadStream(){const e=await this.loadModelJSON(),n=await this.getWeightUrls(e.weightsManifest),r=bS(e.weightsManifest),s=()=>bce(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:s})}async getWeightUrls(e){const n=Array.isArray(this.path)?this.path[1]:this.path,[r,s]=Sce(n),i=this.weightPathPrefix||r,o=[],a=[];for(const l of e)for(const c of l.paths)this.weightUrlConverter!=null?a.push(this.weightUrlConverter(c)):o.push(i+c+s);return this.weightUrlConverter&&o.push(...await Promise.all(a)),o}async loadWeights(e){const n=await this.getWeightUrls(e),r=bS(e),s=await AH(n,this.loadOptions);return[r,s]}}sD.URL_SCHEME_REGEX=/^https?:\/\//;function Sce(t){const e=t.lastIndexOf("/"),n=t.lastIndexOf("?"),r=t.substring(0,e),s=n>e?t.substring(n):"";return[r+"/",s]}function iA(t){return t.match(sD.URL_SCHEME_REGEX)!=null}const OH=(t,e)=>{if(typeof fetch>"u"&&(e==null||e.fetchFunc==null))return null;{let n=!0;if(Array.isArray(t)?n=t.every(r=>iA(r)):n=iA(t),n)return iD(t,e)}return null};zn.registerSaveRouter(OH);zn.registerLoadRouter(OH);function iD(t,e){return new sD(t,e)}function Cce(t,e){return iD(t,e)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VI{constructor(e){this.modelArtifacts=e}load(){return this.modelArtifacts}}class DH{constructor(e){this.saveHandler=e}save(e){return this.saveHandler(e)}}class Ece{constructor(e){e.load&&(this.load=()=>Promise.resolve(e.load())),e.save&&(this.save=n=>Promise.resolve(e.save(n)))}}function _ce(t,e,n,r){const s=arguments;return new Ece(wS(...s))}function wS(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new VI(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new VI({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new VI({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))}function Tce(t){return new DH(t)}function kce(t){return new DH(t)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oD=Object.freeze(Object.defineProperty({__proto__:null,CompositeArrayBuffer:wa,browserFiles:yce,browserHTTPRequest:Cce,concatenateArrayBuffers:mW,copyModel:ire,decodeWeights:hW,decodeWeightsStream:pW,encodeWeights:Q$,fromMemory:_ce,fromMemorySync:wS,getLoadHandlers:Hne,getModelArtifactsForJSON:jR,getModelArtifactsForJSONSync:BR,getModelArtifactsInfoForJSON:r0,getSaveHandlers:yW,getWeightSpecs:bS,http:iD,isHTTPScheme:iA,listModels:rre,loadWeights:vce,moveModel:ore,registerLoadRouter:Wne,registerSaveRouter:Une,removeModel:sre,weightsLoaderFactory:RH,withSaveHandler:Tce,withSaveHandlerSync:kce},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ice(t,e,n){const r=F(t,"labels","confusionMatrix"),s=F(e,"predictions","confusionMatrix");P(n==null||n>0&&Number.isInteger(n),()=>`If provided, numClasses must be a positive integer, but got ${n}`),P(r.rank===1,()=>`Expected the rank of labels to be 1, but got ${r.rank}`),P(s.rank===1,()=>`Expected the rank of predictions to be 1, but got ${s.rank}`),P(r.shape[0]===s.shape[0],()=>`Mismatch in the number of examples: ${r.shape[0]} vs. ${s.shape[0]}. Labels and predictions should have the same number of elements.`),P(n>0&&Number.isInteger(n),()=>`numClasses is required to be a positive integer, but got ${n}`);const i=Op($e(r,"int32"),n),o=Op($e(s,"int32"),n),a=$t(i),l=Et(a,o);return $e(l,"int32")}const Nce=q({confusionMatrix_:Ice});/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $ce=Object.freeze(Object.defineProperty({__proto__:null,confusionMatrix:Nce},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */let md,JM=!1;function PH(t,e=3){if(e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(t==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let n=!1,r=!1,s=!1,i=!1,o=!1,a=!1;if(t.data instanceof Uint8Array)n=!0;else if(typeof ImageData<"u"&&t instanceof ImageData)r=!0;else if(typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement)s=!0;else if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement)i=!0;else if(t.getContext!=null)o=!0;else if(typeof ImageBitmap<"u"&&t instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${t.constructor.name}`);if(gb(mS,K.backendName)!=null){const p={pixels:t},m={numChannels:e};return K.runKernel(mS,p,m)}const[c,u]=s?[t.videoWidth,t.videoHeight]:[t.width,t.height];let d;if(o)d=t.getContext("2d").getImageData(0,0,c,u).data;else if(r||n)d=t.data;else if(i||s||a){if(md==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")md=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else md=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});md.canvas.width=c,md.canvas.height=u,md.drawImage(t,0,0,c,u),d=md.getImageData(0,0,c,u).data}let h;if(e===4)h=new Int32Array(d);else{const p=c*u;h=new Int32Array(p*e);for(let m=0;m<p;m++)for(let g=0;g<e;++g)h[m*e+g]=d[m*4+g]}return jO(h,[u,c,e],"int32")}function Ace(t){return t!=null&&t.data instanceof Uint8Array}function Rce(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function Oce(t){return t!=null&&t.width!==0&&t.height!==0}function Dce(t){return Rce()&&!(t instanceof ImageBitmap)&&Oce(t)&&!Ace(t)}async function Pce(t,e=3){let n=null;if(ce().getBool("WRAP_TO_IMAGEBITMAP")&&Dce(t)){let r;try{r=await createImageBitmap(t,{premultiplyAlpha:"none"})}catch{r=null}r!=null&&r.width===t.width&&r.height===t.height?n=r:n=t}else n=t;return PH(n,e)}function LH(t){if(t.rank!==2&&t.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${t.rank}.`);const e=t.rank===2?1:t.shape[2];if(e>4||e===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${e}`);if(t.dtype!=="float32"&&t.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${t.dtype}. Please use float32 or int32 tensors.`)}function Lce(t){const e=(t==null?void 0:t.alpha)||1;if(e>1||e<0)throw new Error(`Alpha value ${e} is suppoed to be in range [0 - 1].`)}async function Fce(t,e){let n=F(t,"img","toPixels");if(!(t instanceof Ot)){const c=n;n=$e(c,"int32"),c.dispose()}LH(n);const[r,s]=n.shape.slice(0,2),i=n.rank===2?1:n.shape[2],o=await n.data(),a=n.dtype==="float32"?255:1,l=new Uint8ClampedArray(s*r*4);for(let c=0;c<r*s;++c){const u=[0,0,0,255];for(let h=0;h<i;h++){const f=o[c*i+h];if(n.dtype==="float32"){if(f<0||f>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${f}.`)}else if(n.dtype==="int32"&&(f<0||f>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${f}.`);i===1?(u[0]=f*a,u[1]=f*a,u[2]=f*a):u[h]=f*a}const d=c*4;l[d+0]=Math.round(u[0]),l[d+1]=Math.round(u[1]),l[d+2]=Math.round(u[2]),l[d+3]=Math.round(u[3])}if(e!=null){JM||gb(YC,K.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),JM=!0),e.width=s,e.height=r;const c=e.getContext("2d"),u=new ImageData(l,s,r);c.putImageData(u,0,0)}return n!==t&&n.dispose(),l}function Mce(t,e,n){let r=F(t,"img","draw");if(!(t instanceof Ot)){const o=r;r=$e(o,"int32"),o.dispose()}LH(r),Lce(n==null?void 0:n.imageOptions);const s={image:r},i={canvas:e,options:n};K.runKernel(YC,s,i)}const FH=q({fromPixels_:PH}),zce=Object.freeze(Object.defineProperty({__proto__:null,draw:Mce,fromPixels:FH,fromPixelsAsync:Pce,toPixels:Fce},Symbol.toStringTag,{value:"Module"}));function C_(t,e){const n=t.shape.length,r=e.shape.length;if(n<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${n}.`);if(r<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${r}.`);if(e.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${e.dtype}.`);if(e.shape[r-1]>n)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${e.shape[r-1]} vs. ${n}`);if(fe(t.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${t.shape}.`);const s=e.shape,i=s[s.length-1];let o=1;for(let d=0;d<s.length-1;++d)o*=s[d];const a=t.shape,l=s.slice();l.pop();let c=1;for(let d=i;d<n;++d)c*=a[d],l.push(a[d]);const u=[...et(t.shape).map(d=>d/c),1].slice(0,i);return[l,o,c,u]}const Bce=Object.freeze(Object.defineProperty({__proto__:null,prepareAndValidate:C_},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oA=-2,jce=-1;function aD(t,e,n){const r=t.shape.length;P(r===e.length,()=>`Error in slice${r}D: Length of begin ${e} must match the rank of the array (${r}).`),P(r===n.length,()=>`Error in slice${r}D: Length of size ${n} must match the rank of the array (${r}).`);for(let s=0;s<r;++s)P(e[s]+n[s]<=t.shape[s],()=>`Error in slice${r}D: begin[${s}] + size[${s}] (${e[s]+n[s]}) would overflow input.shape[${s}] (${t.shape[s]})`)}function Vce(t){const e=[];let n=0;for(;t>0;)t&1&&e.push(n),t/=2,n++;return e}function lD(t,e,n){const r=[];for(let s=0;s<t.length;s++)r[s]=Math.ceil((e[s]-t[s])/n[s]);return r}function MH(t,e,n,r){const s=[...t];for(let i=s.length;i<r.length;i++)s.push(1);for(let i=0;i<n;i++)i===0?s[e]=1:(s.splice(e,0,1),s.pop());return s}function zH(t,e,n){return n<=t?n:n-(e-1)}function BH(t,e){const n=[];for(let r=0;r<t;r++)n.push(e+r);return n}function Uce(t,e,n,r,s,i,o,a,l){const c=t.length;let u=new Array(c),d=new Array(c),h=new Array(c);if(e.length&&n>0){const f=e[0],p=n+1;u=jH(o,f,p,r,t),d=VH(a,f,p,s,t),h=MH(i,f,p,t)}else for(let f=0;f<c;f++)u[f]=WH(o,r,i,t,f,l),d[f]=HH(a,s,i,t,f,l),h[f]=UH(i,f,l);return{begin:u,end:d,strides:h}}function jH(t,e,n,r,s){const i=[...s],o=BH(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=0;else{const l=zH(e,n,a);let c=r[l];t&1<<l&&(c=0),i[a]=c}return i}function VH(t,e,n,r,s){const i=[...s],o=BH(n,e);for(let a=0;a<i.length;a++)if(o.indexOf(a)>-1)i[a]=Number.MAX_SAFE_INTEGER;else{const l=zH(e,n,a);let c=r[l];t&1<<l&&(c=Number.MAX_SAFE_INTEGER),i[a]=c}for(let a=0;a<i.length;a++){const l=s[a];i[a]<0&&(i[a]+=l),i[a]=yu(0,i[a],s[a])}return i}function UH(t,e,n){let r=t[e];return(n&1<<e||r==null)&&(r=1),r}function WH(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MIN_SAFE_INTEGER:o=Number.MAX_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),o=yu(0,o,l-1),o}function HH(t,e,n,r,s,i){let o=e[s];const a=n[s]||1;(t&1<<s||i&1<<s||o==null)&&(a>0?o=Number.MAX_SAFE_INTEGER:o=Number.MIN_SAFE_INTEGER);const l=r[s];return o<0&&(o+=l),a>0?o=yu(0,o,l):o=yu(-1,o,l-1),o}function cD(t,e,n){let r=n.length;for(let s=0;s<n.length;s++)if(n[s]>1){r=s;break}for(let s=r+1;s<n.length;s++)if(e[s]>0||n[s]!==t[s])return!1;return!0}function uD(t,e){let n=t.length>0?t[t.length-1]:1;for(let r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function E_(t,e,n){let r;const s=t.shape.length;typeof e=="number"?r=[e,...new Array(s-1).fill(0)]:e.length<s?r=e.concat(new Array(s-e.length).fill(0)):r=e.slice(),r.forEach(o=>{P(o!==-1,()=>"slice() does not support negative begin indexing.")});let i;return n==null?i=new Array(s).fill(-1):typeof n=="number"?i=[n,...new Array(s-1).fill(-1)]:n.length<s?i=n.concat(new Array(s-n.length).fill(-1)):i=n,i=i.map((o,a)=>o>=0?o:(P(o===-1,()=>`Negative size values should be exactly -1 but got ${o} for the slice() size at index ${a}.`),t.shape[a]-r[a])),[r,i]}function dD(t,e,n,r,s,i,o,a,l){let c;if(r==null?(c=new Array(e.length),c.fill(1)):c=r,o!=null&&o&o-1)throw new Error("Multiple ellipses in slice is not allowed.");let u=!1;const d={dims:c.length,numAddAxisAfterEllipsis:0,begin:e.slice(),end:n.slice(),strides:c.slice(),beginMask:s,endMask:i,ellipsisMask:o,newAxisMask:a,shrinkAxisMask:l};for(let v=0;v<d.dims;v++)u&&1<<v&a&&d.numAddAxisAfterEllipsis++,1<<v&o&&(u=!0);u||(d.ellipsisMask|=1<<d.dims,d.dims++);const h={dims:t.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};Wce(d,h);let f=!0,p=!0,m=!0;const g=[],y=[];for(let v=0;v<t.length;++v){if(h.strides[v]===0)throw Error(`strides[${v}] must be non-zero`);const w=!!(h.shrinkAxisMask&1<<v),C=t[v];if(C===-1){g.push(w?1:-1);continue}const _=[h.beginMask&1<<v,h.endMask&1<<v],E=[h.strides[v]>0?0:-1,h.strides[v]>0?C:C-1];if(w&&h.strides[v]<=0)throw Error("only stride 1 allowed on non-range indexing.");m=m&&h.strides[v]===1;const I=!!(h.beginMask&1<<v&&h.endMask&1<<v);if(h.beginValid&&h.endValid){if(w){const B=h.begin[v]<0?C+h.begin[v]:h.begin[v];if(h.begin[v]=B,h.end[v]=h.begin[v]+1,B<0||B>=C)throw Error(`slice index ${h.begin[v]} of dimension ${v} out of bounds.`)}else h.begin[v]=ZM(h.begin[v],0,h.strides[v],C,_,E),h.end[v]=ZM(h.end[v],1,h.strides[v],C,_,E);const z=h.strides[v]===1&&h.begin[v]===0&&h.end[v]===C;f=f&&z,p=p&&(v===0&&h.strides[v]===1||z)}else f=f&&h.strides[v]===1&&I,p=p&&(v===0&&h.strides[v]===1||I);let O,R=!1;if(h.beginValid&&h.endValid?(O=h.end[v]-h.begin[v],R=!0):w?(O=1,R=!0):I&&C>=0&&(h.strides[v]<0?O=-C:O=C,R=!0),R){let z;O===0||O<0!=h.strides[v]<0?z=0:z=Math.trunc(O/h.strides[v])+(O%h.strides[v]!==0?1:0),g.push(z)}else g.push(-1)}for(let v=0;v<h.finalShapeGatherIndices.length;++v){const w=h.finalShapeGatherIndices[v];w>=0?y.push(g[w]):w===oA&&y.push(1)}return{finalShapeSparse:y.filter((v,w)=>h.finalShapeGatherIndices[w]!==oA),finalShape:y,isIdentity:f,sliceDim0:p,isSimpleSlice:m,begin:h.begin,end:h.end,strides:h.strides}}function Wce(t,e){e.beginMask=0,e.endMask=0,e.shrinkAxisMask=0;let n=0;e.beginValid=t.begin!=null,e.endValid=t.end!=null,e.begin=new Array(e.dims),e.end=new Array(e.dims),e.strides=new Array(e.dims),e.finalShapeGatherIndices=[],e.finalShapeGatherIndicesSparse=[],e.inputShapeGatherIndicesSparse=new Array(e.dims);for(let r=0;r<t.dims;r++)if(1<<r&t.ellipsisMask){const s=Math.min(e.dims-(t.dims-r)+1+t.numAddAxisAfterEllipsis,e.dims);for(;n<s;n++)e.begin[n]=0,e.end[n]=0,e.strides[n]=1,e.beginMask|=1<<n,e.endMask|=1<<n,e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(-1),e.inputShapeGatherIndicesSparse[n]=r}else if(1<<r&t.newAxisMask)e.finalShapeGatherIndices.push(oA),e.finalShapeGatherIndicesSparse.push(-1);else{if(n===e.begin.length)throw Error(`Index out of range using input dim ${n}; input has only ${e.dims} dims, ${e.begin.length}.`);t.begin!=null&&(e.begin[n]=t.begin[r]),t.end!=null&&(e.end[n]=t.end[r]),e.strides[n]=t.strides[r],t.beginMask&1<<r&&(e.beginMask|=1<<n),t.endMask&1<<r&&(e.endMask|=1<<n),t.shrinkAxisMask&1<<r?(e.finalShapeGatherIndices.push(jce),e.finalShapeGatherIndicesSparse.push(-1),e.shrinkAxisMask|=1<<n):(e.finalShapeGatherIndices.push(n),e.finalShapeGatherIndicesSparse.push(r)),e.inputShapeGatherIndicesSparse[n]=r,n++}}function ZM(t,e,n,r,s,i){if(s[e])return n>0?i[e]:i[e+1&1];{const o=t<0?r+t:t;return o<i[0]?i[0]:o>i[1]?i[1]:o}}const GH=Object.freeze(Object.defineProperty({__proto__:null,assertParamsValid:aD,computeFlatOffset:uD,computeOutShape:lD,getNormalizedAxes:Uce,isSliceContinous:cD,maskToAxes:Vce,parseSliceParams:E_,sliceInfo:dD,startForAxis:WH,startIndicesWithElidedDims:jH,stopForAxis:HH,stopIndicesWithElidedDims:VH,stridesForAxis:UH,stridesWithElidedDims:MH},Symbol.toStringTag,{value:"Module"}));/** @license See the LICENSE file. */const Hce="4.19.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KH{static sgd(e){return new S_(e)}static momentum(e,n,r=!1){return new nD(e,n,r)}static rmsprop(e,n=.9,r=0,s=null,i=!1){return new rD(e,n,r,s,i)}static adam(e=.001,n=.9,r=.999,s=null){return new eD(e,n,r,s)}static adadelta(e=.001,n=.95,r=null){return new JO(e,n,r)}static adamax(e=.002,n=.9,r=.999,s=null,i=0){return new tD(e,n,r,s,i)}static adagrad(e,n=.1){return new ZO(e,n)}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sd=KH;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gce=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:t=>t();function hD(){return new Promise(t=>Gce(()=>t()))}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fD(t,e){const n=t[0].length;t.forEach((s,i)=>{P(s.length===n,()=>`Error in concat${n}D: rank of tensors[${i}] must be the same as the rank of the rest (${n})`)}),P(e>=0&&e<n,()=>`Error in concat${n}D: axis must be between 0 and ${n-1}.`);const r=t[0];t.forEach((s,i)=>{for(let o=0;o<n;o++)P(o===e||s[o]===r[o],()=>`Error in concat${n}D: Shape of tensors[${i}] (${s}) does not match the shape of the rest (${r}) along the non-concatenated axis ${i}.`)})}function Ya(t,e){const n=t[0].slice();for(let r=1;r<t.length;r++)n[e]+=t[r][e];return n}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var oa;(function(t){t[t.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",t[t.VALUE_ROWIDS=1]="VALUE_ROWIDS",t[t.ROW_LENGTHS=2]="ROW_LENGTHS",t[t.ROW_SPLITS=3]="ROW_SPLITS",t[t.ROW_LIMITS=4]="ROW_LIMITS",t[t.ROW_STARTS=5]="ROW_STARTS"})(oa||(oa={}));function qH(t,e,n){let r=new Array;if(n==null&&e==null)return r;if(e==null)for(;r.length<t+n.length;)r.push(-1);else r=e.slice();if(n==null)return r;if(t+n.length!==r.length)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.rank = ${t+n.length}, but shape.rank = ${r.length}`);for(let s=1;s<n.length;++s){const i=n[s],o=r[r.length-n.length+s],a=r[o];if(i>=0)if(a>=0){if(a!==i)throw new Error(`rt input.shape and shape=${e} are incompatible: rt input.shape[${s+t}] = ${i} but shape[${s+t}] = ${a}`)}else r[o]=i}return r}function XH(t){const e={FIRST_DIM_SIZE:oa.FIRST_DIM_SIZE,VALUE_ROWIDS:oa.VALUE_ROWIDS,ROW_LENGTHS:oa.ROW_LENGTHS,ROW_SPLITS:oa.ROW_SPLITS,ROW_LIMITS:oa.ROW_LIMITS,ROW_STARTS:oa.ROW_STARTS},n=[];for(const r of t)if(r in e)n.push(e[r]);else break;return n}function YH(t){return t.length===0?0:t[0]===oa.FIRST_DIM_SIZE?t.length-1:t.length}function QH(t,e){if(t==null||e==null)return;const n=t.length,r=e.length;if(n>=r)throw new Error(`defaultValue.shape=${t} and ragged tensor flatValues.shape=${e}, are incompatible: defaultValue.rank = ${n} must be less than ragged tensor input flatValues.rank = ${r})`);for(let s=0;s<Math.min(n,r-1);++s){const i=t[s],o=e[s+1];if(i>=0&&o>=0&&i!==1&&i!==o)throw new Error(`defaultValue.shape=${t}, and ragged tensor input flatValues.shape=${e} are incompatible: defaultValue.shape[${s-t.length}] = ${i} but ragged tensor input.flatValues.shape[${s-t.length}] = ${o}`)}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pD=30;function __(t){return t<=pD?t:hS(t,Math.floor(Math.sqrt(t)))}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mD(t,e,n){const r=n*(typeof t=="number"?t:t[0]),s=e*(typeof t=="number"?t:t[1]);return[r,s]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C0(t,e,n,r=!0){let s=[];if(r)s=s.concat(e.slice(0)),s.push(t[0]/n),s=s.concat(t.slice(1));else{s=s.concat(t[0]);const i=e.length;for(let o=0;o<i;++o)s=s.concat([t[o+1]/e[o],e[o]]);s=s.concat(t.slice(i+1))}return s}function E0(t,e,n=!0){const r=[];if(n){r.push(e);for(let s=e+1;s<t;++s)s<=2*e?(r.push(s),r.push(s-(e+1))):r.push(s)}else{const s=[],i=[];for(let o=1;o<t;++o)o>=e*2+1||o%2===1?i.push(o):s.push(o);r.push(...s),r.push(0),r.push(...i)}return r}function _0(t,e,n,r=!0){const s=[];r?s.push(t[0]/n):s.push(t[0]*n);for(let i=1;i<t.length;++i)i<=e.length?r?s.push(e[i-1]*t[i]):s.push(t[i]/e[i-1]):s.push(t[i]);return s}function gD(t,e){const n=[0];for(let r=0;r<e;++r)n.push(t[r][0]);return n}function yD(t,e,n){const r=t.slice(0,1);for(let s=0;s<n;++s)r.push(t[s+1]-e[s][0]-e[s][1]);return r}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const T_=1.7580993408473768,k_=1.0507009873554805;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bD=.3275911,vD=.254829592,wD=-.284496736,xD=1.421413741,SD=-1.453152027,CD=1.061405429;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ec(t,e){if(t.length!==e.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${t.length}, imag: ${e.length}.`);const n=new Float32Array(t.length*2);for(let r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function JH(t){const e=new Float32Array(t.length/2),n=new Float32Array(t.length/2);for(let r=0;r<t.length;r+=2)e[r/2]=t[r],n[r/2]=t[r+1];return{real:e,imag:n}}function ZH(t){const e=Math.ceil(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=0;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function eG(t){const e=Math.floor(t.length/4),n=new Float32Array(e),r=new Float32Array(e);for(let s=2;s<t.length;s+=4)n[Math.floor(s/4)]=t[s],r[Math.floor(s/4)]=t[s+1];return{real:n,imag:r}}function ED(t,e){const n=t[e*2],r=t[e*2+1];return{real:n,imag:r}}function tG(t,e,n,r){t[r*2]=e,t[r*2+1]=n}function nG(t,e){const n=new Float32Array(t/2),r=new Float32Array(t/2);for(let s=0;s<Math.ceil(t/2);s++){const i=(e?2:-2)*Math.PI*(s/t);n[s]=Math.cos(i),r[s]=Math.sin(i)}return{real:n,imag:r}}function rG(t,e,n){const r=(n?2:-2)*Math.PI*(t/e),s=Math.cos(r),i=Math.sin(r);return{real:s,imag:i}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UI="->",Kce=/->/g,e3=",",t3="...";function _D(t,e){t=t.replace(/\s/g,"");const n=(t.length-t.replace(Kce,"").length)/UI.length;if(n<1)throw new Error("Equations without an arrow are not supported.");if(n>1)throw new Error(`Equation must contain exactly one arrow ("${UI}").`);const[r,s]=t.split(UI);P(r.indexOf(t3)===-1,()=>`The ellipsis notation ("${t3}") is not supported yet.`);const i=r.split(e3),o=i.length;if(e!==o)throw new Error(`Expected ${o} input tensors, received ${e}`);if(o>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");const a=[];for(let h=0;h<s.length;++h){const f=s[h];if(!i.some(p=>p.indexOf(f)!==-1))throw new Error(`Output subscripts contain the label ${f} not present in the input subscripts.`);a.indexOf(f)===-1&&a.push(f)}for(let h=0;h<r.length;++h){const f=r[h];a.indexOf(f)===-1&&f!==e3&&a.push(f)}const l=new Array(i.length);for(let h=0;h<o;++h){if(new Set(i[h].split("")).size!==i[h].length)throw new Error(`Found duplicate axes in input component ${i[h]}. Support for duplicate axes in input is not implemented yet.`);l[h]=[];for(let f=0;f<i[h].length;++f)l[h].push(a.indexOf(i[h][f]))}const c=a.length,u=s.length,d=[];for(let h=u;h<c;++h)d.push(h);return{allDims:a,summedDims:d,idDims:l}}function TD(t,e){let n=new Array(t);n.fill(-1);for(let s=0;s<e.length;++s)n[e[s]]=s;const r=[];for(let s=0;s<t;++s)n[s]===-1&&r.push(s);return n=n.filter(s=>s!==-1),{permutationIndices:n,expandDims:r}}function kD(t,e,n){const r=new Array(t);for(let s=0;s<n.length;++s){const i=n[s].shape;for(let o=0;o<e[s].length;++o)r[e[s][o]]===void 0?r[e[s][o]]=i[o]:P(r[e[s][o]]===i[o],()=>`Expected dimension ${r[e[s][o]]} at axis ${o} of input shaped ${JSON.stringify(i)}, but got dimension ${i[o]}`)}}function ID(t,e){const n=t,r=[];let s=0;t.length===0&&n.push(-1),s=t.length+1;for(let o=0;o<s;++o)r.push([]);const i=[];for(let o=0;o<n.length;++o){const a=n[o],l=qce(e,a);for(const c of l)i.indexOf(c)===-1&&(r[o].push(c),i.push(c))}return{path:n,steps:r}}function ND(t){return t.every((e,n)=>e===n)}function qce(t,e){const n=[];for(let r=0;r<t.length;++r)(t[r].length===0||t[r].indexOf(e)!==-1||e===-1)&&n.push(r);return n}function $D(t,e,n=0){let r=[];if(typeof e=="number")P(t.shape[n]%e===0,()=>"Number of splits must evenly divide the axis."),r=new Array(e).fill(t.shape[n]/e);else{const s=e.reduce((o,a)=>(a===-1&&(o+=1),o),0);P(s<=1,()=>"There should be only one negative value in split array.");const i=e.indexOf(-1);if(i!==-1){const o=e.reduce((a,l)=>l>0?a+l:a);e[i]=t.shape[n]-o}P(t.shape[n]===e.reduce((o,a)=>o+a),()=>"The sum of sizes must match the size of the axis dimension."),r=e}return r}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sG(t){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${t}`}function iG(t,e){return`indices(${t}, 0) is invalid: ${e} < 0`}function oG(t,e,n){return`indices(${t}, 0) is invalid: ${e} >= ${n}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aG(t,e){return`only one output dimension may be -1, not both ${t} and ${e}`}function lG(t,e){return`size ${t} must be non-negative, not ${e}`}function cG(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function uG(t,e){const n=fe(t),r=fe(e);return`Input to reshape is a SparseTensor with ${n}
  dense values, but the requested shape requires a multiple of ${r}. inputShape=${t} outputShape= ${e}`}function dG(t,e){const n=fe(t),r=fe(e);return`Input to reshape is a tensor with ${n} dense values, but the requested shape has ${r}. inputShape=${t} outputShape=${e}`}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aA(){return"segment ids must be >= 0"}function hG(){return"segment ids are not increasing"}function fG(t,e){return`Segment id ${t} out of range [0, ${e}), possibly because segmentIds input is not sorted.`}function pG(t,e,n){return`Bad: indices[${t}] == ${e} out of range [0, ${n})`}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mG(t,e){let n=!1,r;for(t<=pD?(r=t,n=!0):r=hS(t,Math.floor(Math.sqrt(t)));!n;)r>e||r===t?n=!0:r=hS(t,r+1);return r}function gG(t,e,n){const r=[],s=t.length;for(let i=0;i<s;i++)i!==e?r.push(t[i]):r.push(n);return r}function AD(t,e,n,r){const s=e.shape.length,i=t.shape.length;if(r!==0&&(r<-s||r>s))throw new Error(`Expect batchDims in the range of [-${s}, ${s}], but got ${r}`);if(r<0&&(r+=s),r>i)throw new Error(`batchDims (${r}) must be less than rank(x) (
    ${i}).`);if(n<r)throw new Error(`batchDims (${r}) must be less than or equal to axis (${n}).`);for(let d=0;d<r;++d)if(t.shape[d]!==e.shape[d])throw new Error(`x.shape[${d}]: ${t.shape[d]} should be equal to indices.shape[${d}]: ${e.shape[d]}.`);const o=t.shape[n],a=[];let l=1,c=1,u=1;for(let d=0;d<r;++d)a.push(t.shape[d]),l*=t.shape[d];for(let d=r;d<n;d++)a.push(t.shape[d]),c*=t.shape[d];for(let d=r;d<s;d++)a.push(e.shape[d]);for(let d=n+1;d<i;d++)a.push(t.shape[d]),u*=t.shape[d];return{batchSize:l,sliceSize:u,outerSize:c,dimSize:o,outputShape:a}}const Xce=Object.freeze(Object.defineProperty({__proto__:null,collectGatherOpShapeInfo:AD,computeOutShape:gG,segOpComputeOptimalWindowSize:mG},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tc(t){try{return t.map(e=>Ql(e))}catch(e){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${e}`)}}function yG(t){return t.map(e=>qa(e))}const bG=Object.freeze(Object.defineProperty({__proto__:null,ERF_A1:vD,ERF_A2:wD,ERF_A3:xD,ERF_A4:SD,ERF_A5:CD,ERF_P:bD,PARALLELIZE_THRESHOLD:pD,get RowPartitionType(){return oa},SELU_SCALE:k_,SELU_SCALEALPHA:T_,applyActivation:y_,assertAndGetBroadcastShape:yt,assertAxesAreInnerMostDims:qr,assertParamsConsistent:fD,assignToTypedArray:tG,axesAreInnerMostDims:pO,calculateShapes:ju,checkEinsumDimSizes:kD,checkPadOnDimRoundingMode:Ss,combineLocations:RW,combineRaggedTensorToTensorShapes:qH,complexWithEvenIndex:ZH,complexWithOddIndex:eG,computeConv2DInfo:Fr,computeConv3DInfo:Fu,computeDefaultPad:QR,computeDilation2DInfo:s0,computeOptimalWindowSize:__,computeOutAndReduceShapes:Mr,computeOutShape:Ya,computePool2DInfo:zo,computePool3DInfo:uc,convertConv2DDataFormat:dc,decodeEinsumEquation:_D,eitherStridesOrDilationsAreOne:Kr,expandShapeToKeepDim:sr,exponent:rG,exponents:nG,fromStringArrayToUint8:yG,fromUint8ToStringArray:tc,getAxesPermutation:Gn,getBroadcastDims:fh,getComplexWithIndex:ED,getEinsumComputePath:ID,getEinsumPermutation:TD,getFusedBiasGradient:g_,getFusedDyActivation:m_,getImageCenter:mD,getInnerMostAxes:ir,getPermuted:E0,getRaggedRank:YH,getReductionAxes:hr,getReshaped:C0,getReshapedPermuted:_0,getRowPartitionTypesHelper:XH,getSliceBeginCoords:gD,getSliceSize:yD,getSparseFillEmptyRowsIndicesDenseShapeMismatch:sG,getSparseFillEmptyRowsNegativeIndexErrorMessage:iG,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:oG,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:cG,getSparseReshapeInputOutputMismatchErrorMessage:dG,getSparseReshapeInputOutputMultipleErrorMessage:uG,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:aG,getSparseReshapeNegativeOutputDimErrorMessage:lG,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:pG,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:aA,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:hG,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:fG,getUndoAxesPermutation:Mu,isIdentityPermutation:ND,log:Wte,mergeRealAndImagArrays:ec,prepareAndValidate:C_,prepareSplitSize:$D,segment_util:Xce,shouldFuse:b_,slice_util:GH,splitRealAndImagArrays:JH,stridesOrDilationsArePositive:hh,tupleValuesAreOne:xu,upcastType:Ms,validateDefaultValueShape:QH,validateInput:u_,validateUpdateShape:VO,warn:Ai},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yce=Object.freeze(Object.defineProperty({__proto__:null,nonMaxSuppressionV3Impl:v_,nonMaxSuppressionV4Impl:w_,nonMaxSuppressionV5Impl:x_,whereImpl:f_},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */uce();const Qce=Object.freeze(Object.defineProperty({__proto__:null,Abs:Zb,Acos:nm,Acosh:rm,AdadeltaOptimizer:JO,AdagradOptimizer:ZO,AdamOptimizer:eD,AdamaxOptimizer:tD,Add:Lh,AddN:ev,All:OC,Any:DC,ArgMax:tv,ArgMin:nv,Asin:sm,Asinh:im,Atan:om,Atan2:lm,Atanh:am,AvgPool:rv,AvgPool3D:sv,AvgPool3DGrad:LC,AvgPoolGrad:PC,BatchMatMul:iv,BatchToSpaceND:ov,Bincount:FC,BitwiseAnd:av,BroadcastArgs:MC,BroadcastTo:U4,Cast:cm,Ceil:um,ClipByValue:dm,Complex:zC,ComplexAbs:lv,Concat:cv,Conv2D:uv,Conv2DBackpropFilter:BC,Conv2DBackpropInput:dv,Conv3D:hv,Conv3DBackpropFilterV2:jC,Conv3DBackpropInputV2:VC,Cos:hm,Cosh:fm,CropAndResize:WC,Cumprod:UC,Cumsum:fv,DataStorage:ER,DenseBincount:HC,DepthToSpace:GC,DepthwiseConv2dNative:pv,DepthwiseConv2dNativeBackpropFilter:KC,DepthwiseConv2dNativeBackpropInput:qC,Diag:XC,Dilation2D:mv,Dilation2DBackpropFilter:pS,Dilation2DBackpropInput:fS,Draw:YC,get ENV(){return NR},Einsum:QC,Elu:mm,EluGrad:JC,Environment:j4,Equal:gv,Erf:gm,Exp:ym,ExpandDims:yv,Expm1:bm,FFT:ZC,Fill:eE,FlipLeftRight:tE,Floor:vm,FloorDiv:wm,FromPixels:mS,FusedBatchNorm:bv,FusedConv2D:fb,FusedDepthwiseConv2D:pb,GatherNd:nE,GatherV2:vv,Greater:wv,GreaterEqual:xm,IFFT:rE,Identity:Sm,Imag:sE,IsFinite:Cm,IsInf:Em,IsNan:_m,KernelBackend:$C,LRN:kv,LRNGrad:oE,LeakyRelu:xv,Less:Sv,LessEqual:Cv,LinSpace:iE,Log:Tm,Log1p:km,LogSoftmax:W4,LogicalAnd:Ev,LogicalNot:_v,LogicalOr:Tv,LogicalXor:zte,LowerBound:Bte,MatrixBandPart:jte,Max:Iv,MaxPool:Nv,MaxPool3D:$v,MaxPool3DGrad:lE,MaxPoolGrad:aE,MaxPoolWithArgmax:cE,Maximum:Im,Mean:Av,Min:Rv,Minimum:Nm,MirrorPad:Ov,Mod:$m,MomentumOptimizer:nD,Multinomial:uE,Multiply:Am,Neg:Dv,NonMaxSuppressionV3:dE,NonMaxSuppressionV4:hE,NonMaxSuppressionV5:fE,NotEqual:Pv,OP_SCOPE_SUFFIX:LR,OneHot:Fv,OnesLike:Lv,Optimizer:mc,OptimizerConstructors:KH,Pack:Mv,PadV2:zv,Pool:Vte,Pow:Rm,Prelu:Bv,Prod:jv,RMSPropOptimizer:rD,RaggedGather:pE,RaggedRange:mE,RaggedTensorToTensor:gE,Range:yE,get Rank(){return W$},Real:bE,RealDiv:pm,Reciprocal:Om,get Reduction(){return ys},Relu:Dm,Relu6:Pm,Reshape:Vv,ResizeBilinear:Wv,ResizeBilinearGrad:wE,ResizeNearestNeighbor:Uv,ResizeNearestNeighborGrad:vE,Reverse:Hv,RotateWithOffset:FE,Round:Lm,Rsqrt:Fm,SGDOptimizer:S_,ScatterNd:xE,SearchSorted:CE,Select:Gv,Selu:Mm,Sigmoid:Vm,Sign:jm,Sin:zm,Sinh:Bm,Slice:Kv,Softmax:Qv,Softplus:Um,SpaceToBatchND:Xv,SparseFillEmptyRows:EE,SparseReshape:_E,SparseSegmentMean:TE,SparseSegmentSum:kE,SparseToDense:IE,SplitV:Yv,Sqrt:Wm,Square:NE,SquaredDifference:Hm,StaticRegexReplace:Jv,Step:Ym,StridedSlice:$E,StringNGrams:AE,StringSplit:RE,StringToHashBucketFast:OE,Sub:Gm,Sum:qv,Tan:Km,Tanh:qm,Tensor:Ot,TensorBuffer:dr,TensorScatterUpdate:SE,Tile:Xm,TopK:DE,Transform:PE,Transpose:qd,Unique:LE,Unpack:Zv,UnsortedSegmentSum:e0,UpperBound:Ute,Variable:yb,ZerosLike:t0,_FusedMatMul:hb,abs:lr,acos:UR,acosh:WR,add:xe,addN:_W,all:jE,any:vb,argMax:dh,argMin:HR,asin:GR,asinh:KR,atan:qR,atan2:XR,atanh:YR,avgPool:i0,avgPool3d:JR,backend:MR,backend_util:bG,basicLSTMCell:TW,batchNorm:Qm,batchNorm2d:ZR,batchNorm3d:eO,batchNorm4d:tO,batchToSpaceND:o0,bincount:nO,bitwiseAnd:kW,booleanMaskAsync:hH,broadcastArgs:IW,broadcastTo:Xd,broadcast_util:xse,browser:zce,buffer:xt,cast:$e,ceil:rO,clipByValue:Bs,clone:Xa,complex:Jl,concat:Wn,concat1d:sO,concat2d:a0,concat3d:iO,concat4d:oO,conv1d:VE,conv2d:Zl,conv2dTranspose:UE,conv3d:lO,conv3dTranspose:cO,copyRegisteredKernels:Kte,cos:l0,cosh:WE,cosineWindow:p_,cumprod:Sb,cumsum:HE,customGrad:cl,denseBincount:vS,deprecationWarn:Tne,depthToSpace:uO,depthwiseConv2d:Jm,device_util:wne,diag:$W,dilation2d:dO,disableDeprecationWarnings:_ne,dispose:_t,disposeVariables:kne,div:Ue,divNoNan:hO,dot:fO,dropout:KO,einsum:Td,elu:Zm,enableDebugMode:Ene,enableProdMode:Cne,enclosingPowerOfTwo:qO,engine:ta,ensureShape:AW,env:ce,equal:Lo,erf:GE,euclideanNorm:mO,exp:js,expandDims:Br,expm1:gO,eye:KE,fft:x0,fill:Mh,findBackend:Ane,findBackendFactory:Rne,floor:tg,floorDiv:BE,fused:xH,gather:ng,gatherND:gH,gather_util:Bce,getBackend:dW,getGradient:j$,getKernel:gb,getKernelsForBackend:gS,grad:sie,grads:iie,greater:Gs,greaterEqual:hc,ifft:Lp,imag:c0,image:Fi,inTopKAsync:yH,io:oD,irfft:l_,isFinite:yO,isInf:bO,isNaN:vO,keep:xr,kernel_impls:Yce,leakyRelu:u0,less:Rp,lessEqual:zu,linalg:QO,linspace:DW,localResponseNormalization:wO,log:fi,log1p:d0,logSigmoid:xO,logSoftmax:XE,logSumExp:h0,logicalAnd:fa,logicalNot:f0,logicalOr:YE,logicalXor:SO,losses:IH,lowerBound:LW,matMul:Et,math:$ce,max:ji,maxPool:p0,maxPool3d:CO,maxPoolWithArgmax:FW,maximum:ml,mean:Vn,memory:Y$,meshgrid:MW,min:Ap,minimum:Cu,mirrorPad:EO,mod:_O,moments:m0,movingAverage:fH,mul:Y,multiRNNCell:zW,multinomial:BW,neg:yn,nextFrame:hD,norm:eg,notEqual:ph,oneHot:Op,ones:Os,onesLike:pi,op:q,outerProduct:jW,pad:fc,pad1d:VW,pad2d:UW,pad3d:WW,pad4d:HW,pool:TO,pow:ll,prelu:y0,print:VR,prod:kO,profile:Ine,raggedGather:GW,raggedRange:KW,raggedTensorToTensor:qW,rand:XW,randomGamma:ZW,randomNormal:ZE,randomStandardNormal:eH,randomUniform:Bu,randomUniformInt:tH,range:mh,ready:uW,real:Dp,reciprocal:FO,registerBackend:FR,registerGradient:H4,registerKernel:ME,relu:xa,relu6:e_,removeBackend:$ne,reshape:ee,reverse:Gi,reverse1d:nH,reverse2d:rH,reverse3d:sH,reverse4d:iH,rfft:S0,round:t_,rsqrt:n_,scalar:tt,scatterND:pH,scatter_util:aae,searchSorted:QE,selu:r_,separableConv2d:s_,serialization:lce,setBackend:cW,setPlatform:One,setdiff1dAsync:oH,sigmoid:$o,sign:MO,signal:kH,sin:i_,sinh:o_,slice:ot,slice1d:b0,slice2d:a_,slice3d:v0,slice4d:Pp,slice_util:GH,softmax:w0,softplus:zh,spaceToBatchND:g0,sparse:NH,sparseToDense:mH,spectral:TH,split:Ps,sqrt:Lr,square:rn,squaredDifference:c_,squeeze:Ao,stack:Vs,step:jh,stridedSlice:zO,string:$H,sub:Fe,sum:qe,sumOutType:zE,tan:BO,tanh:Su,tensor:No,tensor1d:Sr,tensor2d:ou,tensor3d:jO,tensor4d:aH,tensor5d:lH,tensor6d:cH,tensorScatterUpdate:uH,tensor_util:mne,test_util:woe,tidy:oe,tile:Li,time:Nne,topk:UO,train:Sd,transpose:$t,truncatedNormal:d_,unique:WO,unregisterGradient:Gte,unregisterKernel:Hte,unsortedSegmentSum:h_,unstack:Ki,upcastType:Ms,upperBound:dH,util:nne,valueAndGrad:oie,valueAndGrads:aie,variable:HO,variableGrads:PW,version_core:Hce,where:Wr,whereAsync:GO,zeros:ur,zerosLike:Dt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jce=ce();Jce.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,t=>{t&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")});/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var ti;(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_QINT16=15]="DT_QINT16",t[t.DT_QUINT16=16]="DT_QUINT16",t[t.DT_UINT16=17]="DT_UINT16",t[t.DT_COMPLEX128=18]="DT_COMPLEX128",t[t.DT_HALF=19]="DT_HALF",t[t.DT_RESOURCE=20]="DT_RESOURCE",t[t.DT_VARIANT=21]="DT_VARIANT",t[t.DT_UINT32=22]="DT_UINT32",t[t.DT_UINT64=23]="DT_UINT64",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",t[t.DT_QINT16_REF=115]="DT_QINT16_REF",t[t.DT_QUINT16_REF=116]="DT_QUINT16_REF",t[t.DT_UINT16_REF=117]="DT_UINT16_REF",t[t.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",t[t.DT_HALF_REF=119]="DT_HALF_REF",t[t.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",t[t.DT_VARIANT_REF=121]="DT_VARIANT_REF",t[t.DT_UINT32_REF=122]="DT_UINT32_REF",t[t.DT_UINT64_REF=123]="DT_UINT64_REF"})(ti||(ti={}));var n3;(function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))})(n3||(n3={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const RD={};function Zce(t,e){const n={tfOpName:t,category:"custom",inputs:[],attrs:[],customExecutor:e};RD[t]=n}function vG(t){return RD[t]}function eue(t){delete RD[t]}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k(t,e,n,r,s){const i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){const a=i.inputIndexStart,l=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?a+1:i.inputIndexEnd,c=a<0?e.inputNames.length+a:a;if(i.type==="tensor")return jr(e.inputNames[c],n,r,s);if(i.type==="tensors"){const h=e.inputs.slice(a,l);return e.inputNames.slice(a,l).filter((p,m)=>{var g;return((g=h[m])===null||g===void 0?void 0:g.op)!=="NoOp"}).map(p=>jr(p,n,r,s))}const u=jr(e.inputNames[c],n,r,s),d=u.dataSync();return i.type==="number"?d[0]:Bi(u.shape,d)}const o=e.attrParams[t];return o&&o.value}function jr(t,e,n,r){const[s,i]=ni(t,n);if(r!=null){const a=r.getHashTableHandleByName(s);if(a!=null)return a}const o=n.currentContextIds.find(a=>!!e[xS(s,a)]);return o!==void 0?e[xS(s,o)][i]:void 0}function r3(t,e,n){return e[xS(t,n.currentContextId)]}function Rl(t,e){const[n,r,s]=ni(t,e);return[xS(n,e&&e.currentContextId),r,s]}function xS(t,e){return e?`${t}-${e}`:t}function ni(t,e){if(t==="")return["",0,void 0];const n=e!=null&&e.parseNodeNameCache!=null;if(n){const i=e.parseNodeNameCache.get(t);if(i!=null)return i}const r=t.split(":");let s;if(r.length===1)s=[t,0,void 0];else{const i=r[0],o=r.length===3?r[1]:void 0,a=Number(r[r.length-1]);s=[i,a,o]}return n&&e.parseNodeNameCache.set(t,s),s}function x1(t,e,n){let r=k("pad",t,e,n);if(r==="explicit"){r=k("explicitPaddings",t,e,n);const s=[[0,0],[0,0],[0,0],[0,0]];for(let i=0;i<4;i++)s[i][0]=r[i*2],s[i][1]=r[i*2+1];return s}return r}function Ol(t){return t.kept?t:Xa(t)}/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tue=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],nue=Object.freeze(Object.defineProperty({__proto__:null,json:tue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rue=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],sue=Object.freeze(Object.defineProperty({__proto__:null,json:rue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const iue=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}],oue=Object.freeze(Object.defineProperty({__proto__:null,json:iue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aue=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}],lue=Object.freeze(Object.defineProperty({__proto__:null,json:aue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cue=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],uue=Object.freeze(Object.defineProperty({__proto__:null,json:cue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const due=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],hue=Object.freeze(Object.defineProperty({__proto__:null,json:due},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fue=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}],pue=Object.freeze(Object.defineProperty({__proto__:null,json:fue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mue=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],gue=Object.freeze(Object.defineProperty({__proto__:null,json:mue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yue=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],bue=Object.freeze(Object.defineProperty({__proto__:null,json:yue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vue=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}],wue=Object.freeze(Object.defineProperty({__proto__:null,json:vue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xue=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}],Sue=Object.freeze(Object.defineProperty({__proto__:null,json:xue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cue=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}],Eue=Object.freeze(Object.defineProperty({__proto__:null,json:Cue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _ue=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}],Tue=Object.freeze(Object.defineProperty({__proto__:null,json:_ue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kue=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}],Iue=Object.freeze(Object.defineProperty({__proto__:null,json:kue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nue=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}],$ue=Object.freeze(Object.defineProperty({__proto__:null,json:Nue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Aue=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}],Rue=Object.freeze(Object.defineProperty({__proto__:null,json:Aue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oue=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],Due=Object.freeze(Object.defineProperty({__proto__:null,json:Oue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pue=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}],Lue=Object.freeze(Object.defineProperty({__proto__:null,json:Pue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fue=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}],Mue=Object.freeze(Object.defineProperty({__proto__:null,json:Fue},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s3{static get Instance(){return this._instance||(this._instance=new this)}constructor(){const e=[nue,sue,oue,lue,uue,hue,pue,gue,bue,wue,Sue,Eue,Tue,Iue,$ue,Rue,Due,Lue,Mue],n=[].concat(...e.map(r=>r.json));this.opMappers=n.reduce((r,s)=>(r[s.tfOpName]=s,r),{})}transformGraph(e,n={}){const r=e.node,s=[],i=[],o=[],a=r.reduce((m,g)=>(m[g.name]=this.mapNode(g),g.op.startsWith("Placeholder")?s.push(m[g.name]):g.op==="Const"?i.push(m[g.name]):(g.input==null||g.input.length===0)&&o.push(m[g.name]),m),{});let l=[];const c=[];let u={},d={};n!=null&&(u=this.mapSignatureEntries(n.inputs),d=this.mapSignatureEntries(n.outputs));const h=Object.keys(a);h.forEach(m=>{const g=a[m];g.inputNames.forEach((y,b)=>{const[v,,w]=Rl(y),C=a[v];if(C.outputs!=null){const _=C.outputs.indexOf(w);if(_!==-1){const E=`${v}:${_}`;g.inputNames[b]=E}}g.inputs.push(C),C.children.push(g)})}),Object.keys(d).length===0?h.forEach(m=>{const g=a[m];g.children.length===0&&c.push(g)}):Object.keys(d).forEach(m=>{const[g]=Rl(m),y=a[g];y!=null&&(y.signatureKey=d[m],c.push(y))}),Object.keys(u).length>0?Object.keys(u).forEach(m=>{const[g]=Rl(m),y=a[g];y&&(y.signatureKey=u[m],l.push(y))}):l=s;let f={};e.library!=null&&e.library.function!=null&&(f=e.library.function.reduce((m,g)=>(m[g.signature.name]=this.mapFunction(g),m),{}));const p={nodes:a,inputs:l,outputs:c,weights:i,placeholders:s,signature:n,functions:f};return o.length>0&&(p.initNodes=o),p}mapSignatureEntries(e){return Object.keys(e||{}).reduce((n,r)=>(n[e[r].name]=r,n),{})}mapNode(e){const n=vG(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});const r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(s=>s.startsWith("^")?s.slice(1):s),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr,outputs:n.outputs};return n.inputs!=null&&(r.inputParams=n.inputs.reduce((s,i)=>(s[i.name]={type:i.type,inputIndexStart:i.start,inputIndexEnd:i.end},s),{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce((s,i)=>{const o=i.type;let a;switch(i.type){case"string":a=lA(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=lA(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"string[]":a=mA(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=mA(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number":a=uA(e.attr,i.tfName,i.defaultValue||0),a===void 0&&i.tfDeprecatedName&&(a=uA(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"number[]":a=pA(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=pA(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool":a=cA(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=cA(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"bool[]":a=yA(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=yA(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape":a=fA(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=fA(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"shape[]":a=gA(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=gA(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype":a=dA(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=dA(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"dtype[]":a=hA(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=hA(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"func":a=i3(e.attr,i.tfName,i.defaultValue),a===void 0&&i.tfDeprecatedName&&(a=i3(e.attr,i.tfDeprecatedName,i.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${i.type} for op: ${e.op}`)}return s[i.name]={value:a,type:o},s},{})),r}mapFunction(e){const n=e.nodeDef,r=[],s=[];let i={};n!=null&&(i=n.reduce((d,h)=>(d[h.name]=this.mapNode(h),h.op==="Const"&&s.push(d[h.name]),d),{}));const o=[],a=[];e.signature.inputArg.forEach(d=>{const[h]=Rl(d.name),f={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:OD(d.type),type:"dtype"}},children:[]};f.signatureKey=d.name,o.push(f),i[h]=f}),Object.keys(i).forEach(d=>{const h=i[d];h.inputNames.forEach((f,p)=>{const[m,,g]=Rl(f),y=i[m];if(y.outputs!=null){const b=y.outputs.indexOf(g);if(b!==-1){const v=`${m}:${b}`;h.inputNames[p]=v}}h.inputs.push(y),y.children.push(h)})});const c=e.ret;e.signature.outputArg.forEach(d=>{const[h,f]=Rl(c[d.name]),p=i[h];p!=null&&(p.defaultOutput=f,a.push(p))});const u=this.mapArgsToSignature(e);return{nodes:i,inputs:o,outputs:a,weights:s,placeholders:r,signature:u}}mapArgsToSignature(e){return{methodName:e.signature.name,inputs:e.signature.inputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r),n),{}),outputs:e.signature.outputArg.reduce((n,r)=>(n[r.name]=this.mapArgToTensorInfo(r,e.ret),n),{})}}mapArgToTensorInfo(e,n){let r=e.name;return n!=null&&(r=n[r]),{name:r,dtype:e.type}}}function zue(t){const e=ce().global;if(typeof e.atob<"u")return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function wG(t,e){const n=Array.isArray(t)?String.fromCharCode.apply(null,t):zue(t);return e?n:n.toLowerCase()}function lA(t,e,n,r=!1){const s=t[e];return s!=null?wG(s.s,r):n}function cA(t,e,n){const r=t[e];return r?r.b:n}function uA(t,e,n){const r=t[e]||{},s=r.i!=null?r.i:r.f!=null?r.f:n;return typeof s=="number"?s:parseInt(s,10)}function OD(t){switch(typeof t=="string"&&(t=ti[t]),t){case ti.DT_FLOAT:case ti.DT_HALF:return"float32";case ti.DT_INT32:case ti.DT_INT64:case ti.DT_INT8:case ti.DT_UINT8:return"int32";case ti.DT_BOOL:return"bool";case ti.DT_DOUBLE:return"float32";case ti.DT_STRING:return"string";case ti.DT_COMPLEX64:case ti.DT_COMPLEX128:return"complex64";default:return null}}function i3(t,e,n){const r=t[e];return r&&r.func?r.func.name:n}function dA(t,e,n){const r=t[e];return r&&r.type?OD(r.type):n}function hA(t,e,n){const r=t[e];return r&&r.list&&r.list.type?r.list.type.map(s=>OD(s)):n}function xG(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(e=>typeof e.size=="number"?e.size:parseInt(e.size,10)):[]}function fA(t,e,n){const r=t[e];return r&&r.shape?xG(r.shape):n}function pA(t,e,n){const r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(s=>typeof s=="number"?s:parseInt(s,10)):n}function mA(t,e,n,r=!1){const s=t[e];return s&&s.list&&s.list.s?s.list.s.map(i=>wG(i,r)):n}function gA(t,e,n){const r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(s=>xG(s)):n}function yA(t,e,n){const r=t[e];return r&&r.list&&r.list.b?r.list.b:n}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Bue{constructor(e,n,r){this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(s=>this.getInput(s)),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce((s,i)=>(s[i]=this.getAttr(i),s),{}))}getInput(e){return jr(e,this.tensorMap,this.context)}getAttr(e,n){const r=this.node.rawAttrs[e];if(r.tensor!=null)return jr(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return uA(this.node.rawAttrs,e,n);if(r.s!=null)return lA(this.node.rawAttrs,e,n);if(r.b!=null)return cA(this.node.rawAttrs,e,n);if(r.shape!=null)return fA(this.node.rawAttrs,e,n);if(r.type!=null)return dA(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return pA(this.node.rawAttrs,e,n);if(r.list.s!=null)return mA(this.node.rawAttrs,e,n);if(r.list.shape!=null)return gA(this.node.rawAttrs,e,n);if(r.list.b!=null)return yA(this.node.rawAttrs,e,n);if(r.list.type!=null)return hA(this.node.rawAttrs,e,n)}return n}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xr=Object.freeze(Object.defineProperty({__proto__:null,OP_SCOPE_SUFFIX:LR,abs:lr,acos:UR,acosh:WR,add:xe,addN:_W,all:jE,any:vb,argMax:dh,argMin:HR,asin:GR,asinh:KR,atan:qR,atan2:XR,atanh:YR,avgPool:i0,avgPool3d:JR,basicLSTMCell:TW,batchNorm:Qm,batchNorm2d:ZR,batchNorm3d:eO,batchNorm4d:tO,batchToSpaceND:o0,bincount:nO,bitwiseAnd:kW,booleanMaskAsync:hH,broadcastArgs:IW,broadcastTo:Xd,buffer:xt,cast:$e,ceil:rO,clipByValue:Bs,clone:Xa,complex:Jl,concat:Wn,concat1d:sO,concat2d:a0,concat3d:iO,concat4d:oO,conv1d:VE,conv2d:Zl,conv2dTranspose:UE,conv3d:lO,conv3dTranspose:cO,cos:l0,cosh:WE,cosineWindow:p_,cumprod:Sb,cumsum:HE,denseBincount:vS,depthToSpace:uO,depthwiseConv2d:Jm,diag:$W,dilation2d:dO,div:Ue,divNoNan:hO,dot:fO,dropout:KO,einsum:Td,elu:Zm,enclosingPowerOfTwo:qO,ensureShape:AW,equal:Lo,erf:GE,euclideanNorm:mO,exp:js,expandDims:Br,expm1:gO,eye:KE,fft:x0,fill:Mh,floor:tg,floorDiv:BE,fused:xH,gather:ng,gatherND:gH,greater:Gs,greaterEqual:hc,ifft:Lp,imag:c0,image:Fi,inTopKAsync:yH,irfft:l_,isFinite:yO,isInf:bO,isNaN:vO,leakyRelu:u0,less:Rp,lessEqual:zu,linalg:QO,linspace:DW,localResponseNormalization:wO,log:fi,log1p:d0,logSigmoid:xO,logSoftmax:XE,logSumExp:h0,logicalAnd:fa,logicalNot:f0,logicalOr:YE,logicalXor:SO,losses:IH,lowerBound:LW,matMul:Et,max:ji,maxPool:p0,maxPool3d:CO,maxPoolWithArgmax:FW,maximum:ml,mean:Vn,meshgrid:MW,min:Ap,minimum:Cu,mirrorPad:EO,mod:_O,moments:m0,movingAverage:fH,mul:Y,multiRNNCell:zW,multinomial:BW,neg:yn,norm:eg,notEqual:ph,oneHot:Op,ones:Os,onesLike:pi,op:q,outerProduct:jW,pad:fc,pad1d:VW,pad2d:UW,pad3d:WW,pad4d:HW,pool:TO,pow:ll,prelu:y0,print:VR,prod:kO,raggedGather:GW,raggedRange:KW,raggedTensorToTensor:qW,rand:XW,randomGamma:ZW,randomNormal:ZE,randomStandardNormal:eH,randomUniform:Bu,randomUniformInt:tH,range:mh,real:Dp,reciprocal:FO,relu:xa,relu6:e_,reshape:ee,reverse:Gi,reverse1d:nH,reverse2d:rH,reverse3d:sH,reverse4d:iH,rfft:S0,round:t_,rsqrt:n_,scalar:tt,scatterND:pH,searchSorted:QE,selu:r_,separableConv2d:s_,setdiff1dAsync:oH,sigmoid:$o,sign:MO,signal:kH,sin:i_,sinh:o_,slice:ot,slice1d:b0,slice2d:a_,slice3d:v0,slice4d:Pp,softmax:w0,softplus:zh,spaceToBatchND:g0,sparse:NH,sparseToDense:mH,spectral:TH,split:Ps,sqrt:Lr,square:rn,squaredDifference:c_,squeeze:Ao,stack:Vs,step:jh,stridedSlice:zO,string:$H,sub:Fe,sum:qe,tan:BO,tanh:Su,tensor:No,tensor1d:Sr,tensor2d:ou,tensor3d:jO,tensor4d:aH,tensor5d:lH,tensor6d:cH,tensorScatterUpdate:uH,tile:Li,topk:UO,transpose:$t,truncatedNormal:d_,unique:WO,unsortedSegmentSum:h_,unstack:Ki,upperBound:dH,variable:HO,where:Wr,whereAsync:GO,zeros:ur,zerosLike:Dt},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jue=(t,e,n,r=Xr)=>{switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[r.add(k("a",t,e,n),k("b",t,e,n))];case"AddN":return[r.addN(k("tensors",t,e,n))];case"FloorMod":case"Mod":return[r.mod(k("a",t,e,n),k("b",t,e,n))];case"Mul":return[r.mul(k("a",t,e,n),k("b",t,e,n))];case"RealDiv":case"Div":return[r.div(k("a",t,e,n),k("b",t,e,n))];case"DivNoNan":return[r.divNoNan(k("a",t,e,n),k("b",t,e,n))];case"FloorDiv":return[r.floorDiv(k("a",t,e,n),k("b",t,e,n))];case"Sub":return[r.sub(k("a",t,e,n),k("b",t,e,n))];case"Minimum":return[r.minimum(k("a",t,e,n),k("b",t,e,n))];case"Maximum":return[r.maximum(k("a",t,e,n),k("b",t,e,n))];case"Pow":return[r.pow(k("a",t,e,n),k("b",t,e,n))];case"SquaredDifference":return[r.squaredDifference(k("a",t,e,n),k("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vue=(t,e,n,r=Xr)=>{switch(t.op){case"Abs":case"ComplexAbs":return[r.abs(k("x",t,e,n))];case"Acos":return[r.acos(k("x",t,e,n))];case"Acosh":return[r.acosh(k("x",t,e,n))];case"Asin":return[r.asin(k("x",t,e,n))];case"Asinh":return[r.asinh(k("x",t,e,n))];case"Atan":return[r.atan(k("x",t,e,n))];case"Atan2":return[r.atan2(k("x",t,e,n),k("y",t,e,n))];case"Atanh":return[r.atanh(k("x",t,e,n))];case"Ceil":return[r.ceil(k("x",t,e,n))];case"Complex":return[r.complex(k("real",t,e,n),k("imag",t,e,n))];case"Cos":return[r.cos(k("x",t,e,n))];case"Cosh":return[r.cosh(k("x",t,e,n))];case"Elu":return[r.elu(k("x",t,e,n))];case"Erf":return[r.erf(k("x",t,e,n))];case"Exp":return[r.exp(k("x",t,e,n))];case"Expm1":return[r.expm1(k("x",t,e,n))];case"Floor":return[r.floor(k("x",t,e,n))];case"Log":return[r.log(k("x",t,e,n))];case"Log1p":return[r.log1p(k("x",t,e,n))];case"Imag":return[r.imag(k("x",t,e,n))];case"Neg":return[r.neg(k("x",t,e,n))];case"Reciprocal":return[r.reciprocal(k("x",t,e,n))];case"Real":return[r.real(k("x",t,e,n))];case"Relu":return[r.relu(k("x",t,e,n))];case"Round":return[r.round(k("x",t,e,n))];case"Selu":return[r.selu(k("x",t,e,n))];case"Sigmoid":return[r.sigmoid(k("x",t,e,n))];case"Sin":return[r.sin(k("x",t,e,n))];case"Sign":return[r.sign(k("x",t,e,n))];case"Sinh":return[r.sinh(k("x",t,e,n))];case"Softplus":return[r.softplus(k("x",t,e,n))];case"Sqrt":return[r.sqrt(k("x",t,e,n))];case"Square":return[r.square(k("x",t,e,n))];case"Tanh":return[r.tanh(k("x",t,e,n))];case"Tan":return[r.tan(k("x",t,e,n))];case"ClipByValue":return[r.clipByValue(k("x",t,e,n),k("clipValueMin",t,e,n),k("clipValueMax",t,e,n))];case"Relu6":return[r.relu6(k("x",t,e,n))];case"Rsqrt":return[r.rsqrt(jr(t.inputNames[0],e,n))];case"LeakyRelu":return[r.leakyRelu(k("x",t,e,n),k("alpha",t,e,n))];case"Prelu":return[r.prelu(k("x",t,e,n),k("alpha",t,e,n))];case"IsNan":return[r.isNaN(jr(t.inputNames[0],e,n))];case"IsInf":return[r.isInf(jr(t.inputNames[0],e,n))];case"IsFinite":return[r.isFinite(jr(t.inputNames[0],e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fo(t,e,n=""){if(!(typeof t=="number"||typeof e=="number")){P(t.length===e.length,()=>n+` Shapes ${t} and ${e} must match`);for(let r=0;r<t.length;r++){const s=t[r],i=e[r];P(s<0||i<0||s===i,()=>n+` Shapes ${t} and ${e} must match`)}}}function o3(t){return!(typeof t=="number"||t.some(e=>e<0))}function sy(t,e,n){let r=bA(t,n);const s=!o3(r);if(s&&e.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${r}`);if(s&&e.forEach(i=>{r=bA(i.shape,r)}),!o3(r))throw new Error(`Non-fully-defined elementShape: ${r}`);return r}function bA(t,e){if(typeof t=="number")return e;if(typeof e=="number")return t;if(t.length!==e.length)throw new Error(`Incompatible ranks during merge: ${t} vs. ${e}`);const n=[];for(let r=0;r<t.length;++r){const s=t[r],i=e[r];if(s>=0&&i>=0&&s!==i)throw new Error(`Incompatible shape during merge: ${t} vs. ${e}`);n[r]=s>=0?s:i}return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Uue{constructor(e,n,r,s,i,o,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=s,this.identicalElementShapes=i,this.dynamicSize=o,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=tt(0),xr(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.tensor.id))&&n.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||e>=this.size())throw new Error(`Tried to read from index ${e}, but array size is: ${this.size()}`);const n=this.tensors[e];if(n.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${e} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor}readMany(e){return e.map(n=>this.read(n))}write(e,n){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error(`Tried to write to index ${e}, but array is not resizeable and size is: ${this.maxSize}`);const r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e},
          because the value dtype is ${n.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=n.shape),fo(this.elementShape,n.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${e}.`),r.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been read.`);if(r.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${e}, because it has already been written.`);r.tensor=n,xr(n),r.written=!0,this.tensors[e]=r}writeMany(e,n){if(e.length!==n.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${e.length} is not the same as tensors size: ${n.length}.`);e.forEach((r,s)=>this.write(r,n[s]))}gather(e,n){if(n&&n!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${n}`);if(e)e=e.slice(0,this.size());else{e=[];for(let s=0;s<this.size();s++)e.push(s)}if(e.length===0)return No([],[0].concat(this.elementShape));const r=this.readMany(e);return fo(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),Vs(r,0)}concat(e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${e}`);if(this.size()===0)return No([],[0].concat(this.elementShape));const n=[];for(let s=0;s<this.size();s++)n.push(s);const r=this.readMany(n);return fo(this.elementShape,r[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${r[0].shape})`),Wn(r,0)}scatter(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);if(e.length!==n.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${n.shape[0]}`);const r=Math.max(...e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error(`Max index must be < array size (${r}  vs. ${this.maxSize})`);this.writeMany(e,Ki(n,0))}split(e,n){if(n.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${n.dtype}`);let r=0;const s=e.map(l=>(r+=l,r));if(r!==n.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${n.shape}`);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${e.length}), and the TensorArray is not marked as dynamically resizeable`);const i=r===0?0:n.size/r,o=[];oe(()=>{n=ee(n,[1,r,i]);for(let l=0;l<e.length;++l){const u=[0,l===0?0:s[l-1],0],d=[1,e[l],i];o[l]=ee(ot(n,u,d),this.elementShape)}return o});const a=[];for(let l=0;l<e.length;l++)a[l]=l;this.writeMany(a,o)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yh{get id(){return this.idTensor.id}constructor(e,n,r,s=-1){this.tensors=e,this.elementShape=n,this.elementDtype=r,e!=null&&e.forEach(i=>{if(r!==i.dtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${i.dtype}`);fo(n,i.shape,"TensorList shape mismatch: "),xr(i)}),this.idTensor=tt(0),this.maxNumElements=s,xr(this.idTensor)}copy(){return new yh([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(e){this.tensors.forEach(n=>{(e==null||!e.has(n.id))&&n.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(e,n,r=-1){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(r!==-1&&this.tensors.length!==r)throw new Error(`Operation expected a list with ${r} elements but got a list with ${this.tensors.length} elements.`);fo(e,this.elementShape,"TensorList shape mismatch: ");const s=sy(this.elementShape,this.tensors,e);return oe(()=>{const i=this.tensors.map(o=>ee(o,s));return Vs(i,0)})}popBack(e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");const r=sy(this.elementShape,this.tensors,e),s=this.tensors.pop();return s.kept=!1,fo(s.shape,e,"TensorList shape mismatch: "),ee(s,r)}pushBack(e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(fo(e.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");xr(e),this.tensors.push(e)}resize(e){if(e<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${e}`);if(this.maxNumElements!==-1&&e>this.maxNumElements)throw new Error(`TensorListResize input size ${e} is greater maxNumElement ${this.maxNumElements}.`);const n=new yh([],this.elementShape,this.elementDtype,this.maxNumElements);n.tensors.length=e;for(let r=0;r<Math.min(this.tensors.length,e);++r)n.tensors[r]=this.tensors[r];return n}getItem(e,n,r){if(r!==this.elementDtype)throw new Error(`Invalid data types; op elements ${r}, but list elements ${this.elementDtype}`);if(e<0||e>this.tensors.length)throw new Error(`Trying to access element ${e} in a list with ${this.tensors.length} elements.`);if(this.tensors[e]==null)throw new Error(`element at index ${e} is null.`);fo(this.tensors[e].shape,n,"TensorList shape mismatch: ");const s=sy(this.elementShape,this.tensors,n);return ee(this.tensors[e],s)}setItem(e,n){if(n.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n.dtype}, but list elements ${this.elementDtype}`);if(e<0||this.maxNumElements!==-1&&e>=this.maxNumElements)throw new Error(`Trying to set element ${e} in a list with max ${this.maxNumElements} elements.`);fo(this.elementShape,n.shape,"TensorList shape mismatch: "),xr(n),this.tensors[e]!=null&&(this.tensors[e].kept=!1),this.tensors[e]=n}gather(e,n,r){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);fo(this.elementShape,r,"TensorList shape mismatch: "),e=e.slice(0,this.size());const s=sy(this.elementShape,this.tensors,r);return e.length===0?No([],[0].concat(s)):oe(()=>{const i=e.map(o=>ee(this.tensors[o],s));return Vs(i,0)})}concat(e,n){if(e&&e!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${e}`);fo(this.elementShape,n,"TensorList shape mismatch: ");const r=sy(this.elementShape,this.tensors,n);return this.size()===0?No([],[0].concat(r)):oe(()=>{const s=this.tensors.map(i=>ee(i,r));return Wn(s,0)})}}function Wue(t,e,n){const r=t.dtype;if(t.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${t.shape}`);if(t.dtype!==n)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${n}`);const s=t.shape.slice(1);fo(s,e,"TensorList shape mismatch: ");const i=Ki(t);return new yh(i,e,r)}function Hue(t,e,n,r){return new yh([],t,e,r)}function Gue(t,e,n,r){if(e.length!==t.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${e.length} vs. ${t.shape[0]}`);const s=Math.max(...e);if(r!=null&&r!==-1&&s>=r)throw new Error(`Max index must be < array size (${s}  vs. ${r})`);const i=new yh([],n,t.dtype,r),o=Ki(t,0);return e.forEach((a,l)=>{i.setItem(a,o[l])}),i}function Kue(t,e,n){let r=0;const s=e.map(u=>(r+=u,r));if(r!==t.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${r}, and tensor's shape is: ${t.shape}`);const i=t.shape.slice(1),o=bA(i,n),a=r===0?0:t.size/r,l=oe(()=>{const u=[];t=ee(t,[1,r,a]);for(let d=0;d<e.length;++d){const f=[0,d===0?0:s[d-1],0],p=[1,e[d],a];u[d]=ee(ot(t,f,p),o)}return t.dispose(),u}),c=new yh([],n,t.dtype,e.length);for(let u=0;u<l.length;u++)c.setItem(u,l[u]);return c}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const que=async(t,e,n)=>{switch(t.op){case"If":case"StatelessIf":{const r=k("thenBranch",t,e,n),s=k("elseBranch",t,e,n),i=k("cond",t,e,n),o=k("args",t,e,n);return(await i.data())[0]?n.functionMap[r].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap):n.functionMap[s].executeFunctionAsync(o,n.tensorArrayMap,n.tensorListMap)}case"While":case"StatelessWhile":{const r=k("body",t,e,n),s=k("cond",t,e,n),i=k("args",t,e,n),o=await n.functionMap[s].executeFunctionAsync(i,n.tensorArrayMap,n.tensorListMap),a=i.map(u=>u.id);let l=await o[0].data();o.forEach(u=>{!u.kept&&a.indexOf(u.id)===-1&&u.dispose()});let c=i;for(;l[0];){const u=c;c=await n.functionMap[r].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);const d=c.map(f=>f.id);u.forEach(f=>{!f.kept&&a.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()});const h=await n.functionMap[s].executeFunctionAsync(c,n.tensorArrayMap,n.tensorListMap);l=await h[0].data(),h.forEach(f=>{!f.kept&&a.indexOf(f.id)===-1&&d.indexOf(f.id)===-1&&f.dispose()})}return c}case"LoopCond":{const r=k("pred",t,e,n);return[Ol(r)]}case"Switch":{const r=k("pred",t,e,n);let s=k("data",t,e,n);return s.kept||(s=Ol(s)),(await r.data())[0]?[void 0,s]:[s,void 0]}case"Merge":{const r=t.inputNames.find(s=>jr(s,e,n)!==void 0);if(r){const s=jr(r,e,n);return[Ol(s)]}return}case"Enter":{const r=k("frameName",t,e,n),s=k("tensor",t,e,n);return n.enterFrame(r),[Ol(s)]}case"Exit":{const r=k("tensor",t,e,n);return n.exitFrame(),[Ol(r)]}case"NextIteration":{const r=k("tensor",t,e,n);return n.nextIteration(),[Ol(r)]}case"TensorArrayV3":{const r=k("size",t,e,n),s=k("dtype",t,e,n),i=k("elementShape",t,e,n),o=k("dynamicSize",t,e,n),a=k("clearAfterRead",t,e,n),l=k("identicalElementShapes",t,e,n),c=k("name",t,e,n),u=new Uue(c,s,r,i,l,o,a);return n.addTensorArray(u),[u.idTensor,tt(1)]}case"TensorArrayWriteV3":{const r=k("tensorArrayId",t,e,n),s=k("index",t,e,n),i=k("tensor",t,e,n),o=n.getTensorArray(r.id);return o.write(s,i),[o.idTensor]}case"TensorArrayReadV3":{const r=k("tensorArrayId",t,e,n),s=k("index",t,e,n);return[n.getTensorArray(r.id).read(s)]}case"TensorArrayGatherV3":{const r=k("tensorArrayId",t,e,n),s=k("indices",t,e,n),i=k("dtype",t,e,n);return[n.getTensorArray(r.id).gather(s,i)]}case"TensorArrayScatterV3":{const r=k("tensorArrayId",t,e,n),s=k("indices",t,e,n),i=k("tensor",t,e,n),o=n.getTensorArray(r.id);return o.scatter(s,i),[o.idTensor]}case"TensorArrayConcatV3":{const r=k("tensorArrayId",t,e,n),s=n.getTensorArray(r.id),i=k("dtype",t,e,n);return[s.concat(i)]}case"TensorArraySplitV3":{const r=k("tensorArrayId",t,e,n),s=k("tensor",t,e,n),i=k("lengths",t,e,n),o=n.getTensorArray(r.id);return o.split(i,s),[o.idTensor]}case"TensorArraySizeV3":{const r=k("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return[tt(s.size(),"int32")]}case"TensorArrayCloseV3":{const r=k("tensorArrayId",t,e,n),s=n.getTensorArray(r.id);return s.clearAndClose(),[s.idTensor]}case"TensorListSetItem":{const r=k("tensorListId",t,e,n),s=k("index",t,e,n),i=k("tensor",t,e,n),o=n.getTensorList(r.id);return o.setItem(s,i),[o.idTensor]}case"TensorListGetItem":{const r=k("tensorListId",t,e,n),s=k("index",t,e,n),i=k("elementShape",t,e,n),o=k("elementDType",t,e,n);return[n.getTensorList(r.id).getItem(s,i,o)]}case"TensorListScatterV2":case"TensorListScatter":{const r=k("indices",t,e,n),s=k("tensor",t,e,n),i=k("elementShape",t,e,n),o=k("numElements",t,e,n),a=Gue(s,r,i,o);return n.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{const r=k("elementShape",t,e,n),s=k("elementDType",t,e,n);let i;t.op==="TensorListReserve"?i="numElements":i="maxNumElements";const o=k(i,t,e,n),a=t.op==="TensorListReserve"?-1:o,l=Hue(r,s,o,a);return n.addTensorList(l),[l.idTensor]}case"TensorListGather":{const r=k("tensorListId",t,e,n),s=k("indices",t,e,n),i=k("elementShape",t,e,n),o=k("elementDType",t,e,n);return[n.getTensorList(r.id).gather(s,o,i)]}case"TensorListStack":{const r=k("tensorListId",t,e,n),s=k("elementShape",t,e,n),i=k("elementDType",t,e,n),o=k("numElements",t,e,n);return[n.getTensorList(r.id).stack(s,i,o)]}case"TensorListFromTensor":{const r=k("tensor",t,e,n),s=k("elementShape",t,e,n),i=k("elementDType",t,e,n),o=Wue(r,s,i);return n.addTensorList(o),[o.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{const r=k("tensorListId",t,e,n),s=n.getTensorList(r.id),i=k("dtype",t,e,n),o=k("elementShape",t,e,n);return[s.concat(i,o)]}case"TensorListPushBack":{const r=k("tensorListId",t,e,n),s=k("tensor",t,e,n),i=n.getTensorList(r.id);return i.pushBack(s),[i.idTensor]}case"TensorListPopBack":{const r=k("tensorListId",t,e,n),s=k("elementShape",t,e,n),i=k("elementDType",t,e,n);return[n.getTensorList(r.id).popBack(s,i)]}case"TensorListSplit":{const r=k("tensor",t,e,n),s=k("elementShape",t,e,n),i=k("lengths",t,e,n),o=Kue(r,i,s);return n.addTensorList(o),[o.idTensor]}case"TensorListLength":{const r=k("tensorListId",t,e,n),s=n.getTensorList(r.id);return[tt(s.size(),"int32")]}case"TensorListResize":{const r=k("tensorListId",t,e,n),s=k("size",t,e,n),o=n.getTensorList(r.id).resize(s);return n.addTensorList(o),[o.idTensor]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a3(t,e,n){const[r,s]=k("fusedOps",t,e,n),i=r==="biasadd",o=!i,a=s==="prelu",l=r==="fusedbatchnorm",c=k("numArgs",t,e,n);if(i){if(a&&c!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&i&&c!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(l)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");const u=k("strides",t,e,n),d=x1(t,e,n),h=k("dataFormat",t,e,n).toUpperCase(),f=k("dilations",t,e,n);let[p,m]=k("args",t,e,n);o&&(m=p,p=void 0);const g=k("leakyreluAlpha",t,e,n);return{stride:u,pad:d,dataFormat:h,dilations:f,biasArg:p,preluArg:m,activationFunc:s,leakyreluAlpha:g}}const Xue=(t,e,n,r=Xr)=>{switch(t.op){case"Conv1D":{const s=k("stride",t,e,n),i=k("pad",t,e,n),o=k("dataFormat",t,e,n).toUpperCase(),a=k("dilation",t,e,n);return[r.conv1d(k("x",t,e,n),k("filter",t,e,n),s,i,o,a)]}case"Conv2D":{const s=k("strides",t,e,n),i=x1(t,e,n),o=k("dataFormat",t,e,n).toUpperCase(),a=k("dilations",t,e,n);return[r.conv2d(k("x",t,e,n),k("filter",t,e,n),[s[1],s[2]],i,o,[a[1],a[2]])]}case"_FusedConv2D":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=a3(t,e,n);return[r.fused.conv2d({x:k("x",t,e,n),filter:k("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"FusedDepthwiseConv2dNative":{const{stride:s,pad:i,dataFormat:o,dilations:a,biasArg:l,preluArg:c,activationFunc:u,leakyreluAlpha:d}=a3(t,e,n);return[r.fused.depthwiseConv2d({x:k("x",t,e,n),filter:k("filter",t,e,n),strides:[s[1],s[2]],pad:i,dataFormat:o,dilations:[a[1],a[2]],bias:l,activation:u,preluActivationWeights:c,leakyreluAlpha:d})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{const s=k("outputShape",t,e,n),i=k("strides",t,e,n),o=x1(t,e,n);return[r.conv2dTranspose(k("x",t,e,n),k("filter",t,e,n),s,[i[1],i[2]],o)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{const s=k("strides",t,e,n),i=x1(t,e,n),o=k("dilations",t,e,n),a=k("dataFormat",t,e,n).toUpperCase();return[r.depthwiseConv2d(k("input",t,e,n),k("filter",t,e,n),[s[1],s[2]],i,a,[o[1],o[2]])]}case"Conv3D":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("dataFormat",t,e,n).toUpperCase(),a=k("dilations",t,e,n);return[r.conv3d(k("x",t,e,n),k("filter",t,e,n),[s[1],s[2],s[3]],i,o,[a[1],a[2],a[3]])]}case"AvgPool":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("kernelSize",t,e,n);return[r.avgPool(k("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPool":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("kernelSize",t,e,n);return[r.maxPool(k("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i)]}case"MaxPoolWithArgmax":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("kernelSize",t,e,n),a=k("includeBatchInIndex",t,e,n),{result:l,indexes:c}=r.maxPoolWithArgmax(k("x",t,e,n),[o[1],o[2]],[s[1],s[2]],i,a);return[l,c]}case"AvgPool3D":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("kernelSize",t,e,n);return[r.avgPool3d(k("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"MaxPool3D":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("kernelSize",t,e,n);return[r.maxPool3d(k("x",t,e,n),[o[1],o[2],o[3]],[s[1],s[2],s[3]],i)]}case"Dilation2D":{const s=k("strides",t,e,n),i=k("pad",t,e,n),o=k("dilations",t,e,n),a=s[1],l=s[2],c=o[1],u=o[2];return[r.dilation2d(k("x",t,e,n),k("filter",t,e,n),[a,l],i,[c,u],"NHWC")]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yue=(t,e,n,r=Xr)=>{switch(t.op){case"Fill":{const s=k("shape",t,e,n),i=k("dtype",t,e,n),o=k("value",t,e,n);return[r.fill(s,o,i)]}case"LinSpace":{const s=k("start",t,e,n),i=k("stop",t,e,n),o=k("num",t,e,n);return[r.linspace(s,i,o)]}case"Multinomial":{const s=k("logits",t,e,n),i=k("numSamples",t,e,n),o=k("seed",t,e,n);return[r.multinomial(s,i,o)]}case"OneHot":{const s=k("indices",t,e,n),i=k("depth",t,e,n),o=k("onValue",t,e,n),a=k("offValue",t,e,n),l=k("dtype",t,e,n);return[r.oneHot(s,i,o,a,l)]}case"Ones":return[r.ones(k("shape",t,e,n),k("dtype",t,e,n))];case"OnesLike":return[r.onesLike(k("x",t,e,n))];case"RandomStandardNormal":return[r.randomStandardNormal(k("shape",t,e,n),k("dtype",t,e,n),k("seed",t,e,n))];case"RandomUniform":return[r.randomUniform(k("shape",t,e,n),k("minval",t,e,n),k("maxval",t,e,n),k("dtype",t,e,n))];case"RandomUniformInt":return[r.randomUniformInt(k("shape",t,e,n),k("minval",t,e,n),k("maxval",t,e,n),k("seed",t,e,n))];case"Range":{const s=k("start",t,e,n),i=k("stop",t,e,n),o=k("step",t,e,n);return[r.range(s,i,o,k("dtype",t,e,n))]}case"TruncatedNormal":{const s=k("shape",t,e,n),i=k("mean",t,e,n),o=k("stdDev",t,e,n),a=k("seed",t,e,n);return[r.truncatedNormal(s,i,o,k("dtype",t,e,n),a)]}case"Zeros":return[r.zeros(k("shape",t,e,n),k("dtype",t,e,n))];case"ZerosLike":return[r.zerosLike(k("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WI(t,e,n){const r=k("boxes",t,e,n),s=k("scores",t,e,n),i=k("maxOutputSize",t,e,n),o=k("iouThreshold",t,e,n),a=k("scoreThreshold",t,e,n),l=k("softNmsSigma",t,e,n);return{boxes:r,scores:s,maxOutputSize:i,iouThreshold:o,scoreThreshold:a,softNmsSigma:l}}const Que=async(t,e,n,r,s=Xr)=>{switch(t.op){case"NonMaxSuppressionV5":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c,softNmsSigma:u}=WI(t,e,n),d=await s.image.nonMaxSuppressionWithScoreAsync(i,o,a,l,c,u);return[d.selectedIndices,d.selectedScores]}case"NonMaxSuppressionV4":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=WI(t,e,n),u=k("padToMaxOutputSize",t,e,n),d=await s.image.nonMaxSuppressionPaddedAsync(i,o,a,l,c,u);return[d.selectedIndices,d.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{const{boxes:i,scores:o,maxOutputSize:a,iouThreshold:l,scoreThreshold:c}=WI(t,e,n);return[await s.image.nonMaxSuppressionAsync(i,o,a,l,c)]}case"Where":{const i=s.cast(k("condition",t,e,n),"bool"),o=[await s.whereAsync(i)];return i.dispose(),o}case"ListDiff":return s.setdiff1dAsync(k("x",t,e,n),k("y",t,e,n));default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jue=(t,e,n,r=Xr)=>{switch(t.op){case"LowerBound":{const s=k("sortedSequence",t,e,n),i=k("values",t,e,n);return[r.lowerBound(s,i)]}case"TopKV2":{const s=k("x",t,e,n),i=k("k",t,e,n),o=k("sorted",t,e,n),a=r.topk(s,i,o);return[a.values,a.indices]}case"UpperBound":{const s=k("sortedSequence",t,e,n),i=k("values",t,e,n);return[r.upperBound(s,i)]}case"Unique":{const s=k("x",t,e,n),i=r.unique(s);return[i.values,i.indices]}case"UniqueV2":{const s=k("x",t,e,n),i=k("axis",t,e,n),o=r.unique(s,i);return[o.values,o.indices]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zue=(t,e,n,r=Xr)=>{switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":const s=k("default",t,e,n);return[jr(t.name,e,n)||s];case"Placeholder":return[jr(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{const u=k("x",t,e,n);return[Ol(u)]}case"IdentityN":return k("x",t,e,n).map(u=>Ol(u));case"Snapshot":const i=k("x",t,e,n);return[Ol(i)];case"Shape":return[r.tensor1d(k("x",t,e,n).shape,"int32")];case"ShapeN":return k("x",t,e,n).map(u=>r.tensor1d(u.shape));case"Size":return[r.scalar(k("x",t,e,n).size,"int32")];case"Rank":return[r.scalar(k("x",t,e,n).rank,"int32")];case"NoOp":return[r.scalar(1)];case"Print":const o=k("x",t,e,n),a=k("data",t,e,n),l=k("message",t,e,n),c=k("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(l);for(let u=0;u<a.length;u++)console.log(Array.prototype.slice.call(a[u].dataSync()).slice(0,c));return[o];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ede{get id(){return this.handle.id}constructor(e,n){this.keyDType=e,this.valueDType=n,this.handle=tt(0),this.tensorMap=new Map,xr(this.handle)}clearAndClose(){this.tensorMap.forEach(e=>e.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return tt(this.size(),"int32")}async import(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return this.tensorMap.forEach(s=>s.dispose()),this.tensorMap.clear(),oe(()=>{const s=Ki(n),i=r.length,o=s.length;P(i===o,()=>`The number of elements doesn't match, keys has ${i} elements, the values has ${o} elements.`);for(let a=0;a<i;a++){const l=r[a],c=s[a];xr(c),this.tensorMap.set(l,c)}return this.handle})}async find(e,n){this.checkKeyAndValueTensor(e,n);const r=await e.data();return oe(()=>{const s=[];for(let i=0;i<r.length;i++){const o=r[i],a=this.findWithDefault(o,n);s.push(a)}return Vs(s)})}findWithDefault(e,n){const r=this.tensorMap.get(e);return r??n}checkKeyAndValueTensor(e,n){if(e.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${e.dtype}`);if(n.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${n.dtype}`)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tde=async(t,e,n,r)=>{switch(t.op){case"HashTable":case"HashTableV2":{const s=r.getHashTableHandleByName(t.name);if(s!=null)return[s];{const i=k("keyDType",t,e,n),o=k("valueDType",t,e,n),a=new ede(i,o);return r.addHashTable(t.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{const s=k("tableHandle",t,e,n,r),i=k("keys",t,e,n),o=k("values",t,e,n);return[await r.getHashTableById(s.id).import(i,o)]}case"LookupTableFind":case"LookupTableFindV2":{const s=k("tableHandle",t,e,n,r),i=k("keys",t,e,n),o=k("defaultValue",t,e,n);return[await r.getHashTableById(s.id).find(i,o)]}case"LookupTableSize":case"LookupTableSizeV2":{const s=k("tableHandle",t,e,n,r);return[r.getHashTableById(s.id).tensorSize()]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nde=(t,e,n,r=Xr)=>{switch(t.op){case"ResizeBilinear":{const s=k("images",t,e,n),i=k("size",t,e,n),o=k("alignCorners",t,e,n),a=k("halfPixelCenters",t,e,n);return[r.image.resizeBilinear(s,[i[0],i[1]],o,a)]}case"ResizeNearestNeighbor":{const s=k("images",t,e,n),i=k("size",t,e,n),o=k("alignCorners",t,e,n),a=k("halfPixelCenters",t,e,n);return[r.image.resizeNearestNeighbor(s,[i[0],i[1]],o,a)]}case"CropAndResize":{const s=k("image",t,e,n),i=k("boxes",t,e,n),o=k("boxInd",t,e,n),a=k("cropSize",t,e,n),l=k("method",t,e,n),c=k("extrapolationValue",t,e,n);return[r.image.cropAndResize(s,i,o,a,l,c)]}case"ImageProjectiveTransformV3":{const s=k("images",t,e,n),i=k("transforms",t,e,n),o=k("outputShape",t,e,n),a=k("fillValue",t,e,n),l=k("interpolation",t,e,n),c=k("fillMode",t,e,n);return[r.image.transform(s,i,l.toLowerCase(),c.toLowerCase(),a,o)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rde=(t,e,n,r=Xr)=>{switch(t.op){case"Equal":return[r.equal(k("a",t,e,n),k("b",t,e,n))];case"NotEqual":return[r.notEqual(k("a",t,e,n),k("b",t,e,n))];case"Greater":return[r.greater(k("a",t,e,n),k("b",t,e,n))];case"GreaterEqual":return[r.greaterEqual(k("a",t,e,n),k("b",t,e,n))];case"Less":return[r.less(k("a",t,e,n),k("b",t,e,n))];case"LessEqual":return[r.lessEqual(k("a",t,e,n),k("b",t,e,n))];case"LogicalAnd":return[r.logicalAnd(k("a",t,e,n),k("b",t,e,n))];case"LogicalNot":return[r.logicalNot(k("a",t,e,n))];case"LogicalOr":return[r.logicalOr(k("a",t,e,n),k("b",t,e,n))];case"Select":case"SelectV2":return[r.where(k("condition",t,e,n),k("a",t,e,n),k("b",t,e,n))];case"BitwiseAnd":return[r.bitwiseAnd(k("a",t,e,n),k("b",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sde=(t,e,n,r=Xr)=>{switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[r.matMul(k("a",t,e,n),k("b",t,e,n),k("transposeA",t,e,n),k("transposeB",t,e,n))];case"Einsum":return[r.einsum(k("equation",t,e,n),...k("tensors",t,e,n))];case"Transpose":return[r.transpose(k("x",t,e,n),k("perm",t,e,n))];case"_FusedMatMul":const[s,i]=k("fusedOps",t,e,n),o=s==="biasadd",a=i==="prelu",l=k("numArgs",t,e,n),c=k("leakyreluAlpha",t,e,n);if(o){if(a&&l!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&l!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}const[u,d]=k("args",t,e,n);return[r.fused.matMul({a:k("a",t,e,n),b:k("b",t,e,n),transposeA:k("transposeA",t,e,n),transposeB:k("transposeB",t,e,n),bias:u,activation:i,preluActivationWeights:d,leakyreluAlpha:c})];case"MatrixBandPart":return[r.linalg.bandPart(k("a",t,e,n),k("numLower",t,e,n),k("numUpper",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ide=(t,e,n,r=Xr)=>{switch(t.op){case"EuclideanNorm":return[r.euclideanNorm(k("x",t,e,n),k("axis",t,e,n),k("keepDims",t,e,n))];case"FusedBatchNorm":case"FusedBatchNormV2":return[r.batchNorm(k("x",t,e,n),k("mean",t,e,n),k("variance",t,e,n),k("offset",t,e,n),k("scale",t,e,n),k("epsilon",t,e,n))];case"FusedBatchNormV3":return[r.batchNorm(k("x",t,e,n),k("mean",t,e,n),k("variance",t,e,n),k("offset",t,e,n),k("scale",t,e,n),k("epsilon",t,e,n))];case"LRN":return[r.localResponseNormalization(k("x",t,e,n),k("radius",t,e,n),k("bias",t,e,n),k("alpha",t,e,n),k("beta",t,e,n))];case"Softmax":return[r.softmax(k("x",t,e,n))];case"LogSoftmax":return[r.logSoftmax(k("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ode=(t,e,n,r=Xr)=>{switch(t.op){case"RaggedGather":{const{outputNestedSplits:s,outputDenseValues:i}=r.raggedGather(k("paramsNestedSplits",t,e,n),k("paramsDenseValues",t,e,n),k("indices",t,e,n),k("outputRaggedRank",t,e,n));return s.concat(i)}case"RaggedRange":{const{rtNestedSplits:s,rtDenseValues:i}=r.raggedRange(k("starts",t,e,n),k("limits",t,e,n),k("splits",t,e,n));return[s,i]}case"RaggedTensorToTensor":return[r.raggedTensorToTensor(k("shape",t,e,n),k("values",t,e,n),k("defaultValue",t,e,n),k("rowPartitionTensors",t,e,n),k("rowPartitionTypes",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ade=(t,e,n,r=Xr)=>{switch(t.op){case"Max":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.max(k("x",t,e,n),a,l)]}case"Mean":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.mean(k("x",t,e,n),a,l)]}case"Min":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.min(k("x",t,e,n),a,l)]}case"Sum":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.sum(k("x",t,e,n),a,l)]}case"All":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.all(k("x",t,e,n),a,l)]}case"Any":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.any(k("x",t,e,n),a,l)]}case"ArgMax":{const a=k("axis",t,e,n);return[r.argMax(k("x",t,e,n),a)]}case"ArgMin":{const a=k("axis",t,e,n);return[r.argMin(k("x",t,e,n),a)]}case"Prod":{const a=k("axis",t,e,n),l=k("keepDims",t,e,n);return[r.prod(k("x",t,e,n),a,l)]}case"Cumprod":{const a=k("axis",t,e,n),l=k("exclusive",t,e,n),c=k("reverse",t,e,n);return[r.cumprod(k("x",t,e,n),a,l,c)]}case"Cumsum":{const a=k("axis",t,e,n),l=k("exclusive",t,e,n),c=k("reverse",t,e,n);return[r.cumsum(k("x",t,e,n),a,l,c)]}case"Bincount":const s=k("x",t,e,n),i=k("weights",t,e,n),o=k("size",t,e,n);return[r.bincount(s,i,o)];case"DenseBincount":{const a=k("x",t,e,n),l=k("weights",t,e,n),c=k("size",t,e,n),u=k("binaryOutput",t,e,n);return[r.denseBincount(a,l,c,u)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lde=(t,e,n,r=Xr)=>{switch(t.op){case"ConcatV2":case"Concat":{const s=k("n",t,e,n),i=k("axis",t,e,n);let o=k("tensors",t,e,n);return o=o.slice(0,s),[r.concat(o,i)]}case"Gather":{const s=k("x",t,e,n),i=k("indices",t,e,n);return[r.gather(s,r.cast(i,"int32"),0)]}case"GatherV2":{const s=k("axis",t,e,n),i=k("batchDims",t,e,n),o=k("x",t,e,n),a=k("indices",t,e,n);return[r.gather(o,r.cast(a,"int32"),s,i)]}case"Reverse":{const s=k("dims",t,e,n),i=[];for(let a=0;a<s.length;a++)s[a]&&i.push(a);const o=k("x",t,e,n);return[r.reverse(o,i)]}case"ReverseV2":{const s=k("axis",t,e,n),i=k("x",t,e,n);return[r.reverse(i,s)]}case"Slice":{const s=k("begin",t,e,n),i=k("size",t,e,n);return[r.slice(k("x",t,e,n),s,i)]}case"StridedSlice":{const s=k("begin",t,e,n),i=k("end",t,e,n),o=k("strides",t,e,n),a=k("beginMask",t,e,n),l=k("endMask",t,e,n),c=k("ellipsisMask",t,e,n),u=k("newAxisMask",t,e,n),d=k("shrinkAxisMask",t,e,n),h=k("x",t,e,n);return[r.stridedSlice(h,s,i,o,a,l,c,u,d)]}case"Pack":return oe(()=>{const s=k("axis",t,e,n),i=k("tensors",t,e,n),o=i[0].shape,a=r.squeeze(i[0]).shape,l=i.map(c=>{const u=Nt(c.shape,o);if(!u&&!Nt(r.squeeze(c).shape,a))throw new Error("the input tensors shape does not match");return u?c:r.reshape(c,o)});return[r.stack(l,s)]});case"Unpack":{const s=k("axis",t,e,n),i=k("tensor",t,e,n);return r.unstack(i,s)}case"Tile":{const s=k("reps",t,e,n);return[r.tile(k("x",t,e,n),s)]}case"Split":case"SplitV":{const s=k("axis",t,e,n),i=k("numOrSizeSplits",t,e,n),o=k("x",t,e,n);return r.split(o,i,s)}case"ScatterNd":{const s=k("indices",t,e,n),i=k("values",t,e,n),o=k("shape",t,e,n);return[r.scatterND(s,i,o)]}case"GatherNd":{const s=k("x",t,e,n),i=k("indices",t,e,n);return[r.gatherND(s,i)]}case"SparseToDense":{const s=k("sparseIndices",t,e,n),i=k("outputShape",t,e,n),o=k("sparseValues",t,e,n),a=k("defaultValue",t,e,n);return[r.sparseToDense(s,o,i,o.dtype===a.dtype?a:r.cast(a,o.dtype))]}case"TensorScatterUpdate":{const s=k("indices",t,e,n),i=k("values",t,e,n),o=k("tensor",t,e,n);return[r.tensorScatterUpdate(o,s,i)]}default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cde=(t,e,n,r=Xr)=>{switch(t.op){case"SparseFillEmptyRows":{const{outputIndices:s,outputValues:i,emptyRowIndicator:o,reverseIndexMap:a}=r.sparse.sparseFillEmptyRows(k("indices",t,e,n),k("values",t,e,n),k("denseShape",t,e,n),k("defaultValue",t,e,n));return[s,i,o,a]}case"SparseReshape":{const{outputIndices:s,outputShape:i}=r.sparse.sparseReshape(k("inputIndices",t,e,n),k("inputShape",t,e,n),k("newShape",t,e,n));return[s,i]}case"SparseSegmentMean":return[r.sparse.sparseSegmentMean(k("data",t,e,n),k("indices",t,e,n),k("segmentIds",t,e,n))];case"SparseSegmentSum":return[r.sparse.sparseSegmentSum(k("data",t,e,n),k("indices",t,e,n),k("segmentIds",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ude=(t,e,n,r=Xr)=>{switch(t.op){case"FFT":return[r.fft(k("x",t,e,n))];case"IFFT":return[r.ifft(k("x",t,e,n))];case"RFFT":return[r.rfft(k("x",t,e,n))];case"IRFFT":return[r.irfft(k("x",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dde=(t,e,n,r=Xr)=>{switch(t.op){case"StaticRegexReplace":return[r.string.staticRegexReplace(k("input",t,e,n),k("pattern",t,e,n),k("rewrite",t,e,n),k("replaceGlobal",t,e,n))];case"StringNGrams":{const{nGrams:s,nGramsSplits:i}=r.string.stringNGrams(k("data",t,e,n),k("dataSplits",t,e,n),k("separator",t,e,n),k("nGramWidths",t,e,n),k("leftPad",t,e,n),k("rightPad",t,e,n),k("padWidth",t,e,n),k("preserveShortSequences",t,e,n));return[s,i]}case"StringSplit":{const{indices:s,values:i,shape:o}=r.string.stringSplit(k("input",t,e,n),k("delimiter",t,e,n),k("skipEmpty",t,e,n));return[s,i,o]}case"StringToHashBucketFast":return[r.string.stringToHashBucketFast(k("input",t,e,n),k("numBuckets",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hde=(t,e,n,r=Xr)=>{switch(t.op){case"Cast":return[r.cast(k("x",t,e,n),k("dtype",t,e,n))];case"ExpandDims":{const s=k("axis",t,e,n);return[r.expandDims(k("x",t,e,n),s)]}case"Squeeze":{const s=k("axis",t,e,n);return[r.squeeze(k("x",t,e,n),s)]}case"Reshape":return[r.reshape(k("x",t,e,n),k("shape",t,e,n))];case"EnsureShape":return[r.ensureShape(k("x",t,e,n),k("shape",t,e,n))];case"MirrorPad":return[r.mirrorPad(k("x",t,e,n),k("padding",t,e,n),k("mode",t,e,n))];case"PadV2":case"Pad":return[r.pad(k("x",t,e,n),k("padding",t,e,n),k("constantValue",t,e,n))];case"SpaceToBatchND":{const s=k("blockShape",t,e,n),i=k("paddings",t,e,n);return[r.spaceToBatchND(k("x",t,e,n),s,i)]}case"BatchToSpaceND":{const s=k("blockShape",t,e,n),i=k("crops",t,e,n);return[r.batchToSpaceND(k("x",t,e,n),s,i)]}case"DepthToSpace":{const s=k("blockSize",t,e,n),i=k("dataFormat",t,e,n).toUpperCase();return[r.depthToSpace(k("x",t,e,n),s,i)]}case"BroadcastTo":return[r.broadcastTo(k("x",t,e,n),k("shape",t,e,n))];case"BroadcastArgs":return[r.broadcastArgs(k("s0",t,e,n),k("s1",t,e,n))];default:throw TypeError(`Node type ${t.op} is not implemented`)}};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l3(t,e,n,r,s=oe){const i=((o,a,l)=>{switch(o.category){case"arithmetic":return s(()=>jue(o,a,l));case"basic_math":return s(()=>Vue(o,a,l));case"control":return que(o,a,l);case"convolution":return s(()=>Xue(o,a,l));case"creation":return s(()=>Yue(o,a,l));case"dynamic":return Que(o,a,l);case"evaluation":return s(()=>Jue(o,a,l));case"image":return s(()=>nde(o,a,l));case"graph":return s(()=>Zue(o,a,l));case"logical":return s(()=>rde(o,a,l));case"matrices":return s(()=>sde(o,a,l));case"normalization":return s(()=>ide(o,a,l));case"ragged":return s(()=>ode(o,a,l));case"reduction":return s(()=>ade(o,a,l));case"slice_join":return s(()=>lde(o,a,l));case"sparse":return s(()=>cde(o,a,l));case"spectral":return s(()=>ude(o,a,l));case"string":return s(()=>dde(o,a,l));case"transformation":return s(()=>hde(o,a,l));case"hash_table":return tde(o,a,l,r);case"custom":const c=vG(o.op);if(c&&c.customExecutor)return c.customExecutor(new Bue(o,a,l));throw TypeError(`Custom op ${o.op} is not registered.`);default:throw TypeError(`Unknown op '${o.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(t,e,n);return vu(i)?i.then(o=>[].concat(o)):[].concat(i)}class c3{constructor(e={},n={},r={},s={},i){this.weightMap=e,this.tensorArrayMap=n,this.tensorListMap=r,this.functionMap=s,this.parseNodeNameCache=i,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(e,n){return{id:e,frameName:n,iterationId:0}}set currentContext(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){const e=[];for(let n=0;n<this.contexts.length-1;n++){const r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e}contextIdforContexts(e){return e?e.map(n=>n.id===0&&n.iterationId===0?"":`${n.frameName}-${n.iterationId}`).join("/"):""}enterFrame(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;const e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(e){return this.weightMap[e]}addTensorArray(e){this.tensorArrayMap[e.id]=e}getTensorArray(e){return this.tensorArrayMap[e]}addTensorList(e){this.tensorListMap[e.id]=e}getTensorList(e){return this.tensorListMap[e]}dispose(e){for(const n in this.tensorArrayMap)this.tensorArrayMap[n].clearAndClose(e);for(const n in this.tensorListMap)this.tensorListMap[n].clearAndClose(e)}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u3(t,e,n,r){const s=new Set,i=[];let o=null,a=null;const l=new Set,c=new Set(Object.keys(t).map(h=>ni(h)[0]));r=r||[];const u=new Set(r.map(h=>ni(h.name)[0])),d=[...e];for(;d.length>0;){const h=d.pop();if((kd(h)||wde(h)||xde(h))&&o==null&&(o=h,a=o.children.map(f=>f.name).filter(f=>s.has(f))),s.add(h.name),n[h.name]==null&&!c.has(h.name)&&!u.has(h.name)){if(h.inputs.length===0){i.push(h.name);continue}h.inputs.forEach(f=>{l.has(f.name)||(l.add(f.name),d.push(f))})}}return{inputs:t,outputs:e,usedNodes:s,missingInputs:i,dynamicNode:o,syncInputs:a}}function fde(t,e){const{usedNodes:n,inputs:r}=e,s=Object.keys(r).map(g=>ni(g)[0]).map(g=>t.nodes[g]),i=t.initNodes||[],o=g=>n.has(typeof g=="string"?g:g.name);function a(g){return[...new Map(g.map(y=>[y.name,y])).values()]}const l=a([...s,...t.weights,...i]).filter(o),c=a([...l,...Object.values(t.nodes)]).filter(o),u=new Map(c.map(g=>[g.name,g])),d={};for(const g of c){d[g.name]=d[g.name]||0;for(const y of g.children)o(y)||(d[y.name]=Number.POSITIVE_INFINITY),d[y.name]=(d[y.name]||0)+1}const h=Object.entries(d).filter(([,g])=>g===0).map(([g])=>g),f=[...h];for(;h.length>0;){const g=h.pop(),y=u.get(g);for(const b of y.children.filter(o))--d[b.name]===0&&(f.push(b.name),h.push(b.name))}const p=f.map(g=>u.get(g)),m=pde(p,l);return mde(m,l),m}function pde(t,e){const n=new Map(t.map(o=>[o.name,o])),r=e.map(o=>o.name),s=new Set(r);for(;r.length>0;){const o=r.pop(),a=n.get(o);for(const l of a.children)!n.has(l.name)||s.has(l.name)||(s.add(l.name),r.push(l.name))}return t.filter(o=>s.has(o.name))}class Px extends Error{constructor(e){super(`NodesExecutionOrderError: ${e}`)}}function mde(t,e){const n=new Map(t.map((a,l)=>[a.name,l])),r=new Set(e.map(a=>a.name)),s=a=>r.has(typeof a=="string"?a:a.name),i=new Set(t.map(a=>a.name)),o=a=>i.has(typeof a=="string"?a:a.name);for(const a of t){for(const l of a.children.filter(o)){if(!n.has(l.name))throw new Px(`Child ${l.name} of node ${a.name} is unreachable.`);if(n.get(a.name)>n.get(l.name))throw new Px(`Node ${a.name} is scheduled to run after its child ${l.name}.`)}if(!s(a))for(const l of a.inputs){if(!n.has(l.name))throw new Px(`Input ${l.name} of node ${a.name} is unreachable.`);if(n.get(l.name)>n.get(a.name))throw new Px(`Node ${a.name} is scheduled to run before its input ${l.name}.`)}}}function gde(t){const e=new Map(t.map((a,l)=>[a.name,l])),n=Number.MAX_SAFE_INTEGER,r=t.map((a,l)=>kd(a)?n:l),s=a=>{const l=r[e.get(a.name)];return l??-1},i=t.map((a,l)=>a.children.map(s).reduce((c,u)=>Math.max(c,u),r[l])),o=new Map;for(let a=0;a<t.length;++a){const l=i[a];if(l===n)continue;const c=t[a],u=t[l];o.has(u.name)||o.set(u.name,[]),o.get(u.name).push(c)}return o}const yde=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),bde=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),vde=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"]);function kd(t){return yde.has(t.op)}function wde(t){return bde.has(t.op)}function xde(t){return vde.has(t.op)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SS{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(e){const n=Object.keys(e).map(r=>e[r].map(s=>s.id));this._weightIds=[].concat(...n),this._weightMap=e}set resourceManager(e){this._resourceManager=e}get inputs(){return this._inputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(e=>({name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(e=>e.signatureKey||e.name)}get outputNodes(){return this._outputs.map(e=>{const n=e.signatureKey||e.name;return e.defaultOutput?`${n}:${e.defaultOutput}`:n})}get functions(){return Object.keys(this._functions).reduce((e,n)=>(e[n]=this._functions[n].signature,e),{})}constructor(e,n){this.graph=e,this.parent=n,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=e.outputs,this._inputs=e.inputs,this._initNodes=e.initNodes,this._signature=e.signature,this._functions=e.functions,e.functions!=null&&Object.keys(e.functions).forEach(r=>{this._functionExecutorMap[r]=new SS(e.functions[r],this)})}getCompilationKey(e,n){const r=e.map(i=>i.name).sort(),s=n.map(i=>i.name).sort();return r.join(this.SEPARATOR)+"--"+s.join(this.SEPARATOR)}compile(e,n){const r=u3(e,n,this.weightMap,this._initNodes),{missingInputs:s,dynamicNode:i,syncInputs:o}=r;if(i!=null)throw new Error(`This execution contains the node '${i.name}', which has the dynamic op '${i.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${o}]`);if(s.length>0){const c=n.map(d=>d.name),u=Object.keys(e);throw new Error(`Cannot compute the outputs [${c}] from the provided inputs [${u}]. Missing the following inputs: [${s}]`)}const a=fde(this.graph,r),l=gde(a);return{orderedNodes:a,nodeLiveUntilMap:l}}cloneAndKeepTensor(e){if(e==null)return null;const n=e.clone();return xr(n),n}cloneTensorList(e){return e?e.map(r=>this.cloneAndKeepTensor(r)):null}cloneTensorMap(e){return Object.fromEntries(Object.entries(e).map(([n,r])=>[n,this.cloneTensorList(r)]))}execute(e,n){this.disposeIntermediateTensors(),e=this.mapInputs(e);const r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n);const s=r.map(h=>this.graph.nodes[ni(h)[0]]),i=n.map(h=>ni(h)[0]),o=new Set(i);let a=i.map(h=>this.graph.nodes[h]);a.length===0&&(a=this._outputs);const l=this.getCompilationKey(s,a);let c=this.compiledMap.get(l);c==null&&(c=this.compile(e,a),this.compiledMap.set(l,c));try{this.keepIntermediateTensors=ce().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const u={},d={};return oe(()=>{const h=new c3(this.weightMap,u,d,this.functionExecutorMap,this.parseNodeNameCache),f=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(e).forEach(y=>{const[b,v]=ni(y,h),w=[];w[v]=e[y],f[b]=w,this.keepIntermediateTensors&&(this.clonedTensorsMap[b]=this.cloneTensorList(w))});const p=this.getFrozenTensorIds(f),{orderedNodes:m,nodeLiveUntilMap:g}=c;for(const y of m){if(f[y.name])continue;const b=l3(y,f,h,this._resourceManager);if(vu(b))throw new Error(`The execution of the op '${y.op}' returned a promise. Please use model.executeAsync() instead.`);f[y.name]=b,this.keepIntermediateTensors&&(this.clonedTensorsMap[y.name]=this.cloneTensorList(b)),this.checkTensorForDisposalWithNodeLiveUntilInfo(y,f,h,p,o,g.get(y.name))}return this.parent==null&&h.dispose(p),n.map(y=>jr(y,f,h))})}getFrozenTensorIds(e){const n=[].concat.apply([],Object.keys(e).map(r=>e[r]).map(r=>r.map(s=>s.id)));return new Set(n)}checkTensorForDisposal(e,n,r,s,i,o,a){if(!(kd(n)||o.has(e))){for(const l of r[e])l!=null&&(a[l.id]=(a[l.id]||0)+n.children.length);for(const l of n.inputs){if(kd(l))continue;const c=r3(l.name,r,s);if(c!=null)for(const u of c){if(!u||u.kept||i.has(u.id))continue;const d=a[u.id];d===1?(u.dispose(),delete a[u.id]):d!=null&&a[u.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(e,n,r,s,i,o){function a(l){return kd(l)||i.has(l.name)}if(!(kd(e)||o==null))for(const l of o){if(a(l))continue;const c=r3(l.name,n,r);for(const u of c)!u||u.kept||s.has(u.id)||u.dispose()}}async executeAsync(e,n){return this._executeAsync(e,n)}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(e=>{for(const n of e)n&&!n.isDisposed&&n.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}async _executeAsync(e,n,r=!1,s={},i={}){this.disposeIntermediateTensors(),r||(e=this.mapInputs(e),this.checkInputs(e),this.checkInputShapeAndType(e),n=this.mapOutputs(n),this.checkOutputs(n));try{this.keepIntermediateTensors=ce().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}const o=new c3(this.weightMap,s,i,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));const a=await this.executeWithControlFlow(e,o,n,r),l=n.map(h=>jr(h,a,o)),c=l.map(h=>h.id),u=Object.keys(e).map(h=>e[h].id),d=new Set([...c,...u,...this.weightIds]);return Object.values(a).forEach(h=>{h.forEach(f=>{f&&!f.isDisposed&&!d.has(f.id)&&f.dispose()})}),this.parent==null&&o.dispose(d),l}async executeFunctionAsync(e,n,r){const s=e.reduce((i,o,a)=>(i[this.inputs[a].name]=o,i),{});return this._executeAsync(s,this.outputNodes,!0,n,r)}async executeWithControlFlow(e,n,r,s){const i=Object.keys(e),o=i.map(w=>this.graph.nodes[ni(w)[0]]),a=r.map(w=>ni(w)[0]),l=new Set(a);let c=a.map(w=>this.graph.nodes[w]);c.length===0&&(c=this._outputs);const{usedNodes:u,missingInputs:d,dynamicNode:h,syncInputs:f}=u3(e,c,this.weightMap,this._initNodes),p=[...o,...this.graph.weights,...this._initNodes||[]].map(w=>({node:w,contexts:n.currentContext})),m=Object.assign({},this.weightMap);Object.keys(e).forEach(w=>{const[C,_]=ni(w),E=[];E[_]=e[w],m[C]=E});const g={},y=this.getFrozenTensorIds(m),b={};for(;p.length>0;){const w=this.processStack(o,p,n,m,b,y,l,g,u);await Promise.all(w)}h==null&&!s&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");const v=c.filter(w=>!kd(w)&&!jr(w.name,m,n)).map(w=>w.name);if(v.length>0){let w="";throw h!=null&&(w=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${f}]`),new Error(`Cannot compute the outputs [${v}] from the provided inputs [${i}]. Consider providing the following inputs: [${d}]. ${w}`)}return m}processStack(e,n,r,s,i,o,a,l,c){const u=[];for(;n.length>0;){const d=n.pop();r.currentContext=d.contexts;let h="";if(d.node.op==="Enter"&&k("isConstant",d.node,s,r)&&([h]=Rl(d.node.name,r)),s[d.node.name]==null){const f=l3(d.node,s,r,this._resourceManager);h||([h]=Rl(d.node.name,r));const p=r.currentContext;vu(f)?u.push(f.then(m=>(s[h]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(m)),r.currentContext=p,this.checkTensorForDisposal(h,d.node,s,r,o,a,l),this.processChildNodes(d.node,n,r,s,i,c),m))):(s[h]=f,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(f)),this.checkTensorForDisposal(h,d.node,s,r,o,a,l),this.processChildNodes(d.node,n,r,s,i,c))}else this.processChildNodes(d.node,n,r,s,i,c)}return u}processChildNodes(e,n,r,s,i,o){e.children.forEach(a=>{const[l]=Rl(a.name,r);i[l]||!o.has(a.name)||(a.op==="Merge"?a.inputNames.some(c=>!!jr(c,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(c=>!!jr(c,s,r))&&(i[l]=!0,n.push({contexts:r.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(e=>this.weightMap[e].forEach(n=>n.dispose()))}checkInputShapeAndType(e){Object.keys(e).forEach(n=>{const r=e[n],[s]=ni(n),i=this.graph.nodes[s];if(i.attrParams.shape&&i.attrParams.shape.value){const o=i.attrParams.shape.value,a=o.length===r.shape.length&&r.shape.every((l,c)=>o[c]===-1||o[c]===l);P(a,()=>`The shape of dict['${i.name}'] provided in model.execute(dict) must be [${o}], but was [${r.shape}]`)}i.attrParams.dtype&&i.attrParams.dtype.value&&P(r.dtype===i.attrParams.dtype.value,()=>`The dtype of dict['${i.name}'] provided in model.execute(dict) must be ${i.attrParams.dtype.value}, but was ${r.dtype}`)})}mapInputs(e){var n,r;const s={};for(const i in e){const o=(r=(n=this._signature)===null||n===void 0?void 0:n.inputs)===null||r===void 0?void 0:r[i];o!=null?s[o.name]=e[i]:s[i]=e[i]}return s}checkInputs(e){const n=Object.keys(e).filter(r=>{const[s]=ni(r);return this.graph.nodes[s]==null});if(n.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${n}] that are not part of graph`)}mapOutputs(e){return e.map(n=>{var r,s;const i=(s=(r=this._signature)===null||r===void 0?void 0:r.outputs)===null||s===void 0?void 0:s[n];return i!=null?i.name:n},{})}checkOutputs(e){e.forEach(n=>{const[r]=ni(n);if(!this.graph.nodes[r])throw new Error(`The output '${n}' is not found in the graph`)})}}class Sde{constructor(e={},n={}){this.hashTableNameToHandle=e,this.hashTableMap=n}addHashTable(e,n){this.hashTableNameToHandle[e]=n.handle,this.hashTableMap[n.id]=n}getHashTableHandleByName(e){return this.hashTableNameToHandle[e]}getHashTableById(e){return this.hashTableMap[e]}dispose(){for(const e in this.hashTableMap)this.hashTableMap[e].clearAndClose(),delete this.hashTableMap[e];for(const e in this.hashTableNameToHandle)this.hashTableNameToHandle[e].dispose(),delete this.hashTableNameToHandle[e]}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cde="?tfjs-format=file",Ede="model.json";class DD{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(e,n={},r=oD){this.modelUrl=e,this.loadOptions=n,this.version="n/a",this.io=r,n==null&&(this.loadOptions={}),this.resourceManager=new Sde}findIOHandler(){const e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(e,this.loadOptions);else{const n=this.io.getLoadHandlers(e,this.loadOptions);if(n.length===0)n.push(this.io.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error(`Found more than one (${n.length}) load handlers for URL '${[e]}'`);this.handler=n[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");const e=this.handler.load();return vu(e)?e.then(n=>n.getWeightStream==null?this.loadSync(n):this.loadStreaming(n)):this.loadSync(e)}loadSync(e){const n=this.io.decodeWeights(e.weightData,e.weightSpecs);return this.loadWithWeightMap(e,n)}async loadStreaming(e){if(e.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");const n=await pW(e.getWeightStream(),e.weightSpecs);return this.loadWithWeightMap(e,n)}loadWithWeightMap(e,n){this.artifacts=e;const r=this.artifacts.modelTopology;let s=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){const i=this.artifacts.userDefinedMetadata;i.signature!=null&&(s=i.signature),i.structuredOutputKeys!=null&&(this.structuredOutputKeys=i.structuredOutputKeys)}if(this.signature=s,this.version=`${r.versions.producer}.${r.versions.minConsumer}`,this.executor=new SS(s3.Instance.transformGraph(r,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),this.executor.resourceManager=this.resourceManager,e.modelInitializer!=null&&e.modelInitializer.node!=null){const i=s3.Instance.transformGraph(e.modelInitializer);this.initializer=new SS(i),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=e.initializerSignature}return!0}async save(e,n){if(typeof e=="string"){const r=this.io.getSaveHandlers(e);if(r.length===0)throw new Error(`Cannot find any save handlers for URL '${e}'`);if(r.length>1)throw new Error(`Found more than one (${r.length}) save handlers for URL '${e}'`);e=r[0]}if(e.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return e.save(this.artifacts)}addStructuredOutputNames(e){if(this.structuredOutputKeys){const n=e instanceof Ot?[e]:e,r={};return n.forEach((s,i)=>r[this.structuredOutputKeys[i]]=s),r}return e}predict(e,n){const r=this.execute(e,this.outputNodes);return this.addStructuredOutputNames(r)}async predictAsync(e,n){const r=await this.executeAsync(e,this.outputNodes);return this.addStructuredOutputNames(r)}normalizeInputs(e){var n;if(!(e instanceof Ot)&&!Array.isArray(e)){const i=(n=this.signature)===null||n===void 0?void 0:n.inputs;if(i!=null)for(const o in i){const a=i[o];a.resourceId!=null&&(e[o]=this.resourceIdToCapturedInput[a.resourceId])}return e}e=Array.isArray(e)?e:[e];const r=Object.keys(this.resourceIdToCapturedInput).length;if(e.length+r!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-r} non-resource placeholders, while there are ${e.length} input tensors provided.`);let s=0;return this.inputNodes.reduce((i,o)=>{var a,l,c;const u=(c=(l=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||l===void 0?void 0:l[o])===null||c===void 0?void 0:c.resourceId;return u!=null?i[o]=this.resourceIdToCapturedInput[u]:i[o]=e[s++],i},{})}normalizeOutputs(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}async executeInitializerGraphAsync(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))}setResourceIdToCapturedInput(e){if(this.resourceIdToCapturedInput={},this.initializerSignature){const n=this.initializerSignature.outputs,r=Object.keys(n);for(let s=0;s<r.length;s++){const i=r[s],o=n[i];this.resourceIdToCapturedInput[o.resourceId]=e[s]}}}execute(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=this.executor.execute(e,n);return r.length>1?r:r[0]}async executeAsync(e,n){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(await this.executeInitializerGraphAsync()),e=this.normalizeInputs(e),n=this.normalizeOutputs(n);const r=await this.executor.executeAsync(e,n);return r.length>1?r:r[0]}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(e){return Object.keys(e).reduce((n,r)=>(n[r]=[e[r]],n),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&_t(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}async function vA(t,e={},n=oD){if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");e==null&&(e={}),e.fromTFHub&&typeof t=="string"&&(t=Tde(t));const r=new DD(t,e,n);return await r.load(),r}function _de(t){if(t==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let e;if(t instanceof Array){const[r,s]=t;if(!r)throw new Error("modelJSON must be the first element of the array");if(!s||!(s instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in r))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in r))throw new Error("Model JSON is missing 'weightsManifest'");const i=bS(r.weightsManifest),o=BR(r,i,s);e=wS(o)}else if("load"in t)e=t;else if("modelTopology"in t&&"weightSpecs"in t&&"weightData"in t)e=wS(t);else throw new Error("Unknown model format");const n=new DD(e);return n.load(),n}function Tde(t){return t.endsWith("/")||(t=t+"/"),`${t}${Ede}${Cde}`}/** @license See the LICENSE file. */const kde="4.19.0";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ide=Object.freeze(Object.defineProperty({__proto__:null,GraphModel:DD,deregisterOp:eue,loadGraphModel:vA,loadGraphModelSync:_de,registerOp:Zce,version_converter:kde},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function Lf(t,e,n,r){function s(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function a(u){try{c(r.next(u))}catch(d){o(d)}}function l(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?i(u.value):s(u.value).then(a,l)}c((r=r.apply(t,[])).next())})}function Ff(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(c){return function(u){return l([c,u])}}function l(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=c[0]&2?s.return:c[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,c[1])).done)return i;switch(s=0,i&&(c=[c[0]&2,i.value]),c[0]){case 0:case 1:i=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,s=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){n.label=c[1];break}if(c[0]===6&&n.label<i[1]){n.label=i[1],i=c;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(c);break}i[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],s=0}finally{r=i=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Nde=function(t){t.startEndTensor.dispose(),t.startPoint.dispose(),t.endPoint.dispose()},wA=function(t){return{startEndTensor:t,startPoint:ot(t,[0,0],[-1,2]),endPoint:ot(t,[0,2],[-1,2])}},$de=function(t,e){var n=Y(t.startPoint,e),r=Y(t.endPoint,e),s=a0([n,r],1);return wA(s)};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Ade={strides:[8,16],anchors:[2,6]},d3=6;function Rde(t,e,n){for(var r=[],s=0;s<n.strides.length;s++)for(var i=n.strides[s],o=Math.floor((e+i-1)/i),a=Math.floor((t+i-1)/i),l=n.anchors[s],c=0;c<o;c++)for(var u=i*(c+.5),d=0;d<a;d++)for(var h=i*(d+.5),f=0;f<l;f++)r.push([h,u]);return r}function Ode(t,e,n){var r=ot(t,[0,1],[-1,2]),s=xe(r,e),i=ot(t,[0,3],[-1,2]),o=Ue(i,n),a=Ue(s,n),l=Ue(o,2),c=Fe(a,l),u=xe(a,l),d=Y(c,n),h=Y(u,n),f=1;return a0([d,h],f)}function Dde(t){return t instanceof Ot?[t.shape[0],t.shape[1]]:[t.height,t.width]}function h3(t,e){var n,r,s;if(t.topLeft instanceof Ot&&t.bottomRight instanceof Ot){var i=oe(function(){return[Wn([ot(Fe(e-1,t.topLeft),0,1),ot(t.topLeft,1,1)]),Wn([Fe(e-1,ot(t.bottomRight,0,1)),ot(t.bottomRight,1,1)])]}),o=i[0],a=i[1];n=o,r=a,t.landmarks!=null&&(s=oe(function(){var m=Fe(Sr([e-1,0]),t.landmarks),g=Sr([1,-1]),y=Y(m,g);return y}))}else{var l=t.topLeft,c=l[0],u=l[1],d=t.bottomRight,h=d[0],f=d[1];n=[e-1-c,u],r=[e-1-h,f],t.landmarks!=null&&(s=t.landmarks.map(function(m){return[e-1-m[0],m[1]]}))}var p={topLeft:n,bottomRight:r};return s!=null&&(p.landmarks=s),t.probability!=null&&(p.probability=t.probability instanceof Ot?t.probability.clone():t.probability),p}function f3(t,e){return oe(function(){var n;return t.hasOwnProperty("box")?n=t.box:n=t,Ao($de(n,e).startEndTensor)})}var Pde=function(){function t(e,n,r,s,i,o){this.blazeFaceModel=e,this.width=n,this.height=r,this.maxFaces=s,this.anchorsData=Rde(n,r,Ade),this.anchors=ou(this.anchorsData),this.inputSizeData=[n,r],this.inputSize=Sr([n,r]),this.iouThreshold=i,this.scoreThreshold=o}return t.prototype.getBoundingBoxes=function(e,n,r){return r===void 0&&(r=!0),Lf(this,void 0,void 0,function(){var s,i,o,a,l,c,u,d,h,f,p,m,g,y,b=this;return Ff(this,function(v){switch(v.label){case 0:return s=oe(function(){var w=Fi.resizeBilinear(e,[b.width,b.height]),C=Y(Fe(Ue(w,255),.5),2),_=b.blazeFaceModel.predict(C),E=Ao(_),I=Ode(E,b.anchors,b.inputSize),O=ot(E,[0,0],[-1,1]),R=Ao($o(O));return[E,I,R]}),i=s[0],o=s[1],a=s[2],l=console.warn,console.warn=function(){},c=Fi.nonMaxSuppression(o,a,this.maxFaces,this.iouThreshold,this.scoreThreshold),console.warn=l,[4,c.array()];case 1:return u=v.sent(),c.dispose(),d=u.map(function(w){return ot(o,[w,0],[1,-1])}),n?[3,3]:[4,Promise.all(d.map(function(w){return Lf(b,void 0,void 0,function(){var C;return Ff(this,function(_){switch(_.label){case 0:return[4,w.array()];case 1:return C=_.sent(),w.dispose(),[2,C]}})})}))];case 2:d=v.sent(),v.label=3;case 3:for(h=e.shape[1],f=e.shape[2],n?p=Ue([f,h],this.inputSize):p=[f/this.inputSizeData[0],h/this.inputSizeData[1]],m=[],g=function(w){var C=d[w],_=oe(function(){var E=C instanceof Ot?wA(C):wA(ou(C));if(!r)return E;var I=u[w],O;n?O=ot(b.anchors,[I,0],[1,2]):O=b.anchorsData[I];var R=ee(Ao(ot(i,[I,d3-1],[1,-1])),[d3,-1]),z=ot(a,[I],[1]);return{box:E,landmarks:R,probability:z,anchor:O}});m.push(_)},y=0;y<d.length;y++)g(y);return o.dispose(),a.dispose(),i.dispose(),[2,{boxes:m,scaleFactor:p}]}})})},t.prototype.estimateFaces=function(e,n,r,s){return n===void 0&&(n=!1),r===void 0&&(r=!1),s===void 0&&(s=!0),Lf(this,void 0,void 0,function(){var i,o,a,l,c,u,d=this;return Ff(this,function(h){switch(h.label){case 0:return i=Dde(e),o=i[1],a=oe(function(){return e instanceof Ot||(e=FH(e)),Br($e(e,"float32"),0)}),[4,this.getBoundingBoxes(a,n,s)];case 1:return l=h.sent(),c=l.boxes,u=l.scaleFactor,a.dispose(),n?[2,c.map(function(f){var p=f3(f,u),m={topLeft:ot(p,[0],[2]),bottomRight:ot(p,[2],[2])};if(s){var g=f,y=g.landmarks,b=g.probability,v=g.anchor,w=Y(xe(y,v),u);m.landmarks=w,m.probability=b}return r&&(m=h3(m,o)),m})]:[2,Promise.all(c.map(function(f){return Lf(d,void 0,void 0,function(){var p,m,b,g,y,b,v,w,C,_,E,I,O=this;return Ff(this,function(R){switch(R.label){case 0:return p=f3(f,u),s?[3,2]:[4,p.array()];case 1:return b=R.sent(),m={topLeft:b.slice(0,2),bottomRight:b.slice(2)},[3,4];case 2:return[4,Promise.all([f.landmarks,p,f.probability].map(function(z){return Lf(O,void 0,void 0,function(){return Ff(this,function(B){return[2,z.array()]})})}))];case 3:g=R.sent(),y=g[0],b=g[1],v=g[2],w=f.anchor,C=u,_=C[0],E=C[1],I=y.map(function(z){return[(z[0]+w[0])*_,(z[1]+w[1])*E]}),m={topLeft:b.slice(0,2),bottomRight:b.slice(2),landmarks:I,probability:v},Nde(f.box),f.landmarks.dispose(),f.probability.dispose(),R.label=4;case 4:return p.dispose(),r&&(m=h3(m,o)),[2,m]}})})}))]}})})},t.prototype.dispose=function(){this.blazeFaceModel.dispose(),this.anchors.dispose(),this.inputSize.dispose()},t}();/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Lde="https://tfhub.dev/tensorflow/tfjs-model/blazeface/1/default/1";function Fde(t){var e={},n=e.maxFaces,r=n===void 0?10:n,s=e.inputWidth,i=s===void 0?128:s,o=e.inputHeight,a=o===void 0?128:o,l=e.iouThreshold,c=l===void 0?.3:l,u=e.scoreThreshold,d=u===void 0?.75:u,h=e.modelUrl;return Lf(this,void 0,void 0,function(){var f,p;return Ff(this,function(m){switch(m.label){case 0:return h==null?[3,2]:[4,vA(h)];case 1:return f=m.sent(),[3,4];case 2:return[4,vA(Lde,{fromTFHub:!0})];case 3:f=m.sent(),m.label=4;case 4:return p=new Pde(f,i,a,r,c,d),[2,p]}})})}var xA={exports:{}};const Mde=wi(Ide),zde=wi(Qce);/**
 * @license
 * Copyright 2023 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */(function(t,e){(function(n,r){r(e,Mde,zde)})(Mo,function(n,r,s){const i={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class o{constructor(l,c){this.modelPath=c||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(l)}/model.json`}getPrefix(l){return l==="lite_mobilenet_v2"?`ssd${l}`:`ssd_${l}`}async load(){this.model=await r.loadGraphModel(this.modelPath);const l=s.zeros([1,300,300,3],"int32"),c=await this.model.executeAsync(l);await Promise.all(c.map(u=>u.data())),c.map(u=>u.dispose()),l.dispose()}async infer(l,c,u){const d=s.tidy(()=>(l instanceof s.Tensor||(l=s.browser.fromPixels(l)),s.expandDims(l))),h=d.shape[1],f=d.shape[2],p=await this.model.executeAsync(d),m=p[0].dataSync(),g=p[1].dataSync();d.dispose(),s.dispose(p);const[y,b]=this.calculateMaxScores(m,p[0].shape[1],p[0].shape[2]),v=s.getBackend();s.getBackend()==="webgl"&&s.setBackend("cpu");const w=s.tidy(()=>{const _=s.tensor2d(g,[p[1].shape[1],p[1].shape[3]]);return s.image.nonMaxSuppression(_,y,c,u,u)}),C=w.dataSync();return w.dispose(),v!==s.getBackend()&&s.setBackend(v),this.buildDetectedObjects(f,h,g,y,C,b)}buildDetectedObjects(l,c,u,d,h,f){const p=h.length,m=[];for(let g=0;g<p;g++){const y=[];for(let _=0;_<4;_++)y[_]=u[4*h[g]+_];const b=y[0]*c,v=y[1]*l,w=y[2]*c,C=y[3]*l;y[0]=v,y[1]=b,y[2]=C-v,y[3]=w-b,m.push({bbox:y,class:i[f[h[g]]+1].displayName,score:d[h[g]]})}return m}calculateMaxScores(l,c,u){const d=[],h=[];for(let f=0;f<c;f++){let p=Number.MIN_VALUE,m=-1;for(let g=0;g<u;g++)l[f*u+g]>p&&(p=l[f*u+g],m=g);d[f]=p,h[f]=m}return[d,h]}async detect(l,c=20,u=.5){return this.infer(l,c,u)}dispose(){this.model!=null&&this.model.dispose()}}n.ObjectDetection=o,n.load=async function(a={}){if(s==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");const l=a.base||"lite_mobilenet_v2",c=a.modelUrl;if(["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(l)===-1)throw new Error(`ObjectDetection constructed with invalid base model ${l}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);const u=new o(l,c);return await u.load(),u},n.version="2.2.3",Object.defineProperty(n,"__esModule",{value:!0})})})(xA,xA.exports);var Bde=xA.exports;/**
 * @remix-run/router v1.16.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function An(){return An=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},An.apply(this,arguments)}var _n;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_n||(_n={}));const p3="popstate";function SG(t){t===void 0&&(t={});let{initialEntries:e=["/"],initialIndex:n,v5Compat:r=!1}=t,s;s=e.map((f,p)=>u(f,typeof f=="string"?null:f.state,p===0?"default":void 0));let i=l(n??s.length-1),o=_n.Pop,a=null;function l(f){return Math.min(Math.max(f,0),s.length-1)}function c(){return s[i]}function u(f,p,m){p===void 0&&(p=null);let g=bh(s?c().pathname:"/",f,p,m);return nc(g.pathname.charAt(0)==="/","relative pathnames are not supported in memory history: "+JSON.stringify(f)),g}function d(f){return typeof f=="string"?f:pa(f)}return{get index(){return i},get action(){return o},get location(){return c()},createHref:d,createURL(f){return new URL(d(f),"http://localhost")},encodeLocation(f){let p=typeof f=="string"?Bo(f):f;return{pathname:p.pathname||"",search:p.search||"",hash:p.hash||""}},push(f,p){o=_n.Push;let m=u(f,p);i+=1,s.splice(i,s.length,m),r&&a&&a({action:o,location:m,delta:1})},replace(f,p){o=_n.Replace;let m=u(f,p);s[i]=m,r&&a&&a({action:o,location:m,delta:0})},go(f){o=_n.Pop;let p=l(i+f),m=s[p];i=p,a&&a({action:o,location:m,delta:f})},listen(f){return a=f,()=>{a=null}}}}function CG(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return bh("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:pa(s)}return _G(e,n,null,t)}function EG(t){t===void 0&&(t={});function e(s,i){let{pathname:o="/",search:a="",hash:l=""}=Bo(s.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),bh("",{pathname:o,search:a,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(s,i){let o=s.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=s.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof i=="string"?i:pa(i))}function r(s,i){nc(s.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(i)+")")}return _G(e,n,r,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function nc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function jde(){return Math.random().toString(36).substr(2,8)}function m3(t,e){return{usr:t.state,key:t.key,idx:e}}function bh(t,e,n,r){return n===void 0&&(n=null),An({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bo(e):e,{state:n,key:e&&e.key||r||jde()})}function pa(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bo(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _G(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=_n.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(An({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=_n.Pop;let g=u(),y=g==null?null:g-c;c=g,l&&l({action:a,location:m.location,delta:y})}function h(g,y){a=_n.Push;let b=bh(m.location,g,y);n&&n(b,g),c=u()+1;let v=m3(b,c),w=m.createHref(b);try{o.pushState(v,"",w)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;s.location.assign(w)}i&&l&&l({action:a,location:m.location,delta:1})}function f(g,y){a=_n.Replace;let b=bh(m.location,g,y);n&&n(b,g),c=u();let v=m3(b,c),w=m.createHref(b);o.replaceState(v,"",w),i&&l&&l({action:a,location:m.location,delta:0})}function p(g){let y=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof g=="string"?g:pa(g);return b=b.replace(/ $/,"%20"),st(y,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,y)}let m={get action(){return a},get location(){return t(s,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(p3,d),l=g,()=>{s.removeEventListener(p3,d),l=null}},createHref(g){return e(s,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(g){return o.go(g)}};return m}var Bn;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Bn||(Bn={}));const Vde=new Set(["lazy","caseSensitive","path","id","index","children"]);function Ude(t){return t.index===!0}function SA(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((s,i)=>{let o=[...n,i],a=typeof s.id=="string"?s.id:o.join("-");if(st(s.index!==!0||!s.children,"Cannot specify children on an index route"),st(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),Ude(s)){let l=An({},s,e(s),{id:a});return r[a]=l,l}else{let l=An({},s,e(s),{id:a,children:void 0});return r[a]=l,s.children&&(l.children=SA(s.children,e,o,r)),l}})}function Md(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Bo(e):e,s=mi(r.pathname||"/",n);if(s==null)return null;let i=kG(t);Wde(i);let o=null;for(let a=0;o==null&&a<i.length;++a){let l=nhe(s);o=Zde(i[a],l)}return o}function TG(t,e){let{route:n,pathname:r,params:s}=t;return{id:n.id,pathname:r,params:s,data:e[n.id],handle:n.handle}}function kG(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(st(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Qa([r,l.relativePath]),u=n.concat(l);i.children&&i.children.length>0&&(st(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),kG(i.children,e,u,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:Qde(c,i.index),routesMeta:u})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of IG(i.path))s(i,o,l)}),e}function IG(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=IG(r.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Wde(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Jde(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Hde=/^:[\w-]+$/,Gde=3,Kde=2,qde=1,Xde=10,Yde=-2,g3=t=>t==="*";function Qde(t,e){let n=t.split("/"),r=n.length;return n.some(g3)&&(r+=Yde),e&&(r+=Kde),n.filter(s=>!g3(s)).reduce((s,i)=>s+(Hde.test(i)?Gde:i===""?qde:Xde),r)}function Jde(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Zde(t,e){let{routesMeta:n}=t,r={},s="/",i=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",u=Cb({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;i.push({params:r,pathname:Qa([s,u.pathname]),pathnameBase:she(Qa([s,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(s=Qa([s,u.pathnameBase]))}return i}function ehe(t,e){e===void 0&&(e={});let n=t;n.endsWith("*")&&n!=="*"&&!n.endsWith("/*")&&(nc(!1,'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".')),n=n.replace(/\*$/,"/*"));const r=n.startsWith("/")?"/":"",s=o=>o==null?"":typeof o=="string"?o:String(o),i=n.split(/\/+/).map((o,a,l)=>{if(a===l.length-1&&o==="*")return s(e["*"]);const u=o.match(/^:([\w-]+)(\??)$/);if(u){const[,d,h]=u;let f=e[d];return st(h==="?"||f!=null,'Missing ":'+d+'" param'),s(f)}return o.replace(/\?$/g,"")}).filter(o=>!!o);return r+i.join("/")}function Cb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=the(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let m=a[d]||"";o=i.slice(0,i.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function the(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),nc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function nhe(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return nc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function mi(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function NG(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bo(t):t;return{pathname:n?n.startsWith("/")?n:rhe(n,e):e,search:ihe(r),hash:ohe(s)}}function rhe(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function HI(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $G(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function I_(t,e){let n=$G(t);return e?n.map((r,s)=>s===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function N_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bo(t):(s=An({},t),st(!s.pathname||!s.pathname.includes("?"),HI("?","pathname","search",s)),st(!s.pathname||!s.pathname.includes("#"),HI("#","pathname","hash",s)),st(!s.search||!s.search.includes("#"),HI("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;s.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=NG(s,a),c=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Qa=t=>t.join("/").replace(/\/\/+/g,"/"),she=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ihe=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ohe=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,ahe=function(e,n){n===void 0&&(n={});let r=typeof n=="number"?{status:n}:n,s=new Headers(r.headers);return s.has("Content-Type")||s.set("Content-Type","application/json; charset=utf-8"),new Response(JSON.stringify(e),An({},r,{headers:s}))};class CS extends Error{}class lhe{constructor(e,n){this.pendingKeysSet=new Set,this.subscribers=new Set,this.deferredKeys=[],st(e&&typeof e=="object"&&!Array.isArray(e),"defer() only accepts plain objects");let r;this.abortPromise=new Promise((i,o)=>r=o),this.controller=new AbortController;let s=()=>r(new CS("Deferred data aborted"));this.unlistenAbortSignal=()=>this.controller.signal.removeEventListener("abort",s),this.controller.signal.addEventListener("abort",s),this.data=Object.entries(e).reduce((i,o)=>{let[a,l]=o;return Object.assign(i,{[a]:this.trackPromise(a,l)})},{}),this.done&&this.unlistenAbortSignal(),this.init=n}trackPromise(e,n){if(!(n instanceof Promise))return n;this.deferredKeys.push(e),this.pendingKeysSet.add(e);let r=Promise.race([n,this.abortPromise]).then(s=>this.onSettle(r,e,void 0,s),s=>this.onSettle(r,e,s));return r.catch(()=>{}),Object.defineProperty(r,"_tracked",{get:()=>!0}),r}onSettle(e,n,r,s){if(this.controller.signal.aborted&&r instanceof CS)return this.unlistenAbortSignal(),Object.defineProperty(e,"_error",{get:()=>r}),Promise.reject(r);if(this.pendingKeysSet.delete(n),this.done&&this.unlistenAbortSignal(),r===void 0&&s===void 0){let i=new Error('Deferred data for key "'+n+'" resolved/rejected with `undefined`, you must resolve/reject with a value or `null`.');return Object.defineProperty(e,"_error",{get:()=>i}),this.emit(!1,n),Promise.reject(i)}return s===void 0?(Object.defineProperty(e,"_error",{get:()=>r}),this.emit(!1,n),Promise.reject(r)):(Object.defineProperty(e,"_data",{get:()=>s}),this.emit(!1,n),s)}emit(e,n){this.subscribers.forEach(r=>r(e,n))}subscribe(e){return this.subscribers.add(e),()=>this.subscribers.delete(e)}cancel(){this.controller.abort(),this.pendingKeysSet.forEach((e,n)=>this.pendingKeysSet.delete(n)),this.emit(!0)}async resolveData(e){let n=!1;if(!this.done){let r=()=>this.cancel();e.addEventListener("abort",r),n=await new Promise(s=>{this.subscribe(i=>{e.removeEventListener("abort",r),(i||this.done)&&s(i)})})}return n}get done(){return this.pendingKeysSet.size===0}get unwrappedData(){return st(this.data!==null&&this.done,"Can only unwrap data on initialized and settled deferreds"),Object.entries(this.data).reduce((e,n)=>{let[r,s]=n;return Object.assign(e,{[r]:uhe(s)})},{})}get pendingKeys(){return Array.from(this.pendingKeysSet)}}function che(t){return t instanceof Promise&&t._tracked===!0}function uhe(t){if(!che(t))return t;if(t._error)throw t._error;return t._data}const dhe=function(e,n){n===void 0&&(n={});let r=typeof n=="number"?{status:n}:n;return new lhe(e,r)},AG=function(e,n){n===void 0&&(n=302);let r=n;typeof r=="number"?r={status:r}:typeof r.status>"u"&&(r.status=302);let s=new Headers(r.headers);return s.set("Location",e),new Response(null,An({},r,{headers:s}))},hhe=(t,e)=>{let n=AG(t,e);return n.headers.set("X-Remix-Reload-Document","true"),n};class $_{constructor(e,n,r,s){s===void 0&&(s=!1),this.status=e,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function A_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const RG=["post","put","patch","delete"],fhe=new Set(RG),phe=["get",...RG],mhe=new Set(phe),ghe=new Set([301,302,303,307,308]),yhe=new Set([307,308]),GI={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},OG={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Mf={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},PD=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,bhe=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),DG="remix-router-transitions";function LD(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;st(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(t.mapRouteProperties)s=t.mapRouteProperties;else if(t.detectErrorBoundary){let ae=t.detectErrorBoundary;s=he=>({hasErrorBoundary:ae(he)})}else s=bhe;let i={},o=SA(t.routes,s,void 0,i),a,l=t.basename||"/",c=t.unstable_dataStrategy||She,u=An({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},t.future),d=null,h=new Set,f=null,p=null,m=null,g=t.hydrationData!=null,y=Md(o,t.history.location,l),b=null;if(y==null){let ae=po(404,{pathname:t.history.location.pathname}),{matches:he,route:be}=T3(o);y=he,b={[be.id]:ae}}let v,w=y.some(ae=>ae.route.lazy),C=y.some(ae=>ae.route.loader);if(w)v=!1;else if(!C)v=!0;else if(u.v7_partialHydration){let ae=t.hydrationData?t.hydrationData.loaderData:null,he=t.hydrationData?t.hydrationData.errors:null,be=Te=>Te.route.loader?typeof Te.route.loader=="function"&&Te.route.loader.hydrate===!0?!1:ae&&ae[Te.route.id]!==void 0||he&&he[Te.route.id]!==void 0:!0;if(he){let Te=y.findIndex(Be=>he[Be.route.id]!==void 0);v=y.slice(0,Te+1).every(be)}else v=y.every(be)}else v=t.hydrationData!=null;let _,E={historyAction:t.history.action,location:t.history.location,matches:y,initialized:v,navigation:GI,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||b,fetchers:new Map,blockers:new Map},I=_n.Pop,O=!1,R,z=!1,B=new Map,j=null,G=!1,U=!1,Q=[],se=[],V=new Map,W=0,L=-1,J=new Map,Z=new Set,ie=new Map,ue=new Map,de=new Set,ye=new Map,Ee=new Map,ge=!1;function Pe(){if(d=t.history.listen(ae=>{let{action:he,location:be,delta:Te}=ae;if(ge){ge=!1;return}nc(Ee.size===0||Te!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Be=Jh({currentLocation:E.location,nextLocation:be,historyAction:he});if(Be&&Te!=null){ge=!0,t.history.go(Te*-1),so(Be,{state:"blocked",location:be,proceed(){so(Be,{state:"proceeding",proceed:void 0,reset:void 0,location:be}),t.history.go(Te)},reset(){let mt=new Map(E.blockers);mt.set(Be,Mf),Ve({blockers:mt})}});return}return ze(he,be)}),n){Dhe(e,B);let ae=()=>Phe(e,B);e.addEventListener("pagehide",ae),j=()=>e.removeEventListener("pagehide",ae)}return E.initialized||ze(_n.Pop,E.location,{initialHydration:!0}),_}function We(){d&&d(),j&&j(),h.clear(),R&&R.abort(),E.fetchers.forEach((ae,he)=>Kn(he)),E.blockers.forEach((ae,he)=>Qh(he))}function le(ae){return h.add(ae),()=>h.delete(ae)}function Ve(ae,he){he===void 0&&(he={}),E=An({},E,ae);let be=[],Te=[];u.v7_fetcherPersist&&E.fetchers.forEach((Be,mt)=>{Be.state==="idle"&&(de.has(mt)?Te.push(mt):be.push(mt))}),[...h].forEach(Be=>Be(E,{deletedFetchers:Te,unstable_viewTransitionOpts:he.viewTransitionOpts,unstable_flushSync:he.flushSync===!0})),u.v7_fetcherPersist&&(be.forEach(Be=>E.fetchers.delete(Be)),Te.forEach(Be=>Kn(Be)))}function Je(ae,he,be){var Te,Be;let{flushSync:mt}=be===void 0?{}:be,Ze=E.actionData!=null&&E.navigation.formMethod!=null&&ra(E.navigation.formMethod)&&E.navigation.state==="loading"&&((Te=ae.state)==null?void 0:Te._isRedirect)!==!0,He;he.actionData?Object.keys(he.actionData).length>0?He=he.actionData:He=null:Ze?He=E.actionData:He=null;let bt=he.loaderData?E3(E.loaderData,he.loaderData,he.matches||[],he.errors):E.loaderData,nt=E.blockers;nt.size>0&&(nt=new Map(nt),nt.forEach((ct,Xt)=>nt.set(Xt,Mf)));let hn=O===!0||E.navigation.formMethod!=null&&ra(E.navigation.formMethod)&&((Be=ae.state)==null?void 0:Be._isRedirect)!==!0;a&&(o=a,a=void 0),G||I===_n.Pop||(I===_n.Push?t.history.push(ae,ae.state):I===_n.Replace&&t.history.replace(ae,ae.state));let Pn;if(I===_n.Pop){let ct=B.get(E.location.pathname);ct&&ct.has(ae.pathname)?Pn={currentLocation:E.location,nextLocation:ae}:B.has(ae.pathname)&&(Pn={currentLocation:ae,nextLocation:E.location})}else if(z){let ct=B.get(E.location.pathname);ct?ct.add(ae.pathname):(ct=new Set([ae.pathname]),B.set(E.location.pathname,ct)),Pn={currentLocation:E.location,nextLocation:ae}}Ve(An({},he,{actionData:He,loaderData:bt,historyAction:I,location:ae,initialized:!0,navigation:GI,revalidation:"idle",restoreScrollPosition:ef(ae,he.matches||E.matches),preventScrollReset:hn,blockers:nt}),{viewTransitionOpts:Pn,flushSync:mt===!0}),I=_n.Pop,O=!1,z=!1,G=!1,U=!1,Q=[],se=[]}async function at(ae,he){if(typeof ae=="number"){t.history.go(ae);return}let be=CA(E.location,E.matches,l,u.v7_prependBasename,ae,u.v7_relativeSplatPath,he==null?void 0:he.fromRouteId,he==null?void 0:he.relative),{path:Te,submission:Be,error:mt}=y3(u.v7_normalizeFormMethod,!1,be,he),Ze=E.location,He=bh(E.location,Te,he&&he.state);He=An({},He,t.history.encodeLocation(He));let bt=he&&he.replace!=null?he.replace:void 0,nt=_n.Push;bt===!0?nt=_n.Replace:bt===!1||Be!=null&&ra(Be.formMethod)&&Be.formAction===E.location.pathname+E.location.search&&(nt=_n.Replace);let hn=he&&"preventScrollReset"in he?he.preventScrollReset===!0:void 0,Pn=(he&&he.unstable_flushSync)===!0,ct=Jh({currentLocation:Ze,nextLocation:He,historyAction:nt});if(ct){so(ct,{state:"blocked",location:He,proceed(){so(ct,{state:"proceeding",proceed:void 0,reset:void 0,location:He}),at(ae,he)},reset(){let Xt=new Map(E.blockers);Xt.set(ct,Mf),Ve({blockers:Xt})}});return}return await ze(nt,He,{submission:Be,pendingError:mt,preventScrollReset:hn,replace:he&&he.replace,enableViewTransition:he&&he.unstable_viewTransition,flushSync:Pn})}function _e(){if(tn(),Ve({revalidation:"loading"}),E.navigation.state!=="submitting"){if(E.navigation.state==="idle"){ze(E.historyAction,E.location,{startUninterruptedRevalidation:!0});return}ze(I||E.historyAction,E.navigation.location,{overrideNavigation:E.navigation})}}async function ze(ae,he,be){R&&R.abort(),R=null,I=ae,G=(be&&be.startUninterruptedRevalidation)===!0,Zh(E.location,E.matches),O=(be&&be.preventScrollReset)===!0,z=(be&&be.enableViewTransition)===!0;let Te=a||o,Be=be&&be.overrideNavigation,mt=Md(Te,he,l),Ze=(be&&be.flushSync)===!0;if(!mt){let ct=po(404,{pathname:he.pathname}),{matches:Xt,route:En}=T3(Te);Ci(),Je(he,{matches:Xt,loaderData:{},errors:{[En.id]:ct}},{flushSync:Ze});return}if(E.initialized&&!U&&Ihe(E.location,he)&&!(be&&be.submission&&ra(be.submission.formMethod))){Je(he,{matches:mt},{flushSync:Ze});return}R=new AbortController;let He=Sf(t.history,he,R.signal,be&&be.submission),bt;if(be&&be.pendingError)bt=[Ly(mt).route.id,{type:Bn.error,error:be.pendingError}];else if(be&&be.submission&&ra(be.submission.formMethod)){let ct=await it(He,he,be.submission,mt,{replace:be.replace,flushSync:Ze});if(ct.shortCircuited)return;bt=ct.pendingActionResult,Be=KI(he,be.submission),Ze=!1,He=Sf(t.history,He.url,He.signal)}let{shortCircuited:nt,loaderData:hn,errors:Pn}=await Xe(He,he,mt,Be,be&&be.submission,be&&be.fetcherSubmission,be&&be.replace,be&&be.initialHydration===!0,Ze,bt);nt||(R=null,Je(he,An({matches:mt},_3(bt),{loaderData:hn,errors:Pn})))}async function it(ae,he,be,Te,Be){Be===void 0&&(Be={}),tn();let mt=Rhe(he,be);Ve({navigation:mt},{flushSync:Be.flushSync===!0});let Ze,He=_A(Te,he);if(!He.route.action&&!He.route.lazy)Ze={type:Bn.error,error:po(405,{method:ae.method,pathname:he.pathname,routeId:He.route.id})};else if(Ze=(await Sn("action",ae,[He],Te))[0],ae.signal.aborted)return{shortCircuited:!0};if(Bd(Ze)){let bt;return Be&&Be.replace!=null?bt=Be.replace:bt=x3(Ze.response.headers.get("Location"),new URL(ae.url),l)===E.location.pathname+E.location.search,await At(ae,Ze,{submission:be,replace:bt}),{shortCircuited:!0}}if(zd(Ze))throw po(400,{type:"defer-action"});if(bo(Ze)){let bt=Ly(Te,He.route.id);return(Be&&Be.replace)!==!0&&(I=_n.Push),{pendingActionResult:[bt.route.id,Ze]}}return{pendingActionResult:[He.route.id,Ze]}}async function Xe(ae,he,be,Te,Be,mt,Ze,He,bt,nt){let hn=Te||KI(he,Be),Pn=Be||mt||N3(hn),ct=a||o,[Xt,En]=b3(t.history,E,be,Pn,he,u.v7_partialHydration&&He===!0,u.unstable_skipActionErrorRevalidation,U,Q,se,de,ie,Z,ct,l,nt);if(Ci(vt=>!(be&&be.some(gr=>gr.route.id===vt))||Xt&&Xt.some(gr=>gr.route.id===vt)),L=++W,Xt.length===0&&En.length===0){let vt=Ho();return Je(he,An({matches:be,loaderData:{},errors:nt&&bo(nt[1])?{[nt[0]]:nt[1].error}:null},_3(nt),vt?{fetchers:new Map(E.fetchers)}:{}),{flushSync:bt}),{shortCircuited:!0}}if(!G&&(!u.v7_partialHydration||!He)){En.forEach(gr=>{let Ir=E.fetchers.get(gr.key),nn=iy(void 0,Ir?Ir.data:void 0);E.fetchers.set(gr.key,nn)});let vt;nt&&!bo(nt[1])?vt={[nt[0]]:nt[1].data}:E.actionData&&(Object.keys(E.actionData).length===0?vt=null:vt=E.actionData),Ve(An({navigation:hn},vt!==void 0?{actionData:vt}:{},En.length>0?{fetchers:new Map(E.fetchers)}:{}),{flushSync:bt})}En.forEach(vt=>{V.has(vt.key)&&Es(vt.key),vt.controller&&V.set(vt.key,vt.controller)});let qs=()=>En.forEach(vt=>Es(vt.key));R&&R.signal.addEventListener("abort",qs);let{loaderResults:Zn,fetcherResults:fn}=await Wt(E.matches,be,Xt,En,ae);if(ae.signal.aborted)return{shortCircuited:!0};R&&R.signal.removeEventListener("abort",qs),En.forEach(vt=>V.delete(vt.key));let er=k3([...Zn,...fn]);if(er){if(er.idx>=Xt.length){let vt=En[er.idx-Xt.length].key;Z.add(vt)}return await At(ae,er.result,{replace:Ze}),{shortCircuited:!0}}let{loaderData:Ln,errors:cn}=C3(E,be,Xt,Zn,nt,En,fn,ye);ye.forEach((vt,gr)=>{vt.subscribe(Ir=>{(Ir||vt.done)&&ye.delete(gr)})}),u.v7_partialHydration&&He&&E.errors&&Object.entries(E.errors).filter(vt=>{let[gr]=vt;return!Xt.some(Ir=>Ir.route.id===gr)}).forEach(vt=>{let[gr,Ir]=vt;cn=Object.assign(cn||{},{[gr]:Ir})});let Go=Ho(),Ei=vc(L),Xs=Go||Ei||En.length>0;return An({loaderData:Ln,errors:cn},Xs?{fetchers:new Map(E.fetchers)}:{})}function xn(ae,he,be,Te){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");V.has(ae)&&Es(ae);let Be=(Te&&Te.unstable_flushSync)===!0,mt=a||o,Ze=CA(E.location,E.matches,l,u.v7_prependBasename,be,u.v7_relativeSplatPath,he,Te==null?void 0:Te.relative),He=Md(mt,Ze,l);if(!He){Vt(ae,he,po(404,{pathname:Ze}),{flushSync:Be});return}let{path:bt,submission:nt,error:hn}=y3(u.v7_normalizeFormMethod,!0,Ze,Te);if(hn){Vt(ae,he,hn,{flushSync:Be});return}let Pn=_A(He,bt);if(O=(Te&&Te.preventScrollReset)===!0,nt&&ra(nt.formMethod)){Ne(ae,he,bt,Pn,He,Be,nt);return}ie.set(ae,{routeId:he,path:bt}),Bt(ae,he,bt,Pn,He,Be,nt)}async function Ne(ae,he,be,Te,Be,mt,Ze){if(tn(),ie.delete(ae),!Te.route.action&&!Te.route.lazy){let nn=po(405,{method:Ze.formMethod,pathname:be,routeId:he});Vt(ae,he,nn,{flushSync:mt});return}let He=E.fetchers.get(ae);rt(ae,Ohe(Ze,He),{flushSync:mt});let bt=new AbortController,nt=Sf(t.history,be,bt.signal,Ze);V.set(ae,bt);let hn=W,ct=(await Sn("action",nt,[Te],Be))[0];if(nt.signal.aborted){V.get(ae)===bt&&V.delete(ae);return}if(u.v7_fetcherPersist&&de.has(ae)){if(Bd(ct)||bo(ct)){rt(ae,Oc(void 0));return}}else{if(Bd(ct))if(V.delete(ae),L>hn){rt(ae,Oc(void 0));return}else return Z.add(ae),rt(ae,iy(Ze)),At(nt,ct,{fetcherSubmission:Ze});if(bo(ct)){Vt(ae,he,ct.error);return}}if(zd(ct))throw po(400,{type:"defer-action"});let Xt=E.navigation.location||E.location,En=Sf(t.history,Xt,bt.signal),qs=a||o,Zn=E.navigation.state!=="idle"?Md(qs,E.navigation.location,l):E.matches;st(Zn,"Didn't find any matches after fetcher action");let fn=++W;J.set(ae,fn);let er=iy(Ze,ct.data);E.fetchers.set(ae,er);let[Ln,cn]=b3(t.history,E,Zn,Ze,Xt,!1,u.unstable_skipActionErrorRevalidation,U,Q,se,de,ie,Z,qs,l,[Te.route.id,ct]);cn.filter(nn=>nn.key!==ae).forEach(nn=>{let _a=nn.key,Sc=E.fetchers.get(_a),Qu=iy(void 0,Sc?Sc.data:void 0);E.fetchers.set(_a,Qu),V.has(_a)&&Es(_a),nn.controller&&V.set(_a,nn.controller)}),Ve({fetchers:new Map(E.fetchers)});let Go=()=>cn.forEach(nn=>Es(nn.key));bt.signal.addEventListener("abort",Go);let{loaderResults:Ei,fetcherResults:Xs}=await Wt(E.matches,Zn,Ln,cn,En);if(bt.signal.aborted)return;bt.signal.removeEventListener("abort",Go),J.delete(ae),V.delete(ae),cn.forEach(nn=>V.delete(nn.key));let vt=k3([...Ei,...Xs]);if(vt){if(vt.idx>=Ln.length){let nn=cn[vt.idx-Ln.length].key;Z.add(nn)}return At(En,vt.result)}let{loaderData:gr,errors:Ir}=C3(E,E.matches,Ln,Ei,void 0,cn,Xs,ye);if(E.fetchers.has(ae)){let nn=Oc(ct.data);E.fetchers.set(ae,nn)}vc(fn),E.navigation.state==="loading"&&fn>L?(st(I,"Expected pending action"),R&&R.abort(),Je(E.navigation.location,{matches:Zn,loaderData:gr,errors:Ir,fetchers:new Map(E.fetchers)})):(Ve({errors:Ir,loaderData:E3(E.loaderData,gr,Zn,Ir),fetchers:new Map(E.fetchers)}),U=!1)}async function Bt(ae,he,be,Te,Be,mt,Ze){let He=E.fetchers.get(ae);rt(ae,iy(Ze,He?He.data:void 0),{flushSync:mt});let bt=new AbortController,nt=Sf(t.history,be,bt.signal);V.set(ae,bt);let hn=W,ct=(await Sn("loader",nt,[Te],Be))[0];if(zd(ct)&&(ct=await MG(ct,nt.signal,!0)||ct),V.get(ae)===bt&&V.delete(ae),!nt.signal.aborted){if(de.has(ae)){rt(ae,Oc(void 0));return}if(Bd(ct))if(L>hn){rt(ae,Oc(void 0));return}else{Z.add(ae),await At(nt,ct);return}if(bo(ct)){Vt(ae,he,ct.error);return}st(!zd(ct),"Unhandled fetcher deferred data"),rt(ae,Oc(ct.data))}}async function At(ae,he,be){let{submission:Te,fetcherSubmission:Be,replace:mt}=be===void 0?{}:be;he.response.headers.has("X-Remix-Revalidate")&&(U=!0);let Ze=he.response.headers.get("Location");st(Ze,"Expected a Location header on the redirect Response"),Ze=x3(Ze,new URL(ae.url),l);let He=bh(E.location,Ze,{_isRedirect:!0});if(n){let Xt=!1;if(he.response.headers.has("X-Remix-Reload-Document"))Xt=!0;else if(PD.test(Ze)){const En=t.history.createURL(Ze);Xt=En.origin!==e.location.origin||mi(En.pathname,l)==null}if(Xt){mt?e.location.replace(Ze):e.location.assign(Ze);return}}R=null;let bt=mt===!0?_n.Replace:_n.Push,{formMethod:nt,formAction:hn,formEncType:Pn}=E.navigation;!Te&&!Be&&nt&&hn&&Pn&&(Te=N3(E.navigation));let ct=Te||Be;if(yhe.has(he.response.status)&&ct&&ra(ct.formMethod))await ze(bt,He,{submission:An({},ct,{formAction:Ze}),preventScrollReset:O});else{let Xt=KI(He,Te);await ze(bt,He,{overrideNavigation:Xt,fetcherSubmission:Be,preventScrollReset:O})}}async function Sn(ae,he,be,Te){try{let Be=await Che(c,ae,he,be,Te,i,s);return await Promise.all(Be.map((mt,Ze)=>{if(Nhe(mt)){let He=mt.result;return{type:Bn.redirect,response:The(He,he,be[Ze].route.id,Te,l,u.v7_relativeSplatPath)}}return _he(mt)}))}catch(Be){return be.map(()=>({type:Bn.error,error:Be}))}}async function Wt(ae,he,be,Te,Be){let[mt,...Ze]=await Promise.all([be.length?Sn("loader",Be,be,he):[],...Te.map(He=>{if(He.matches&&He.match&&He.controller){let bt=Sf(t.history,He.path,He.controller.signal);return Sn("loader",bt,[He.match],He.matches).then(nt=>nt[0])}else return Promise.resolve({type:Bn.error,error:po(404,{pathname:He.path})})})]);return await Promise.all([I3(ae,be,mt,mt.map(()=>Be.signal),!1,E.loaderData),I3(ae,Te.map(He=>He.match),Ze,Te.map(He=>He.controller?He.controller.signal:null),!0)]),{loaderResults:mt,fetcherResults:Ze}}function tn(){U=!0,Q.push(...Ci()),ie.forEach((ae,he)=>{V.has(he)&&(se.push(he),Es(he))})}function rt(ae,he,be){be===void 0&&(be={}),E.fetchers.set(ae,he),Ve({fetchers:new Map(E.fetchers)},{flushSync:(be&&be.flushSync)===!0})}function Vt(ae,he,be,Te){Te===void 0&&(Te={});let Be=Ly(E.matches,he);Kn(ae),Ve({errors:{[Be.route.id]:be},fetchers:new Map(E.fetchers)},{flushSync:(Te&&Te.flushSync)===!0})}function Cn(ae){return u.v7_fetcherPersist&&(ue.set(ae,(ue.get(ae)||0)+1),de.has(ae)&&de.delete(ae)),E.fetchers.get(ae)||OG}function Kn(ae){let he=E.fetchers.get(ae);V.has(ae)&&!(he&&he.state==="loading"&&J.has(ae))&&Es(ae),ie.delete(ae),J.delete(ae),Z.delete(ae),de.delete(ae),E.fetchers.delete(ae)}function ro(ae){if(u.v7_fetcherPersist){let he=(ue.get(ae)||0)-1;he<=0?(ue.delete(ae),de.add(ae)):ue.set(ae,he)}else Kn(ae);Ve({fetchers:new Map(E.fetchers)})}function Es(ae){let he=V.get(ae);st(he,"Expected fetch controller: "+ae),he.abort(),V.delete(ae)}function Ea(ae){for(let he of ae){let be=Cn(he),Te=Oc(be.data);E.fetchers.set(he,Te)}}function Ho(){let ae=[],he=!1;for(let be of Z){let Te=E.fetchers.get(be);st(Te,"Expected fetcher: "+be),Te.state==="loading"&&(Z.delete(be),ae.push(be),he=!0)}return Ea(ae),he}function vc(ae){let he=[];for(let[be,Te]of J)if(Te<ae){let Be=E.fetchers.get(be);st(Be,"Expected fetcher: "+be),Be.state==="loading"&&(Es(be),J.delete(be),he.push(be))}return Ea(he),he.length>0}function wc(ae,he){let be=E.blockers.get(ae)||Mf;return Ee.get(ae)!==he&&Ee.set(ae,he),be}function Qh(ae){E.blockers.delete(ae),Ee.delete(ae)}function so(ae,he){let be=E.blockers.get(ae)||Mf;st(be.state==="unblocked"&&he.state==="blocked"||be.state==="blocked"&&he.state==="blocked"||be.state==="blocked"&&he.state==="proceeding"||be.state==="blocked"&&he.state==="unblocked"||be.state==="proceeding"&&he.state==="unblocked","Invalid blocker state transition: "+be.state+" -> "+he.state);let Te=new Map(E.blockers);Te.set(ae,he),Ve({blockers:Te})}function Jh(ae){let{currentLocation:he,nextLocation:be,historyAction:Te}=ae;if(Ee.size===0)return;Ee.size>1&&nc(!1,"A router only supports one blocker at a time");let Be=Array.from(Ee.entries()),[mt,Ze]=Be[Be.length-1],He=E.blockers.get(mt);if(!(He&&He.state==="proceeding")&&Ze({currentLocation:he,nextLocation:be,historyAction:Te}))return mt}function Ci(ae){let he=[];return ye.forEach((be,Te)=>{(!ae||ae(Te))&&(be.cancel(),he.push(Te),ye.delete(Te))}),he}function xc(ae,he,be){if(f=ae,m=he,p=be||null,!g&&E.navigation===GI){g=!0;let Te=ef(E.location,E.matches);Te!=null&&Ve({restoreScrollPosition:Te})}return()=>{f=null,m=null,p=null}}function Yu(ae,he){return p&&p(ae,he.map(Te=>TG(Te,E.loaderData)))||ae.key}function Zh(ae,he){if(f&&m){let be=Yu(ae,he);f[be]=m()}}function ef(ae,he){if(f){let be=Yu(ae,he),Te=f[be];if(typeof Te=="number")return Te}return null}function Eg(ae){i={},a=SA(ae,s,void 0,i)}return _={get basename(){return l},get future(){return u},get state(){return E},get routes(){return o},get window(){return e},initialize:Pe,subscribe:le,enableScrollRestoration:xc,navigate:at,fetch:xn,revalidate:_e,createHref:ae=>t.history.createHref(ae),encodeLocation:ae=>t.history.encodeLocation(ae),getFetcher:Cn,deleteFetcher:ro,dispose:We,getBlocker:wc,deleteBlocker:Qh,_internalFetchControllers:V,_internalActiveDeferreds:ye,_internalSetRoutes:Eg},_}function vhe(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function CA(t,e,n,r,s,i,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let u=N_(s||".",I_(l,i),mi(t.pathname,n)||t.pathname,a==="path");return s==null&&(u.search=t.search,u.hash=t.hash),(s==null||s===""||s===".")&&c&&c.route.index&&!FD(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Qa([n,u.pathname])),pa(u)}function y3(t,e,n,r){if(!r||!vhe(r))return{path:n};if(r.formMethod&&!Ahe(r.formMethod))return{path:n,error:po(405,{method:r.formMethod})};let s=()=>({path:n,error:po(400,{type:"invalid-body"})}),i=r.formMethod||"get",o=t?i.toUpperCase():i.toLowerCase(),a=LG(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!ra(o))return s();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,p)=>{let[m,g]=p;return""+f+m+"="+g+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!ra(o))return s();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return s()}}}st(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=EA(r.formData),c=r.formData;else if(r.body instanceof FormData)l=EA(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=S3(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=S3(l)}catch{return s()}let u={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(ra(u.formMethod))return{path:n,submission:u};let d=Bo(n);return e&&d.search&&FD(d.search)&&l.append("index",""),d.search="?"+l,{path:pa(d),submission:u}}function whe(t,e){let n=t;if(e){let r=t.findIndex(s=>s.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function b3(t,e,n,r,s,i,o,a,l,c,u,d,h,f,p,m){let g=m?bo(m[1])?m[1].error:m[1].data:void 0,y=t.createURL(e.location),b=t.createURL(s),v=m&&bo(m[1])?m[0]:void 0,w=v?whe(n,v):n,C=m?m[1].statusCode:void 0,_=o&&C&&C>=400,E=w.filter((O,R)=>{let{route:z}=O;if(z.lazy)return!0;if(z.loader==null)return!1;if(i)return typeof z.loader!="function"||z.loader.hydrate?!0:e.loaderData[z.id]===void 0&&(!e.errors||e.errors[z.id]===void 0);if(xhe(e.loaderData,e.matches[R],O)||l.some(G=>G===O.route.id))return!0;let B=e.matches[R],j=O;return v3(O,An({currentUrl:y,currentParams:B.params,nextUrl:b,nextParams:j.params},r,{actionResult:g,unstable_actionStatus:C,defaultShouldRevalidate:_?!1:a||y.pathname+y.search===b.pathname+b.search||y.search!==b.search||PG(B,j)}))}),I=[];return d.forEach((O,R)=>{if(i||!n.some(U=>U.route.id===O.routeId)||u.has(R))return;let z=Md(f,O.path,p);if(!z){I.push({key:R,routeId:O.routeId,path:O.path,matches:null,match:null,controller:null});return}let B=e.fetchers.get(R),j=_A(z,O.path),G=!1;h.has(R)?G=!1:c.includes(R)?G=!0:B&&B.state!=="idle"&&B.data===void 0?G=a:G=v3(j,An({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:b,nextParams:n[n.length-1].params},r,{actionResult:g,unstable_actionStatus:C,defaultShouldRevalidate:_?!1:a})),G&&I.push({key:R,routeId:O.routeId,path:O.path,matches:z,match:j,controller:new AbortController})}),[E,I]}function xhe(t,e,n){let r=!e||n.route.id!==e.route.id,s=t[n.route.id]===void 0;return r||s}function PG(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function v3(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function w3(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let s=n[t.id];st(s,"No route found in manifest");let i={};for(let o in r){let l=s[o]!==void 0&&o!=="hasErrorBoundary";nc(!l,'Route "'+s.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!Vde.has(o)&&(i[o]=r[o])}Object.assign(s,i),Object.assign(s,An({},e(s),{lazy:void 0}))}function She(t){return Promise.all(t.matches.map(e=>e.resolve()))}async function Che(t,e,n,r,s,i,o,a){let l=r.reduce((d,h)=>d.add(h.route.id),new Set),c=new Set,u=await t({matches:s.map(d=>{let h=l.has(d.route.id);return An({},d,{shouldLoad:h,resolve:p=>(c.add(d.route.id),h?Ehe(e,n,d,i,o,p,a):Promise.resolve({type:Bn.data,result:void 0}))})}),request:n,params:s[0].params,context:a});return s.forEach(d=>st(c.has(d.route.id),'`match.resolve()` was not called for route id "'+d.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),u.filter((d,h)=>l.has(s[h].route.id))}async function Ehe(t,e,n,r,s,i,o){let a,l,c=u=>{let d,h=new Promise((m,g)=>d=g);l=()=>d(),e.signal.addEventListener("abort",l);let f=m=>typeof u!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+t+'" [routeId: '+n.route.id+"]"))):u({request:e,params:n.params,context:o},...m!==void 0?[m]:[]),p;return i?p=i(m=>f(m)):p=(async()=>{try{return{type:"data",result:await f()}}catch(m){return{type:"error",result:m}}})(),Promise.race([p,h])};try{let u=n.route[t];if(n.route.lazy)if(u){let d,[h]=await Promise.all([c(u).catch(f=>{d=f}),w3(n.route,s,r)]);if(d!==void 0)throw d;a=h}else if(await w3(n.route,s,r),u=n.route[t],u)a=await c(u);else if(t==="action"){let d=new URL(e.url),h=d.pathname+d.search;throw po(405,{method:e.method,pathname:h,routeId:n.route.id})}else return{type:Bn.data,result:void 0};else if(u)a=await c(u);else{let d=new URL(e.url),h=d.pathname+d.search;throw po(404,{pathname:h})}st(a.result!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(u){return{type:Bn.error,result:u}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function _he(t){let{result:e,type:n,status:r}=t;if(FG(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Bn.error,error:a}}return n===Bn.error?{type:Bn.error,error:new $_(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Bn.data,data:o,statusCode:e.status,headers:e.headers}}if(n===Bn.error)return{type:Bn.error,error:e,statusCode:A_(e)?e.status:r};if($he(e)){var s,i;return{type:Bn.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((i=e.init)==null?void 0:i.headers)&&new Headers(e.init.headers)}}return{type:Bn.data,data:e,statusCode:r}}function The(t,e,n,r,s,i){let o=t.headers.get("Location");if(st(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!PD.test(o)){let a=r.slice(0,r.findIndex(l=>l.route.id===n)+1);o=CA(new URL(e.url),a,s,!0,o,i),t.headers.set("Location",o)}return t}function x3(t,e,n){if(PD.test(t)){let r=t,s=r.startsWith("//")?new URL(e.protocol+r):new URL(r),i=mi(s.pathname,n)!=null;if(s.origin===e.origin&&i)return s.pathname+s.search+s.hash}return t}function Sf(t,e,n,r){let s=t.createURL(LG(e)).toString(),i={signal:n};if(r&&ra(r.formMethod)){let{formMethod:o,formEncType:a}=r;i.method=o.toUpperCase(),a==="application/json"?(i.headers=new Headers({"Content-Type":a}),i.body=JSON.stringify(r.json)):a==="text/plain"?i.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?i.body=EA(r.formData):i.body=r.formData}return new Request(s,i)}function EA(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function S3(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function khe(t,e,n,r,s,i){let o={},a=null,l,c=!1,u={},d=r&&bo(r[1])?r[1].error:void 0;return n.forEach((h,f)=>{let p=e[f].route.id;if(st(!Bd(h),"Cannot handle redirect results in processLoaderData"),bo(h)){let m=h.error;d!==void 0&&(m=d,d=void 0),a=a||{};{let g=Ly(t,p);a[g.route.id]==null&&(a[g.route.id]=m)}o[p]=void 0,c||(c=!0,l=A_(h.error)?h.error.status:500),h.headers&&(u[p]=h.headers)}else zd(h)?(s.set(p,h.deferredData),o[p]=h.deferredData.data,h.statusCode!=null&&h.statusCode!==200&&!c&&(l=h.statusCode),h.headers&&(u[p]=h.headers)):(o[p]=h.data,h.statusCode&&h.statusCode!==200&&!c&&(l=h.statusCode),h.headers&&(u[p]=h.headers))}),d!==void 0&&r&&(a={[r[0]]:d},o[r[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:u}}function C3(t,e,n,r,s,i,o,a){let{loaderData:l,errors:c}=khe(e,n,r,s,a);for(let u=0;u<i.length;u++){let{key:d,match:h,controller:f}=i[u];st(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let p=o[u];if(!(f&&f.signal.aborted))if(bo(p)){let m=Ly(t.matches,h==null?void 0:h.route.id);c&&c[m.route.id]||(c=An({},c,{[m.route.id]:p.error})),t.fetchers.delete(d)}else if(Bd(p))st(!1,"Unhandled fetcher revalidation redirect");else if(zd(p))st(!1,"Unhandled fetcher deferred data");else{let m=Oc(p.data);t.fetchers.set(d,m)}}return{loaderData:l,errors:c}}function E3(t,e,n,r){let s=An({},e);for(let i of n){let o=i.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(s[o]=e[o]):t[o]!==void 0&&i.route.loader&&(s[o]=t[o]),r&&r.hasOwnProperty(o))break}return s}function _3(t){return t?bo(t[1])?{actionData:{}}:{actionData:{[t[0]]:t[1].data}}:{}}function Ly(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function T3(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function po(t,e){let{pathname:n,routeId:r,method:s,type:i}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",s&&n&&r?a="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":i==="defer-action"?a="defer() is not supported in actions":i==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",s&&n&&r?a="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(a='Invalid request method "'+s.toUpperCase()+'"')),new $_(t||500,o,new Error(a),!0)}function k3(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Bd(n))return{result:n,idx:e}}}function LG(t){let e=typeof t=="string"?Bo(t):t;return pa(An({},e,{hash:""}))}function Ihe(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Nhe(t){return FG(t.result)&&ghe.has(t.result.status)}function zd(t){return t.type===Bn.deferred}function bo(t){return t.type===Bn.error}function Bd(t){return(t&&t.type)===Bn.redirect}function $he(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function FG(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Ahe(t){return mhe.has(t.toLowerCase())}function ra(t){return fhe.has(t.toLowerCase())}async function I3(t,e,n,r,s,i){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(d=>d.route.id===l.route.id),u=c!=null&&!PG(c,l)&&(i&&i[l.route.id])!==void 0;if(zd(a)&&(s||u)){let d=r[o];st(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await MG(a,d,s).then(h=>{h&&(n[o]=h||n[o])})}}}async function MG(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Bn.data,data:t.deferredData.unwrappedData}}catch(s){return{type:Bn.error,error:s}}return{type:Bn.data,data:t.deferredData.data}}}function FD(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function _A(t,e){let n=typeof e=="string"?Bo(e).search:e.search;if(t[t.length-1].route.index&&FD(n||""))return t[t.length-1];let r=$G(t);return r[r.length-1]}function N3(t){let{formMethod:e,formAction:n,formEncType:r,text:s,formData:i,json:o}=t;if(!(!e||!n||!r)){if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:i,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function KI(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Rhe(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function iy(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Ohe(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Oc(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function Dhe(t,e){try{let n=t.sessionStorage.getItem(DG);if(n){let r=JSON.parse(n);for(let[s,i]of Object.entries(r||{}))i&&Array.isArray(i)&&e.set(s,new Set(i||[]))}}catch{}}function Phe(t,e){if(e.size>0){let n={};for(let[r,s]of e)n[r]=[...s];try{t.sessionStorage.setItem(DG,JSON.stringify(n))}catch(r){nc(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eu(){return Eu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Eu.apply(this,arguments)}const sg=N.createContext(null),T0=N.createContext(null),ES=N.createContext(null),Zi=N.createContext(null),ig=N.createContext(null),eo=N.createContext({outlet:null,matches:[],isDataRoute:!1}),zG=N.createContext(null);function BG(t,e){let{relative:n}=e===void 0?{}:e;Vu()||st(!1);let{basename:r,navigator:s}=N.useContext(Zi),{hash:i,pathname:o,search:a}=og(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Qa([r,o])),s.createHref({pathname:l,search:a,hash:i})}function Vu(){return N.useContext(ig)!=null}function Sa(){return Vu()||st(!1),N.useContext(ig).location}function Lhe(){return N.useContext(ig).navigationType}function Fhe(t){Vu()||st(!1);let{pathname:e}=Sa();return N.useMemo(()=>Cb(t,e),[e,t])}function jG(t){N.useContext(Zi).static||N.useLayoutEffect(t)}function Ks(){let{isDataRoute:t}=N.useContext(eo);return t?Qhe():Mhe()}function Mhe(){Vu()||st(!1);let t=N.useContext(sg),{basename:e,future:n,navigator:r}=N.useContext(Zi),{matches:s}=N.useContext(eo),{pathname:i}=Sa(),o=JSON.stringify(I_(s,n.v7_relativeSplatPath)),a=N.useRef(!1);return jG(()=>{a.current=!0}),N.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=N_(c,JSON.parse(o),i,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Qa([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,i,t])}const VG=N.createContext(null);function zhe(){return N.useContext(VG)}function UG(t){let e=N.useContext(eo).outlet;return e&&N.createElement(VG.Provider,{value:t},e)}function k0(){let{matches:t}=N.useContext(eo),e=t[t.length-1];return e?e.params:{}}function og(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=N.useContext(Zi),{matches:s}=N.useContext(eo),{pathname:i}=Sa(),o=JSON.stringify(I_(s,r.v7_relativeSplatPath));return N.useMemo(()=>N_(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function WG(t,e){return HG(t,e)}function HG(t,e,n,r){Vu()||st(!1);let{navigator:s}=N.useContext(Zi),{matches:i}=N.useContext(eo),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Sa(),u;if(e){var d;let g=typeof e=="string"?Bo(e):e;l==="/"||(d=g.pathname)!=null&&d.startsWith(l)||st(!1),u=g}else u=c;let h=u.pathname||"/",f=h;if(l!=="/"){let g=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=Md(t,{pathname:f}),m=GG(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Qa([l,s.encodeLocation?s.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Qa([l,s.encodeLocation?s.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),i,n,r);return e&&m?N.createElement(ig.Provider,{value:{location:Eu({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:_n.Pop}},m):m}function Bhe(){let t=YG(),e=A_(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return N.createElement(N.Fragment,null,N.createElement("h2",null,"Unexpected Application Error!"),N.createElement("h3",{style:{fontStyle:"italic"}},e),n?N.createElement("pre",{style:s},n):null,null)}const jhe=N.createElement(Bhe,null);class Vhe extends N.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?N.createElement(eo.Provider,{value:this.props.routeContext},N.createElement(zG.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Uhe(t){let{routeContext:e,match:n,children:r}=t,s=N.useContext(sg);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),N.createElement(eo.Provider,{value:e},r)}function GG(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);u>=0||st(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,m=null,g=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||jhe,l&&(c<0&&h===0?(Jhe("route-fallback"),p=!0,g=null):c===h&&(p=!0,g=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),b=()=>{let v;return f?v=m:p?v=g:d.route.Component?v=N.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=u,N.createElement(Uhe,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?N.createElement(Vhe,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:b(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):b()},null)}var R_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(R_||{}),gi=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(gi||{});function MD(t){let e=N.useContext(sg);return e||st(!1),e}function Uu(t){let e=N.useContext(T0);return e||st(!1),e}function Whe(t){let e=N.useContext(eo);return e||st(!1),e}function I0(t){let e=Whe(),n=e.matches[e.matches.length-1];return n.route.id||st(!1),n.route.id}function KG(){return I0(gi.UseRouteId)}function qG(){return Uu(gi.UseNavigation).navigation}function Hhe(){let t=MD(R_.UseRevalidator),e=Uu(gi.UseRevalidator);return N.useMemo(()=>({revalidate:t.router.revalidate,state:e.revalidation}),[t.router.revalidate,e.revalidation])}function XG(){let{matches:t,loaderData:e}=Uu(gi.UseMatches);return N.useMemo(()=>t.map(n=>TG(n,e)),[t,e])}function Ghe(){let t=Uu(gi.UseLoaderData),e=I0(gi.UseLoaderData);if(t.errors&&t.errors[e]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+e+")");return}return t.loaderData[e]}function Khe(t){return Uu(gi.UseRouteLoaderData).loaderData[t]}function qhe(){let t=Uu(gi.UseActionData),e=I0(gi.UseLoaderData);return t.actionData?t.actionData[e]:void 0}function YG(){var t;let e=N.useContext(zG),n=Uu(gi.UseRouteError),r=I0(gi.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function QG(){let t=N.useContext(ES);return t==null?void 0:t._data}function Xhe(){let t=N.useContext(ES);return t==null?void 0:t._error}let Yhe=0;function JG(t){let{router:e,basename:n}=MD(R_.UseBlocker),r=Uu(gi.UseBlocker),[s,i]=N.useState(""),o=N.useCallback(a=>{if(typeof t!="function")return!!t;if(n==="/")return t(a);let{currentLocation:l,nextLocation:c,historyAction:u}=a;return t({currentLocation:Eu({},l,{pathname:mi(l.pathname,n)||l.pathname}),nextLocation:Eu({},c,{pathname:mi(c.pathname,n)||c.pathname}),historyAction:u})},[n,t]);return N.useEffect(()=>{let a=String(++Yhe);return i(a),()=>e.deleteBlocker(a)},[e]),N.useEffect(()=>{s!==""&&e.getBlocker(s,o)},[e,s,o]),s&&r.blockers.has(s)?r.blockers.get(s):Mf}function Qhe(){let{router:t}=MD(R_.UseNavigateStable),e=I0(gi.UseNavigateStable),n=N.useRef(!1);return jG(()=>{n.current=!0}),N.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Eu({fromRouteId:e},i)))},[t,e])}const $3={};function Jhe(t,e,n){$3[t]||($3[t]=!0)}const Zhe="startTransition",A3=hu[Zhe];function efe(t){let{basename:e,children:n,initialEntries:r,initialIndex:s,future:i}=t,o=N.useRef();o.current==null&&(o.current=SG({initialEntries:r,initialIndex:s,v5Compat:!0}));let a=o.current,[l,c]=N.useState({action:a.action,location:a.location}),{v7_startTransition:u}=i||{},d=N.useCallback(h=>{u&&A3?A3(()=>c(h)):c(h)},[c,u]);return N.useLayoutEffect(()=>a.listen(d),[a,d]),N.createElement(ag,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:a,future:i})}function tfe(t){let{to:e,replace:n,state:r,relative:s}=t;Vu()||st(!1);let{future:i,static:o}=N.useContext(Zi),{matches:a}=N.useContext(eo),{pathname:l}=Sa(),c=Ks(),u=N_(e,I_(a,i.v7_relativeSplatPath),l,s==="path"),d=JSON.stringify(u);return N.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function zD(t){return UG(t.context)}function ZG(t){st(!1)}function ag(t){let{basename:e="/",children:n=null,location:r,navigationType:s=_n.Pop,navigator:i,static:o=!1,future:a}=t;Vu()&&st(!1);let l=e.replace(/^\/*/,"/"),c=N.useMemo(()=>({basename:l,navigator:i,static:o,future:Eu({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof r=="string"&&(r=Bo(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,m=N.useMemo(()=>{let g=mi(u,l);return g==null?null:{location:{pathname:g,search:d,hash:h,state:f,key:p},navigationType:s}},[l,u,d,h,f,p,s]);return m==null?null:N.createElement(Zi.Provider,{value:c},N.createElement(ig.Provider,{children:n,value:m}))}function nfe(t){let{children:e,location:n}=t;return WG(Eb(e),n)}function rfe(t){let{children:e,errorElement:n,resolve:r}=t;return N.createElement(ife,{resolve:r,errorElement:n},N.createElement(ofe,null,e))}var uo=function(t){return t[t.pending=0]="pending",t[t.success=1]="success",t[t.error=2]="error",t}(uo||{});const sfe=new Promise(()=>{});class ife extends N.Component{constructor(e){super(e),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}componentDidCatch(e,n){console.error("<Await> caught the following error during render",e,n)}render(){let{children:e,errorElement:n,resolve:r}=this.props,s=null,i=uo.pending;if(!(r instanceof Promise))i=uo.success,s=Promise.resolve(),Object.defineProperty(s,"_tracked",{get:()=>!0}),Object.defineProperty(s,"_data",{get:()=>r});else if(this.state.error){i=uo.error;let o=this.state.error;s=Promise.reject().catch(()=>{}),Object.defineProperty(s,"_tracked",{get:()=>!0}),Object.defineProperty(s,"_error",{get:()=>o})}else r._tracked?(s=r,i=s._error!==void 0?uo.error:s._data!==void 0?uo.success:uo.pending):(i=uo.pending,Object.defineProperty(r,"_tracked",{get:()=>!0}),s=r.then(o=>Object.defineProperty(r,"_data",{get:()=>o}),o=>Object.defineProperty(r,"_error",{get:()=>o})));if(i===uo.error&&s._error instanceof CS)throw sfe;if(i===uo.error&&!n)throw s._error;if(i===uo.error)return N.createElement(ES.Provider,{value:s,children:n});if(i===uo.success)return N.createElement(ES.Provider,{value:s,children:e});throw s}}function ofe(t){let{children:e}=t,n=QG(),r=typeof e=="function"?e(n):e;return N.createElement(N.Fragment,null,r)}function Eb(t,e){e===void 0&&(e=[]);let n=[];return N.Children.forEach(t,(r,s)=>{if(!N.isValidElement(r))return;let i=[...e,s];if(r.type===N.Fragment){n.push.apply(n,Eb(r.props.children,i));return}r.type!==ZG&&st(!1),!r.props.index||!r.props.children||st(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Eb(r.props.children,i)),n.push(o)}),n}function afe(t){return GG(t)}function BD(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:N.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:N.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:N.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}function lfe(t,e){return LD({basename:e==null?void 0:e.basename,future:Eu({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:SG({initialEntries:e==null?void 0:e.initialEntries,initialIndex:e==null?void 0:e.initialIndex}),hydrationData:e==null?void 0:e.hydrationData,routes:t,mapRouteProperties:BD,unstable_dataStrategy:e==null?void 0:e.unstable_dataStrategy}).initialize()}const cfe=()=>{const t=N.useRef(null),[e,n]=N.useState(!1),[r,s]=N.useState(!1),[i,o]=N.useState(!1),[a,l]=N.useState(0),c=N.useRef(null),u=Ks(),d=h=>{alert(h),l(f=>{const p=f+1;return p>=3&&(t.current.srcObject.getTracks().forEach(m=>m.stop()),alert("Test submitted due to multiple warnings."),u("/assessmentid/guidlinesvoilated")),p})};return N.useEffect(()=>{const h=async()=>{try{const p=await navigator.mediaDevices.getUserMedia({video:!0});t.current&&(t.current.srcObject=p)}catch(p){console.error("Error accessing camera:",p)}},f=async()=>{const p=await Fde(),m=await Bde.load(),g=async()=>{if(t.current){const y=await p.estimateFaces(t.current);y.length>1?(d("Multiple faces detected. Click OK to continue."),o(!0)):o(!1),y.length===0?c.current=setTimeout(()=>{d("No face detected for 10 seconds. Click OK to continue."),n(!0)},3e4):(clearTimeout(c.current),n(!1));const b=await m.detect(t.current),v=["cell phone","laptop","tablet"];b.some(C=>v.includes(C.class))?(d("Electronic gadget detected. Click OK to continue."),s(!0)):s(!1),requestAnimationFrame(g)}};g()};return h(),f(),()=>{t.current&&t.current.srcObject&&t.current.srcObject.getTracks().forEach(p=>p.stop())}},[]),$.jsxs("div",{children:[$.jsx("video",{ref:t,autoPlay:!0,playsInline:!0,style:{width:"100%"}})," "]})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const e5={kernelName:Zb,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Y(t,jh($e(n,"float32"),-1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ufe={kernelName:nm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=rn($e(n,"float32")),s=Lr(Fe(tt(1),r));return yn(Ue(t,s))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dfe={kernelName:rm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Lr(Fe(rn($e(n,"float32")),1));return Ue(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hfe={kernelName:Lh,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=yt(n.shape,r.shape);return{a:()=>{let a=t;const l=hr(n.shape,s);return l.length>0&&(a=qe(a,l)),ee(a,n.shape)},b:()=>{let a=t;const l=hr(r.shape,s);return l.length>0&&(a=qe(a,l)),ee(a,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ffe={kernelName:ev,saveAllInputs:!0,gradFunc:(t,e)=>{const n={};return e.forEach((r,s)=>{n[s]=()=>t.clone()}),n}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pfe={kernelName:tv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Dt(n)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mfe={kernelName:nv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Dt(n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gfe={kernelName:sm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,Lr(Fe(tt(1),rn($e(n,"float32")))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yfe={kernelName:im,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Lr(xe(tt(1),rn($e(n,"float32"))));return Ue(t,r)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bfe={kernelName:lm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=yt(n.shape,r.shape);return{a:()=>{const a=xe(rn(n),rn(r));let l=Y(t,Ue(r,a));const c=hr(n.shape,s);return c.length>0&&(l=qe(l,c)),ee(l,n.shape)},b:()=>{const a=xe(rn(n),rn(r));let l=yn(Y(t,Ue(n,a)));const c=hr(r.shape,s);return c.length>0&&(l=qe(l,c)),ee(l,r.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vfe={kernelName:om,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,xe(rn($e(n,"float32")),1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wfe={kernelName:am,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,Fe(tt(1),rn($e(n,"float32"))))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xfe(t,e,n,r,s,i){const o=F(t,"dy","avgPool3dGrad"),a=F(e,"input","avgPool3dGrad");let l=o,c=a,u=!1;a.rank===4&&(u=!0,l=ee(o,[1,o.shape[0],o.shape[1],o.shape[2],o.shape[3]]),c=ee(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]])),P(l.rank===5,()=>`Error in avgPool3dGrad: dy must be rank 5 but got rank ${l.rank}.`),P(c.rank===5,()=>`Error in avgPool3dGrad: input must be rank 5 but got rank ${c.rank}.`),Ss("avgPool3dGrad",s,i);const d={dy:l,input:c},h={filterSize:n,strides:r,pad:s,dimRoundingMode:i},f=K.runKernel(LC,d,h);return u?ee(f,[f.shape[1],f.shape[2],f.shape[3],f.shape[4]]):f}const Sfe=q({avgPool3dGrad_:xfe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cfe={kernelName:sv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o,dimRoundingMode:a}=n;return{x:()=>Sfe(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Efe(t,e,n,r,s){const i=F(t,"dy","avgPoolGrad"),o=F(e,"input","avgPoolGrad");P(o.rank===i.rank,()=>`Rank of input (${o.rank}) does not match rank of dy (${i.rank})`);let a=o,l=i,c=!1;o.rank===3&&(c=!0,a=ee(o,[1,o.shape[0],o.shape[1],o.shape[2]]),l=ee(i,[1,i.shape[0],i.shape[1],i.shape[2]])),P(l.rank===4,()=>`Error in avgPoolGrad: dy must be rank 4 but got rank ${l.rank}.`),P(a.rank===4,()=>`Error in avgPoolGrad: input must be rank 4 but got rank ${a.rank}.`);const u={dy:l,input:a},d={filterSize:n,strides:r,pad:s},h=K.runKernel(PC,u,d);return c?ee(h,[h.shape[1],h.shape[2],h.shape[3]]):h}const _fe=q({avgPoolGrad_:Efe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tfe={kernelName:rv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{filterSize:s,strides:i,pad:o}=n;return{x:()=>_fe(t,r,s,i,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kfe={kernelName:iv,inputsToSave:["a","b"],gradFunc:(t,e,n)=>{const[r,s]=e,{transposeA:i,transposeB:o}=n;return!i&&!o?{a:()=>Et(t,s,!1,!0),b:()=>Et(r,t,!0,!1)}:!i&&o?{a:()=>Et(t,s,!1,!1),b:()=>Et(t,r,!0,!1)}:i&&!o?{a:()=>Et(s,t,!1,!0),b:()=>Et(r,t,!1,!1)}:{a:()=>Et(s,t,!0,!0),b:()=>Et(t,r,!0,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ife={kernelName:ov,gradFunc:(t,e,n)=>{const{blockShape:r,crops:s}=n;return{x:()=>g0(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nfe={kernelName:U4,gradFunc:(t,e,n)=>{const r=n,s=r.inputShape,i=r.shape,o=Array.from(i);for(let l=s.length-1;l>=0;l--)if(s[l]===i[l])o[l]=1;else if(s[l]!==1)throw new Error(`broadcastTo(): [${s}] cannot be broadcast to [${i}].`);const a=[];for(let l=0;l<o.length;l++)o[l]>1&&a.push(l);return{x:()=>qe(t,a,!0)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $fe={kernelName:cm,gradFunc:t=>({x:()=>t.clone()})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Afe={kernelName:um,gradFunc:t=>({x:()=>Dt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rfe={kernelName:dm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{clipValueMin:s,clipValueMax:i}=n;return{x:()=>Wr(fa(hc(r,s),zu(r,i)),t,Dt(t))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ofe={kernelName:lv,inputsToSave:["x"],gradFunc:e5.gradFunc};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dfe={kernelName:cv,saveAllInputs:!0,gradFunc:(t,e,n)=>{const r=e.map(l=>l.shape),{axis:s}=n,i=Tt(s,e[0].shape)[0],o=r.map(l=>l[i]);return Ps(t,o,i).map(l=>()=>l)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pfe={kernelName:uv,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{dilations:i,strides:o,pad:a,dataFormat:l}=n;return P(xu(i),()=>`Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${i}'`),{x:()=>aO(r.shape,t,s,o,a,l),filter:()=>XO(r,t,s.shape,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lfe={kernelName:dv,inputsToSave:["dy","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,{strides:i,pad:o,dataFormat:a,dimRoundingMode:l}=n;return{dy:()=>Zl(t,s,i,o,a,1,l),filter:()=>XO(t,r,s.shape,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ffe(t,e,n,r,s){let i=t;t.rank===4&&(i=ee(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]));let o=e;o.rank===4&&(o=ee(e,[1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]])),P(i.rank===5,()=>`Error in conv3dDerFilter: input must be rank 5, but got shape ${i.shape}.`),P(o.rank===5,()=>`Error in conv3dDerFilter: dy must be rank 5, but got shape ${o.shape}.`),P(n.length===5,()=>`Error in conv3dDerFilter: filterShape must be length 5, but got ${n}.`),P(i.shape[4]===n[3],()=>`Error in conv3dDerFilter: depth of input ${i.shape[4]}) must match input depth in filter (${n[3]}.`),P(o.shape[4]===n[4],()=>`Error in conv3dDerFilter: depth of dy (${o.shape[4]}) must match output depth for filter (${n[4]}).`);const a={x:i,dy:o},l={strides:r,pad:s,filterShape:n};return K.runKernel(jC,a,l)}const Mfe=q({conv3DBackpropFilter_:Ffe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zfe={kernelName:hv,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i}=n;P(xu(r),()=>`Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${r}'`);const[o,a]=e;return{x:()=>NW(o.shape,t,a,s,i),filter:()=>Mfe(o,t,a.shape,s,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bfe={kernelName:hm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Y(yn(i_($e(n,"float32"))),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jfe={kernelName:fm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Y(o_($e(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vfe={kernelName:fv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s,exclusive:i,reverse:o}=n;return{x:()=>{const a=Gn([s],r.rank);let l=HE(t,s,i,!o);return a!=null&&(l=$t(l,a)),l}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ufe={kernelName:pv,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const{dilations:r,strides:s,pad:i,dimRoundingMode:o}=n,a=r??[1,1];P(xu(a),()=>`Error in gradient of depthwiseConv2dNative: dilation rates greater than 1 are not yet supported. Got dilations '${a}'`);const[l,c]=e;return P(l.rank===4,()=>`Error in gradient of depthwiseConv2dNative: input must be rank 4, but got rank ${l.rank}.`),P(c.rank===4,()=>`Error in gradient of depthwiseConv2dNative: filter must be rank 4, but got rank ${c.rank}.`),P(l.shape[3]===c.shape[2],()=>`Error in gradient of depthwiseConv2d: number of input channels (${l.shape[3]}) must match the inChannels dimension in filter ${c.shape[2]}.`),P(Kr(s,a),()=>`Error in gradient of depthwiseConv2d: Either strides or dilations must be  1. Got strides ${s} and dilations '${a}'.`),Ss("depthwiseConv2d",i,o),{x:()=>wH(l.shape,t,c,s,i,a,o),filter:()=>vH(l,t,c.shape,s,i,a,o)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wfe={kernelName:mv,inputsToSave:["x","filter"],gradFunc:(t,e,n)=>{const[r,s]=e,i={x:r,filter:s,dy:t},o={x:r,filter:s,dy:t};return{x:()=>K.runKernel(fS,i,n),filter:()=>K.runKernel(pS,o,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hfe={kernelName:mm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e,r={dy:t,y:n};return{x:()=>K.runKernel(JC,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gfe={kernelName:gm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Y(js(yn(rn(n))),2/Math.sqrt(Math.PI));return{x:()=>Y(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kfe={kernelName:ym,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Y(t,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qfe={kernelName:yv,inputsToSave:["input"],gradFunc:(t,e)=>{const[n]=e;return{input:()=>ee(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xfe={kernelName:bm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Y(t,js(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yfe={kernelName:vm,gradFunc:t=>({x:()=>Dt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qfe={kernelName:wm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=yt(n.shape,r.shape);return{a:()=>{const a=Ue(t,$e(r,"float32")),l=hr(n.shape,s);return l.length>0?ee(qe(a,l),n.shape):a},b:()=>{let a=Y(t,$e(n,"float32"));const l=hr(r.shape,s);l.length>0&&(a=ee(qe(a,l),r.shape));const c=rn(r);return yn(Ue(a,$e(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jfe={kernelName:bv,inputsToSave:["x","mean","variance","scale"],gradFunc:(t,e,n)=>{const{varianceEpsilon:r}=n,[s,i,o,a]=e,l=a??tt(1),c=hr(i.shape,s.shape),u=[];if(i.rank===1){for(let w=0;w<s.shape.length-1;++w)u.push(s.shape[w]);u.push(1)}const d=Fe(s,i),h=Y(t,l),f=n_(xe(o,tt(r))),p=Y(Y(Y(f,f),f),tt(-.5));return{x:()=>i.rank===1?ee(Y(Y(t,Li(ee(f,[1,1,1,i.shape[0]]),u)),l),s.shape):ee(Y(Y(t,f),l),s.shape),mean:()=>{let w=Y(Y(f,tt(-1)),h);return i.rank===1&&(w=qe(w,c)),ee(w,i.shape)},variance:()=>{let w=Y(Y(p,d),h);return i.rank===1&&(w=qe(w,c)),ee(w,i.shape)},scale:()=>{const w=Y(d,f);let C=Y(t,w);return i.rank===1&&(C=qe(C,c)),ee(C,i.shape)},offset:()=>{let w=t;return i.rank===1&&(w=qe(w,c)),ee(w,i.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zfe={kernelName:vv,inputsToSave:["x","indices"],gradFunc:(t,e,n)=>{const[r,s]=e,{axis:i,batchDims:o}=n,a=Tt(i,r.shape)[0],l=(c,u,d)=>()=>{const h=c.shape,f=u.size,p=h.slice(0,a),m=p.length,g=h.slice(i,h.length).slice(1),y=g.length,b=R3(0,m),v=R3(m+1,m+1+y),w=O3([p,[f],g]),C=ee(d,w),_=ee(u,[f]),E=O3([[m],b,v]),I=$t(C,E);let O=h_(I,_,c.shape[a]);const R=Mu(E);return O=$t(O,R),O};if(o===1){const c=r.shape[0],u=r.split(c,0);return{x:()=>Vs(u.map((f,p)=>l(f,s.slice(p,1),t.slice(p,1))())).reshape(r.shape),indices:()=>s}}else return{x:l(r,s,t),indices:()=>s}}};function R3(t,e){const n=[];for(let r=t;r<e;++r)n.push(r);return n}function O3(t){const e=[];for(let n=0;n<t.length;++n)for(let r=0;r<t[n].length;++r)e.push(t[n][r]);return e}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const epe={kernelName:xm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Dt(n),b:()=>Dt(r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tpe={kernelName:Sm,gradFunc:t=>({x:()=>$e(t,"float32")})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const npe={kernelName:Cm,gradFunc:t=>({x:()=>Dt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rpe={kernelName:Em,gradFunc:t=>({x:()=>Dt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const spe={kernelName:_m,gradFunc:t=>({x:()=>Dt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ipe={kernelName:xv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{alpha:s}=n,i=Gs(r,0);return{x:()=>Wr(i,t,Y(t,s))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ope={kernelName:km,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,xe(n,1))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ape={kernelName:Tm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,$e(n,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lpe={kernelName:W4,inputsToSave:[],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;return{logits:()=>{const o=js(r);return Fe(t,Y(qe(t,s,!0),o))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cpe(t,e,n,r=5,s=1,i=1,o=.5){const a={x:t,y:e,dy:n},l={depthRadius:r,bias:s,alpha:i,beta:o};return K.runKernel(oE,a,l)}const upe=q({localResponseNormalizationBackprop_:cpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dpe={kernelName:kv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{depthRadius:i,bias:o,alpha:a,beta:l}=n;return{x:()=>upe(r,s,t,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t5(t,e,n,r){return e.rank<n.rank&&(e=ee(e,sr(e.shape,r))),t.rank<n.rank&&(t=ee(t,sr(t.shape,r))),{x:()=>Y(t,$e(Lo(n,e),t.dtype))}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D3={kernelName:Iv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{reductionIndices:s}=r,i=e[0],o=e[1],a=Tt(s,i.shape),l=t5(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hpe={kernelName:Im,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Y(t,$e(hc(n,r),"float32")),b:()=>Y(t,$e(Rp(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fpe(t,e,n,r,s,i,o){const a=F(t,"dy","maxPool3dGrad"),l=F(e,"input","maxPool3dGrad"),c=F(n,"output","maxPool3dGrad");let u=a,d=l,h=c,f=!1;l.rank===4&&(f=!0,u=ee(a,[1,a.shape[0],a.shape[1],a.shape[2],a.shape[3]]),d=ee(l,[1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]]),h=ee(c,[1,c.shape[0],c.shape[1],c.shape[2],c.shape[3]])),P(u.rank===5,()=>`Error in maxPool3dGrad: dy must be rank 5 but got rank ${u.rank}.`),P(d.rank===5,()=>`Error in maxPool3dGrad: input must be rank 5 but got rank ${d.rank}.`),P(h.rank===5,()=>`Error in maxPool3dGrad: output must be rank 5 but got rank ${h.rank}.`),Ss("maxPool3dGrad",i,o);const p={dy:u,input:d,output:h},m={filterSize:r,strides:s,pad:i,dimRoundingMode:o},g=K.runKernel(lE,p,m);return f?ee(g,[g.shape[1],g.shape[2],g.shape[3],g.shape[4]]):g}const ppe=q({maxPool3dGrad_:fpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mpe={kernelName:$v,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=n;return{x:()=>ppe(t,r,s,i,o,a,l)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gpe(t,e,n,r,s,i,o){const a=F(t,"dy","maxPoolGrad"),l=F(e,"input","maxPoolGrad"),c=F(n,"output","maxPoolGrad");P(l.rank===a.rank,()=>`Rank of input (${l.rank}) does not match rank of dy (${a.rank})`),P(a.rank===4,()=>`Error in maxPoolGrad: dy must be rank 4 but got rank ${a.rank}.`),P(l.rank===4,()=>`Error in maxPoolGrad: input must be rank 4 but got rank ${l.rank}.`),Ss("maxPoolGrad",i,o);const u={dy:a,input:l,output:c},d={filterSize:r,strides:s,pad:i,dimRoundingMode:o};return K.runKernel(aE,u,d)}const ype=q({maxPoolGrad_:gpe});/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bpe={kernelName:Nv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r,s]=e,{filterSize:i,strides:o,pad:a}=n;return{x:()=>ype(t,r,s,i,o,a)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vpe={kernelName:Av,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n,i=Tt(s,r.shape),a=Mr(r.shape,i)[1],l=fe(a);return{x:()=>{const u=r.shape.slice();i.forEach(f=>{u[f]=1});const d=ee(t,u);return Ue(Y(d,Os(r.shape,"float32")),l)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wpe={kernelName:Rv,inputsToSave:["x"],outputsToSave:[!0],gradFunc:(t,e,n)=>{const r=n,{axis:s}=r,[i,o]=e,a=Tt(s,i.shape),l=t5(t,o,i,a);return{x:()=>l.x()}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xpe={kernelName:Nm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e;return{a:()=>Y(t,$e(zu(n,r),"float32")),b:()=>Y(t,$e(Gs(n,r),"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Spe={kernelName:Ov,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>ot(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Cpe={kernelName:$m,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=yt(n.shape,r.shape);return{a:()=>{const a=hr(n.shape,s);return a.length>0?ee(qe(t,a),n.shape):t},b:()=>{const a=Y(t,yn(tg(Ue(n,r)))),l=hr(r.shape,s);return l.length>0?ee(qe(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Epe={kernelName:Am,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=yt(n.shape,r.shape);return{a:()=>{const a=Y(t,$e(r,"float32")),l=hr(n.shape,s);return l.length>0?ee(qe(a,l),n.shape):a},b:()=>{const a=Y(t,$e(n,"float32")),l=hr(r.shape,s);return l.length>0?ee(qe(a,l),r.shape):a}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _pe={kernelName:Dv,gradFunc:t=>({x:()=>yn(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tpe={kernelName:Fv,inputsToSave:["indices"],gradFunc:(t,e)=>{const n=e[0];return{indices:()=>ur(n.shape,"float32")}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kpe={kernelName:Lv,gradFunc:t=>({x:()=>Dt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ipe={kernelName:Mv,saveAllInputs:!0,gradFunc:(t,e,n)=>{const{axis:r}=n;return Ki(t,r).map(i=>()=>i)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const P3={kernelName:zv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const r=e[0],{paddings:s}=n,i=s.map(o=>o[0]);return{x:()=>ot(t,i,r.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Npe={kernelName:Rm,inputsToSave:["a","b"],outputsToSave:[!0],gradFunc:(t,e)=>{const[n,r,s]=e,i=n,o=r,a=yt(i.shape,o.shape);return{a:()=>{const u=$e(o,"float32");let d=Y(t,Y(u,ll(i,Fe(u,tt(1)))));const h=hr(i.shape,a);return h.length>0&&(d=qe(d,h)),ee(d,i.shape)},b:()=>{const u=Gs(i,0),d=Wr(u,fi(i),Dt(i));let h=Y(t,Y(s,d));const f=hr(o.shape,a);return f.length>0&&(h=qe(h,f)),ee(h,o.shape)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $pe={kernelName:Bv,inputsToSave:["x","alpha"],gradFunc:(t,e)=>{const[n,r]=e,s=Gs(n,0);return{x:()=>Wr(s,t,Y(t,r)),alpha:()=>{let i=Wr(s,Dt(t),Y(t,n));const o=hr(r.shape,t.shape);return o.length>0&&(i=qe(i,o)),ee(i,r.shape)}}}};/**
 * @license
 * Copyright 2022 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ape(t,e,n){const r=t.shape.slice();r[n]=1;const s=ee(e,r),i=Sb(t,n,!0,!1),o=Sb(t,n,!0,!0),a=Y(i,o);return Y(s,a)}function Rpe(t,e,n){const r=t.shape.length,s=r-n.length,i=Gn(n,r);let o=t;i!=null&&(o=$t(t,i));const a=o.shape.slice(),c=a.splice(r-n.length,n.length).reduce((h,f)=>h*f,1);a.push(c);const u=o.reshape(a);let d=Ape(u,e,s);if(d=d.reshape(o.shape),i!=null){const h=Mu(i);d=$t(d,h)}return d}const Ope={kernelName:jv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{axis:s}=n;let i=[];return s==null?i=r.shape.map((o,a)=>a):typeof s=="number"?i=[s]:i=s,{x:()=>Rpe(r,t,i)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dpe={kernelName:pm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=yt(n.shape,r.shape);return{a:()=>{const a=Ue(t,$e(r,"float32")),l=hr(n.shape,s);return l.length>0?ee(qe(a,l),n.shape):a},b:()=>{let a=Y(t,$e(n,"float32"));const l=hr(r.shape,s);l.length>0&&(a=ee(qe(a,l),r.shape));const c=rn(r);return yn(Ue(a,$e(c,"float32")))}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ppe={kernelName:Om,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,yn(rn(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lpe={kernelName:Pm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e,r=Y(zu(n,6),jh(n));return{x:()=>Y(t,$e(r,"float32"))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fpe={kernelName:Dm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Y(t,$e(jh(n),"float32"))}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mpe={kernelName:Vv,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>ee(t,n.shape)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zpe={kernelName:Wv,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>K.runKernel(wE,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Bpe={kernelName:Uv,inputsToSave:["images"],gradFunc:(t,e,n)=>{const[r]=e,s={dy:t,images:r};return{images:()=>K.runKernel(vE,s,n)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jpe={kernelName:Hv,gradFunc:(t,e,n)=>{const{dims:r}=n,s=Tt(r,t.shape);return{x:()=>Gi(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Vpe={kernelName:Lm,gradFunc:t=>({x:()=>Dt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Upe={kernelName:Fm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>yn(Ue(t,Y(ll(n,1.5),2)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Wpe={kernelName:Gv,inputsToSave:["condition"],gradFunc:(t,e)=>{const[n]=e;return{condition:()=>$e(Dt(n),"float32"),t:()=>Y(t,$e(n,t.dtype)),e:()=>Y(t,$e(f0(n),t.dtype))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hpe={kernelName:Mm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>{const r=Gs(n,tt(0)),s=tt(T_),i=tt(k_),o=Y(t,i),a=Y(Y(t,s),js($e(n,"float32")));return Wr(r,o,a)}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gpe={kernelName:Vm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Y(t,Y(n,Fe(tt(1),n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kpe={kernelName:jm,gradFunc:t=>({x:()=>Dt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qpe={kernelName:zm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Y(l0($e(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Xpe={kernelName:Bm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Y(WE($e(n,"float32")),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ype={kernelName:Kv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{begin:s,size:i}=n,o=r.shape,[a,l]=E_(r,s,i),c=[];for(let u=0;u<t.rank;u++)c.push([a[u],o[u]-a[u]-l[u]]);return{x:()=>fc(t,c)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qpe={kernelName:Qv,outputsToSave:[!0],gradFunc:(t,e,n)=>{const[r]=e,{dim:s}=n,i=!0,o=Y(t,r);return{logits:()=>Fe(o,Y(qe(o,[s],i),r))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jpe={kernelName:Um,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Y(t,$o(n))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L3={kernelName:Xv,gradFunc:(t,e,n)=>{const{blockShape:r,paddings:s}=n;return{x:()=>o0(t,r,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F3={kernelName:Yv,gradFunc:(t,e,n)=>{const{axis:r}=n;return{x:()=>Wn(t,r)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Zpe={kernelName:Wm,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,Y(Lr($e(n,"float32")),2))}}};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eme={kernelName:NE,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Y(t,Y($e(n,"float32"),2))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tme={kernelName:Hm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=tt(2);return{a:()=>Y(t,Y(s,Fe(n,r))),b:()=>Y(t,Y(s,Fe(r,n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const nme={kernelName:Ym,gradFunc:t=>({x:()=>Dt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rme={kernelName:Gm,inputsToSave:["a","b"],gradFunc:(t,e)=>{const[n,r]=e,s=yt(n.shape,r.shape);return{a:()=>{let a=t;const l=hr(n.shape,s);return l.length>0&&(a=qe(a,l)),ee(a,n.shape)},b:()=>{let a=t;const l=hr(r.shape,s);return l.length>0&&(a=qe(a,l)),ee(yn(a),r.shape)}}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sme={kernelName:qv,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,s=r.shape.slice(),{axis:i}=n;Tt(i,r.shape).forEach(c=>{s[c]=1});const a=ee(t,s),l=Y(a,Os(r.shape,"float32"));return{x:()=>l}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ime={kernelName:Km,inputsToSave:["x"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Ue(t,rn(l0(n)))}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ome={kernelName:qm,outputsToSave:[!0],gradFunc:(t,e)=>{const[n]=e;return{x:()=>Y(Fe(tt(1),rn(n)),t)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ame={kernelName:Xm,inputsToSave:["x"],gradFunc:(t,e,n)=>{const[r]=e,{reps:s}=n;return{x:()=>{let o=Dt(r);if(r.rank===1)for(let a=0;a<s[0];++a)o=xe(o,ot(t,[a*r.shape[0]],[r.shape[0]]));else if(r.rank===2)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)o=xe(o,ot(t,[a*r.shape[0],l*r.shape[1]],[r.shape[0],r.shape[1]]));else if(r.rank===3)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)o=xe(o,ot(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else if(r.rank===4)for(let a=0;a<s[0];++a)for(let l=0;l<s[1];++l)for(let c=0;c<s[2];++c)for(let u=0;u<s[3];++u)o=xe(o,ot(t,[a*r.shape[0],l*r.shape[1],c*r.shape[2],u*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]));else throw new Error(`Gradient for tile operation is not implemented for rank-${r.rank} tensors yet.`);return o}}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lme={kernelName:qd,gradFunc:(t,e,n)=>{const r=n,{perm:s}=r,i=Mu(s);return{x:()=>$t(t,i)}}};/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cme={kernelName:Zv,gradFunc:(t,e,n)=>{const r=n,{axis:s}=r;return{value:()=>Vs(t,s)}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ume={kernelName:e0,inputsToSave:["segmentIds"],gradFunc:(t,e)=>{const[n]=e;return{x:()=>dme(t,n)}}};function dme(t,e){const n=ml(e,Dt(e)),r=ng(t,n);let s=hc(e,tt(0,"int32"));const i=r.rank-s.rank;for(let a=0;a<i;++a)s=Br(s,a+1);s=fa(s,Os(r.shape,"bool"));const o=Dt(r);return Wr(s,r,o)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hme={kernelName:t0,gradFunc:t=>({x:()=>Dt(t)})};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const fme=[e5,ufe,dfe,hfe,ffe,pfe,mfe,gfe,yfe,bfe,vfe,wfe,Cfe,Tfe,kfe,Ife,Nfe,$fe,Afe,Rfe,Ofe,Dfe,Lfe,Pfe,zfe,Bfe,jfe,Vfe,Ufe,Wfe,Dpe,Hfe,Gfe,Kfe,qfe,Xfe,Qfe,Yfe,Jfe,Zfe,epe,tpe,npe,rpe,spe,ipe,ope,ape,lpe,dpe,D3,D3,hpe,mpe,bpe,vpe,wpe,xpe,Spe,Cpe,Epe,_pe,Tpe,kpe,Ipe,P3,P3,Npe,$pe,Ope,Ppe,Lpe,Fpe,Mpe,zpe,Bpe,jpe,Vpe,Upe,Wpe,Hpe,Gpe,Kpe,qpe,Xpe,Ype,Qpe,Jpe,L3,L3,F3,F3,Zpe,tme,eme,nme,rme,sme,ime,ome,ame,lme,cme,ume,hme];for(const t of fme)H4(t);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.abs=function(){return this.throwIfDisposed(),lr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.acos=function(){return this.throwIfDisposed(),UR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.acosh=function(){return this.throwIfDisposed(),WR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.add=function(t){return this.throwIfDisposed(),xe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.all=function(t,e){return this.throwIfDisposed(),jE(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.any=function(t,e){return this.throwIfDisposed(),vb(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.argMax=function(t){return this.throwIfDisposed(),dh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.argMin=function(t){return this.throwIfDisposed(),HR(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.asScalar=function(){return this.throwIfDisposed(),P(this.size===1,()=>"The array must have only 1 element."),ee(this,[])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.asType=function(t){return this.throwIfDisposed(),$e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.as1D=function(){return this.throwIfDisposed(),ee(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.as2D=function(t,e){return this.throwIfDisposed(),ee(this,[t,e])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.as3D=function(t,e,n){return this.throwIfDisposed(),ee(this,[t,e,n])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.as4D=function(t,e,n,r){return this.throwIfDisposed(),ee(this,[t,e,n,r])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.as5D=function(t,e,n,r,s){return this.throwIfDisposed(),ee(this,[t,e,n,r,s])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.asin=function(){return this.throwIfDisposed(),GR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.asinh=function(){return this.throwIfDisposed(),KR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.atan=function(){return this.throwIfDisposed(),qR(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.atan2=function(t){return this.throwIfDisposed(),XR(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.atanh=function(){return this.throwIfDisposed(),YR(this)};pe().prototype.avgPool=function(t,e,n,r){return this.throwIfDisposed(),i0(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.batchToSpaceND=function(t,e){return this.throwIfDisposed(),o0(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.batchNorm=function(t,e,n,r,s){return this.throwIfDisposed(),Qm(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.broadcastTo=function(t){return this.throwIfDisposed(),Xd(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.cast=function(t){return this.throwIfDisposed(),$e(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.ceil=function(){return this.throwIfDisposed(),rO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.clipByValue=function(t,e){return this.throwIfDisposed(),Bs(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.concat=function(t,e){return this.throwIfDisposed(),t instanceof Ot&&(t=[t]),Wn([this,...t],e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.conv1d=function(t,e,n,r,s,i){return this.throwIfDisposed(),VE(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.conv2dTranspose=function(t,e,n,r,s){return this.throwIfDisposed(),UE(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.conv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Zl(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.cos=function(){return this.throwIfDisposed(),l0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.cosh=function(){return this.throwIfDisposed(),WE(this)};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the 'License');
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an 'AS IS' BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.cumprod=function(t,e,n){return this.throwIfDisposed(),Sb(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.cumsum=function(t,e,n){return this.throwIfDisposed(),HE(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.depthToSpace=function(t,e){return this.throwIfDisposed(),uO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.depthwiseConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),Jm(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.dilation2d=function(t,e,n,r,s){return this.throwIfDisposed(),dO(this,t,e,n,r,s)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.divNoNan=function(t){return this.throwIfDisposed(),hO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.div=function(t){return this.throwIfDisposed(),Ue(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.dot=function(t){return this.throwIfDisposed(),fO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.elu=function(){return this.throwIfDisposed(),Zm(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.equal=function(t){return this.throwIfDisposed(),Lo(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.erf=function(){return this.throwIfDisposed(),GE(this)};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.euclideanNorm=function(t,e){return this.throwIfDisposed(),mO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.exp=function(){return this.throwIfDisposed(),js(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.expandDims=function(t){return this.throwIfDisposed(),Br(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.expm1=function(){return this.throwIfDisposed(),gO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.fft=function(){return this.throwIfDisposed(),x0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.flatten=function(){return this.throwIfDisposed(),ee(this,[this.size])};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.floor=function(){return this.throwIfDisposed(),tg(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.floorDiv=function(t){return this.throwIfDisposed(),BE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.gather=function(t,e,n){return this.throwIfDisposed(),ng(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.greaterEqual=function(t){return this.throwIfDisposed(),hc(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.greater=function(t){return this.throwIfDisposed(),Gs(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.ifft=function(){return this.throwIfDisposed(),Lp(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.irfft=function(){return this.throwIfDisposed(),l_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.isFinite=function(){return this.throwIfDisposed(),yO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.isInf=function(){return this.throwIfDisposed(),bO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.isNaN=function(){return this.throwIfDisposed(),vO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.leakyRelu=function(t){return this.throwIfDisposed(),u0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.lessEqual=function(t){return this.throwIfDisposed(),zu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.less=function(t){return this.throwIfDisposed(),Rp(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.localResponseNormalization=function(t,e,n,r){return this.throwIfDisposed(),wO(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.logSigmoid=function(){return this.throwIfDisposed(),xO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.logSoftmax=function(t){return this.throwIfDisposed(),XE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.logSumExp=function(t,e){return this.throwIfDisposed(),h0(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.log=function(){return this.throwIfDisposed(),fi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.log1p=function(){return this.throwIfDisposed(),d0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.logicalAnd=function(t){return this.throwIfDisposed(),fa(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.logicalNot=function(){return this.throwIfDisposed(),f0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.logicalOr=function(t){return this.throwIfDisposed(),YE(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.logicalXor=function(t){return this.throwIfDisposed(),SO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.matMul=function(t,e,n){return this.throwIfDisposed(),Et(this,t,e,n)};pe().prototype.maxPool=function(t,e,n,r){return this.throwIfDisposed(),p0(this,t,e,n,r)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.max=function(t,e){return this.throwIfDisposed(),ji(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.maximum=function(t){return this.throwIfDisposed(),ml(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.mean=function(t,e){return this.throwIfDisposed(),Vn(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.min=function(t,e){return this.throwIfDisposed(),Ap(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.minimum=function(t){return this.throwIfDisposed(),Cu(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.mirrorPad=function(t,e){return this.throwIfDisposed(),EO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.mod=function(t){return this.throwIfDisposed(),_O(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.mul=function(t){return this.throwIfDisposed(),Y(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.neg=function(){return this.throwIfDisposed(),yn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.norm=function(t,e,n){return this.throwIfDisposed(),eg(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.notEqual=function(t){return this.throwIfDisposed(),ph(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.oneHot=function(t,e=1,n=0){return this.throwIfDisposed(),Op(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.onesLike=function(){return this.throwIfDisposed(),pi(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.pad=function(t,e){return this.throwIfDisposed(),fc(this,t,e)};pe().prototype.pool=function(t,e,n,r,s,i){return this.throwIfDisposed(),TO(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.pow=function(t){return this.throwIfDisposed(),ll(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.prelu=function(t){return this.throwIfDisposed(),y0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.prod=function(t,e){return this.throwIfDisposed(),kO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.reciprocal=function(){return this.throwIfDisposed(),FO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.relu=function(){return this.throwIfDisposed(),xa(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.relu6=function(){return this.throwIfDisposed(),e_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.reshapeAs=function(t){return this.throwIfDisposed(),ee(this,t.shape)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.reshape=function(t){return this.throwIfDisposed(),ee(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.resizeBilinear=function(t,e,n){return this.throwIfDisposed(),EH(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.resizeNearestNeighbor=function(t,e,n){return this.throwIfDisposed(),_H(this,t,e,n)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.reverse=function(t){return this.throwIfDisposed(),Gi(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.rfft=function(){return this.throwIfDisposed(),S0(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.round=function(){return this.throwIfDisposed(),t_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.rsqrt=function(){return this.throwIfDisposed(),n_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.selu=function(){return this.throwIfDisposed(),r_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.separableConv2d=function(t,e,n,r,s,i){return this.throwIfDisposed(),s_(this,t,e,n,r,s,i)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.sigmoid=function(){return this.throwIfDisposed(),$o(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.sign=function(){return this.throwIfDisposed(),MO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.sin=function(){return this.throwIfDisposed(),i_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.sinh=function(){return this.throwIfDisposed(),o_(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.slice=function(t,e){return this.throwIfDisposed(),ot(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.softmax=function(t){return this.throwIfDisposed(),w0(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.softplus=function(){return this.throwIfDisposed(),zh(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.spaceToBatchND=function(t,e){return this.throwIfDisposed(),g0(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.split=function(t,e){return this.throwIfDisposed(),Ps(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.sqrt=function(){return this.throwIfDisposed(),Lr(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.square=function(){return this.throwIfDisposed(),rn(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.squaredDifference=function(t){return this.throwIfDisposed(),c_(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.squeeze=function(t){return this.throwIfDisposed(),Ao(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.stack=function(t,e){this.throwIfDisposed();const n=t instanceof Ot?[this,t]:[this,...t];return Vs(n,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.step=function(t){return this.throwIfDisposed(),jh(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.stridedSlice=function(t,e,n,r,s,i,o,a){return this.throwIfDisposed(),zO(this,t,e,n,r,s,i,o,a)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.sub=function(t){return this.throwIfDisposed(),Fe(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.sum=function(t,e){return this.throwIfDisposed(),qe(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.tan=function(){return this.throwIfDisposed(),BO(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.tanh=function(){return this.throwIfDisposed(),Su(this)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.tile=function(t){return this.throwIfDisposed(),Li(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.toBool=function(){return this.throwIfDisposed(),$e(this,"bool")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.toFloat=function(){return this.throwIfDisposed(),$e(this,"float32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.toInt=function(){return this.throwIfDisposed(),$e(this,"int32")};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.topk=function(t,e){return this.throwIfDisposed(),UO(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.transpose=function(t){return this.throwIfDisposed(),$t(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.unique=function(t){return this.throwIfDisposed(),WO(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.unsortedSegmentSum=function(t,e){return this.throwIfDisposed(),h_(this,t,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.unstack=function(t){return this.throwIfDisposed(),Ki(this,t)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.where=function(t,e){return this.throwIfDisposed(),Wr(t,this,e)};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */pe().prototype.zerosLike=function(){return this.throwIfDisposed(),Dt(this)};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class La extends Error{constructor(e){super(e),Object.setPrototypeOf(this,La.prototype)}}class Eo extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Eo.prototype)}}class te extends Error{constructor(e){super(e),Object.setPrototypeOf(this,te.prototype)}}class St extends Error{constructor(e){super(e),Object.setPrototypeOf(this,St.prototype)}}class jD extends Error{constructor(e){super(e),Object.setPrototypeOf(this,jD.prototype)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class n5{constructor(e){this.maxEntries=e||100,this.cache=new Map}get(e){let n;return this.cache.has(e)&&(n=this.cache.get(e),this.cache.delete(e),this.cache.set(e,n)),n}put(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxEntries){const r=this.cache.keys().next().value;this.cache.delete(r)}this.cache.set(e,n)}getMaxEntries(){return this.maxEntries}setMaxEntries(e){if(e<0)throw new Error(`The maxEntries of LRU caches must be at least 0, but got ${e}.`);if(this.maxEntries>e)for(let n=0;n<this.maxEntries-e;n++){const r=this.cache.keys().next().value;this.cache.delete(r)}this.maxEntries=e}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function vh(t,e){if(Array.isArray(t)){let n=[];for(let r=0;r<e;r++)n=n.concat(t);return n}else{const n=new Array(e);return n.fill(t),n}}function Fa(t,e){if(!t)throw new jD(e)}function M3(t,e){let n=0;for(const r of t)r===e&&n++;return n}function Rs(t){return t.length===1?t[0]:t}function Jt(t){return Array.isArray(t)?t:[t]}function Dl(t){const n=t.replace(/(.)([A-Z][a-z0-9]+)/g,"$1_$2").replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase();return n[0]!=="_"?n:"private"+n}function Id(t){return t.length<=1||t.indexOf("_")===-1?t:t.replace(/[_]+(\w|$)/g,(e,n)=>n.toUpperCase())}let lo={};function VD(t){if(t==null)return null;const e={};return e.className=t.getClassName(),e.config=t.getConfig(),e}function TA(t){if(!(t==null||typeof t!="object"))if(Array.isArray(t))t.forEach(e=>TA(e));else{const e=Object.keys(t);for(const n of e){const r=t[n];r!=null&&typeof r=="object"&&(!Array.isArray(r)&&r.type==="ndarray"&&typeof r.value=="number"?t[n]=r.value:TA(r))}}}function N0(t,e={},n={},r="object",s=!1){if(typeof t=="string"){const i=t;let o;if(i in n)o=n[i];else if(i in lo)o=lo[i];else if(o=e[i],o==null)throw new te(`Unknown ${r}: ${t}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);return o}else{const i=t;if(i.className==null||i.config==null)throw new te(`${r}: Improper config format: ${JSON.stringify(i)}.
'className' and 'config' must set.`);const o=i.className;let a,l;if(o in n?[a,l]=n[o]:o in lo?[a,l]=lo.className:o in e&&([a,l]=e[o]),a==null)throw new te(`Unknown ${r}: ${o}. This may be due to one of the following reasons:
1. The ${r} is defined in Python, in which case it needs to be ported to TensorFlow.js or your JavaScript code.
2. The custom ${r} is defined in JavaScript, but is not registered properly with tf.serialization.registerClass().`);if(l!=null){const c={};for(const f of Object.keys(lo))c[f]=lo[f];for(const f of Object.keys(n))c[f]=n[f];const u=i.config;u.customObjects=c;const d=Object.assign({},lo);for(const f of Object.keys(n))lo[f]=n[f];TA(i.config);const h=l(a,i.config,n,s);return lo=Object.assign({},d),h}else{const c=Object.assign({},lo);for(const d of Object.keys(n))lo[d]=n[d];const u=new a(i.config);return lo=Object.assign({},c),u}}}function pme(t,e){return t<e?-1:t>e?1:0}function Lx(t,e){return-1*pme(t,e)}function au(t){if(t==null)return t;const e=[];for(const n of t)e.indexOf(n)===-1&&e.push(n);return e}function mme(t){if(t==null)throw new te(`Invalid value in obj: ${JSON.stringify(t)}`);for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}function Uh(t,e,n){if(n!=null&&t.indexOf(n)<0)throw new te(`${n} is not a valid ${e}.  Valid values are ${t} or null/undefined.`)}function UD(t,e,n=0,r=1/0){return Fa(n>=0),Fa(r>=n),Array.isArray(t)&&t.length>=n&&t.length<=r&&t.every(s=>typeof s===e)}function Dr(t,e){Array.isArray(t)?(P(t.length>0,()=>`${e} is unexpectedly an empty array.`),t.forEach((n,r)=>Dr(n,`element ${r+1} of ${e}`))):P(Number.isInteger(t)&&t>0,()=>`Expected ${e} to be a positive integer, but got ${r5(t)}.`)}function r5(t){return t===null?"null":Array.isArray(t)?"["+t.map(e=>r5(e)).join(",")+"]":typeof t=="string"?`"${t}"`:`${t}`}function gme(t,e,n){let r=n!=null?n():fs(),s;return(...o)=>{const a=n!=null?n():fs();return a-r<e||(r=a,s=t(...o)),s}}function s5(t){return t==="relu"?"relu":t==="linear"?"linear":t==="elu"?"elu":null}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let yme=0;function i5(){return yme++}const Fx={};function O_(t=""){return t in Fx||(Fx[t]=0),Fx[t]+=1,t+Fx[t].toString()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const bme=["channelsFirst","channelsLast"],vme=["nearest","bilinear"],wme=["valid","same","causal"],xme=["max","avg"],Sme=["sum","mul","concat","ave"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Cf=new Map;function or(t){Uh(bme,"DataFormat",t)}function Cme(t){Uh(vme,"InterpolationFormat",t)}function to(t){Uh(wme,"PaddingMode",t)}function o5(t){Uh(xme,"PoolMode",t)}const Fy=[],z3="/";function Yd(t,e){Fy.push(t);try{const n=e();return Fy.pop(),n}catch(n){throw Fy.pop(),n}}function Eme(){return Fy.length===0?"":Fy.join(z3)+z3}function a5(t){if(!c5(t))throw new Error("Not a valid tensor name: '"+t+"'");return Eme()+t}function l5(t){if(!c5(t))throw new Error("Not a valid tensor name: '"+t+"'");Cf.has(t)||Cf.set(t,0);const e=Cf.get(t);if(Cf.set(t,Cf.get(t)+1),e>0){const n=`${t}_${e}`;return Cf.set(n,1),n}else return t}const _me=new RegExp(/^[A-Za-z0-9][-A-Za-z0-9\._\/]*$/);function c5(t){return!!t.match(_me)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Tme(t){return t===parseInt(t.toString(),10)}function lu(t,e,n){e==null&&(e=0),n==null&&(n=t.length);let r=1;for(let s=e;s<n;++s)r*=t[s];return r}function Fp(t){if(t.length===0)return Number.NaN;let e=Number.POSITIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r<e&&(e=r)}return e}function _u(t){if(t.length===0)return Number.NaN;let e=Number.NEGATIVE_INFINITY;for(let n=0;n<t.length;n++){const r=t[n];r>e&&(e=r)}return e}function ma(t,e){if(e<t)throw new te(`end (${e}) < begin (${t}) is forbidden.`);const n=[];for(let r=t;r<e;++r)n.push(r);return n}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let qI;function Cr(){return qI==null&&(qI=MR().epsilon()),qI}function ga(){return"channelsLast"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ja(t,e){return $e(t,e)}function $0(t,e=-1){const n=t.shape.slice();return e<0&&(e=n.length+e+1),n.splice(e,0,1),ee(t,n)}function kme(t,e){return oe(()=>{if(t.shape.length!==2)throw new te(`repeat() expects a rank-2 tensor, but received a rank-${t.shape.length} tensor.`);const n=$0(t,1);return kA(n,[1,e,1])})}function Ime(t){const e=[lu(t.shape)];return ee(t,e)}function Nme(t){if(t.rank<=1)throw new te(`batchFlatten requires a minimum rank of 2. Got rank: ${t.rank}.`);const e=[t.shape[0],lu(t.shape,1)];return ee(t,e)}function Qd(t,e,n){return oe(()=>{switch(t.rank){case 1:return b0(t,e,n);case 2:return a_(t,[e,0],[n,t.shape[1]]);case 3:return v0(t,[e,0,0],[n,t.shape[1],t.shape[2]]);case 4:return Pp(t,[e,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3]]);case 5:return ot(t,[e,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4]]);case 6:return ot(t,[e,0,0,0,0,0],[n,t.shape[1],t.shape[2],t.shape[3],t.shape[4],t.shape[5]]);default:throw new te(`sliceAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}})}function XI(t,e,n){return oe(()=>{switch(t.rank){case 1:return b0(t,e,n);case 2:return a_(t,[0,e],[t.shape[0],n]);case 3:return v0(t,[0,0,e],[t.shape[0],t.shape[1],n]);case 4:return Pp(t,[0,0,0,e],[t.shape[0],t.shape[1],t.shape[2],n]);default:throw new te(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function Mx(t,e,n,r){return oe(()=>{switch(t.rank){case 1:return b0(t,e,n);case 2:switch(r){case 1:return Qd(t,e,n);case 2:return XI(t,e,n);default:throw new te(`The axis is not within the rank of the tensor ${r}`)}case 3:switch(r){case 1:return Qd(t,e,n);case 2:return v0(t,[0,e,0],[t.shape[0],n,t.shape[2]]);case 3:return XI(t,e,n);default:throw new te(`The axis is not within the rank of the tensor ${r}`)}case 4:switch(r){case 1:return Qd(t,e,n);case 2:return Pp(t,[0,e,0,0],[t.shape[0],n,t.shape[2],t.shape[3]]);case 3:return Pp(t,[0,0,e,0],[t.shape[0],t.shape[1],n,t.shape[3]]);case 4:return XI(t,e,n);default:throw new te(`The axis is not within the rank of the tensor ${r}`)}default:throw new te(`sliceAlongLastAxis() received an unsupported tensor rank: ${t.rank}`)}})}function WD(t,e=-1){let n;return e<0&&(n=t[0].rank,n!==0?e=n:e=0),e===t[0].rank&&(e=-1),Wn(t,e)}function B3(t,e){switch(t.rank){case 1:return sO([t,e]);case 2:return a0([t,e],0);case 3:return iO([t,e],0);case 4:return oO([t,e],0);default:throw new te(`concatAlongFirstAxis() received an unsupported tensor rank: ${t.rank}`)}}function kA(t,e){if(Array.isArray(e)||(e=[e]),t.rank!==e.length)throw new te(`The length of input n (${e.length}) does not match the number of dimensions in input x (${t.rank})`);return Li(t,e)}function D_(t,e=0,n=1,r,s){return ZE(t,e,n,r,s)}function Za(t,e,n,r){if(t.rank<2||e.rank<2)throw new St(`dot requires both inputs to be rank >= 2 but got x shape = ${t.shape} and y shape = ${e.shape}`);if(e.rank>=3){const s=t.shape.slice(-1)[0],i=e.shape.slice(-2)[0];if(s!==i)throw new St(`If rank y >= 3, then the second last dim of y must equal the last dim of x but got x shape = ${t.shape} and  y shape = ${e.shape}`)}if(t.rank===2&&e.rank===2)return rA({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?IA(t.rank,r,ga()):null,activation:n});{const s=t.shape.slice(),i=s.pop();t=ee(t,[-1,i]);const o=e.shape.slice(),a=o.pop(),l=o.pop(),c=[...o,a],u=Array.from({length:e.rank},(p,m)=>m===0?e.rank-2:m<=e.rank-2?m-1:m);e=ee($t(e,u),[l,-1]);const d=[...s,...c];return ee(rA({a:t,b:e,transposeA:!1,transposeB:!1,bias:r?IA(t.rank,r,ga()):null,activation:n}),d)}}function u5(t,e,n){return oe(()=>(Array.isArray(e)?e=Sr(e,"int32"):e=$e(e,"int32"),ng(t,e,n)))}function A0(t){return Y(t,t)}function IA(t,e,n){const r=e.shape;if(e.rank!==1&&e.rank!==t)throw new te(`Unexpected bias dimensions: ${e.rank}; expected it to be 1 or ${t}`);if(t===5){if(n==="channelsFirst")return r.length===1?ee(e,[1,r[0],1,1,1]):ee(e,[1,r[3],r[0],r[1],r[2]]);if(n==="channelsLast")return r.length===1?ee(e,[1,1,1,1,r[0]]):ee(e,[1].concat(r))}else if(t===4){if(n==="channelsFirst")return r.length===1?ee(e,[1,r[0],1,1]):ee(e,[1,r[2],r[0],r[1]]);if(n==="channelsLast")return r.length===1?ee(e,[1,1,1,r[0]]):ee(e,[1].concat(r))}else if(t===3){if(n==="channelsFirst")return r.length===1?ee(e,[1,r[0],1]):ee(e,[1,r[1],r[0]]);if(n==="channelsLast")return r.length===1?ee(e,[1,1,r[0]]):ee(e,[1].concat(r))}else if(t<3)return e;throw new te(`Unsupported input rank by biasAdd: ${e.rank}`)}function Ca(t,e,n){return oe(()=>(n==null&&(n=ga()),or(n),xe(t,IA(t.rank,e,n))))}function $me(t,e=1){if(e!==1)throw new St(`Support for alpha values other than 1 (${e}) is not implemented yet.`);return Zm(t)}function Ame(t){return oe(()=>Ue(t,xe(lr(t),1)))}function d5(t,e,n,r){return oe(()=>KO(t,e,n,r))}function Rme(t){return oe(()=>{const e=xe(.5,Y(.2,t));return Bs(e,0,1)})}function R0(t,e,n=!1){return n?t():e()}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Ome=["fanIn","fanOut","fanAvg"],Dme=["normal","uniform","truncatedNormal"];/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Pme(t){Uh(Ome,"FanMode",t)}function Lme(t){Uh(Dme,"Distribution",t)}class jo extends Vh{fromConfigUsesCustomObjects(){return!1}getConfig(){return{}}}class h5 extends jo{apply(e,n){return ur(e,n)}}h5.className="Zeros";Ce(h5);class HD extends jo{apply(e,n){return Os(e,n)}}HD.className="Ones";Ce(HD);class f5 extends jo{constructor(e){if(super(),typeof e!="object")throw new te(`Expected argument of type ConstantConfig but got ${e}`);if(e.value===void 0)throw new te(`config must have value set but got ${e}`);this.value=e.value}apply(e,n){return oe(()=>Y(tt(this.value),Os(e,n)))}getConfig(){return{value:this.value}}}f5.className="Constant";Ce(f5);class p5 extends jo{constructor(e){super(),this.DEFAULT_MINVAL=-.05,this.DEFAULT_MAXVAL=.05,this.minval=e.minval||this.DEFAULT_MINVAL,this.maxval=e.maxval||this.DEFAULT_MAXVAL,this.seed=e.seed}apply(e,n){return Bu(e,this.minval,this.maxval,n,this.seed)}getConfig(){return{minval:this.minval,maxval:this.maxval,seed:this.seed}}}p5.className="RandomUniform";Ce(p5);class m5 extends jo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new St(`randomNormal does not support dType ${n}.`);return D_(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}m5.className="RandomNormal";Ce(m5);class g5 extends jo{constructor(e){super(),this.DEFAULT_MEAN=0,this.DEFAULT_STDDEV=.05,this.mean=e.mean||this.DEFAULT_MEAN,this.stddev=e.stddev||this.DEFAULT_STDDEV,this.seed=e.seed}apply(e,n){if(n=n||"float32",n!=="float32"&&n!=="int32")throw new St(`truncatedNormal does not support dType ${n}.`);return d_(e,this.mean,this.stddev,n,this.seed)}getConfig(){return{mean:this.mean,stddev:this.stddev,seed:this.seed}}}g5.className="TruncatedNormal";Ce(g5);class y5 extends jo{constructor(e){super(),this.gain=e.gain!=null?e.gain:1}apply(e,n){return oe(()=>{if(e.length!==2||e[0]!==e[1])throw new te("Identity matrix initializer can only be used for 2D square matrices.");return Y(this.gain,KE(e[0]))})}getConfig(){return{gain:this.gain}}}y5.className="Identity";Ce(y5);function Fme(t,e="channelsLast"){let n,r;if(or(e),t.length===2)n=t[0],r=t[1];else if([3,4,5].indexOf(t.length)!==-1){if(e==="channelsFirst"){const s=lu(t,2);n=t[1]*s,r=t[0]*s}else if(e==="channelsLast"){const s=lu(t,0,t.length-2);n=t[t.length-2]*s,r=t[t.length-1]*s}}else{const s=lu(t);n=Math.sqrt(s),r=Math.sqrt(s)}return[n,r]}class yi extends jo{constructor(e){if(super(),e.scale<0)throw new te(`scale must be a positive float. Got: ${e.scale}`);this.scale=e.scale==null?1:e.scale,this.mode=e.mode==null?"fanIn":e.mode,Pme(this.mode),this.distribution=e.distribution==null?"normal":e.distribution,Lme(this.distribution),this.seed=e.seed}apply(e,n){const r=Fme(e),s=r[0],i=r[1];let o=this.scale;if(this.mode==="fanIn"?o/=Math.max(1,s):this.mode==="fanOut"?o/=Math.max(1,i):o/=Math.max(1,(s+i)/2),this.distribution==="normal"){const a=Math.sqrt(o);if(n=n||"float32",n!=="float32"&&n!=="int32")throw new St(`${this.getClassName()} does not support dType ${n}.`);return d_(e,0,a,n,this.seed)}else{const a=Math.sqrt(3*o);return Bu(e,-a,a,n,this.seed)}}getConfig(){return{scale:this.scale,mode:this.mode,distribution:this.distribution,seed:this.seed}}}yi.className="VarianceScaling";Ce(yi);class GD extends yi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return yi.className}}GD.className="GlorotUniform";Ce(GD);class KD extends yi{constructor(e){super({scale:1,mode:"fanAvg",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return yi.className}}KD.className="GlorotNormal";Ce(KD);class qD extends yi{constructor(e){super({scale:2,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return yi.className}}qD.className="HeNormal";Ce(qD);class XD extends yi{constructor(e){super({scale:2,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return yi.className}}XD.className="HeUniform";Ce(XD);class YD extends yi{constructor(e){super({scale:1,mode:"fanIn",distribution:"normal",seed:e==null?null:e.seed})}getClassName(){return yi.className}}YD.className="LeCunNormal";Ce(YD);class QD extends yi{constructor(e){super({scale:1,mode:"fanIn",distribution:"uniform",seed:e==null?null:e.seed})}getClassName(){return yi.className}}QD.className="LeCunUniform";Ce(QD);class b5 extends jo{constructor(e){super(),this.DEFAULT_GAIN=1,this.ELEMENTS_WARN_SLOW=2e3,this.gain=e.gain==null?this.DEFAULT_GAIN:e.gain,this.seed=e.seed}apply(e,n){return oe(()=>{if(e.length<2)throw new St("Shape must be at least 2D.");if(n!=="int32"&&n!=="float32"&&n!==void 0)throw new TypeError(`Unsupported data type ${n}.`);n=n;const r=fe(e.slice(0,-1)),s=e[e.length-1],i=r*s;i>this.ELEMENTS_WARN_SLOW&&console.warn(`Orthogonal initializer is being called on a matrix with more than ${this.ELEMENTS_WARN_SLOW} (${i}) elements: Slowness may result.`);const o=[Math.max(s,r),Math.min(s,r)],a=D_(o,0,1,n,this.seed),l=QO.qr(a,!1);let c=l[0];const d=l[1].flatten().stridedSlice([0],[Math.min(s,r)*Math.min(s,r)],[Math.min(s,r)+1]);return c=Y(c,d.sign()),r<s&&(c=c.transpose()),Y(tt(this.gain),c.reshape(e))})}getConfig(){return{gain:this.gain,seed:this.seed}}}b5.className="Orthogonal";Ce(b5);const j3={constant:"Constant",glorotNormal:"GlorotNormal",glorotUniform:"GlorotUniform",heNormal:"HeNormal",heUniform:"HeUniform",identity:"Identity",leCunNormal:"LeCunNormal",leCunUniform:"LeCunUniform",ones:"Ones",orthogonal:"Orthogonal",randomNormal:"RandomNormal",randomUniform:"RandomUniform",truncatedNormal:"TruncatedNormal",varianceScaling:"VarianceScaling",zeros:"Zeros"};function V3(t,e={}){return N0(t,Ri.getMap().classNameMap,e,"initializer")}function Un(t){return VD(t)}function On(t){if(typeof t=="string"){const e=t in j3?j3[t]:t;if(e==="GlorotNormal")return new KD;if(e==="GlorotUniform")return new GD;if(e==="HeNormal")return new qD;if(e==="HeUniform")return new XD;if(e==="LeCunNormal")return new YD;if(e==="LeCunUniform")return new QD;{const n={};return n.className=e,n.config={},V3(n)}}else return t instanceof jo?t:V3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NA(t){return Array.isArray(t)&&Array.isArray(t[0])}function _S(t){return t.length===0?[]:Array.isArray(t[0])?t:[t]}function ut(t){let e;if(Array.isArray(t)){if(t.length!==1)throw new te(`Expected Tensor length to be 1; got ${t.length}`);e=t[0]}else e=t;return e}function zt(t){if(Array.isArray(t)&&Array.isArray(t[0])){if(t.length===1)return t=t,t[0];throw new te(`Expected exactly 1 Shape; got ${t.length}`)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function TS(t){let e=0;for(const n of t)n.shape.length===0?e+=1:e+=n.shape.reduce((r,s)=>r*s);return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const U3="Variable";class Mme{constructor(e,n="float32",r=U3,s=!0,i=null){this.dtype=n??"float32",this.shape=e.shape,this.id=i5(),r=r??U3,this.originalName=a5(r),this.name=l5(this.originalName),this.trainable_=s,this.constraint=i,this.val=HO(e,this.trainable_,this.name,this.dtype)}read(){return this.assertNotDisposed(),this.val}write(e){return this.assertNotDisposed(),zme(this.val,e),this.val.id!==e.id&&(this.val.assign(e),this.constraint!=null&&this.val.assign(this.constraint.apply(this.val))),this}dispose(){this.assertNotDisposed(),this.val.dispose()}assertNotDisposed(){if(this.val.isDisposed)throw new Error(`LayersVariable ${this.name} is already disposed.`)}get trainable(){return this.trainable_}set trainable(e){this.trainable_=e,this.val.trainable=e}}function zme(t,e){if(t.shape.toString()!==e.shape.toString())throw new Error("Shape mismatch: "+JSON.stringify(t.shape)+" vs. "+JSON.stringify(e.shape))}function $A(t){return t.map(e=>e.read())}function JD(t){t.forEach(e=>{e[0].write(e[1])})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Er{constructor(e){this.dtype=e.dtype,this.shape=e.shape,e.shape!=null?this.ndim=e.shape.length:this.ndim=e.ndim,this.maxNDim=e.maxNDim,this.minNDim=e.minNDim,this.axes=e.axes||{}}}class ul{constructor(e,n,r,s,i,o,a){this.dtype=e,this.shape=n,this.sourceLayer=r,this.inputs=s,this.callArgs=i,this.outputTensorIndex=a,this.id=i5(),o!=null&&(this.originalName=a5(o),this.name=l5(this.originalName)),this.rank=n.length}}let Bme=0,P_=class{constructor(e,n){this.callArgs=n,this.id=Bme++,this.outboundLayer=e.outboundLayer,this.inboundLayers=e.inboundLayers,this.nodeIndices=e.nodeIndices,this.tensorIndices=e.tensorIndices,this.inputTensors=e.inputTensors,this.outputTensors=e.outputTensors,this.inputMasks=e.inputMasks,this.outputMasks=e.outputMasks,this.inputShapes=e.inputShapes,this.outputShapes=e.outputShapes;for(const r of e.inboundLayers)r!=null&&r.outboundNodes.push(this);e.outboundLayer.inboundNodes.push(this)}getConfig(){const e=[];for(const n of this.inboundLayers)n!=null?e.push(n.name):e.push(null);return{outboundLayer:this.outboundLayer?this.outboundLayer.name:null,inboundLayers:e,nodeIndices:this.nodeIndices,tensorIndices:this.tensorIndices}}},jme=0;class It extends Vh{constructor(e={}){super(),this._callHook=null,this._addedWeightNames=[],this._stateful=!1,this.id=jme++,this.activityRegularizer=null,this.inputSpec=null,this.supportsMasking=!1,this._trainableWeights=[],this._nonTrainableWeights=[],this._losses=[],this._updates=[],this._built=!1,this.inboundNodes=[],this.outboundNodes=[];let n=e.name;if(!n){const r=this.getClassName();n=Dl(r)+"_"+O_(r)}if(this.name=n,this.trainable_=e.trainable==null?!0:e.trainable,e.inputShape!=null||e.batchInputShape!=null){let r;if(e.batchInputShape!=null)r=e.batchInputShape;else if(e.inputShape!=null){let i=null;e.batchSize!=null&&(i=e.batchSize),r=[i].concat(e.inputShape)}this.batchInputShape=r;let s=e.dtype;s==null&&(s=e.inputDType),s==null&&(s="float32"),this.dtype=s}e.weights!=null?this.initialWeights=e.weights:this.initialWeights=null,this._refCount=null,this.fastWeightInitDuringBuild=!1}static nodeKey(e,n){return e.name+"_ib-"+n.toString()}getNodeAtIndex(e,n){if(this.inboundNodes.length===0)throw new Eo(`The layer has never been called and thus has no defined ${n}.`);if(this.inboundNodes.length<=e)throw new te(`Asked to get ${n} at node ${e}, but the layer has only ${this.inboundNodes.length} inbound nodes.`);return this.inboundNodes[e]}getInputAt(e){return Rs(this.getNodeAtIndex(e,"input").inputTensors)}getOutputAt(e){return Rs(this.getNodeAtIndex(e,"output").outputTensors)}get input(){if(this.inboundNodes.length>1)throw new La(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer input" is ill-defined. Use \`getInputAt(nodeIndex)\` instead.`);if(this.inboundNodes.length===0)throw new La(`Layer ${this.name} is not connected, no input to return.`);return Rs(this.getNodeAtIndex(0,"input").inputTensors)}get output(){if(this.inboundNodes.length===0)throw new La(`Layer ${this.name} has no inbound nodes.`);if(this.inboundNodes.length>1)throw new La(`Layer ${this.name} has multiple inbound nodes, hence the notion of "layer output" is ill-defined. Use \`getOutputAt(nodeIndex)\` instead.`);return Rs(this.getNodeAtIndex(0,"output").outputTensors)}get losses(){return this._losses}calculateLosses(){return this.losses.map(e=>e())}get updates(){return this._updates}get built(){return this._built}set built(e){this._built=e}get trainable(){return this.trainable_}set trainable(e){this._trainableWeights.forEach(n=>n.trainable=e),this.trainable_=e}get trainableWeights(){return this.trainable_?this._trainableWeights.filter(e=>e.trainable):[]}set trainableWeights(e){this._trainableWeights=e}get nonTrainableWeights(){return this.trainable?this._trainableWeights.filter(e=>!e.trainable).concat(this._nonTrainableWeights):this._trainableWeights.concat(this._nonTrainableWeights)}set nonTrainableWeights(e){this._nonTrainableWeights=e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}get stateful(){return this._stateful}resetStates(){if(!this.stateful)throw new Error("Cannot call the resetStates() method of a non-stateful Layer object.")}assertInputCompatibility(e){const n=Jt(e);if(this.inputSpec==null||this.inputSpec.length===0)return;const r=Jt(this.inputSpec);if(n.length!==r.length)throw new te(`Layer ${this.name} expects ${r.length} inputs, but it received ${n.length} input tensors. Input received: ${e}`);for(let s=0;s<n.length;s++){const i=n[s],o=r[s];if(o==null)continue;const a=i.rank;if(o.ndim!=null&&a!==o.ndim)throw new te(`Input ${s} is incompatible with layer ${this.name}: expected ndim=${o.ndim}, found ndim=${a}`);if(o.maxNDim!=null&&a>o.maxNDim)throw new te(`Input ${s} is incompatible with layer ${this.name}: expected max_ndim=${o.maxNDim}, found ndim=${a}`);if(o.minNDim!=null&&a<o.minNDim)throw new te(`Input ${s} is incompatible with layer ${this.name}: expected min_ndim=${o.minNDim}, found ndim=${a}.`);if(o.dtype!=null&&i.dtype!==o.dtype)throw new te(`Input ${s} is incompatible with layer ${this.name} : expected dtype=${o.dtype}, found dtype=${i.dtype}.`);if(o.axes){const l=i.shape;for(const c in o.axes){const u=Number(c),d=o.axes[c],h=u>=0?l[u]:l[l.length+u];if(d!=null&&[d,null].indexOf(h)===-1)throw new te(`Input ${s} is incompatible with layer ${this.name}: expected axis ${u} of input shape to have value ${d} but got shape ${l}.`)}}if(o.shape!=null)for(let l=0;l<o.shape.length;++l){const c=o.shape[l],u=i.shape[l];if(c!=null&&u!=null&&c!==u)throw new te(`Input ${s} is incompatible with layer ${this.name}: expected shape=${o.shape}, found shape=${i.shape}.`)}}}call(e,n){return e}invokeCallHook(e,n){this._callHook!=null&&this._callHook(e,n)}setCallHook(e){this._callHook=e}clearCallHook(){this._callHook=null}apply(e,n){n=n||{},this.assertNotDisposed();const r=Jt(e),s=Wme(e),i=Hme(e);if(s===i)throw new te("Arguments to apply() must be all SymbolicTensors or all Tensors");return Yd(this.name,()=>{if(!this.built){this.assertInputCompatibility(e);const o=[];for(const a of Jt(e))o.push(a.shape);this.build(Rs(o)),this.built=!0,this.initialWeights&&this.setWeights(this.initialWeights),this._refCount===null&&i&&(this._refCount=1)}if(this.assertInputCompatibility(e),i){let o=this.call(e,n);this.supportsMasking&&this.setMaskMetadata(e,o);const a=Jt(o),l=[];for(let c of a)r.indexOf(c)!==-1&&(c=c.clone()),l.push(c);if(o=Rs(l),this.activityRegularizer!=null)throw new St("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return o}else{const o=Vme(e),a=this.computeOutputShape(o);let l;const c=Ume(e);if(this.warnOnIncompatibleInputShape(Array.isArray(e)?o[0]:o),a!=null&&a.length>0&&Array.isArray(a[0])?l=a.map((u,d)=>new ul(c,u,this,Jt(e),n,this.name,d)):l=new ul(c,a,this,Jt(e),n,this.name),this.addInboundNode(e,l,null,null,o,a,n),this._refCount++,this.activityRegularizer!=null)throw new St("Layer invocation in the presence of activity regularizer(s) is not supported yet.");return l}})}warnOnIncompatibleInputShape(e){if(this.batchInputShape!=null)if(e.length!==this.batchInputShape.length)console.warn(`The rank of the input tensor provided (shape: ${JSON.stringify(e)}) does not match that of the batchInputShape (${JSON.stringify(this.batchInputShape)}) of the layer ${this.name}`);else{let n=!1;this.batchInputShape.forEach((r,s)=>{r!=null&&e[s]!=null&&e[s]!==r&&(n=!0)}),n&&console.warn(`The shape of the input tensor (${JSON.stringify(e)}) does not match the expectation of layer ${this.name}: ${JSON.stringify(this.batchInputShape)}`)}}get outputShape(){if(this.inboundNodes==null||this.inboundNodes.length===0)throw new La(`The layer ${this.name} has never been called and thus has no defined output shape.`);const e=[];for(const n of this.inboundNodes){const r=JSON.stringify(n.outputShapes);e.indexOf(r)===-1&&e.push(r)}if(e.length===1){const n=this.inboundNodes[0].outputShapes;return Array.isArray(n)&&Array.isArray(n[0])&&n.length===1?n[0]:n}else throw new La(`The layer ${this.name} has multiple inbound nodes with different output shapes. Hence the notion of "output shape" is ill-defined for the layer.`)}countParams(){if(!this.built)throw new Eo(`You tried to call countParams() on ${this.name}, but the layer is not built yet. Build it first by calling build(batchInputShape).`);return TS(this.weights)}build(e){this.built=!0}getWeights(e=!1){return $A(e?this.trainableWeights:this.weights)}setWeights(e){oe(()=>{const n=this.weights;if(n.length!==e.length)throw new te(`You called setWeights(weights) on layer "${this.name}" with a weight list of length ${e.length}, but the layer was expecting ${n.length} weights. Provided weights: ${e}...`);if(n.length===0)return;const r=[],s=$A(n);for(let i=0;i<s.length;++i){const o=s[i],a=n[i],l=e[i];if(!Nt(o.shape,l.shape))throw new te(`Layer weight shape ${o.shape} not compatible with provided weight shape ${l.shape}`);r.push([a,l])}JD(r)})}addWeight(e,n,r,s,i,o,a,l){if(this._addedWeightNames.indexOf(e)!==-1)throw new te(`Duplicate weight name ${e} for layer ${this.name}`);this._addedWeightNames.push(e),r==null&&(r="float32"),this.fastWeightInitDuringBuild&&(s=l!=null?l():On("zeros"));const c=s.apply(n,r),u=new Mme(c,r,e,o,a);return c.dispose(),i!=null&&this.addLoss(()=>i.apply(u.read())),o==null&&(o=!0),o?this._trainableWeights.push(u):this._nonTrainableWeights.push(u),u}setFastWeightInitDuringBuild(e){this.fastWeightInitDuringBuild=e}addLoss(e){e==null||Array.isArray(e)&&e.length===0||(e=Jt(e),this._losses!==void 0&&this._losses!==null&&this.losses.push(...e))}computeOutputShape(e){return e}computeMask(e,n){if(!this.supportsMasking){if(n!=null)if(Array.isArray(n))n.forEach(r=>{if(r!=null)throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`)});else throw new TypeError(`Layer ${this.name} does not support masking, but was passed an inputMask.`);return null}return n}setMaskMetadata(e,n,r){if(!this.supportsMasking)return;const s=this.computeMask(e,r),i=Jt(n),o=Jt(s);if(i.length!==o.length)throw new Error(`${this.name} outputs ${i.length} tensors but ${i.length} masks for those tensors`);for(let a=0;a<i.length;a++)i[a].kerasMask=o[a]}addInboundNode(e,n,r,s,i,o,a=null){const l=Jt(e);n=Jt(n),r=Jt(r),s=Jt(s),i=_S(i),o=_S(o);const c=[],u=[],d=[];for(const h of l)c.push(h.sourceLayer),u.push(h.nodeIndex),d.push(h.tensorIndex);new P_({outboundLayer:this,inboundLayers:c,nodeIndices:u,tensorIndices:d,inputTensors:l,outputTensors:n,inputMasks:r,outputMasks:s,inputShapes:i,outputShapes:o},a);for(let h=0;h<n.length;h++)n[h].sourceLayer=this,n[h].nodeIndex=this.inboundNodes.length-1,n[h].tensorIndex=h}getConfig(){const e={name:this.name,trainable:this.trainable};return this.batchInputShape!=null&&(e.batchInputShape=this.batchInputShape),this.dtype!=null&&(e.dtype=this.dtype),e}disposeWeights(){return this.weights.forEach(e=>e.dispose()),this.weights.length}assertNotDisposed(){if(this._refCount===0)throw new Error(`Layer '${this.name}' is already disposed.`)}dispose(){if(!this.built)throw new Error(`Cannot dispose Layer ${this.name} because it has not been built yet.`);if(this._refCount===null)throw new Error(`Cannot dispose Layer ${this.name} because it has not been used yet.`);this.assertNotDisposed();let e=0;return--this._refCount===0&&(e=this.disposeWeights()),{refCountAfterDispose:this._refCount,numDisposedVariables:e}}}function Vme(t){t=Jt(t);const e=[];for(const n of t)e.push(n.shape);return Rs(e)}function Ume(t){return"float32"}function v5(t,e,n){if((e==null||n!=null&&n>0)&&(e=t.sourceLayer,n=t.nodeIndex),e.inboundNodes.length===0)return[t];{const r=e.inboundNodes[n];if(r.inboundLayers.length===0)return r.inputTensors;{const s=[];for(let i=0;i<r.inboundLayers.length;i++){const o=r.inputTensors[i],a=r.inboundLayers[i],l=r.nodeIndices[i],c=v5(o,a,l);for(const u of c)s.indexOf(u)===-1&&s.push(u)}return s}}}function Wme(t){let e=!0;for(const n of Jt(t))if(!(n instanceof ul)){e=!1;break}return e}function Hme(t){let e=!0;for(const n of Jt(t))if(n instanceof ul){e=!1;break}return e}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class O0 extends It{constructor(e){if(super({dtype:e.dtype,name:e.name!=null?e.name:O_("input").toString()}),e.batchSize==null&&(e.batchSize=null),e.sparse==null&&(e.sparse=!1),this.trainable=!1,this.built=!0,this.sparse=e.sparse,e.inputShape!=null&&e.batchInputShape!=null)throw new te("Only provide the inputShape OR batchInputShape argument to inputLayer, not both at the same time.");let n=e.batchInputShape;if(n==null){if(e.inputShape==null)throw new te("An InputLayer should be passed either a `batchInputShape` or an `inputShape`.");n=[e.batchSize].concat(e.inputShape)}else if(e.batchSize!=null)throw new te("Cannot specify batchSize if batchInputShape is specified when creating an InputLayer.");const r=e.dtype||"float32";this.batchInputShape=n,this.dtype=r,this.inputSpec=[{shape:n}];const s=new ul(this.dtype,this.batchInputShape,this,[],{},this.name);s.nodeIndex=0,s.tensorIndex=0,new P_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:[s],outputTensors:[s],inputMasks:[null],outputMasks:[null],inputShapes:[n],outputShapes:[n]})}apply(e,n){throw new te(`Cannot pass any input to an InputLayer's apply() method. InputLayer name: ${this.name}`)}dispose(){return{refCountAfterDispose:this._refCount,numDisposedVariables:0}}getConfig(){return{batchInputShape:this.batchInputShape,dtype:this.dtype,sparse:this.sparse,name:this.name}}}O0.className="InputLayer";Ce(O0);function Gme(t){if(t.batchShape==null&&t.shape==null)throw new Error("Please provide to Input either a `shape` or a `batchShape` argument. Note that `shape` does not include the batch dimension.");if(t.batchShape!=null&&t.shape!=null)throw new te("Please provide either a `shape` or `batchShape` argument to Input, but not both.");let e=t.batchShape;t.shape!=null&&e==null&&(e=[null].concat(t.shape));let n=t.dtype;return n==null&&(n="float32"),new O0({batchInputShape:e,name:t.name,dtype:n,sparse:t.sparse}).inboundNodes[0].outputTensors[0]}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Kme(t,e){if(t.dtype==null||t.dtype===e.dtype)return e;try{return $e(e,t.dtype)}catch{throw new te(`The dtype of the feed (${e.dtype}) can not be cast to the dtype of the key '${t.name}' (${t.dtype}).`)}}class qc{constructor(e){if(this.id2Value={},this.id2Mask={},this.name2Id={},e instanceof qc)for(const n in e.id2Value)this.id2Value[n]=e.id2Value[n],n in e.id2Mask&&(this.id2Mask[n]=e.id2Mask[n]);else{if(e==null)return;for(const n of e)this.add(n.key,n.value)}}add(e,n,r){if(this.id2Value[e.id]==null)this.id2Value[e.id]=Kme(e,n),this.name2Id[e.name]=e.id,r!=null&&(this.id2Mask[e.id]=r);else throw new te(`Duplicate key: name=${e.name}, id=${e.id}`);return this}addFeed(e){this.add(e.key,e.value)}hasKey(e){return this.id2Value[e.id]!=null}names(){return Object.keys(this.name2Id)}getValue(e){if(e instanceof ul){if(this.id2Value[e.id]==null)throw new te(`Nonexistent key: ${e.name}`);return this.id2Value[e.id]}else{const n=this.name2Id[e];if(n==null)throw new te(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Value[n]}}getMask(e){if(e instanceof ul){if(this.id2Value[e.id]==null)throw new te(`Nonexistent key: ${e.name}`);return this.id2Mask[e.id]}else{const n=this.name2Id[e];if(n==null)throw new te(`Feed dict has no SymbolicTensor name: ${e}`);return this.id2Mask[n]}}disposeMasks(){this.id2Mask!=null&&_t(this.id2Mask)}}const kS=new n5,IS=new n5;function qme(t){kS!=null&&kS.setMaxEntries(t),IS!=null&&IS.setMaxEntries(t)}function vy(t,e,n,r){const s=n==null?!1:n.training,i=Array.isArray(t),o=i?t:[t],a=o.map(p=>p.name),l=[],c=e.names();for(const p of a)c.indexOf(p)!==-1?l.push(e.getValue(p)):l.push(null);const u=a.join(",")+"|"+e.names().sort().join(",");let d=kS.get(u),h;if(d==null){const p=Xme(o,e);d=p.sorted,h=p.recipientCounts,kS.put(u,d),IS.put(u,h)}h={},s||Object.assign(h,IS.get(u));const f=new qc(e);for(let p=0;p<d.length;++p){const m=d[p],g=m.sourceLayer;if(g instanceof O0)continue;const y=[],b=[],v=[];let w=!1;for(const O of m.inputs){const R=f.getValue(O),z=f.getMask(O);y.push(R),b.push(z),z!=null&&(w=!0),s||(h[O.name]--,h[O.name]===0&&!e.hasKey(O)&&a.indexOf(O.name)===-1&&!R.isDisposed&&O.sourceLayer.stateful!==!0&&v.push(R))}w&&(n=n||{},n.mask=b[0]);const C=Jt(g.apply(y,n));let _=null;g.supportsMasking&&(_=g.computeMask(y,b));const E=Qme(m),I=Array.isArray(E)?E:[E];for(let O=0;O<I.length;++O){f.hasKey(I[O])||f.add(I[O],C[O],Array.isArray(_)?_[0]:_);const R=a.indexOf(I[O].name);R!==-1&&(l[R]=C[O])}s||_t(v)}return f.disposeMasks(),i?l:l[0]}function Xme(t,e){P(t!=null&&t.length>0,()=>"Expected at least one fetch, got none");let n=[],r={};if(t.length===1){const s=W3(t[0],e);n=s.sorted,r=s.recipientMap}else{const s=new Set;for(const i of t){const{sorted:o,recipientMap:a}=W3(i,e);for(const l of o)s.has(l.name)||(n.push(l),s.add(l.name));for(const l in a)r[l]==null&&(r[l]=new Set),a[l].forEach(c=>r[l].add(c))}}return{sorted:n,recipientCounts:Yme(r)}}function Yme(t){const e={};for(const n in t)e[n]=t[n].size;return e}function W3(t,e){const n=new Set,r=[],s={};for(const a of e.names())n.add(a);const i=[],o=[];for(i.push(t);i.length>0;){const a=i[i.length-1];if(n.has(a.name)){i.pop();continue}const l=o[o.length-1]===i.length-1;if(a.inputs.length===0||l)i.pop(),r.push(a),n.add(a.name),l&&o.pop();else{o.push(i.length-1);for(const c of a.inputs)s[c.name]==null&&(s[c.name]=new Set),s[c.name].add(a.name),!n.has(c.name)&&i.push(c)}}return{sorted:r,recipientMap:s}}function Qme(t){let e;if(t.sourceLayer.inboundNodes.length===1)e=t.sourceLayer.output;else{let n=null;for(let r=0;r<t.sourceLayer.inboundNodes.length;++r)for(const s of t.sourceLayer.inboundNodes[r].outputTensors)if(s.id===t.id){n=r;break}e=t.sourceLayer.getOutputAt(n)}return e}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jme=ce();Jme.registerFlag("TOPOLOGICAL_SORT_CACHE_MAX_ENTRIES",()=>100,qme);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function ZD(t,e){return oe(()=>Lr(qe(Y(t,t),e,!0)))}class D0 extends Vh{getConfig(){return{}}}class w5 extends D0{constructor(e){super(),this.defaultMaxValue=2,this.defaultAxis=0,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return oe(()=>{const n=ZD(e,this.axis),r=Bs(n,0,this.maxValue);return Y(e,Ue(r,xe(Cr(),n)))})}getConfig(){return{maxValue:this.maxValue,axis:this.axis}}}w5.className="MaxNorm";Ce(w5);class x5 extends D0{constructor(e){super(),this.defaultAxis=0,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return oe(()=>Ue(e,xe(Cr(),ZD(e,this.axis))))}getConfig(){return{axis:this.axis}}}x5.className="UnitNorm";Ce(x5);class S5 extends D0{apply(e){return xa(e)}}S5.className="NonNeg";Ce(S5);class C5 extends D0{constructor(e){super(),this.defaultMinValue=0,this.defaultMaxValue=1,this.defaultRate=1,this.defaultAxis=0,this.minValue=e.minValue!=null?e.minValue:this.defaultMinValue,this.maxValue=e.maxValue!=null?e.maxValue:this.defaultMaxValue,this.rate=e.rate!=null?e.rate:this.defaultRate,this.axis=e.axis!=null?e.axis:this.defaultAxis}apply(e){return oe(()=>{const n=ZD(e,this.axis),r=xe(Y(this.rate,Bs(n,this.minValue,this.maxValue)),Y(1-this.rate,n));return Y(e,Ue(r,xe(Cr(),n)))})}getConfig(){return{minValue:this.minValue,maxValue:this.maxValue,rate:this.rate,axis:this.axis}}}C5.className="MinMaxNorm";Ce(C5);const H3={maxNorm:"MaxNorm",minMaxNorm:"MinMaxNorm",nonNeg:"NonNeg",unitNorm:"UnitNorm"};function _r(t){return VD(t)}function G3(t,e={}){return N0(t,Ri.getMap().classNameMap,e,"constraint")}function Tr(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in H3?H3[t]:t,config:{}};return G3(n)}else return t instanceof D0?t:G3(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */async function gd(t){if(t==null)return;const e=[],n=[],r=[];for(const s in t){const i=t[s];if(typeof i!="number"){const o=i;e.push(o.data()),n.push(s),r.push(o)}}if(e.length>0){const s=await Promise.all(e);for(let i=0;i<s.length;++i)t[n[i]]=s[i][0];_t(r)}}function E5(t){if(t!=null)for(const e in t){const n=t[e];typeof n!="number"&&n.dispose()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var K3;(function(t){t[t.SILENT=0]="SILENT",t[t.VERBOSE=1]="VERBOSE"})(K3||(K3={}));const Zme=125;class _b{constructor(){this.validationData=null}setParams(e){this.params=e}async onEpochBegin(e,n){}async onEpochEnd(e,n){}async onBatchBegin(e,n){}async onBatchEnd(e,n){}async onTrainBegin(e){}async onTrainEnd(e){}setModel(e){}}class ege{constructor(e,n=10){e==null&&(e=[]),this.callbacks=e,this.queueLength=n}append(e){this.callbacks.push(e)}setParams(e){for(const n of this.callbacks)n.setParams(e)}setModel(e){for(const n of this.callbacks)n.setModel(e)}async onEpochBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochBegin(e,n)}async onEpochEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onEpochEnd(e,n)}async onBatchBegin(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchBegin(e,n)}async onBatchEnd(e,n){n==null&&(n={});for(const r of this.callbacks)await r.onBatchEnd(e,n)}async onTrainBegin(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainBegin(e)}async onTrainEnd(e){e==null&&(e={});for(const n of this.callbacks)await n.onTrainEnd(e)}}class tge extends _b{constructor(){super()}async onEpochBegin(e){this.seen=0,this.totals={}}async onBatchEnd(e,n){n==null&&(n={});const r=n.size==null?0:n.size;this.seen+=r;for(const s in n){const i=n[s];if(typeof i=="number")this.totals.hasOwnProperty(s)||(this.totals[s]=0),this.totals[s]=this.totals[s]+i*r;else{let o;s in this.totals?o=this.totals[s]:this.totals[s]=0;const a=oe(()=>xe(this.totals[s],Y(i,r)));this.totals[s]=a,o!=null&&o.dispose()}}}async onEpochEnd(e,n){if(n!=null)for(const r of this.params.metrics)this.totals[r]!=null&&(typeof this.totals[r]=="number"?n[r]=this.totals[r]/this.seen:oe(()=>{const s=Y(Ue(1,this.seen),this.totals[r]);n[r]=s,this.totals[r].dispose(),xr(n[r])}))}}class nge extends _b{async onTrainBegin(e){this.epoch=[],this.history={}}async onEpochEnd(e,n){n==null&&(n={}),this.epoch.push(e);for(const r in n)this.history[r]==null&&(this.history[r]=[]),this.history[r].push(n[r])}async syncData(){const e=[],n=[],r=[];for(const i in this.history){const o=this.history[i];for(let a=0;a<o.length;++a)if(typeof o[a]!="number"){const l=o[a];e.push(l.data()),n.push(i),r.push(a)}}const s=await Promise.all(e);for(let i=0;i<s.length;++i)this.history[n[i]][r[i]].dispose(),this.history[n[i]][r[i]]=s[i][0]}}class rge extends _b{constructor(e,n){if(super(),this.currentEpoch=0,this.nowFunc=e.nowFunc,this.nextFrameFunc=e.nextFrameFunc||hD,this.yieldEvery=n||"auto",this.yieldEvery==="auto"&&(this.yieldEvery=Zme),this.yieldEvery==="never"&&e.onYield!=null)throw new Error("yieldEvery is `never` but you provided an `onYield` callback. Either change `yieldEvery` or remove the callback");dS(this.yieldEvery)&&(this.maybeWait=gme(this.maybeWait.bind(this),this.yieldEvery,this.nowFunc)),this.trainBegin=e.onTrainBegin,this.trainEnd=e.onTrainEnd,this.epochBegin=e.onEpochBegin,this.epochEnd=e.onEpochEnd,this.batchBegin=e.onBatchBegin,this.batchEnd=e.onBatchEnd,this.yield=e.onYield}async maybeWait(e,n,r){const s=[];this.yield!=null&&(await gd(r),s.push(this.yield(e,n,r))),s.push(this.nextFrameFunc()),await Promise.all(s)}async onEpochBegin(e,n){this.currentEpoch=e,this.epochBegin!=null&&(await gd(n),await this.epochBegin(e,n))}async onEpochEnd(e,n){const r=[];this.epochEnd!=null&&(await gd(n),r.push(this.epochEnd(e,n))),this.yieldEvery==="epoch"&&r.push(this.nextFrameFunc()),await Promise.all(r)}async onBatchBegin(e,n){this.batchBegin!=null&&(await gd(n),await this.batchBegin(e,n))}async onBatchEnd(e,n){const r=[];this.batchEnd!=null&&(await gd(n),r.push(this.batchEnd(e,n))),this.yieldEvery==="batch"?r.push(this.nextFrameFunc()):dS(this.yieldEvery)&&r.push(this.maybeWait(this.currentEpoch,e,n)),await Promise.all(r)}async onTrainBegin(e){this.trainBegin!=null&&(await gd(e),await this.trainBegin(e))}async onTrainEnd(e){this.trainEnd!=null&&(await gd(e),await this.trainEnd(e))}}function _5(t,e){return t==null&&(t={}),t instanceof _b?[t]:Array.isArray(t)&&t[0]instanceof _b?t:Jt(t).map(r=>new rge(r,e))}class ho{constructor(){}static registerCallbackConstructor(e,n){P(e>=0&&Number.isInteger(e),()=>`Verbosity level is expected to be an integer >= 0, but got ${e}`),ho.checkForDuplicate(n),ho.constructors[e]==null&&(ho.constructors[e]=[]),ho.constructors[e].push(n)}static checkForDuplicate(e){for(const n in ho.constructors)ho.constructors[+n].forEach(s=>{if(s===e)throw new te("Duplicate callback constructor.")})}static clear(){ho.constructors={}}static createCallbacks(e){const n=[];for(const r in ho.constructors){const s=+r;e>=s&&n.push(...ho.constructors[s])}return n.map(r=>new r)}}ho.constructors={};function T5(t,e,n,r,s,i,o,a,l){const c=new nge,u=[new tge,...ho.createCallbacks(e)];t!=null&&u.push(...t),u.push(c);const d=new ege(u);return d.setParams({epochs:n,initialEpoch:r,samples:s,steps:i,batchSize:o,verbose:e,doValidation:a,metrics:l}),{callbackList:d,history:c}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Wl(t,e={},n=!1){return N0(t,Ri.getMap().classNameMap,e,"layer",n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function NS(t,e){return oe(()=>{t.dtype!=="float32"&&(t=$e(t,"float32"));const n=qe(A0(t),e,!0),r=Mh(n.shape,Cr()),s=Lr(ml(n,r));return Ue(t,s)})}function L_(t,e){return oe(()=>Vn(A0(Fe(e,t)),-1))}function eP(t,e){return oe(()=>Vn(lr(Fe(e,t)),-1))}function tP(t,e){return oe(()=>{const n=Fe(t,e),r=Bs(lr(t),Cr(),Number.MAX_VALUE),s=lr(Ue(n,r));return Y(100,Vn(s,-1))})}function sge(t,e){return oe(()=>{const n=Bs(e,Cr(),Number.MAX_VALUE),r=fi(xe(1,n)),s=Bs(t,Cr(),Number.MAX_VALUE),i=fi(xe(1,s));return Vn(A0(Fe(r,i)),-1)})}function ige(t,e){return oe(()=>{const n=ml(0,Fe(1,Y(t,e)));return Vn(A0(n),-1)})}function oge(t,e){return oe(()=>{const n=ml(0,Fe(1,Y(t,e)));return Vn(n,-1)})}function age(t,e){return oe(()=>{const n=qe(Y(t,e),-1),r=ji(Y(Fe(1,t),e),-1);return ml(0,xe(1,Fe(r,n)))})}function lge(t,e){return oe(()=>{const n=Math.log(2),r=Fe(e,t),s=Fe(xe(r,zh(Y(-2,r))),n);return Vn(s,-1)})}function Tb(t,e,n=!1){return oe(()=>{if(n)e=w0(e);else{const r=qe(e,e.shape.length-1,!0);e=Ue(e,r)}return e=Bs(e,Cr(),1-Cr()),yn(qe(Y($e(t,"float32"),fi(e)),e.shape.length-1))})}function $S(t,e,n=!1){return oe(()=>{const r=$e(tg(Ime(t)),"int32");e=Bs(e,Cr(),1-Cr());const s=e.shape,i=ee(Op(r,s[s.length-1]),s);return Tb(i,e,n)})}function cge(t,e){if(!Nt(t.shape,e.shape))throw new te(`logits and labels must have the same shape, but got shapes ${JSON.stringify(t.shape)} and ${JSON.stringify(e.shape)}`);return oe(()=>{const n=xa(e),r=yn(lr(e));return xe(Fe(n,Y(e,t)),d0(js(r)))})}function F_(t,e){return oe(()=>{let n;return n=Bs(e,Cr(),1-Cr()),n=fi(Ue(n,Fe(1,n))),Vn(cge(t,n),-1)})}function uge(t,e){return oe(()=>{const n=Bs(t,Cr(),1),r=Bs(e,Cr(),1);return qe(Y(t,fi(Ue(n,r))),-1)})}function dge(t,e){return oe(()=>{const n=fi(xe(Cr(),e));return Vn(Fe(e,Y(t,n)),-1)})}function k5(t,e){return oe(()=>{const n=NS(t,-1),r=NS(e,-1),s=Y(n,r);return yn(qe(s,-1))})}const AS={meanSquaredError:L_,meanAbsoluteError:eP,meanAbsolutePercentageError:tP,meanSquaredLogarithmicError:sge,squaredHinge:ige,hinge:oge,categoricalHinge:age,logcosh:lge,categoricalCrossentropy:Tb,sparseCategoricalCrossentropy:$S,binaryCrossentropy:F_,kullbackLeiblerDivergence:uge,poisson:dge,cosineProximity:k5};function YI(t){if(typeof t=="string"){if(t in AS)return AS[t];let e=`Unknown loss ${t}`;throw t.toLowerCase().includes("softmaxcrossentropy")&&(e=`Unknown loss ${t}. Use "categoricalCrossentropy" as the string name for tf.losses.softmaxCrossEntropy`),new te(e)}else return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function I5(t,e){return oe(()=>{const n=Y(.5,pi(e)),r=Ja(Gs(e,n),t.dtype);return Vn(Lo(t,r),-1)})}function N5(t,e){return oe(()=>Ja(Lo(dh(t,-1),dh(e,-1)),"float32"))}function hge(t,e){return oe(()=>$e(qe(fa(Lo(t,1),Lo(e,1))),"float32"))}function fge(t,e){return oe(()=>$e(qe(fa(Lo(t,0),Lo(e,1))),"float32"))}function pge(t,e){return oe(()=>{const n=hge(t,e),r=fge(t,e),s=xe(n,r);return $e(Wr(Gs(s,0),Ue(n,s),0),"float32")})}function mge(t,e){return F_(t,e)}function gge(t,e){return t.rank===e.rank&&(t=Ao(t,[t.rank-1])),e=dh(e,-1),e.dtype!==t.dtype&&(e=$e(e,t.dtype)),$e(Lo(t,e),"float32")}const yge=L_,bge=L_,vge=eP,wge=eP,xge=tP,Sge=tP,$5=Tb,Cge=k5,A5=$S,RS={binaryAccuracy:I5,categoricalAccuracy:N5,precision:pge,categoricalCrossentropy:$5,sparseCategoricalCrossentropy:A5,mse:yge,MSE:bge,mae:vge,MAE:wge,mape:xge,MAPE:Sge,cosine:Cge};function Ege(t){if(typeof t=="string"&&t in RS)return RS[t];if(typeof t!="string"&&t!=null)return t;throw new te(`Unknown metric ${t}`)}function zx(t){if(Fa(t!==null,`Unknown LossOrMetricFn ${t}`),typeof t=="string")return t;{let e;for(const n of Object.keys(AS))if(AS[n]===t){e=n;break}if(e!==void 0)return e;for(const n of Object.keys(RS))if(RS[n]===t){e=n;break}return e!==void 0?e:t.name}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function _ge(t){const e={Adagrad:()=>Sd.adagrad(.01),Adadelta:()=>Sd.adadelta(1,.95,Cr()),Adam:()=>Sd.adam(.001,.9,.999,Cr()),Adamax:()=>Sd.adamax(.002,.9,.999,Cr(),0),RMSProp:()=>Sd.rmsprop(.001,.9,0,Cr()),SGD:()=>Sd.sgd(.01)};if(e.adagrad=e.Adagrad,e.adadelta=e.Adadelta,e.adam=e.Adam,e.adamax=e.Adamax,e.rmsprop=e.RMSProp,e.sgd=e.SGD,t in e)return e[t]();throw new te(`Unknown Optimizer ${t}`)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const q3=1*1024*1024;function X3(t,e,n=!1){if(t==null||typeof t!="object"||Object.getPrototypeOf(t)!==Object.prototype||!AA(t))throw new Error("User-defined metadata is expected to be a JSON object, but is not.");if(n){const r=JSON.stringify(t);r.length>q3&&console.warn(`User-defined metadata of model "${e}" is too large in size (length=${r.length} when serialized). It is not recommended to store such large objects in user-defined metadata. Please make sure its serialized length is <= ${q3}.`)}}function AA(t){if(t===null)return!0;if(typeof t=="object")if(Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);for(const n of e)if(typeof n!="string"||!AA(t[n]))return!1;return!0}else if(Array.isArray(t)){for(const e of t)if(!AA(e))return!1;return!0}else return!1;else{const e=typeof t;return e==="string"||e==="number"||e==="boolean"}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Tge(t,e,n,r=console.log){const s=Ige(t),i=["Layer (type)","Input Shape","Output shape","Param #"];s?(e=e||90,n=n||[.32,.61,.89,1]):(e=e||115,n=n||[.24,.48,.7,.8,1]),n[n.length-1]<=1&&(n=n.map(u=>Math.floor(e*u)));let o;if(!s){i.push("Receives inputs"),o=[];for(const u in t.nodesByDepth)o.push(...t.nodesByDepth[u])}r("_".repeat(e)),OS(i,n,r),r("=".repeat(e));const a=t.layers;for(let u=0;u<a.length;++u)s?Nge(a[u],n,r):$ge(a[u],n,o,r),r((u===a.length-1?"=":"_").repeat(e));t.checkTrainableWeightsConsistency();const l=kge(t),c=TS(t.nonTrainableWeights);r(`Total params: ${l+c}`),r(`Trainable params: ${l}`),r(`Non-trainable params: ${c}`),r("_".repeat(e))}function kge(t){let e;return t.collectedTrainableWeights!=null?e=TS(t.collectedTrainableWeights):e=TS(t.trainableWeights),e}function Ige(t){let e=!0;const n=[],r=[];for(const s in t.nodesByDepth)n.push(t.nodesByDepth[s]);for(const s of n){if(s.length>1||s.length===1&&s[0].inboundLayers.length>1){e=!1;break}r.push(...s)}if(e)for(const s of t.layers){let i=!1;for(const o of s.inboundNodes)if(r.indexOf(o)!==-1)if(i){e=!1;break}else i=!0;if(!e)break}return e}function OS(t,e,n=console.log){let r="";for(let s=0;s<t.length;++s)s>0&&(r=r.slice(0,r.length-1)+" "),r+=t[s],r=r.slice(0,e[s]),r+=" ".repeat(e[s]-r.length);n(r)}function Nge(t,e,n){let r,s;try{s=t.inboundNodes.map(l=>JSON.stringify(l.inputShapes)).join(",")}catch{s="multiple"}try{r=JSON.stringify(t.outputShape)}catch{r="multiple"}const i=t.name,o=t.getClassName(),a=[`${i} (${o})`,s,r,t.countParams().toString()];OS(a,e,n)}function $ge(t,e,n,r){let s,i;try{i=t.inboundNodes.map(d=>JSON.stringify(d.inputShapes)).join(",")}catch{i="multiple"}try{s=JSON.stringify(t.outputShape)}catch{s="multiple"}const o=[];for(const d of t.inboundNodes)if(!(n!=null&&n.length>0&&n.indexOf(d)===-1))for(let h=0;h<d.inboundLayers.length;++h){const f=d.inboundLayers[h].name,p=d.nodeIndices[h],m=d.tensorIndices[h];o.push(`${f}[${p}][${m}]`)}const a=t.name,l=t.getClassName(),c=o.length===0?"":o[0],u=[`${a} (${l})`,i,s,t.countParams().toString(),c];OS(u,e,r);for(let d=1;d<o.length;++d)OS(["","","","",o[d]],e,r)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function R5(t,e,n){return(t==="inboundNodes"||t==="outputLayers"||t==="inputLayers")&&e===0&&typeof n=="string"}function RA(t,e){if(t===null)return null;if(typeof t=="string")return Id(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];R5(e,s,i)?n.push(i):n.push(RA(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r];if(r==="name"&&typeof s=="string")n[r]=s;else{const i=Id(r);n[i]=RA(s,i)}}return n}}function OA(t,e){if(t==null)return null;if(typeof t=="string")return Dl(t);if(typeof t=="number"||typeof t=="boolean")return t;if(t instanceof Array){const n=[],r=t.length;for(let s=0;s<r;++s){const i=t[s];R5(e,s,i)?n.push(i):n.push(OA(i,e))}return n}else{const n={};for(const r of Object.keys(t)){const s=t[r],i=Dl(r);(r==="name"||r==="className")&&typeof s=="string"?n[i]=s:n[i]=OA(s,r)}return n}}/** @license See the LICENSE file. */const O5="4.19.0";/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Age=t=>{const e=Object.keys(t);if(e.length===0)return!1;const n=e[0].split("/");return!isNaN(parseInt(n[n.length-1],10))};let Rge=class Da extends It{constructor(e){if(super({}),this.containerNodes=new Set,this.name=e.name,this.name==null){const b=this.getClassName().toLowerCase();this.name=O_(b)}if(this.supportsMasking=!1,this.trainable_=!0,Array.isArray(e.inputs)?this.inputs=e.inputs.slice():this.inputs=[e.inputs],Array.isArray(e.outputs)?this.outputs=e.outputs.slice():this.outputs=[e.outputs],au(this.inputs).length!==this.inputs.length)throw new te(`The list of inputs passed to the model is redundant. All inputs should only appear once. Found: ${this.inputs.map(b=>b.name)}`);au(this.outputs).length!==this.outputs.length&&console.warn(`The list of outputs passed to the model is redundant. All outputs should only appear once. Found: ${this.outputs.map(b=>b.name)}`),this.inputLayers=[],this.inputLayersNodeIndices=[],this.inputLayersTensorIndices=[],this.outputLayers=[],this.outputLayersNodeIndices=[],this.outputLayersTensorIndices=[],this.layers=[],this.internalContainerRefs=[];for(const b of this.outputs){const v=b.sourceLayer,w=b.nodeIndex,C=b.tensorIndex;this.outputLayers.push(v),this.outputLayersNodeIndices.push(w),this.outputLayersTensorIndices.push(C)}for(const b of this.inputs){const v=b.sourceLayer,w=b.nodeIndex,C=b.tensorIndex;Fa(w===0,"input layer has >1 nodes"),Fa(C===0,"input layer has >1 tensors"),this.inputLayers.push(v),this.inputLayersNodeIndices.push(w),this.inputLayersTensorIndices.push(C)}this.inputNames=[],this.outputNames=[],this.feedInputShapes=[],this.feedInputNames=[],this.feedOutputNames=[];for(let b=0;b<this.inputLayers.length;b++){const v=this.inputLayers[b];if(!(v instanceof O0))throw new TypeError(`Input layers to a LayersModel must be InputLayer objects. Received inputs: ${e.inputs}. Input ${b} (0-based) originates from layer type ${v.getClassName()}.`);this.inputNames.push(v.name),this.feedInputShapes.push(v.batchInputShape),this.feedInputNames.push(v.name)}for(const b of this.outputLayers)this.outputNames.push(b.name);this.internalInputShapes=this.inputs.map(b=>b.shape),this.internalOutputShapes=this.outputs.map(b=>b.shape);const n={},r={},s={},i={},o={},a=[],l=(b,v,w,C,_,E)=>{(C==null||_==null||E==null)&&(C=b.sourceLayer,_=b.nodeIndex,E=b.tensorIndex);const I=C.inboundNodes[_];if(w.indexOf(I)!==-1)throw new Eo(`The tensor ${b.name} at layer "${C.name}" is part of a cycle.`);if(v.indexOf(I)!==-1)return;this.containerNodes.add(Da.nodeKey(C,_)),C.id in o||(o[C.id]=Object.keys(o).length),w.indexOf(I)===-1&&w.push(I);const O=I.inboundLayers.length;for(let R=0;R<O;R++){const z=I.inputTensors[R],B=I.inboundLayers[R],j=I.nodeIndices[R],G=I.tensorIndices[R];l(z,v,w,B,j,G)}for(v.push(I);w.indexOf(I)>=0;)w.splice(w.indexOf(I),1);a.push(I)},c=[],u=[];for(const b of this.outputs)l(b,c,u);const d=a.slice().reverse();for(const b of d){r[b.id]=b,b.id in n||(n[b.id]=0);let v=n[b.id];const w=s[b.outboundLayer.id]==null?0:s[b.outboundLayer.id];v=Math.max(v,w),s[b.outboundLayer.id]=v,i[b.outboundLayer.id]=b.outboundLayer,n[b.id]=v;for(let C=0;C<b.inboundLayers.length;C++){const _=b.inboundLayers[C],E=b.nodeIndices[C],I=_.inboundNodes[E],O=n[I.id]==null?0:n[I.id];n[I.id]=Math.max(v+1,O),r[I.id]=I}}const h={};for(const b in n){const v=n[b];v in h||(h[v]=[]),h[v].push(r[b])}const f={};for(const b in s){const v=s[b];v in f||(f[v]=[]),f[v].push(i[b])}let p=Object.keys(f).map(b=>parseInt(b,10)).sort(Lx);this.layers=[];for(const b of p){const v=f[b];v.sort((w,C)=>{const _=o[w.id],E=o[C.id];return _<E?-1:_>E?1:0});for(const w of v)w instanceof Da&&this.internalContainerRefs.push(w),this.layers.push(w)}this.layersByDepth=f,p=Object.keys(h).map(b=>parseInt(b,10)).sort(Lx);const m=this.inputs.slice(),g=[];for(const b of p)for(const v of h[b]){const w=v.outboundLayer;if(w!=null){for(const C of v.inputTensors)if(m.indexOf(C)===-1)throw new Eo(`Graph disconnected: cannot obtain value for tensor ${C} at layer "${w.name}". The following previous layers were accessed without issue: ${g}`);for(const C of v.outputTensors)m.push(C);g.push(w.name)}}this.nodesByDepth=h;const y=this.layers.map(b=>b.name);for(const b of y){const v=y.filter(w=>w===b).length;if(v!==1)throw new Eo(`The name "${b}" is used ${v} times in the model. All layer names should be unique. Layer names: `+JSON.stringify(y))}this.outboundNodes=[],this.inboundNodes=[],new P_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:this.inputs.map(b=>null),outputMasks:this.outputs.map(b=>null),inputShapes:this.inputs.map(b=>b.shape),outputShapes:this.outputs.map(b=>b.shape)}),this.built=!0,this._refCount=1}assertNotDisposed(){if(this._refCount===0)throw new Error(`Container '${this.name}' is already disposed.`)}dispose(){this.assertNotDisposed();const e={refCountAfterDispose:null,numDisposedVariables:0};if(--this._refCount===0){for(const n of this.layers)e.numDisposedVariables+=n.dispose().numDisposedVariables;for(const n of this.internalContainerRefs)e.numDisposedVariables+=n.dispose().numDisposedVariables}return e.refCountAfterDispose=this._refCount,e}get trainable(){return this.trainable_}set trainable(e){this.layers.forEach(n=>{n._trainableWeights.forEach(r=>r.trainable=e)}),this.trainable_=e}get trainableWeights(){if(this._trainableWeights.length>0)throw new te("Container instance unexpectedly contains _trainableWeights.The trainable weights of a Container are a union of the trainable weights of its consituent Layers. Its own _trainableWeights must remain an empty Array.");if(!this.trainable)return[];let e=[];for(const n of this.layers)e=e.concat(n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.layers)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.layers)n.push(...r.trainableWeights);return n.concat(e)}return e}get weights(){return this.trainableWeights.concat(this.nonTrainableWeights)}loadWeights(e,n=!0){const r={};let s=0;const i=Age(e);i&&this.parseWeights(e);for(const a of this.layers)for(const[l,c]of a.weights.entries()){const u=i?`${c.name.split("/").slice(0,-1).join("/")+"/"}${l}`:c.originalName;if(r[u]!=null)throw new te(`Duplicate weight name: ${u}`);r[u]=c,s++}const o=[];for(const a in e){let l=a;if(r[a]==null){const c=a.split("/");l=c.slice(0,-2).concat([c[c.length-1]]).join("/")}if(r[l]!=null)o.push([r[l],e[a]]);else if(n)throw new te(`Provided weight data has no target variable: ${a}`);delete r[l]}if(n){const a=[];for(const l in r)a.push(l);if(a.length>0)throw new te(`${a.length} of ${s} weights are not set: ${a}`)}JD(o)}parseWeights(e){for(const n in Object.keys(e)){const r=n.split("/"),s=["vars","layer_checkpoint_dependencies"],i=r.map(o=>o.startsWith("_")?o.slice(1):o).filter(o=>!s.includes(o)).join("/");i!==n&&(e[i]=e[n],delete e[n])}}updatedConfig(){const e=this.getConfig(),n={};return n.className=this.getClassName(),n.config=e,n.kerasVersion=`tfjs-layers ${O5}`,n.backend="TensorFlow.js",n}toJSON(e,n=!0){const r=OA(this.updatedConfig());return n?JSON.stringify(r):r}call(e,n){return oe(()=>{e=Jt(e);const r=new qc;for(let s=0;s<this.inputs.length;++s)r.add(this.inputs[s],e[s]);return vy(this.outputs,r,n)})}computeMask(e,n){return oe(()=>{e=Jt(e);let r;return n==null?r=vh(null,e.length):r=Jt(n),this.runInternalGraph(e,r)[1]})}computeOutputShape(e){const n=_S(e);if(n.length!==this.inputLayers.length)throw new te(`Invalid inputShape argument ${e}: model has ${this.inputLayers.length} tensor inputs.`);const r={};for(let a=0;a<n.length;a++){const l=this.inputLayers[a],c=n[a],u=l.name+"_0_0";r[u]=c}const s=Object.keys(this.nodesByDepth).map(a=>parseInt(a,10)).sort(Lx);if(s.length>1)for(const a of s){const l=this.nodesByDepth[a];for(const c of l){const u=c.outboundLayer;if(this.inputLayers.map(m=>m.id).indexOf(u.id)!==-1)continue;const d=[];for(let m=0;m<c.inboundLayers.length;m++){const g=c.inboundLayers[m],y=c.nodeIndices[m],b=c.tensorIndices[m],v=`${g.name}_${y}_${b}`,w=r[v];d.push(w)}const h=u.computeOutputShape(Rs(d)),f=_S(h),p=u.inboundNodes.indexOf(c);for(let m=0;m<f.length;m++){const g=`${u.name}_${p}_${m}`;r[g]=f[m]}}}const i=[],o=[];for(let a=0;a<this.outputLayers.length;a++){const l=this.outputLayers[a],c=this.outputLayersNodeIndices[a],u=this.outputLayersTensorIndices[a],d=`${l.name}_${c}_${u}`;o.push(d)}for(let a=0;a<o.length;a++){const l=o[a];Fa(l in r),i.push(r[l])}return Rs(i)}runInternalGraph(e,n){n==null&&(n=vh(null,e.length));const r={};for(let l=0;l<this.inputs.length;++l){const c=this.inputs[l],u=e[l],d=n[l];r[c.id]=[u,d]}const s=Object.keys(this.nodesByDepth).map(l=>parseInt(l,10)).sort(Lx);for(const l of s){const c=this.nodesByDepth[l];for(const u of c){const d=u.outboundLayer,h=u.inputTensors,f=u.outputTensors,p=new Array;for(const m of h)m.id in r&&p.push(r[m.id]);if(p.length===h.length){let m={},g,y,b,v;if(u.callArgs!=null&&(m=u.callArgs),p.length===1){const[w,C]=p[0];m.mask==null&&(m.mask=C),b=Jt(d.call(w,m)),v=Jt(d.computeMask(w,C)),g=[w],y=[C]}else g=p.map(w=>w[0]),y=p.map(w=>w[1]),m.mask==null&&(m.mask=y),b=Jt(d.call(g,m)),v=Jt(d.computeMask(g,y));if(d.activityRegularizer)throw new St("LayersModel invocation with concrete Tensor value(s) in the presence of activity regularizer(s) is not supported yet.");for(let w=0;w<f.length;++w){const C=f[w],_=b[w],E=v[w];r[C.id]=[_,E]}}}}const i=[],o=[],a=[];for(const l of this.outputs){Fa(l.id in r,`Could not compute output ${l.name} : ${l.id}`);const[c,u]=r[l.id];a.push(c.shape),i.push(c),o.push(u)}return[i,o,a]}buildNodeConversionMap(e){const n={};let r;for(const s of this.layers){r=s instanceof Da?1:0;for(let i=0;i<s.inboundNodes.length;i++){const o=Da.nodeKey(s,i);this.containerNodes.has(o)&&(n[o]=r,r+=1)}}return n}getLayer(e,n){if(n!=null)return this.findLayer(n);if(e==null)throw new te("Provide either a layer name or layer index");if(typeof e=="number")return this.findLayer(e);for(const r of this.layers)if(r.name===e)return r;throw new te(`No such layer: ${e}`)}findLayer(e){if(this.layers.length<=e)throw new te(`Was asked to retrieve layer at index ${e}, but model only has ${this.layers.length} layer(s).`);return this.layers[e]}calculateLosses(){return oe(()=>{const e=[];for(const n of this.layers)for(let r=0;r<n.inboundNodes.length;++r){const s=Da.nodeKey(n,r);this.containerNodes.has(s)&&e.push(...n.calculateLosses())}return e})}getConfig(){const e={name:this.name},n=this.buildNodeConversionMap(this.layers),r=[];for(const o of this.layers){const a=o.getClassName(),l=o.getConfig(),c=[];for(let d=0;d<o.inboundNodes.length;d++){const h=o.inboundNodes[d],f=Da.nodeKey(o,d);let p={};if(this.containerNodes.has(f)){if(h.callArgs)try{JSON.stringify(h.callArgs),p=h.callArgs}catch{console.warn(`Layer ${o.name} was passed non-serializable keyword arguments: ${h.callArgs}. They will not be included in the serialized model (and thus will be missing at deserialization time).`),p={}}if(h.inboundLayers.length>0){const m=[];for(let g=0;g<h.inboundLayers.length;g++){const y=h.inboundLayers[g],b=h.nodeIndices[g],v=h.tensorIndices[g],w=Da.nodeKey(y,b);let C=n[w];C==null&&(C=0),m.push([y.name,C,v,p])}c.push(m)}}}const u={};u.name=o.name,u.className=a,u.config=l,u.inboundNodes=c,r.push(u)}e.layers=r;const s=[];for(let o=0;o<this.inputLayers.length;o++){const a=this.inputLayers[o],l=this.inputLayersNodeIndices[o],c=Da.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.inputLayersTensorIndices[o];s.push([a.name,u,d])}e.inputLayers=s;const i=[];for(let o=0;o<this.outputLayers.length;o++){const a=this.outputLayers[o],l=this.outputLayersNodeIndices[o],c=Da.nodeKey(a,l);if(!this.containerNodes.has(c))continue;let u=n[c];u==null&&(u=0);const d=this.outputLayersTensorIndices[o];i.push([a.name,u,d])}return e.outputLayers=i,e}static fromConfig(e,n,r={},s=!1){const i={},o={};function a(g,y){g.name in o?o[g.name].push(y):o[g.name]=[y]}function l(g,y){const b=[];let v;for(const w of y){const C=w[0],_=w[1],E=w[2];if(v=w[3]==null?{}:w[3],!(C in i)){a(g,y);return}const I=i[C];if(I.inboundNodes.length<=_){a(g,y);return}const O=I.inboundNodes[_];b.push(O.outputTensors[E])}b.length>0&&g.apply(Rs(b),v)}function c(g){const y=g.name,b=Wl(g,n.customObjects!=null?n.customObjects:{});b.setFastWeightInitDuringBuild(s),i[y]=b,g.inboundNodes.forEach(w=>{if(!(w instanceof Array))throw new te(`Corrupted configuration, expected array for nodeData: ${w}`);a(b,w)})}const u=n.name,d=n.layers;for(const g of d)c(g);for(;!mme(o);)for(const g of d){const y=i[g.name];if(y.name in o){const b=o[y.name];delete o[y.name];for(const v of b)l(y,v)}}const h=[],f=[],p=n.inputLayers;for(const g of p){const y=g[0],b=g[1],v=g[2];Fa(y in i);const C=i[y].inboundNodes[b].outputTensors;h.push(C[v])}const m=n.outputLayers;for(const g of m){const y=g[0],b=g[1],v=g[2];Fa(y in i);const C=i[y].inboundNodes[b].outputTensors;f.push(C[v])}return new e({inputs:h,outputs:f,name:u})}get stateful(){if(this._stateful)throw new te("Container instance unexpectedly has _stateful = true. The statefulness of a Container is determined by the Layers it contains. Its _stateful property must remain the default false.");for(const e of this.layers)if(e.stateful)return!0;return!1}resetStates(){oe(()=>{this.layers.forEach(e=>{e.stateful&&e.resetStates()})})}};/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Oge(t,e,n){const r=e.length;if(t==null||Array.isArray(t)&&t.length===0)return e.map(s=>null);if(r===1)return Array.isArray(t)&&t.length===1?t:typeof t=="object"&&e[0]in t?[t[e[0]]]:[t];if(Array.isArray(t)){if(t.length!==r)throw new Error(`Provided ${n} is an array of ${t.length} element(s), but the model has ${r} outputs. Make sure a set of weights is provided for each model output.`);return t}else if(typeof t=="object"&&Object.keys(t).length>0&&typeof t[Object.keys(t)[0]]=="object"){const s=[];return e.forEach(i=>{i in t?s.push(t[i]):s.push(null)}),s}else throw new Error(`The model has multiple (${r}) outputs, so ${n} must be either an array with ${r} elements or an object with ${e} keys. Provided ${n} not understood: ${JSON.stringify(t)}`)}function D5(t,e){return Oge(t,e,"classWeight")}async function P5(t,e,n,r){if(n!=null){const s=oe(()=>{if(t.shape.length===1)return Xa(t);if(t.shape.length===2){if(t.shape[1]>1)return dh(t,1);if(t.shape[1]===1)return ee(t,[t.shape[0]]);throw new Error(`Encountered unexpected last-dimension size (${t.shape[1]}) during handling of class weights. The size is expected to be >= 1.`)}else throw new Error(`Unexpected rank of target (y) tensor (${t.rank}) during handling of class weights. The rank is expected to be 1 or 2.`)}),i=Array.from(await s.data());_t(s);const o=[];return i.forEach(a=>{if(n[a]==null)throw new Error(`classWeight must contain all classes in the training data. The class ${a} exists in the data but not in classWeight`);o.push(n[a])}),Sr(o,"float32")}else return null}function Dge(t,e){return Y(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const Pge=32;function L5(t,e){let n,r;const s=e;n=s.xs,r=s.ys,P(n!=null&&r!=null,()=>`A Dataset iterator for fitDataset() is expected to generate objects of the form \`{xs: xVal, ys: yVal}\`, where the two values may be \`tf.Tensor\`, an array of Tensors, or a map of string to Tensor.  The provided Dataset instead generates ${e}`);const i=Y3("input",t.inputNames,n),o=Y3("output",t.outputNames,r),a=i[0].shape[0];P(i.length===t.inputs.length,()=>`LayersModel has ${t.inputs.length} inputs, but the dataset provides ${i.length} inputs.  (Expected input keys: ${JSON.stringify(t.inputNames)})`),P(o.length===t.outputs.length,()=>`LayersModel has ${t.outputs.length} outputs, but the dataset provides ${o.length} outputs.  (Expected output keys: ${JSON.stringify(t.outputNames)})`);for(let l=0;l<i.length;l++)P(i[l].shape[0]===a,()=>`Batch size mismatch: input ${t.inputNames[l]} has ${i[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);for(let l=0;l<o.length;l++)P(o[l].shape[0]===a,()=>`Batch size mismatch: output ${t.outputNames[l]} has ${o[l].shape[0]}; expected  ${a} based on input ${t.inputNames[0]}.`);return{xs:i,ys:o}}function Y3(t,e,n){if(n instanceof Ot)return[n];if(Array.isArray(n))return P(n.length===e.length,()=>`Received an array of ${n.length} Tensors, but expected ${e.length} to match the ${t} keys ${e}.`),n;{const r=[];for(const s of e){if(n[s]==null)throw new te(`The feature data generated by the dataset lacks the required ${t} key '${s}'.`);r.push(n[s])}return r}}function Lge(t){if(t.length===3)throw new St("Validation with sample weights is not implemented yet.");return{xs:t[0],ys:t[1]}}async function Fge(t,e,n){const r=n.batchesPerEpoch!=null;if(P(t.optimizer!=null,()=>"You must compile a model before training/testing. Use LayersModel.compile(modelCompileConfig)."),P(n!=null,()=>"For fitDataset(), the 2nd argument (config) is required, but it is not provided in this call."),P(n.epochs!=null&&n.epochs>0&&Number.isInteger(n.epochs),()=>`For fitDataset(), config.epochs is expected to be a positive integer, but got ${n.epochs}`),P(!r||n.batchesPerEpoch>0&&Number.isInteger(n.batchesPerEpoch),()=>`For fitDataset(), config.batchesPerEpoch is expected to be a positive integer if specified, but got ${n.batchesPerEpoch}`),P(n.validationSplit==null,()=>"`validationSplit` is not supported by `fitDataset()`. Use validationData instead."),t.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");t.isTraining=!0;try{const s=n.validationData!=null;let i,o;if(s)if(Q3(n.validationData))P(n.validationBatches==null||n.validationBatches>0&&Number.isInteger(n.validationBatches),()=>`For fitDataset() with dataset-based validation, config.validationBatches is expected not to be provided, or to be a positive integer, but got ${n.validationBatches}`);else{const g=Lge(n.validationData);i=g.xs,o=g.ys}const a=t.makeTrainFunction(),l=t.getDedupedMetricsNames();let c;s?c=l.slice().concat(l.map(g=>"val_"+g)):c=l.slice();const u=_5(n.callbacks,n.yieldEvery),d=n.verbose==null?1:n.verbose,{callbackList:h,history:f}=T5(u,d,n.epochs,null,null,Mge(e,n),null,s,c);h.setModel(t),t.history=f,await h.onTrainBegin(),t.stopTraining_=!1;let p=n.initialEpoch==null?0:n.initialEpoch,m=await e.iterator();for(;p<n.epochs;){const g={};await h.onEpochBegin(p);let y=0,b=0;for(r||(m=await e.iterator());!r||y<n.batchesPerEpoch;){const v=await m.next();if(r&&v.done){console.warn(`You provided \`batchesPerEpoch\` as ${n.batchesPerEpoch}, but your dataset iterator ran out of data after ${y} batches; interrupting training. Make sure that your dataset can generate at least \`batchesPerEpoch * epochs\` batches (in this case, ${n.batchesPerEpoch*n.epochs} batches). You may need to use the repeat() function when building your dataset.`);break}if(v.value!=null){const{xs:w,ys:C}=L5(t,v.value),_={};_.batch=b,_.size=w[0].shape[0],await h.onBatchBegin(b,_);const E=[];if(n.classWeight!=null){const R=D5(n.classWeight,t.outputNames);for(let z=0;z<R.length;++z)E.push(await P5(C[z],null,R[z]))}const I=w.concat(C).concat(E),O=a(I);_t(I);for(let R=0;R<l.length;++R){const z=l[R],B=O[R];_[z]=B,xr(B)}await h.onBatchEnd(b,_),E5(_),b++,y++}if(r?y>=n.batchesPerEpoch:v.done){if(s){let w;Q3(n.validationData)?w=Jt(await t.evaluateDataset(n.validationData,{batches:n.validationBatches})):w=Jt(t.evaluate(i,o,{batchSize:n.validationBatchSize==null?Pge:n.validationBatchSize,verbose:0}));for(let C=0;C<t.metricsNames.length;++C)g[`val_${t.metricsNames[C]}`]=w[C]}break}if(t.stopTraining_)break}if(await h.onEpochEnd(p,g),p++,t.stopTraining_)break}return await h.onTrainEnd(),await t.history.syncData(),t.history}finally{t.isTraining=!1}}function Mge(t,e){let n=null;return e.batchesPerEpoch!=null?n=e.batchesPerEpoch:Number.isFinite(t.size)&&(n=t.size),n}function Q3(t){return typeof t.iterator=="function"}function zge(t){return typeof t.next=="function"}async function Bge(t,e,n){n=n||{};const r=n.batches!=null,s=t.testFunction;let i=[];if(n.verbose>0)throw new St("Verbose mode is not implemented yet.");P(!r||n.batches>0&&Number.isInteger(n.batches),()=>`Test loop expects \`batches\` to be a positive integer, but received ${JSON.stringify(n.batches)}`);const o=zge(e)?e:await e.iterator();let a=0,l=0;for(;!r||l<n.batches;){const c=await o.next();if(i=oe(()=>{if(c.value){const{xs:u,ys:d}=L5(t,c.value),h=u.concat(d),f=oe(()=>s(h));if(_t(h),l===0)for(let m=0;m<f.length;++m)i.push(tt(0));const p=h[0].shape[0];for(let m=0;m<f.length;++m){const g=f[m],y=i[m];i[m]=oe(()=>xe(i[m],Y(p,g))),l>0&&_t(y)}_t(f),a+=p,++l}return i}),c.done){r&&console.warn(`Your dataset iterator ran out of data during evaluateDataset(). Interrupting evalution. Make sure that your dataset can generate at least \`batches\` batches (in this case, ${n.batches} batches). You may need to use the repeat() function when building your dataset.`);break}}for(let c=0;c<i.length;++c){const u=i[c];i[c]=Ue(i[c],a),_t(u)}return Rs(i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function QI(t){P(t>0&&Number.isInteger(t),()=>`batchSize is required to be a positive integer, but got ${t}`)}function oy(t,e,n){return t==null?[null]:Array.isArray(t)?t.map(r=>Qd(r,e,n-e)):Qd(t,e,n-e)}function DA(t,e){return oe(()=>t==null?null:Array.isArray(t)?t.map(n=>DA(n,e)):u5(t,e.dtype==="int32"?e:$e(e,"int32")))}function JI(t,e){const n=[];let r=0,s=null;for(;r<t;)s=r+e,s>=t&&(s=t),n.push([r,s]),r=s;return n}function F5(t){const e=[];t instanceof Ot&&(t=[t]);for(let n=0;n<t.length;++n){const r=t[n];if(r.rank===1)e.push($0(r,1));else{if(r.rank===0)throw new Error("Expected tensor to be at least 1D, but received a 0D tensor (scalar).");e.push(r)}}return e}function Zo(t,e){if(t==null)return;const n=[];if(e instanceof Ot)n.push(e.id);else if(Array.isArray(e))e.forEach(s=>n.push(s.id));else if(e!=null)for(const s in e){const i=e[s];n.push(i.id)}const r=[];if(t instanceof Ot)n.indexOf(t.id)===-1&&r.push(t);else if(Array.isArray(t))t.forEach(s=>{n.indexOf(s.id)===-1&&r.push(s)});else if(t!=null)for(const s in t){const i=t[s];n.indexOf(i.id)===-1&&r.push(i)}r.forEach(s=>{s.isDisposed||s.dispose()})}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function jge(t){return t instanceof Ot}function PA(t){return Array.isArray(t)}function J3(t){return!jge(t)&&!PA(t)}function Z3(t,e,n,r=!0,s=""){if(e==null||e.length===0){if(t!=null){let o=!1;if(PA(t)&&t.length>0)o=!0;else if(J3(t)){for(const a in t)if(t.hasOwnProperty(a)){o=!0;break}}else o=!0;if(o)throw new te(`Error when checking model ${s} expected no data, but got ${t}`)}return[]}if(t==null)return e.map(o=>null);let i;if(J3(t)){t=t,i=[];for(const o of e){if(t[o]==null)throw new te(`No data provided for "${o}". Need data for each key in: ${e}`);i.push(t[o])}}else if(PA(t)){if(t=t,t.length!==e.length)throw new te(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the model expected. Expected to see ${e.length} Tensor(s), but instead got the following list of Tensor(s): ${t}`);i=t}else{if(t=t,e.length>1)throw new te(`The model ${s} expects ${e.length} Tensor(s), but only received one Tensor. Found: Tensor with shape ${t.shape}`);i=[t]}if(i=F5(i),n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new te(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s). but got array with shape ${a.shape}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u>=0&&c!==u)throw new te(`${s} expected a batch of elements where each example has shape [${n[o].slice(1,n[o].length)}] (i.e.,tensor shape [*,${n[o].slice(1,n[o].length)}]) but the ${s} received an input with ${a.shape[0]} examples, each with shape [${a.shape.slice(1,a.shape.length)}] (tensor shape [${a.shape}])`)}}return i}function Vge(t,e,n){const r=au(t.map(i=>i.shape[0]));r.sort();const s=au(e.map(i=>i.shape[0]));if(s.sort(),r.length>1)throw new te(`All input Tensors (x) should have the same number of samples. Got array shapes: ${JSON.stringify(t.map(i=>i.shape))}`);if(s.length>1)throw new te(`All target Tensors (y) should have the same number of samples. Got array shapes: ${JSON.stringify(e.map(i=>i.shape))}`);if(r.length>0&&s.length>0&&!Nt(r,s))throw new te(`Input Tensors should have the same number of samples as target Tensors. Found ${r[0]} input sample(s) and ${s[0]} target sample(s).`)}function Uge(t,e,n){const r=[L_,F_,Tb];for(let s=0;s<t.length;++s){const i=t[s],o=e[s],a=n[s];if(o!=null){if(o===Tb&&i.shape[i.shape.length-1]===1)throw new te(`You are passing a target array of shape ${i.shape} while using a loss 'categorical_crossentropy'. 'categorical_crossentropy'expects targets to be binary matrices (1s and 0s) of shape [samples, classes].`);if(r.indexOf(o)!==-1){const l=i.shape.slice(1),c=a.slice(1);for(let u=0;u<l.length;++u){const d=l[u],h=c[u];if(h!=null&&d!==h)throw new te(`A target Tensor with shape ${i.shape} was passed for an output of shape ${a}, while using a loss function that expects targets to have the same shape as the output.`)}}}}}function ez(t,e,n,r=!0,s=""){let i;if(Array.isArray(t)){if(t.length!==e.length)throw new te(`Error when checking model ${s}: the Array of Tensors that you are passing to your model is not the size the the model expected. Expected to see ${e.length} Tensor(s), but instead got ${t.length} Tensors(s).`);i=t}else{if(e.length>1)throw new te(`The model expects ${e.length} ${s} Tensors, but only received one Tensor. Found: array with shape ${JSON.stringify(t.shape)}.`);i=[t]}if(n!=null)for(let o=0;o<e.length;++o){if(n[o]==null)continue;const a=i[o];if(a.shape.length!==n[o].length)throw new te(`Error when checking ${s}: expected ${e[o]} to have ${n[o].length} dimension(s), but got array with shape ${JSON.stringify(a.shape)}`);for(let l=0;l<n[o].length;++l){if(l===0&&!r)continue;const c=a.shape[l],u=n[o][l];if(u!=null&&u!==c)throw new te(`Error when checking ${s}: expected ${e[o]} to have shape ${JSON.stringify(n[o])} but got array with shape ${JSON.stringify(a.shape)}.`)}}}function Wge(t,e){if(t==null||Array.isArray(t)&&t.length===0)return e.map(r=>[]);let n;if(typeof t=="string"||typeof t=="function")n=[t];else if(Array.isArray(t)||typeof t=="object")n=t;else throw new TypeError(`Type of metrics argument not understood. Expected an string,function, Array, or Object, found: ${t}`);if(Array.isArray(n))return e.map(r=>n);{const r=[];for(const s of e){let i=n.hasOwnProperty(s)?n[s]:[];Array.isArray(i)||(i=[i]),r.push(i)}return r}}const Hge="layers-model";class cp extends Rge{constructor(e){super(e),this.isTraining=!1}summary(e,n,r=console.log){if(!this.built)throw new te("This model has never been called, thus its weights have not been created yet. So no summary can be displayed. Build the model first (e.g., by calling it on some test data).");Tge(this,e,n,r)}compile(e){if(e.loss==null&&(e.loss=[]),this.loss=e.loss,typeof e.optimizer=="string")this.optimizer_=_ge(e.optimizer),this.isOptimizerOwned=!0;else{if(!(e.optimizer instanceof mc))throw new te("User-defined optimizer must be an instance of tf.Optimizer.");this.optimizer_=e.optimizer,this.isOptimizerOwned=!1}let n=[];if(!Array.isArray(e.loss)&&typeof e.loss!="string"&&typeof e.loss!="function"){e.loss=e.loss;for(const o in e.loss)if(this.outputNames.indexOf(o)===-1)throw new te(`Unknown entry in loss dictionary: "${o}". Only expected the following keys: ${this.outputNames}`);for(const o of this.outputNames)e.loss[o]==null&&console.warn(`Output "${o}" is missing from loss dictionary. We assume this was done on purpose, and we will not be expecting data to be passed to ${o} during training`),n.push(YI(e.loss[o]))}else if(Array.isArray(e.loss)){if(e.loss.length!==this.outputs.length)throw new te(`When passing an Array as loss, it should have one entry per model output. The model has ${this.outputs.length} output(s), but you passed loss=${e.loss}.`);n=e.loss.map(a=>YI(a))}else{const o=YI(e.loss);this.outputs.forEach(a=>{n.push(o)})}this.lossFunctions=n,this.feedOutputNames=[],this.feedOutputShapes=[],this.feedLossFns=[];for(let o=0;o<this.outputs.length;++o){const a=this.internalOutputShapes[o],l=this.outputNames[o];this.feedOutputNames.push(l),this.feedOutputShapes.push(a),this.feedLossFns.push(this.lossFunctions[o])}const r=[];this.metrics=e.metrics,this.metricsNames=["loss"],this.metricsTensors=[],Yd("loss",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=this.lossFunctions[o];this.outputs.length>1&&(this.metricsTensors.push([a,o]),this.metricsNames.push(this.outputNames[o]+"_loss"))}});const s=Wge(e.metrics,this.outputNames),i=(o,a,l)=>{this.outputNames.length>1&&(a=this.outputNames[o]+"_"+a),this.metricsNames.push(a),this.metricsTensors.push([l,o])};Yd("metric",()=>{for(let o=0;o<this.outputs.length;++o){if(r.indexOf(o)!==-1)continue;const a=s[o];(c=>{const u="";let d,h,f;for(const p of c){if(typeof p=="string"&&["accuracy","acc","crossentropy","ce"].indexOf(p)!==-1){const g=this.internalOutputShapes[o];g[g.length-1]===1||this.lossFunctions[o]===F_?["accuracy","acc"].indexOf(p)!==-1?h=I5:["crossentropy","ce"].indexOf(p)!==-1&&(h=mge):this.lossFunctions[o]===$S?["accuracy","acc"].indexOf(p)!==-1?h=gge:["crossentropy","ce"].indexOf(p)!==-1&&(h=A5):["accuracy","acc"].indexOf(p)!==-1?h=N5:["crossentropy","ce"].indexOf(p)!==-1&&(h=$5);let y;["accuracy","acc"].indexOf(p)!==-1?y="acc":["crossentropy","ce"].indexOf(p)!==-1&&(y="ce"),f=h,d=u+y}else f=Ege(p),d=u+zx(p);let m;Yd(d,()=>{m=f}),i(o,d,m)}})(a)}}),this.collectedTrainableWeights=this.trainableWeights}checkTrainableWeightsConsistency(){this.collectedTrainableWeights!=null&&this.trainableWeights.length!==this.collectedTrainableWeights.length&&console.warn("Discrepancy between trainableweights and collected trainable weights. Did you set `model.trainable` without calling `model.compile()` afterwards?")}evaluate(e,n,r={}){const s=r.batchSize==null?32:r.batchSize;QI(s);const o=this.standardizeUserDataXY(e,n,!0,s);try{const a=o[0].concat(o[1]);this.makeTestFunction();const l=this.testFunction,c=this.testLoop(l,a,s,r.verbose,r.steps);return Rs(c)}finally{Zo(o[0],e),Zo(o[1],n)}}async evaluateDataset(e,n){return this.makeTestFunction(),Bge(this,e,n)}checkNumSamples(e,n,r,s="steps"){let i;if(r!=null){if(i=null,n!=null)throw new te(`If ${s} is set, batchSize must be null or undefined.Got batchSize = ${n}`)}else if(e!=null)Array.isArray(e)?i=e[0].shape[0]:i=e.shape[0];else throw new te(`Either the input data should have a defined shape, or ${s} shoud be specified.`);return i}execute(e,n){if(Array.isArray(n)&&n.length===0)throw new te("`outputs` is an empty Array, which is not allowed.");const r=Array.isArray(n),s=r?n:[n],i=this.retrieveSymbolicTensors(s),o=new qc;if(e instanceof Ot&&(e=[e]),Array.isArray(e)){if(e.length!==this.inputs.length)throw new te(`The number of inputs provided (${e.length}) does not match the number of inputs of this model (${this.inputs.length}).`);for(let l=0;l<this.inputs.length;++l)o.add(this.inputs[l],e[l])}else for(const l of this.inputs){const c=e[l.name];if(c==null)throw new te(`No value is provided for the model's input ${l.name}`);o.add(l,c)}const a=vy(i,o);return r?a:a[0]}retrieveSymbolicTensors(e){const n=vh(null,e.length);let r=e.length;for(const s of this.layers){const i=Array.isArray(s.output)?s.output:[s.output],o=i.map(a=>a.name);for(let a=0;a<e.length;++a){const l=o.indexOf(e[a]);if(l!==-1&&(n[a]=i[l],r--),r===0)break}if(r===0)break}if(r>0){const s=[];throw n.forEach((i,o)=>{i==null&&s.push(e[o])}),new te(`Cannot find SymbolicTensors for output name(s): ${JSON.stringify(s)}`)}return n}predictLoop(e,n=32,r=!1){return oe(()=>{const s=this.checkNumSamples(e);if(r)throw new St("Verbose predictLoop() is not implemented yet.");const i=JI(s,n),o=this.outputs.map(a=>[]);for(let a=0;a<i.length;++a)oe(()=>{const c=i[a][0],u=i[a][1],d=oy(e,c,u),h=[];if(Array.isArray(d))for(let p=0;p<d.length;++p)h.push({key:this.inputs[p],value:d[p]});else h.push({key:this.inputs[0],value:d});const f=new qc(h);return vy(this.outputs,f)}).forEach((c,u)=>o[u].push(c));return Rs(o.map(a=>Wn(a,0)))})}predict(e,n={}){const r=F5(e);ez(r,this.inputNames,this.feedInputShapes,!1);try{const s=n.batchSize==null?32:n.batchSize;return QI(s),this.predictLoop(r,s)}finally{Zo(r,e)}}predictOnBatch(e){ez(e,this.inputNames,this.feedInputShapes,!0);const n=(Array.isArray(e)?e[0]:e).shape[0];return this.predictLoop(e,n)}standardizeUserDataXY(e,n,r=!0,s){if(this.optimizer_==null)throw new Eo("You must compile a model before training/testing. Use LayersModel.compile(modelCompileArgs).");const i=[];for(let o=0;o<this.feedOutputShapes.length;++o){const a=this.feedOutputShapes[o];this.feedLossFns[o]===$S?i.push(a.slice(0,a.length-1).concat([1])):i.push(a)}if(e=Z3(e,this.feedInputNames,this.feedInputShapes,!1,"input"),n=Z3(n,this.feedOutputNames,i,!1,"target"),Vge(e,n),Uge(n,this.feedLossFns,this.feedOutputShapes),this.stateful&&s!=null&&s>0&&e[0].shape[0]%s!==0)throw new te(`In a stateful network, you should only pass inputs with a number of samples that is divisible by the batch size ${s}. Found: ${e[0].shape[0]} sample(s).`);return[e,n]}async standardizeUserData(e,n,r,s,i=!0,o){const[a,l]=this.standardizeUserDataXY(e,n,i,o);if(r!=null)throw new Error("sample weight is not supported yet.");let c=null;if(s!=null){const u=D5(s,this.outputNames);c=[];for(let d=0;d<u.length;++d)c.push(await P5(l[d],null,u[d]))}return[a,l,c]}testLoop(e,n,r,s=0,i){return oe(()=>{const o=this.checkNumSamples(n,r,i,"steps"),a=[];if(s>0)throw new St("Verbose mode is not implemented yet.");if(i!=null)throw new St("steps mode in testLoop() is not implemented yet");{const l=JI(o,r),c=Sr(ma(0,o));for(let u=0;u<l.length;++u){const d=l[u][0],h=l[u][1],f=Qd(c,d,h-d),p=DA(n,f),m=e(p);if(u===0)for(let g=0;g<m.length;++g)a.push(tt(0));for(let g=0;g<m.length;++g){const y=m[g];a[g]=xe(a[g],Y(h-d,y))}}for(let u=0;u<a.length;++u)a[u]=Ue(a[u],o)}return a})}getDedupedMetricsNames(){const e=this.metricsNames,n=[];for(let r=0;r<e.length;++r){const s=e[r];let i=s;if(M3(e,s)>1){const o=M3(e.slice(0,r),s);i+=`_${o}`}n.push(i)}return n}makeTrainFunction(){return e=>{const n=[],r=e.slice(0,this.inputs.length),s=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),i=e.slice(this.inputs.length+this.outputs.length,this.inputs.length+this.outputs.length*2),o=[],a=()=>{const d=[];for(let m=0;m<this.inputs.length;++m)d.push({key:this.inputs[m],value:r[m]});const h=new qc(d),f=vy(this.outputs,h,{training:!0});let p;for(let m=0;m<this.lossFunctions.length;++m){const g=this.lossFunctions[m];let y=g(s[m],f[m]);i[m]!=null&&(y=Dge(y,i[m]));const b=Vn(y);n.push(b),m===0?p=y:p=xe(p,y)}for(let m=0;m<this.metricsTensors.length;++m){let g;if(this.outputs.length>1&&m<this.outputs.length)g=n[m];else{const y=this.metricsTensors[m][0],b=this.metricsTensors[m][1];g=Vn(y(s[b],f[b]))}xr(g),o.push(g)}return p=Vn(p),this.calculateLosses().forEach(m=>{p=xe(p,m)}),p},l=this.collectedTrainableWeights.map(d=>d.read());return[this.optimizer_.minimize(a,!0,l)].concat(o)}}makeTestFunction(){this.testFunction=e=>oe(()=>{const n=[];let r;const s=e.slice(0,this.inputs.length),i=e.slice(this.inputs.length,this.inputs.length+this.outputs.length),o=[];for(let c=0;c<this.inputs.length;++c)o.push({key:this.inputs[c],value:s[c]});const a=new qc(o),l=vy(this.outputs,a);for(let c=0;c<this.lossFunctions.length;++c){const u=this.lossFunctions[c],d=Vn(u(i[c],l[c]));c===0?r=d:r=xe(r,d),n.push(r)}for(let c=0;c<this.metricsTensors.length;++c){const u=this.metricsTensors[c][0],d=this.metricsTensors[c][1],h=Vn(u(i[d],l[d]));n.push(h)}return n})}async fit(e,n,r={}){if(this.isTraining)throw new Error("Cannot start training because another fit() call is ongoing.");this.isTraining=!0;let s,i,o,a,l,c,u,d,h;try{const f=r.batchSize==null?32:r.batchSize;QI(f);const m=await this.standardizeUserData(e,n,r.sampleWeight,r.classWeight,!1,f);s=m[0],i=m[1],h=m[2];let g=!1,y;if(r.validationData!=null&&r.validationData.length>0){if(g=!0,r.validationData.length===2)l=r.validationData[0],c=r.validationData[1];else throw r.validationData.length===3?new St("validationData including sample weights is not supported yet."):new te(`When passing validation data, it must contain 2 (valX, valY) or 3 (valX, valY, valSampleWeight) items; ${r.validationData} is invalid.`);const R=await this.standardizeUserData(l,c,null,null,!0,f);u=R[0],d=R[1],y=u.concat(d)}else if(r.validationSplit!=null&&r.validationSplit>0&&r.validationSplit<1){g=!0;const O=Math.floor(s[0].shape[0]*(1-r.validationSplit)),R=s[0].shape[0];u=oy(s,O,R),o=s,s=oy(s,0,O),d=oy(i,O,R),a=i,i=oy(i,0,O),y=u.concat(d)}else r.validationSteps!=null&&(g=!0);const b=s.concat(i).concat(h);this.checkTrainableWeightsConsistency();const v=this.makeTrainFunction(),w=this.getDedupedMetricsNames();let C,_;g?(this.makeTestFunction(),C=this.testFunction,_=w.slice().concat(w.map(O=>"val_"+O))):(C=null,y=[],_=w.slice());const E=_5(r.callbacks,r.yieldEvery);return await this.fitLoop(v,b,w,f,r.epochs,r.verbose,E,C,y,r.shuffle,_,r.initialEpoch,null,null)}finally{this.isTraining=!1,Zo(s,e),Zo(i,n),Zo(o,e),Zo(a,n),Zo(u,l),Zo(d,c),h!=null&&_t(h)}}async fitLoop(e,n,r,s,i,o,a,l,c,u,d,h,f,p){s==null&&(s=32),i==null&&(i=1),u==null&&(u=!0),h==null&&(h=0);let m=!1;if(l!=null&&c!=null&&(m=!0),p!=null&&(m=!0,f==null))throw new te("Can only use `validationSteps` when doing step-wise training, i.e., `stepsPerEpoch` must be set.");const g=this.checkNumSamples(n,s,f,"steps_per_epoch");let y;g!=null&&(y=ma(0,g)),o==null&&(o=1);const{callbackList:b,history:v}=T5(a,o,i,h,g,f,s,m,d);b.setModel(this),this.history=v,await b.onTrainBegin(),this.stopTraining_=!1;for(let w=h;w<i;++w){await b.onEpochBegin(w);const C={};if(f!=null)throw new St("stepsPerEpoch mode is not implemented yet.");{if(u==="batch")throw new St("batch shuffling is not implemneted yet");u&&_R(y);const _=Sr(y),E=JI(g,s);for(let I=0;I<E.length;++I){const O={};if(await b.onBatchBegin(I,O),oe(()=>{const R=E[I][0],z=E[I][1],B=Qd(_,R,z-R);O.batch=I,O.size=z-R;const j=DA(n,B),G=e(j);for(let U=0;U<r.length;++U){const Q=r[U],se=G[U];O[Q]=se,xr(se)}if(I===E.length-1&&m){const U=this.testLoop(l,c,s);for(let Q=0;Q<r.length;++Q){const se=r[Q],V=U[Q];xr(V),C["val_"+se]=V}}}),await b.onBatchEnd(I,O),E5(O),this.stopTraining_)break}_.dispose()}if(await b.onEpochEnd(w,C),this.stopTraining_)break}return await b.onTrainEnd(),await this.history.syncData(),this.history}async fitDataset(e,n){return Fge(this,e,n)}async trainOnBatch(e,n){const r=await this.standardizeUserData(e,n),s=r[0],i=r[1],a=this.makeTrainFunction()(s.concat(i)),l=[];for(const c of a){const u=await c.data();l.push(u[0])}return _t(a),Zo(r[0],e),Zo(r[1],n),Rs(l)}getNamedWeights(e){const n=[],r=e!=null&&e.trainableOnly,s=r?this.trainableWeights:this.weights,i=this.getWeights(r);for(let o=0;o<s.length;++o)r&&!s[o].trainable||n.push({name:s[o].originalName,tensor:i[o]});return n}set stopTraining(e){this.stopTraining_=e}get stopTraining(){return this.stopTraining_}get optimizer(){return this.optimizer_}set optimizer(e){this.optimizer_!==e&&(this.optimizer_=e,this.isOptimizerOwned=!1)}dispose(){const e=super.dispose();if(e.refCountAfterDispose===0&&this.optimizer!=null&&this.isOptimizerOwned){const n=Y$().numTensors;this.optimizer_.dispose(),e.numDisposedVariables+=n-Y$().numTensors}return e}getLossIdentifiers(){let e;if(typeof this.loss=="string")e=Dl(this.loss);else if(Array.isArray(this.loss)){for(const n of this.loss)if(typeof n!="string")throw new Error("Serialization of non-string loss is not supported.");e=this.loss.map(n=>Dl(n))}else{const n=Object.keys(this.loss);e={};const r=this.loss;for(const s of n)if(typeof r[s]=="string")e[s]=Dl(r[s]);else throw new Error("Serialization of non-string loss is not supported.")}return e}getMetricIdentifiers(){if(typeof this.metrics=="string"||typeof this.metrics=="function")return[Dl(zx(this.metrics))];if(Array.isArray(this.metrics))return this.metrics.map(e=>Dl(zx(e)));{const e={};for(const n in this.metrics)e[n]=Dl(zx(this.metrics[n]));return e}}getTrainingConfig(){return{loss:this.getLossIdentifiers(),metrics:this.getMetricIdentifiers(),optimizer_config:{class_name:this.optimizer.getClassName(),config:this.optimizer.getConfig()}}}loadTrainingConfig(e){if(e.weighted_metrics!=null)throw new Error("Loading weight_metrics is not supported yet.");if(e.loss_weights!=null)throw new Error("Loading loss_weights is not supported yet.");if(e.sample_weight_mode!=null)throw new Error("Loading sample_weight_mode is not supported yet.");const n=RA(e.optimizer_config),r=Wl(n);let s;if(typeof e.loss=="string")s=Id(e.loss);else if(Array.isArray(e.loss))s=e.loss.map(o=>Id(o));else if(e.loss!=null){s={};for(const o in e.loss)s[o]=Id(e.loss[o])}let i;if(Array.isArray(e.metrics))i=e.metrics.map(o=>Id(o));else if(e.metrics!=null){i={};for(const o in e.metrics)i[o]=Id(e.metrics[o])}this.compile({loss:s,metrics:i,optimizer:r})}async save(e,n){if(typeof e=="string"){const c=yW(e);if(c.length===0)throw new te(`Cannot find any save handlers for URL '${e}'`);if(c.length>1)throw new te(`Found more than one (${c.length}) save handlers for URL '${e}'`);e=c[0]}if(e.save==null)throw new te("LayersModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");const r=await Q$(this.getNamedWeights(n)),a={modelTopology:this.toJSON(null,!1),format:Hge,generatedBy:`TensorFlow.js tfjs-layers v${O5}`,convertedBy:null};if((n==null?!1:n.includeOptimizer)&&this.optimizer!=null){a.trainingConfig=this.getTrainingConfig();const c="optimizer",{data:u,specs:d}=await Q$(await this.optimizer.getWeights(),c);r.specs.push(...d),r.data=mW([r.data,u])}return this.userDefinedMetadata!=null&&(X3(this.userDefinedMetadata,this.name,!0),a.userDefinedMetadata=this.userDefinedMetadata),a.weightData=r.data,a.weightSpecs=r.specs,e.save(a)}setUserDefinedMetadata(e){X3(e,this.name),this.userDefinedMetadata=e}getUserDefinedMetadata(){return this.userDefinedMetadata}}cp.className="Model";Ce(cp);class M5 extends cp{}M5.className="Functional";Ce(M5);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class kb extends cp{constructor(e){if(super({inputs:[],outputs:[]}),e=e||{},this.trainable=!0,this.built=!1,this.name=e.name!=null?e.name:O_("sequential_"),e.layers!=null)for(const n of e.layers)this.add(n)}checkShape(e){if(e.inboundNodes[0].outputTensors[0].shape.some(r=>r<0))throw new te(`Negative dimension size caused by adding layer ${e.name} with input shape [${e.inboundNodes[0].inputTensors[0].shape}]`)}add(e){const n=e instanceof kb||e instanceof cp;let r;if(n){if(r=e,r.outputs.length!==1)throw new te("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");if(r.inputs.length!==1)throw new te("All layers in a Sequential model should have a single input tensor. For multi-input layers, use the functional API.")}if(this.outputs.length===0){if(e.inboundNodes.length===0){if(e.batchInputShape==null)throw new te("The first layer in a Sequential model must get an `inputShape` or `batchInputShape` argument.");const s=Gme({batchShape:e.batchInputShape,dtype:e.dtype,name:e.name+"_input"});e.apply(s)}if(n)this.outputs=r.outputs,this.inputs=r.inputs;else{if(e.inboundNodes.length!==1)throw new te(`A layer added to a Sequential model must not already be connected somewhere else. LayersModel received layer ${e.name} which has ${e.inboundNodes.length} pre-existing inbound connections.`);if(e.inboundNodes[0].outputTensors.length!==1)throw new te("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[e.inboundNodes[0].outputTensors[0]],this.inputs=v5(this.outputs[0])}this.inboundNodes=[],new P_({outboundLayer:this,inboundLayers:[],nodeIndices:[],tensorIndices:[],inputTensors:this.inputs,outputTensors:this.outputs,inputMasks:vh(null,this.inputs.length),outputMasks:[null],inputShapes:this.inputs.map(s=>s.shape),outputShapes:this.outputs[0].shape})}else{const s=e.apply(this.outputs[0]);if(Array.isArray(s))throw new TypeError("All layers in a Sequential model should have a single output tensor. For multi-output layers, use the functional API.");this.checkShape(e),this.outputs=[s],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}this.layers.push(e),this.built=!1}pop(){if(this.layers.length===0)throw new TypeError("There are no layers in the model.");if(this.layers.pop(),this.layers.length===0)this.outputs=[],this.inboundNodes=[],this.outboundNodes=[];else{const e=this.layers.length-1;this.layers[e].outboundNodes=[],this.outputs=[this.layers[e].output],this.inboundNodes[0].outputTensors=this.outputs,this.inboundNodes[0].outputShapes=[this.outputs[0].shape]}}call(e,n){return this.model==null&&this.build(),this.model.call(e,n)}build(e){if(zt(e),this.inputs.length===0||this.outputs.length===0)throw new TypeError("Sequential model cannot be built: model is empty. Add some layers first.");this.model=new cp({inputs:this.inputs,outputs:this.outputs[0],name:this.name+"_model"}),this.model.trainable=this.trainable,this.supportsMasking=this.model.supportsMasking,this.inputLayers=this.model.inputLayers,this.inputLayersNodeIndices=this.model.inputLayersNodeIndices,this.inputLayersTensorIndices=this.model.inputLayersTensorIndices,this.outputLayers=this.model.outputLayers,this.outputLayersNodeIndices=this.model.outputLayersNodeIndices,this.outputLayersTensorIndices=this.model.outputLayersTensorIndices,this.nodesByDepth=this.model.nodesByDepth,this.containerNodes=this.model.containerNodes,this.outputNames=this.model.outputNames,this.inputNames=this.model.inputNames,this.built=!0}countParams(){return this.built||this.build(),super.countParams()}summary(e,n,r=console.log){this.built||this.build(),super.summary(e,n,r)}setWeights(e){this.model==null&&this.build(),this.model.setWeights(e)}evaluate(e,n,r={}){if(!this.built)throw new Eo("The model needs to be compiled before being used.");return this.model.evaluate(e,n,r)}async evaluateDataset(e,n){if(!this.built)throw new Eo("The model needs to be compiled before being used.");return this.model.evaluateDataset(e,n)}predict(e,n={}){return this.model==null&&this.build(),this.model.predict(e,n)}predictOnBatch(e){return this.model==null&&this.build(),this.model.predictOnBatch(e)}compile(e){this.build(),this.model.compile(e),this.optimizer_=this.model.optimizer,this.isOptimizerOwned=this.model.isOptimizerOwned,this.loss=this.model.loss,this.metrics=this.model.metrics,this.metricsTensors=this.model.metricsTensors,this.metricsNames=this.model.metricsNames}get optimizer(){return this.model==null?void 0:this.model.optimizer}set optimizer(e){this.model.optimizer=e}async fit(e,n,r={}){if(!this.built)throw new Eo("The model needs to be compiled before being used.");return this.model.fit(e,n,r)}async fitDataset(e,n){if(!this.built)throw new Eo("The model needs to be compiled before being used.");return this.model.fitDataset(e,n)}async trainOnBatch(e,n){return this.model.trainOnBatch(e,n)}static fromConfig(e,n,r={},s=!1){let i,o={};if(n instanceof Array){if(n[0].className==null||n[0].className==="Merge")throw new te("Legacy serialization format not supported yet.");i=n}else P(n.layers!=null,()=>"When the config data for a Sequential model is not an Array, it must be an Object that contains the 'layers' field."),i=n.layers,delete n.layers,o=n;const a=new e(o);if(!(a instanceof kb))throw new St(`Sequential.fromConfig called on non-Sequential input: ${a}`);for(const l of i){const u=Wl(l,void 0,s);s&&u.setFastWeightInitDuringBuild(!0),a.add(u)}return a}set stopTraining(e){if(this.model==null)throw new te("Cannot set the stopTraining property of a sequential model before it is compiled.");this.model.stopTraining=e}get stopTraining(){if(this.model==null)throw new te("Cannot get the stopTraining property of a sequential model before it is compiled.");return this.model.stopTraining}getConfig(){const e=[];for(const n of this.layers){const r={};r.className=n.getClassName(),r.config=n.getConfig(),e.push(r)}return{name:this.name,layers:e}}}kb.className="Sequential";Ce(kb);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */let is=class extends Vh{getConfig(){return{}}};class z5 extends is{apply(e,n=1){return $me(e,n)}}z5.className="elu";Ce(z5);class B5 extends is{apply(e){return r_(e)}}B5.className="selu";Ce(B5);class j5 extends is{apply(e){return xa(e)}}j5.className="relu";Ce(j5);class V5 extends is{apply(e){return oe(()=>Cu(6,xa(e)))}}V5.className="relu6";Ce(V5);class U5 extends is{apply(e){return e}}U5.className="linear";Ce(U5);class W5 extends is{apply(e){return $o(e)}}W5.className="sigmoid";Ce(W5);class H5 extends is{apply(e){return Rme(e)}}H5.className="hardSigmoid";Ce(H5);class G5 extends is{apply(e){return zh(e)}}G5.className="softplus";Ce(G5);class K5 extends is{apply(e){return Ame(e)}}K5.className="softsign";Ce(K5);class q5 extends is{apply(e){return Su(e)}}q5.className="tanh";Ce(q5);let nP=class extends is{apply(e,n=-1){return w0(e,n)}};nP.className="softmax";Ce(nP);class X5 extends is{apply(e,n=-1){return XE(e,n)}}X5.className="logSoftmax";Ce(X5);class Y5 extends is{apply(e){return oe(()=>oe(()=>{const n=Math.sqrt(2),r=Y(.5,xe(1,GE(Ue(e,n))));return Y(e,r)}))}}Y5.className="gelu";Ce(Y5);class Q5 extends is{apply(e){return oe(()=>Y(.5,Y(e,xe(1,Su(Y(Lr(Ue(2,Math.PI)),xe(e,Y(.044715,ll(e,3)))))))))}}Q5.className="gelu_new";Ce(Q5);class J5 extends is{apply(e){return oe(()=>Y(e,Su(zh(e))))}}J5.className="mish";Ce(J5);class Z5 extends is{apply(e,n=1){return oe(()=>Y($o(Y(e,n)),e))}}Z5.className="swish";Ce(Z5);function Tu(t){return t.getClassName()}function ZI(t,e={}){return N0(t,Ri.getMap().classNameMap,e,"activation")}function ku(t){if(t==null){const e={};return e.className="linear",e.config={},ZI(e)}if(typeof t=="string"){const e={};return e.className=t,e.config={},ZI(e)}else return t instanceof is?t:ZI(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Gge(t){if(t!=null&&typeof t!="object")throw new Error(`Argument to L1L2 regularizer's constructor is expected to be an object, but received: ${t}`)}class e6 extends Vh{}class t6 extends e6{constructor(e){super(),Gge(e),this.l1=e==null||e.l1==null?.01:e.l1,this.l2=e==null||e.l2==null?.01:e.l2,this.hasL1=this.l1!==0,this.hasL2=this.l2!==0}apply(e){return oe(()=>{let n=ur([1]);return this.hasL1&&(n=xe(n,qe(Y(this.l1,lr(e))))),this.hasL2&&(n=xe(n,qe(Y(this.l2,A0(e))))),ee(n,[])})}getConfig(){return{l1:this.l1,l2:this.l2}}static fromConfig(e,n){return new e({l1:n.l1,l2:n.l2})}}t6.className="L1L2";Ce(t6);const tz={l1l2:"L1L2"};function dn(t){return VD(t)}function nz(t,e={}){return N0(t,Ri.getMap().classNameMap,e,"regularizer")}function Dn(t){if(t==null)return null;if(typeof t=="string"){const n={className:t in tz?tz[t]:t,config:{}};return nz(n)}else return t instanceof e6?t:nz(t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class n6 extends It{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null&&(this.maxValue=e.maxValue)}call(e,n){e=ut(e);let r=xa(e);return this.maxValue!=null&&(r=Bs(r,0,this.maxValue)),r}computeOutputShape(e){return e}getConfig(){const e={maxValue:this.maxValue},n=super.getConfig();return Object.assign(e,n),e}}n6.className="ReLU";Ce(n6);class r6 extends It{constructor(e){super(e??{}),this.DEFAULT_ALPHA=.3,e==null&&(e={}),this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=ut(e);return u0(r,this.alpha)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}}r6.className="LeakyReLU";Ce(r6);class s6 extends It{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA_INITIALIZER="zeros",e==null&&(e={}),this.supportsMasking=!0,this.alphaInitializer=On(e.alphaInitializer||this.DEFAULT_ALPHA_INITIALIZER),this.alphaRegularizer=Dn(e.alphaRegularizer),this.alphaConstraint=Tr(e.alphaConstraint),e.sharedAxes==null)this.sharedAxes=null;else if(Array.isArray(e.sharedAxes))this.sharedAxes=e.sharedAxes;else if(typeof e.sharedAxes=="number")this.sharedAxes=[e.sharedAxes];else throw new te(`Expected sharedAxes to be a number or an array of numbers, but got ${e.sharedAxes}`)}build(e){e=zt(e);const n=e.slice(1);if(this.sharedAxes!=null)for(const s of this.sharedAxes)n[s-1]=1;this.alpha=this.addWeight("alpha",n,"float32",this.alphaInitializer,this.alphaRegularizer,!0,this.alphaConstraint);const r={};if(this.sharedAxes!=null)for(let s=1;s<e.length;++s)r[s]=e[s];this.inputSpec=[new Er({ndim:e.length,axes:r})],this.built=!0}call(e,n){return e=ut(e),y0(e,this.alpha.read())}getConfig(){const e={alphaInitializer:Un(this.alphaInitializer),alphaRegularizer:dn(this.alphaRegularizer),alphaConstraint:_r(this.alphaConstraint),sharedAxes:this.sharedAxes},n=super.getConfig();return Object.assign(e,n),e}}s6.className="PReLU";Ce(s6);let i6=class extends It{constructor(e){if(super(e??{}),this.DEFAULT_ALPHA=1,e==null&&(e={}),e.alpha!=null&&e.alpha!==this.DEFAULT_ALPHA)throw new St(`Non-default alpha value (${e.alpha}) is not supported by the ELU layer yet.`);this.alpha=e.alpha==null?this.DEFAULT_ALPHA:e.alpha}call(e,n){const r=ut(e);return Zm(r)}computeOutputShape(e){return e}getConfig(){const e={alpha:this.alpha},n=super.getConfig();return Object.assign(e,n),e}};i6.className="ELU";Ce(i6);class o6 extends It{constructor(e){super(e??{}),this.DEFAULT_THETA=1,e==null&&(e={}),this.theta=e.theta==null?this.DEFAULT_THETA:e.theta}call(e,n){const r=ut(e);return Y(r,$e(Gs(r,this.theta),"float32"))}computeOutputShape(e){return e}getConfig(){const e={theta:this.theta},n=super.getConfig();return Object.assign(e,n),e}}o6.className="ThresholdedReLU";Ce(o6);class a6 extends It{constructor(e){super(e??{}),this.DEFAULT_AXIS=1,e==null&&(e={}),this.softmax=new nP().apply,this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis}call(e,n){return oe(()=>{let r=ut(e);const s=n.mask;if(s!=null){const i=Y(Fe(Os(r.shape),$e(s,r.dtype)),tt(-1e9));r=xe(r,i)}return this.axis instanceof Array?this.axis.length>1?js(Fe(r,h0(r,this.axis,!0))):this.softmax(r,this.axis[0]):this.softmax(r,this.axis)})}computeOutputShape(e){return e}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}a6.className="Softmax";Ce(a6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function up(t,e,n){if(typeof t=="number")return vh(t,e);if(t.length!==e)throw new te(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${t.length} elements.`);for(let r=0;r<e;++r){const s=t[r];if(!Tme(s))throw new te(`The ${n} argument must be an integer or tuple of ${e} integers. Received: ${JSON.stringify(t)} including a non-integer number ${s}`)}return t}function da(t,e,n,r,s=1){if(t==null)return t;const i=e+(e-1)*(s-1);let o;return n==="same"?o=t:o=t-i+1,Math.floor((o+r-1)/r)}function Ma(t,e,n,r){if(t==null)return null;if(r==="valid")t=t*e+_u([n-e,0]);else if(r==="same")t=t*e;else throw new te(`Unsupport padding mode: ${r}.`);return t}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function rP(t,e){return oe(()=>(or(e),e==="channelsFirst"?$t(t,[0,2,3,1]):t))}function l6(t,e){return oe(()=>(or(e),e==="channelsFirst"?$t(t,[0,2,3,4,1]):t))}function Kge(t,e,n,r=1,s="valid",i,o=1){return oe(()=>{if(i==null&&(i=ga()),or(i),t.shape.length!==3)throw new te(`The input of a conv1dWithBias operation should be 3, but is ${t.shape.length} instead.`);if(e.shape.length!==3)throw new te(`The kernel for a conv1dWithBias operation should be 3, but is ${e.shape.length} instead`);if(n!=null&&n.shape.length!==1)throw new te(`The bias for a conv1dWithBias operation should be 1, but is ${n.shape.length} instead`);if(i==="channelsFirst"&&(t=$t(t,[0,2,1])),s==="causal")throw new St("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");let a=VE(t,e,r,s==="same"?"same":"valid","NWC",o);return n!=null&&(a=Ca(a,n)),a})}function rz(t,e,n,r=[1,1],s="valid",i,o,a=null){return oe(()=>{if(i==null&&(i=ga()),or(i),t.rank!==3&&t.rank!==4)throw new te(`conv2dWithBiasActivation expects input to be of rank 3 or 4, but received ${t.rank}.`);if(e.rank!==3&&e.rank!==4)throw new te(`conv2dWithBiasActivation expects kernel to be of rank 3 or 4, but received ${t.rank}.`);let l=rP(t,i);if(s==="causal")throw new St("The support for CAUSAL padding mode in conv1dWithBias is not implemented yet.");return l=bH({x:l,filter:e,strides:r,pad:s==="same"?"same":"valid",dilations:o,dataFormat:"NHWC",bias:n,activation:a}),i==="channelsFirst"&&(l=$t(l,[0,3,1,2])),l})}function qge(t,e,n,r=[1,1,1],s="valid",i,o){return oe(()=>{if(i==null&&(i=ga()),or(i),t.rank!==4&&t.rank!==5)throw new te(`conv3dWithBias expects input to be of rank 4 or 5, but received ${t.rank}.`);if(e.rank!==4&&e.rank!==5)throw new te(`conv3dWithBias expects kernel to be of rank 4 or 5, but received ${t.rank}.`);let a=l6(t,i);if(s==="causal")throw new St("The support for CAUSAL padding mode in conv3dWithBias is not implemented yet.");return a=lO(a,e,r,s==="same"?"same":"valid","NDHWC",o),n!=null&&(a=Ca(a,n)),i==="channelsFirst"&&(a=$t(a,[0,4,1,2,3])),a})}class M_ extends It{constructor(e,n){if(super(n),this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",M_.verifyArgs(n),this.rank=e,Dr(this.rank,"rank"),this.rank!==1&&this.rank!==2&&this.rank!==3)throw new St(`Convolution layer for rank other than 1, 2, or 3 (${this.rank}) is not implemented yet.`);if(this.kernelSize=up(n.kernelSize,e,"kernelSize"),this.strides=up(n.strides==null?1:n.strides,e,"strides"),this.padding=n.padding==null?"valid":n.padding,to(this.padding),this.dataFormat=n.dataFormat==null?"channelsLast":n.dataFormat,or(this.dataFormat),this.activation=ku(n.activation),this.useBias=n.useBias==null?!0:n.useBias,this.biasInitializer=On(n.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.biasConstraint=Tr(n.biasConstraint),this.biasRegularizer=Dn(n.biasRegularizer),this.activityRegularizer=Dn(n.activityRegularizer),this.dilationRate=up(n.dilationRate==null?1:n.dilationRate,e,"dilationRate"),this.rank===1&&Array.isArray(this.dilationRate)&&this.dilationRate.length!==1)throw new te(`dilationRate must be a number or an array of a single number for 1D convolution, but received ${JSON.stringify(this.dilationRate)}`);if(this.rank===2){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==2)throw new te(`dilationRate must be a number or array of two numbers for 2D convolution, but received ${JSON.stringify(this.dilationRate)}`)}else if(this.rank===3){if(typeof this.dilationRate=="number")this.dilationRate=[this.dilationRate,this.dilationRate,this.dilationRate];else if(this.dilationRate.length!==3)throw new te(`dilationRate must be a number or array of three numbers for 3D convolution, but received ${JSON.stringify(this.dilationRate)}`)}}static verifyArgs(e){if(Fa("kernelSize"in e,"required key 'kernelSize' not in config"),typeof e.kernelSize!="number"&&!UD(e.kernelSize,"number",1,3))throw new te(`BaseConv expects config.kernelSize to be number or number[] with length 1, 2, or 3, but received ${JSON.stringify(e.kernelSize)}.`)}getConfig(){const e={kernelSize:this.kernelSize,strides:this.strides,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,activation:Tu(this.activation),useBias:this.useBias,biasInitializer:Un(this.biasInitializer),biasRegularizer:dn(this.biasRegularizer),activityRegularizer:dn(this.activityRegularizer),biasConstraint:_r(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}class lg extends M_{constructor(e,n){super(e,n),this.kernel=null,lg.verifyArgs(n),this.filters=n.filters,Dr(this.filters,"filters"),this.kernelInitializer=On(n.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.kernelConstraint=Tr(n.kernelConstraint),this.kernelRegularizer=Dn(n.kernelRegularizer)}build(e){e=zt(e);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new te(`The channel dimension of the input should be defined. Found ${e[n]}`);const r=e[n],s=this.kernelSize.concat([r,this.filters]);this.kernel=this.addWeight("kernel",s,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[{ndim:this.rank+2,axes:{[n]:r}}],this.built=!0}call(e,n){return oe(()=>{e=ut(e);let r;const s=this.bias==null?null:this.bias.read(),i=s5(this.activation.getClassName());if(i!=null&&this.rank===2)r=rz(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate,i);else{if(this.rank===1)r=Kge(e,this.kernel.read(),s,this.strides[0],this.padding,this.dataFormat,this.dilationRate[0]);else if(this.rank===2)r=rz(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else if(this.rank===3)r=qge(e,this.kernel.read(),s,this.strides,this.padding,this.dataFormat,this.dilationRate);else throw new St("convolutions greater than 3D are not implemented yet.");this.activation!=null&&(r=this.activation.apply(r))}return r})}computeOutputShape(e){e=zt(e);const n=[],r=this.dataFormat==="channelsLast"?e.slice(1,e.length-1):e.slice(2);for(let i=0;i<r.length;++i){const o=da(r[i],this.kernelSize[i],this.padding,this.strides[i],typeof this.dilationRate=="number"?this.dilationRate:this.dilationRate[i]);n.push(o)}let s=[e[0]];return this.dataFormat==="channelsLast"?(s=s.concat(n),s.push(this.filters)):(s.push(this.filters),s=s.concat(n)),s}getConfig(){const e={filters:this.filters,kernelInitializer:Un(this.kernelInitializer),kernelRegularizer:dn(this.kernelRegularizer),kernelConstraint:_r(this.kernelConstraint)},n=super.getConfig();return Object.assign(e,n),e}static verifyArgs(e){if(!("filters"in e)||typeof e.filters!="number"||e.filters<1)throw new te(`Convolution layer expected config.filters to be a 'number' > 0 but got ${JSON.stringify(e.filters)}`)}}class P0 extends lg{constructor(e){super(2,e),P0.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!UD(e.kernelSize,"number",1,2))throw new te(`Conv2D expects config.kernelSize to be number or number[] with length 1 or 2, but received ${JSON.stringify(e.kernelSize)}.`)}}P0.className="Conv2D";Ce(P0);class L0 extends lg{constructor(e){super(3,e),L0.verifyArgs(e)}getConfig(){const e=super.getConfig();return delete e.rank,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!(Array.isArray(e.kernelSize)&&(e.kernelSize.length===1||e.kernelSize.length===3)))throw new te(`Conv3D expects config.kernelSize to be number or [number, number, number], but received ${JSON.stringify(e.kernelSize)}.`)}}L0.className="Conv3D";Ce(L0);class c6 extends P0{constructor(e){if(super(e),this.inputSpec=[new Er({ndim:4})],this.padding!=="same"&&this.padding!=="valid")throw new te(`Conv2DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=zt(e),e.length!==4)throw new te("Input should have rank 4; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new te("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Er({ndim:4,axes:{[n]:r}})],this.built=!0}call(e,n){return oe(()=>{let r=ut(e);if(r.shape.length!==4)throw new te(`Conv2DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a;this.dataFormat==="channelsFirst"?(o=2,a=3):(o=1,a=2);const l=s[o],c=s[a],u=this.kernelSize[0],d=this.kernelSize[1],h=this.strides[0],f=this.strides[1],p=Ma(l,h,u,this.padding),m=Ma(c,f,d,this.padding),g=[i,p,m,this.filters];this.dataFormat!=="channelsLast"&&(r=$t(r,[0,2,3,1]));let y=UE(r,this.kernel.read(),g,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(y=$t(y,[0,3,1,2])),this.bias!=null&&(y=Ca(y,this.bias.read(),this.dataFormat)),this.activation!=null&&(y=this.activation.apply(y)),y})}computeOutputShape(e){e=zt(e);const n=e.slice();let r,s,i;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3):(r=3,s=1,i=2);const o=this.kernelSize[0],a=this.kernelSize[1],l=this.strides[0],c=this.strides[1];return n[r]=this.filters,n[s]=Ma(n[s],l,o,this.padding),n[i]=Ma(n[i],c,a,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}c6.className="Conv2DTranspose";Ce(c6);class u6 extends L0{constructor(e){if(super(e),this.inputSpec=[new Er({ndim:5})],this.padding!=="same"&&this.padding!=="valid")throw new te(`Conv3DTranspose currently supports only padding modes 'same' and 'valid', but received padding mode ${this.padding}`)}build(e){if(e=zt(e),e.length!==5)throw new te("Input should have rank 5; Received input shape: "+JSON.stringify(e));const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null)throw new te("The channel dimension of the inputs should be defined. Found `None`.");const r=e[n],s=this.kernelSize.concat([this.filters,r]);this.kernel=this.addWeight("kernel",s,"float32",this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint)),this.inputSpec=[new Er({ndim:5,axes:{[n]:r}})],this.built=!0}call(e,n){return oe(()=>{let r=ut(e);if(r.shape.length!==5)throw new te(`Conv3DTranspose.call() expects input tensor to be rank-4, but received a tensor of rank-${r.shape.length}`);const s=r.shape,i=s[0];let o,a,l;this.dataFormat==="channelsFirst"?(l=2,o=3,a=4):(l=1,o=2,a=3);const c=s[l],u=s[o],d=s[a],h=this.kernelSize[0],f=this.kernelSize[1],p=this.kernelSize[2],m=this.strides[0],g=this.strides[1],y=this.strides[2],b=Ma(c,m,h,this.padding),v=Ma(u,g,f,this.padding),w=Ma(d,y,p,this.padding),C=[i,b,v,w,this.filters];this.dataFormat!=="channelsLast"&&(r=$t(r,[0,2,3,4,1]));let _=cO(r,this.kernel.read(),C,this.strides,this.padding);return this.dataFormat!=="channelsLast"&&(_=$t(_,[0,4,1,2,3])),this.bias!==null&&(_=Ca(_,this.bias.read(),this.dataFormat)),this.activation!==null&&(_=this.activation.apply(_)),_})}computeOutputShape(e){e=zt(e);const n=e.slice();let r,s,i,o;this.dataFormat==="channelsFirst"?(r=1,s=2,i=3,o=4):(r=4,s=1,i=2,o=3);const a=this.kernelSize[0],l=this.kernelSize[1],c=this.kernelSize[2],u=this.strides[0],d=this.strides[1],h=this.strides[2];return n[r]=this.filters,n[s]=Ma(n[s],u,a,this.padding),n[i]=Ma(n[i],d,l,this.padding),n[o]=Ma(n[o],h,c,this.padding),n}getConfig(){const e=super.getConfig();return delete e.dilationRate,e}}u6.className="Conv3DTranspose";Ce(u6);class d6 extends lg{constructor(e,n){if(super(e,n),this.DEFAULT_DEPTHWISE_INITIALIZER="glorotUniform",this.DEFAULT_POINTWISE_INITIALIZER="glorotUniform",this.depthwiseKernel=null,this.pointwiseKernel=null,n.filters==null)throw new te("The `filters` configuration field is required by SeparableConv, but is unspecified.");if(n.kernelInitializer!=null||n.kernelRegularizer!=null||n.kernelConstraint!=null)throw new te("Fields kernelInitializer, kernelRegularizer and kernelConstraint are invalid for SeparableConv2D. Use depthwiseInitializer, depthwiseRegularizer, depthwiseConstraint, pointwiseInitializer, pointwiseRegularizer and pointwiseConstraint instead.");if(n.padding!=null&&n.padding!=="same"&&n.padding!=="valid")throw new te(`SeparableConv${this.rank}D supports only padding modes: 'same' and 'valid', but received ${JSON.stringify(n.padding)}`);this.depthMultiplier=n.depthMultiplier==null?1:n.depthMultiplier,this.depthwiseInitializer=On(n.depthwiseInitializer||this.DEFAULT_DEPTHWISE_INITIALIZER),this.depthwiseRegularizer=Dn(n.depthwiseRegularizer),this.depthwiseConstraint=Tr(n.depthwiseConstraint),this.pointwiseInitializer=On(n.depthwiseInitializer||this.DEFAULT_POINTWISE_INITIALIZER),this.pointwiseRegularizer=Dn(n.pointwiseRegularizer),this.pointwiseConstraint=Tr(n.pointwiseConstraint)}build(e){if(e=zt(e),e.length<this.rank+2)throw new te(`Inputs to SeparableConv${this.rank}D should have rank ${this.rank+2}, but received input shape: ${JSON.stringify(e)}`);const n=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[n]==null||e[n]<0)throw new te(`The channel dimension of the inputs should be defined, but found ${JSON.stringify(e[n])}`);const r=e[n],s=this.kernelSize.concat([r,this.depthMultiplier]),i=[];for(let a=0;a<this.rank;++a)i.push(1);i.push(r*this.depthMultiplier,this.filters);const o=!0;this.depthwiseKernel=this.addWeight("depthwise_kernel",s,"float32",this.depthwiseInitializer,this.depthwiseRegularizer,o,this.depthwiseConstraint),this.pointwiseKernel=this.addWeight("pointwise_kernel",i,"float32",this.pointwiseInitializer,this.pointwiseRegularizer,o,this.pointwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[this.filters],"float32",this.biasInitializer,this.biasRegularizer,o,this.biasConstraint):this.bias=null,this.inputSpec=[new Er({ndim:this.rank+2,axes:{[n]:r}})],this.built=!0}call(e,n){return oe(()=>{e=ut(e);let r;if(this.rank===1)throw new St("1D separable convolution is not implemented yet.");return this.rank===2&&(this.dataFormat==="channelsFirst"&&(e=$t(e,[0,2,3,1])),r=s_(e,this.depthwiseKernel.read(),this.pointwiseKernel.read(),this.strides,this.padding,this.dilationRate,"NHWC")),this.useBias&&(r=Ca(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),this.dataFormat==="channelsFirst"&&(r=$t(r,[0,3,1,2])),r})}getConfig(){const e=super.getConfig();return delete e.rank,delete e.kernelInitializer,delete e.kernelRegularizer,delete e.kernelConstraint,e.depthwiseInitializer=Un(this.depthwiseInitializer),e.pointwiseInitializer=Un(this.pointwiseInitializer),e.depthwiseRegularizer=dn(this.depthwiseRegularizer),e.pointwiseRegularizer=dn(this.pointwiseRegularizer),e.depthwiseConstraint=_r(this.depthwiseConstraint),e.pointwiseConstraint=_r(this.pointwiseConstraint),e}}d6.className="SeparableConv";class h6 extends d6{constructor(e){super(2,e)}}h6.className="SeparableConv2D";Ce(h6);class z_ extends lg{constructor(e){super(1,e),z_.verifyArgs(e),this.inputSpec=[{ndim:3}]}getConfig(){const e=super.getConfig();return delete e.rank,delete e.dataFormat,e}static verifyArgs(e){if(typeof e.kernelSize!="number"&&!UD(e.kernelSize,"number",1,1))throw new te(`Conv1D expects config.kernelSize to be number or number[] with length 1, but received ${JSON.stringify(e.kernelSize)}.`)}}z_.className="Conv1D";Ce(z_);class f6 extends It{constructor(e){super(e),typeof e.cropping=="number"?this.cropping=[[e.cropping,e.cropping],[e.cropping,e.cropping]]:typeof e.cropping[0]=="number"?this.cropping=[[e.cropping[0],e.cropping[0]],[e.cropping[1],e.cropping[1]]]:this.cropping=e.cropping,this.dataFormat=e.dataFormat===void 0?"channelsLast":e.dataFormat,this.inputSpec=[{ndim:4}]}computeOutputShape(e){return this.dataFormat==="channelsFirst"?[e[0],e[1],e[2]-this.cropping[0][0]-this.cropping[0][1],e[3]-this.cropping[1][0]-this.cropping[1][1]]:[e[0],e[1]-this.cropping[0][0]-this.cropping[0][1],e[2]-this.cropping[1][0]-this.cropping[1][1],e[3]]}call(e,n){return oe(()=>{if(e=ut(e),this.dataFormat==="channelsLast"){const r=Mx(e,this.cropping[0][0],e.shape[1]-this.cropping[0][0]-this.cropping[0][1],2);return Mx(r,this.cropping[1][0],e.shape[2]-this.cropping[1][1]-this.cropping[1][0],3)}else{const r=Mx(e,this.cropping[0][0],e.shape[2]-this.cropping[0][0]-this.cropping[0][1],3);return Mx(r,this.cropping[1][0],e.shape[3]-this.cropping[1][1]-this.cropping[1][0],4)}})}getConfig(){const e={cropping:this.cropping,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}f6.className="Cropping2D";Ce(f6);class p6 extends It{constructor(e){super(e),this.DEFAULT_SIZE=[2,2],this.inputSpec=[{ndim:4}],this.size=e.size==null?this.DEFAULT_SIZE:e.size,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,or(this.dataFormat),this.interpolation=e.interpolation==null?"nearest":e.interpolation,Cme(this.interpolation)}computeOutputShape(e){if(this.dataFormat==="channelsFirst"){const n=e[2]==null?null:this.size[0]*e[2],r=e[3]==null?null:this.size[1]*e[3];return[e[0],e[1],n,r]}else{const n=e[1]==null?null:this.size[0]*e[1],r=e[2]==null?null:this.size[1]*e[2];return[e[0],n,r,e[3]]}}call(e,n){return oe(()=>{let r=ut(e);const s=r.shape;if(this.dataFormat==="channelsFirst"){r=$t(r,[0,2,3,1]);const i=this.size[0]*s[2],o=this.size[1]*s[3],a=this.interpolation==="nearest"?Fi.resizeNearestNeighbor(r,[i,o]):Fi.resizeBilinear(r,[i,o]);return $t(a,[0,3,1,2])}else{const i=this.size[0]*s[1],o=this.size[1]*s[2];return this.interpolation==="nearest"?Fi.resizeNearestNeighbor(r,[i,o]):Fi.resizeBilinear(r,[i,o])}})}getConfig(){const e={size:this.size,dataFormat:this.dataFormat,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}}p6.className="UpSampling2D";Ce(p6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Xge(t,e,n=[1,1],r="valid",s,i){return oe(()=>{s==null&&(s=ga()),or(s);let o=rP(t,s);if(t.rank!==4)throw new te(`Input for depthwiseConv2d is required to be 4-D, but is instead ${t.rank}-D`);if(e.rank!==4)throw new te(`depthwiseKernel is required to be 4-D, but is instead ${e.rank}-D`);return o=Jm(o,e,n,r==="same"?"same":"valid","NHWC",i),s==="channelsFirst"&&(o=$t(o,[0,3,1,2])),o})}class m6 extends M_{constructor(e){super(2,e),this.depthwiseKernel=null,this.depthMultiplier=e.depthMultiplier==null?1:e.depthMultiplier,this.depthwiseInitializer=On(e.depthwiseInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.depthwiseConstraint=Tr(e.depthwiseConstraint),this.depthwiseRegularizer=Dn(e.depthwiseRegularizer)}build(e){if(e=zt(e),e.length<4)throw new te(`Inputs to DepthwiseConv2D should have rank 4. Received input shape: ${JSON.stringify(e)}.`);const n=this.dataFormat==="channelsFirst"?1:3;if(e[n]==null||e[n]<0)throw new te(`The channel dimension of the inputs to DepthwiseConv2D should be defined, but is not (${e[n]}).`);const r=e[n],s=[this.kernelSize[0],this.kernelSize[1],r,this.depthMultiplier];this.depthwiseKernel=this.addWeight("depthwise_kernel",s,null,this.depthwiseInitializer,this.depthwiseRegularizer,!0,this.depthwiseConstraint),this.useBias?this.bias=this.addWeight("bias",[r*this.depthMultiplier],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return oe(()=>{e=ut(e);let r=Xge(e,this.depthwiseKernel.read(),this.strides,this.padding,this.dataFormat,null);return this.useBias&&(r=Ca(r,this.bias.read(),this.dataFormat)),this.activation!=null&&(r=this.activation.apply(r)),r})}computeOutputShape(e){e=zt(e);const n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[1]*this.depthMultiplier:e[3]*this.depthMultiplier,i=da(n,this.kernelSize[0],this.padding,this.strides[0]),o=da(r,this.kernelSize[1],this.padding,this.strides[1]);return this.dataFormat==="channelsFirst"?[e[0],s,i,o]:[e[0],i,o,s]}getConfig(){const e=super.getConfig();return e.depthMultiplier=this.depthMultiplier,e.depthwiseInitializer=Un(this.depthwiseInitializer),e.depthwiseRegularizer=dn(this.depthwiseRegularizer),e.depthwiseConstraint=_r(this.depthwiseRegularizer),e}}m6.className="DepthwiseConv2D";Ce(m6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function g6(t,e,n,r){if(Array.isArray(t)){if(e!=null||n!=null)throw new te("When inputs is an array, neither initialState or constants should be provided");r!=null&&(n=t.slice(t.length-r,t.length),t=t.slice(0,t.length-r)),t.length>1&&(e=t.slice(1,t.length)),t=t[0]}function s(i){return i==null||Array.isArray(i)?i:[i]}return e=s(e),n=s(n),{inputs:t,initialState:e,constants:n}}function y6(t,e,n,r=!1,s,i,o=!1,a=!1){return oe(()=>{const l=e.shape.length;if(l<3)throw new te(`Input should be at least 3D, but is ${l}D.`);const c=[1,0].concat(ma(2,l));e=$t(e,c),o&&console.warn("Backend rnn(): the unroll = true option is not applicable to the imperative deeplearn.js backend."),s!=null&&(s=$e($e(s,"bool"),"float32"),s.rank===l-1&&(s=Br(s,-1)),s=$t(s,c)),r&&(e=Gi(e,0),s!=null&&(s=Gi(s,0)));const u=[];let d,h=n;const f=e.shape[0],p=Ki(e);let m;s!=null&&(m=Ki(s));for(let y=0;y<f;++y){const b=p[y],v=oe(()=>t(b,h));if(s==null)d=v[0],h=v[1];else{const w=oe(()=>{const C=m[y],_=Fe(pi(C),C),E=xe(Y(v[0],C),Y(h[0],_)),I=h.map((O,R)=>xe(Y(v[1][R],C),Y(O,_)));return{output:E,newStates:I}});d=w.output,h=w.newStates}a&&u.push(d)}let g;return a&&(g=Vs(u,1)),[d,g,h]})}class Wu extends It{constructor(e){super(e);let n;if(e.cell==null)throw new te("cell property is missing for the constructor of RNN.");if(Array.isArray(e.cell)?n=new oP({cells:e.cell}):n=e.cell,n.stateSize==null)throw new te("The RNN cell should have an attribute `stateSize` (tuple of integers, one integer per RNN state).");this.cell=n,this.returnSequences=e.returnSequences==null?!1:e.returnSequences,this.returnState=e.returnState==null?!1:e.returnState,this.goBackwards=e.goBackwards==null?!1:e.goBackwards,this._stateful=e.stateful==null?!1:e.stateful,this.unroll=e.unroll==null?!1:e.unroll,this.supportsMasking=!0,this.inputSpec=[new Er({ndim:3})],this.stateSpec=null,this.states_=null,this.numConstants=null,this.keptStates=[]}getStates(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;return ma(0,e).map(n=>null)}else return this.states_}setStates(e){this.states_=e}computeOutputShape(e){NA(e)&&(e=e[0]),e=e;let n=this.cell.stateSize;Array.isArray(n)||(n=[n]);const r=n[0];let s;if(this.returnSequences?s=[e[0],e[1],r]:s=[e[0],r],this.returnState){const i=[];for(const o of n)i.push([e[0],o]);return[s].concat(i)}else return s}computeMask(e,n){return oe(()=>{Array.isArray(n)&&(n=n[0]);const r=this.returnSequences?n:null;if(this.returnState){const s=this.states.map(i=>null);return[r].concat(s)}else return r})}get states(){if(this.states_==null){const e=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1,n=[];for(let r=0;r<e;++r)n.push(null);return n}else return this.states_}set states(e){this.states_=e}build(e){if(this.numConstants!=null)throw new St("Constants support is not implemented in RNN yet.");NA(e)&&(e=e[0]),e=e;const n=this.stateful?e[0]:null,r=e.slice(2);this.inputSpec[0]=new Er({shape:[n,null,...r]});const s=[e[0]].concat(e.slice(2));this.cell.build(s);let i;if(Array.isArray(this.cell.stateSize)?i=this.cell.stateSize:i=[this.cell.stateSize],this.stateSpec!=null){if(!Nt(this.stateSpec.map(o=>o.shape[o.shape.length-1]),i))throw new te(`An initialState was passed that is not compatible with cell.stateSize. Received stateSpec=${this.stateSpec}; However cell.stateSize is ${this.cell.stateSize}`)}else this.stateSpec=i.map(o=>new Er({shape:[null,o]}));this.stateful&&this.resetStates()}resetStates(e,n=!1){oe(()=>{if(!this.stateful)throw new La("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape[0];if(r==null)throw new te("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.states_==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>ur([r,s])):this.states_=[ur([r,this.cell.stateSize])];else if(e==null)_t(this.states_),this.keptStates!=null&&(_t(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(s=>ur([r,s])):this.states_[0]=ur([r,this.cell.stateSize]);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new te(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n===!0?this.keptStates.push(this.states_.slice()):_t(this.states_);for(let s=0;s<this.states_.length;++s){const i=e[s],o=Array.isArray(this.cell.stateSize)?this.cell.stateSize[s]:this.cell.stateSize,a=[r,o];if(!Nt(i.shape,a))throw new te(`State ${s} is incompatible with layer ${this.name}: expected shape=${a}, received shape=${i.shape}`);this.states_[s]=i}}this.states_=this.states_.map(s=>xr(s.clone()))})}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=g6(e,r,s,this.numConstants);e=i.inputs,r=i.initialState,s=i.constants;let o=[],a=[];if(r!=null){n.initialState=r,o=o.concat(r),this.stateSpec=[];for(const c of r)this.stateSpec.push(new Er({shape:c.shape}));a=a.concat(this.stateSpec)}if(s!=null&&(n.constants=s,o=o.concat(s),this.numConstants=s.length),o[0]instanceof ul){const c=[e].concat(o),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return oe(()=>{const r=n==null?null:n.mask,s=n==null?null:n.training;let i=n==null?null:n.initialState;e=ut(e),i==null&&(this.stateful?i=this.states_:i=this.getInitialState(e));const o=Array.isArray(this.cell.stateSize)?this.cell.stateSize.length:1;if(i.length!==o)throw new te(`RNN Layer has ${o} state(s) but was passed ${i.length} initial state(s).`);this.unroll&&console.warn("Ignoring unroll = true for RNN layer, due to imperative backend.");const a={training:s},c=y6((p,m)=>{const g=this.cell.call([p].concat(m),a);return[g[0],g.slice(1)]},e,i,this.goBackwards,r,null,this.unroll,this.returnSequences),u=c[0],d=c[1],h=c[2];this.stateful&&this.resetStates(h,s);const f=this.returnSequences?d:u;return this.returnState?[f].concat(h):f})}getInitialState(e){return oe(()=>{let n=ur(e.shape);return n=qe(n,[1,2]),n=$0(n),Array.isArray(this.cell.stateSize)?this.cell.stateSize.map(r=>r>1?kA(n,[1,r]):n):this.cell.stateSize>1?[kA(n,[1,this.cell.stateSize])]:[n]})}get trainableWeights(){return this.trainable?this.cell.trainableWeights:[]}get nonTrainableWeights(){return this.trainable?this.cell.nonTrainableWeights:this.cell.weights}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.cell!=null&&this.cell.setFastWeightInitDuringBuild(e)}getConfig(){const e=super.getConfig(),n={returnSequences:this.returnSequences,returnState:this.returnState,goBackwards:this.goBackwards,stateful:this.stateful,unroll:this.unroll};this.numConstants!=null&&(n.numConstants=this.numConstants);const r=this.cell.getConfig();return this.getClassName()===Wu.className&&(n.cell={className:this.cell.getClassName(),config:r}),Object.assign(Object.assign(Object.assign({},r),e),n)}static fromConfig(e,n,r={}){const s=n.cell,i=Wl(s,r);return new e(Object.assign(n,{cell:i}))}}Wu.className="RNN";Ce(Wu);class B_ extends It{}class sP extends B_{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Dr(this.units,"units"),this.activation=ku(e.activation==null?this.DEFAULT_ACTIVATION:e.activation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=On(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=On(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=On(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Dn(e.kernelRegularizer),this.recurrentRegularizer=Dn(e.recurrentRegularizer),this.biasRegularizer=Dn(e.biasRegularizer),this.kernelConstraint=Tr(e.kernelConstraint),this.recurrentConstraint=Tr(e.recurrentConstraint),this.biasConstraint=Tr(e.biasConstraint),this.dropout=Fp([1,_u([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Fp([1,_u([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=zt(e),this.kernel=this.addWeight("kernel",[e[e.length-1],this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return oe(()=>{if(e=e,e.length!==2)throw new te(`SimpleRNNCell expects 2 input Tensors, got ${e.length}.`);let r=e[1];e=e[0];const s=n.training==null?!1:n.training;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Iu({ones:()=>pi(e),rate:this.dropout,training:s,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Iu({ones:()=>pi(r),rate:this.recurrentDropout,training:s,dropoutFunc:this.dropoutFunc}));let i;const o=this.dropoutMask,a=this.recurrentDropoutMask;o!=null?i=Za(Y(e,o),this.kernel.read()):i=Za(e,this.kernel.read()),this.bias!=null&&(i=Ca(i,this.bias.read())),a!=null&&(r=Y(r,a));let l=xe(i,Za(r,this.recurrentKernel.read()));return this.activation!=null&&(l=this.activation.apply(l)),[l,l]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Tu(this.activation),useBias:this.useBias,kernelInitializer:Un(this.kernelInitializer),recurrentInitializer:Un(this.recurrentInitializer),biasInitializer:Un(this.biasInitializer),kernelRegularizer:dn(this.kernelRegularizer),recurrentRegularizer:dn(this.recurrentRegularizer),biasRegularizer:dn(this.biasRegularizer),activityRegularizer:dn(this.activityRegularizer),kernelConstraint:_r(this.kernelConstraint),recurrentConstraint:_r(this.recurrentConstraint),biasConstraint:_r(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout};return Object.assign(Object.assign({},e),n)}}sP.className="SimpleRNNCell";Ce(sP);class b6 extends Wu{constructor(e){e.cell=new sP(e),super(e)}call(e,n){return oe(()=>{this.cell.dropoutMask!=null&&(_t(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(_t(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return new e(n)}}b6.className="SimpleRNN";Ce(b6);class iP extends B_{constructor(e){if(super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.resetAfter)throw new te("GRUCell does not support reset_after parameter set to true.");this.units=e.units,Dr(this.units,"units"),this.activation=ku(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ku(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=On(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=On(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=On(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelRegularizer=Dn(e.kernelRegularizer),this.recurrentRegularizer=Dn(e.recurrentRegularizer),this.biasRegularizer=Dn(e.biasRegularizer),this.kernelConstraint=Tr(e.kernelConstraint),this.recurrentConstraint=Tr(e.recurrentConstraint),this.biasConstraint=Tr(e.biasConstraint),this.dropout=Fp([1,_u([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Fp([1,_u([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=this.units,this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){e=zt(e);const n=e[e.length-1];this.kernel=this.addWeight("kernel",[n,this.units*3],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*3],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias?this.bias=this.addWeight("bias",[this.units*3],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint):this.bias=null,this.built=!0}call(e,n){return oe(()=>{if(e=e,e.length!==2)throw new te(`GRUCell expects 2 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training==null?!1:n.training;let s=e[1];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Iu({ones:()=>pi(e),rate:this.dropout,training:r,count:3,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Iu({ones:()=>pi(s),rate:this.recurrentDropout,training:r,count:3,dropoutFunc:this.dropoutFunc}));const i=this.dropoutMask,o=this.recurrentDropoutMask;let a,l,c;0<this.dropout&&this.dropout<1&&(e=Y(e,i[0]));let u=Za(e,this.kernel.read());this.useBias&&(u=Ca(u,this.bias.read())),0<this.recurrentDropout&&this.recurrentDropout<1&&(s=Y(s,o[0]));const d=this.recurrentKernel.read(),[h,f]=Ps(d,[2*this.units,this.units],d.rank-1),p=Za(s,h),[m,g,y]=Ps(u,3,u.rank-1),[b,v]=Ps(p,2,p.rank-1);a=this.recurrentActivation.apply(xe(m,b)),l=this.recurrentActivation.apply(xe(g,v));const w=Za(Y(l,s),f);c=this.activation.apply(xe(y,w));const C=xe(Y(a,s),Y(xe(1,yn(a)),c));return[C,C]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Tu(this.activation),recurrentActivation:Tu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Un(this.kernelInitializer),recurrentInitializer:Un(this.recurrentInitializer),biasInitializer:Un(this.biasInitializer),kernelRegularizer:dn(this.kernelRegularizer),recurrentRegularizer:dn(this.recurrentRegularizer),biasRegularizer:dn(this.biasRegularizer),activityRegularizer:dn(this.activityRegularizer),kernelConstraint:_r(this.kernelConstraint),recurrentConstraint:_r(this.recurrentConstraint),biasConstraint:_r(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation,resetAfter:!1};return Object.assign(Object.assign({},e),n)}}iP.className="GRUCell";Ce(iP);class v6 extends Wu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new iP(e),super(e)}call(e,n){return oe(()=>{this.cell.dropoutMask!=null&&(_t(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(_t(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}v6.className="GRU";Ce(v6);class j_ extends B_{constructor(e){super(e),this.DEFAULT_ACTIVATION="tanh",this.DEFAULT_RECURRENT_ACTIVATION="hardSigmoid",this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_RECURRENT_INITIALIZER="orthogonal",this.DEFAULT_BIAS_INITIALIZER="zeros",this.units=e.units,Dr(this.units,"units"),this.activation=ku(e.activation===void 0?this.DEFAULT_ACTIVATION:e.activation),this.recurrentActivation=ku(e.recurrentActivation===void 0?this.DEFAULT_RECURRENT_ACTIVATION:e.recurrentActivation),this.useBias=e.useBias==null?!0:e.useBias,this.kernelInitializer=On(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.recurrentInitializer=On(e.recurrentInitializer||this.DEFAULT_RECURRENT_INITIALIZER),this.biasInitializer=On(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.unitForgetBias=e.unitForgetBias,this.kernelRegularizer=Dn(e.kernelRegularizer),this.recurrentRegularizer=Dn(e.recurrentRegularizer),this.biasRegularizer=Dn(e.biasRegularizer),this.kernelConstraint=Tr(e.kernelConstraint),this.recurrentConstraint=Tr(e.recurrentConstraint),this.biasConstraint=Tr(e.biasConstraint),this.dropout=Fp([1,_u([0,e.dropout==null?0:e.dropout])]),this.recurrentDropout=Fp([1,_u([0,e.recurrentDropout==null?0:e.recurrentDropout])]),this.dropoutFunc=e.dropoutFunc,this.implementation=e.implementation,this.stateSize=[this.units,this.units],this.dropoutMask=null,this.recurrentDropoutMask=null}build(e){var n;e=zt(e);const r=e[e.length-1];this.kernel=this.addWeight("kernel",[r,this.units*4],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.recurrentKernel=this.addWeight("recurrent_kernel",[this.units,this.units*4],null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint);let s;if(this.useBias){if(this.unitForgetBias){const i=this.biasInitializer,o=this.units;s=new(n=class extends jo{apply(l,c){const u=i.apply([o]),d=new HD().apply([o]),h=i.apply([o*2]);return B3(B3(u,d),h)}},n.className="CustomInit",n)}else s=this.biasInitializer;this.bias=this.addWeight("bias",[this.units*4],null,s,this.biasRegularizer,!0,this.biasConstraint)}else this.bias=null;this.built=!0}call(e,n){return oe(()=>{const r=n.training==null?!1:n.training;if(e=e,e.length!==3)throw new te(`LSTMCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);let s=e[1];const i=e[2];e=e[0],0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Iu({ones:()=>pi(e),rate:this.dropout,training:r,count:4,dropoutFunc:this.dropoutFunc})),0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Iu({ones:()=>pi(s),rate:this.recurrentDropout,training:r,count:4,dropoutFunc:this.dropoutFunc}));const o=this.dropoutMask,a=this.recurrentDropoutMask;let l,c,u,d;0<this.dropout&&this.dropout<1&&(e=Y(e,o[0]));let h=Za(e,this.kernel.read());0<this.recurrentDropout&&this.recurrentDropout<1&&(s=Y(s,a[0])),h=xe(h,Za(s,this.recurrentKernel.read())),this.useBias&&(h=Ca(h,this.bias.read()));const[f,p,m,g]=Ps(h,4,h.rank-1);l=this.recurrentActivation.apply(f),c=this.recurrentActivation.apply(p),u=xe(Y(c,i),Y(l,this.activation.apply(m))),d=this.recurrentActivation.apply(g);const y=Y(d,this.activation.apply(u));return[y,y,u]})}getConfig(){const e=super.getConfig(),n={units:this.units,activation:Tu(this.activation),recurrentActivation:Tu(this.recurrentActivation),useBias:this.useBias,kernelInitializer:Un(this.kernelInitializer),recurrentInitializer:Un(this.recurrentInitializer),biasInitializer:Un(this.biasInitializer),unitForgetBias:this.unitForgetBias,kernelRegularizer:dn(this.kernelRegularizer),recurrentRegularizer:dn(this.recurrentRegularizer),biasRegularizer:dn(this.biasRegularizer),activityRegularizer:dn(this.activityRegularizer),kernelConstraint:_r(this.kernelConstraint),recurrentConstraint:_r(this.recurrentConstraint),biasConstraint:_r(this.biasConstraint),dropout:this.dropout,recurrentDropout:this.recurrentDropout,implementation:this.implementation};return Object.assign(Object.assign({},e),n)}}j_.className="LSTMCell";Ce(j_);class w6 extends Wu{constructor(e){e.implementation===0&&console.warn("`implementation=0` has been deprecated, and now defaults to `implementation=1`. Please update your layer call."),e.cell=new j_(e),super(e)}call(e,n){return oe(()=>{this.cell.dropoutMask!=null&&(_t(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(_t(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null);const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}static fromConfig(e,n){return n.implmentation===0&&(n.implementation=1),new e(n)}}w6.className="LSTM";Ce(w6);class oP extends B_{constructor(e){super(e),this.cells=e.cells}get stateSize(){const e=[];for(const n of this.cells.slice().reverse())Array.isArray(n.stateSize)?e.push(...n.stateSize):e.push(n.stateSize);return e}call(e,n){return oe(()=>{e=e;let r=e.slice(1);const s=[];for(const a of this.cells.slice().reverse())Array.isArray(a.stateSize)?s.push(r.splice(0,a.stateSize.length)):s.push(r.splice(0,1));s.reverse();const i=[];let o;for(let a=0;a<this.cells.length;++a){const l=this.cells[a];r=s[a],a===0?o=[e[0]].concat(r):o=[o[0]].concat(r),o=l.call(o,n),i.push(o.slice(1))}r=[];for(const a of i.slice().reverse())r.push(...a);return[o[0]].concat(r)})}build(e){NA(e)&&(e=e[0]),e=e;let n;this.cells.forEach((r,s)=>{Yd(`RNNCell_${s}`,()=>{r.build(e),Array.isArray(r.stateSize)?n=r.stateSize[0]:n=r.stateSize,e=[e[0],n]})}),this.built=!0}getConfig(){const e=super.getConfig(),n=i=>({className:i.getClassName(),config:i.getConfig()}),s={cells:this.cells.map(n)};return Object.assign(Object.assign({},e),s)}static fromConfig(e,n,r={}){const s=[];for(const i of n.cells)s.push(Wl(i,r));return new e({cells:s})}get trainableWeights(){if(!this.trainable)return[];const e=[];for(const n of this.cells)e.push(...n.trainableWeights);return e}get nonTrainableWeights(){const e=[];for(const n of this.cells)e.push(...n.nonTrainableWeights);if(!this.trainable){const n=[];for(const r of this.cells)n.push(...r.trainableWeights);return n.concat(e)}return e}getWeights(){const e=[];for(const n of this.cells)e.push(...n.weights);return $A(e)}setWeights(e){const n=[];for(const r of this.cells){const s=r.weights.length,i=e.splice(s);for(let o=0;o<r.weights.length;++o)n.push([r.weights[o],i[o]])}JD(n)}}oP.className="StackedRNNCells";Ce(oP);function Iu(t){const{ones:e,rate:n,training:r=!1,count:s=1,dropoutFunc:i}=t,o=()=>i!=null?i(e(),n):d5(e(),n),a=()=>R0(o,e,r);return!s||s<=1?xr(a().clone()):Array(s).fill(void 0).map(a).map(c=>xr(c.clone()))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */var Yge=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n};class x6 extends Wu{constructor(e){if(e.unroll)throw new St("Unrolling is not possible with convolutional RNNs.");if(Array.isArray(e.cell))throw new St("It is not possible at the moment to stack convolutional cells.");super(e),this.inputSpec=[new Er({ndim:5})]}call(e,n){return oe(()=>{if(this.cell.dropoutMask!=null&&(_t(this.cell.dropoutMask),this.cell.dropoutMask=null),this.cell.recurrentDropoutMask!=null&&(_t(this.cell.recurrentDropoutMask),this.cell.recurrentDropoutMask=null),n&&n.constants)throw new te("ConvRNN2D cell does not support constants");const r=n==null?null:n.mask,s=n==null?null:n.training,i=n==null?null:n.initialState;return super.call(e,{mask:r,training:s,initialState:i})})}computeOutputShape(e){let n=this.computeSingleOutputShape(e);return this.returnSequences||(n=[n[0],...n.slice(2)]),this.returnState&&(n=[n,...Array(2).fill([e[0],...n.slice(-3)])]),n}getInitialState(e){return oe(()=>{const{stateSize:n}=this.cell,r=e.shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)],o=ur(i);return Array.isArray(n)?Array(n.length).fill(o):[o]})}resetStates(e,n=!1){oe(()=>{if(!this.stateful)throw new La("Cannot call resetStates() on an RNN Layer that is not stateful.");const r=this.inputSpec[0].shape,s=this.computeSingleOutputShape(r),i=[s[0],...s.slice(2)];if(r[0]==null)throw new te("If an RNN is stateful, it needs to know its batch size. Specify the batch size of your input tensors: \n- If using a Sequential model, specify the batch size by passing a `batchInputShape` option to your first layer.\n- If using the functional API, specify the batch size by passing a `batchShape` option to your Input layer.");if(this.getStates()==null)Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>ur(i)):this.states_=[ur(i)];else if(e==null)_t(this.states_),this.keptStates!=null&&(_t(this.keptStates),this.keptStates=[]),Array.isArray(this.cell.stateSize)?this.states_=this.cell.stateSize.map(()=>ur(i)):this.states_[0]=ur(i);else{if(Array.isArray(e)||(e=[e]),e.length!==this.states_.length)throw new te(`Layer ${this.name} expects ${this.states_.length} state(s), but it received ${e.length} state value(s). Input received: ${e}`);n?this.keptStates.push(this.states_.slice()):_t(this.states_);for(let a=0;a<this.states_.length;++a){const l=e[a],c=i;if(!Nt(l.shape,c))throw new te(`State ${a} is incompatible with layer ${this.name}: expected shape=${c}, received shape=${l.shape}`);this.states_[a]=l}}this.states_=this.states_.map(a=>xr(a.clone()))})}computeSingleOutputShape(e){const{dataFormat:n,filters:r,kernelSize:s,padding:i,strides:o,dilationRate:a}=this.cell,l=n==="channelsFirst",c=e[l?3:2],u=e[l?4:3],d=da(c,s[0],i,o[0],a[0]),h=da(u,s[1],i,o[1],a[1]);return[...e.slice(0,2),...l?[r,d,h]:[d,h,r]]}}x6.className="ConvRNN2D";class aP extends j_{constructor(e){const{filters:n,kernelSize:r,strides:s,padding:i,dataFormat:o,dilationRate:a}=e;super(Object.assign(Object.assign({},e),{units:n})),this.filters=n,Dr(this.filters,"filters"),this.kernelSize=up(r,2,"kernelSize"),this.kernelSize.forEach(l=>Dr(l,"kernelSize")),this.strides=up(s||1,2,"strides"),this.strides.forEach(l=>Dr(l,"strides")),this.padding=i||"valid",to(this.padding),this.dataFormat=o||"channelsLast",or(this.dataFormat),this.dilationRate=up(a||1,2,"dilationRate"),this.dilationRate.forEach(l=>Dr(l,"dilationRate"))}build(e){var n;e=zt(e);const r=this.dataFormat==="channelsFirst"?1:e.length-1;if(e[r]==null)throw new te(`The channel dimension of the input should be defined. Found ${e[r]}`);const s=e[r],i=4,o=this.kernelSize.concat([s,this.filters*i]);this.kernel=this.addWeight("kernel",o,null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint);const a=this.kernelSize.concat([this.filters,this.filters*i]);if(this.recurrentKernel=this.addWeight("recurrent_kernel",a,null,this.recurrentInitializer,this.recurrentRegularizer,!0,this.recurrentConstraint),this.useBias){let l;if(this.unitForgetBias){const c=this.biasInitializer,u=this.filters;l=new(n=class extends jo{apply(h,f){const p=c.apply([u]),m=Os([u]),g=c.apply([u*2]);return WD([p,m,g])}},n.className="CustomInit",n)}else l=this.biasInitializer;this.bias=this.addWeight("bias",[this.filters*i],null,l,this.biasRegularizer,!0,this.biasConstraint)}this.built=!0}call(e,n){return oe(()=>{if(e.length!==3)throw new te(`ConvLSTM2DCell expects 3 input Tensors (inputs, h, c), got ${e.length}.`);const r=n.training||!1,s=e[0],i=e[1],o=e[2],a=4;0<this.dropout&&this.dropout<1&&this.dropoutMask==null&&(this.dropoutMask=Iu({ones:()=>pi(s),rate:this.dropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const l=this.dropoutMask,c=(L,J,Z)=>!J||!J[Z]?L:Y(J[Z],L);let u=c(s,l,0),d=c(s,l,1),h=c(s,l,2),f=c(s,l,3);0<this.recurrentDropout&&this.recurrentDropout<1&&this.recurrentDropoutMask==null&&(this.recurrentDropoutMask=Iu({ones:()=>pi(i),rate:this.recurrentDropout,training:r,count:a,dropoutFunc:this.dropoutFunc}));const p=this.recurrentDropoutMask;let m=c(i,p,0),g=c(i,p,1),y=c(i,p,2),b=c(i,p,3);const v=3,[w,C,_,E]=Ps(this.kernel.read(),a,v),[I,O,R,z]=this.useBias?Ps(this.bias.read(),a):[null,null,null,null];u=this.inputConv(u,w,I,this.padding),d=this.inputConv(d,C,O,this.padding),h=this.inputConv(h,_,R,this.padding),f=this.inputConv(f,E,z,this.padding);const[B,j,G,U]=Ps(this.recurrentKernel.read(),a,v);m=this.recurrentConv(m,B),g=this.recurrentConv(g,j),y=this.recurrentConv(y,G),b=this.recurrentConv(b,U);const Q=this.recurrentActivation.apply(xe(u,m)),se=this.recurrentActivation.apply(xe(d,g)),V=xe(Y(se,o),Y(Q,this.activation.apply(xe(h,y)))),W=Y(this.recurrentActivation.apply(xe(f,b)),this.activation.apply(V));return[W,W,V]})}getConfig(){const e=super.getConfig(),n=Yge(e,["units"]),r={filters:this.filters,kernelSize:this.kernelSize,padding:this.padding,dataFormat:this.dataFormat,dilationRate:this.dilationRate,strides:this.strides};return Object.assign(Object.assign({},n),r)}inputConv(e,n,r,s){const i=Zl(e,n,this.strides,s||"valid",this.dataFormat==="channelsFirst"?"NCHW":"NHWC",this.dilationRate);return r?Ca(i,r,this.dataFormat):i}recurrentConv(e,n){return Zl(e,n,1,"same",this.dataFormat==="channelsFirst"?"NCHW":"NHWC")}}aP.className="ConvLSTM2DCell";Ce(aP);class S6 extends x6{constructor(e){const n=new aP(e);super(Object.assign(Object.assign({},e),{cell:n}))}static fromConfig(e,n){return new e(n)}}S6.className="ConvLSTM2D";Ce(S6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class lP extends It{constructor(e){super(e),this.rate=Math.max(Math.min(e.rate,1),0),this.noiseShape=e.noiseShape,this.seed=e.seed,this.supportsMasking=!0}getNoiseShape(e){if(this.noiseShape==null)return this.noiseShape;const n=e.shape,r=[];for(let s=0;s<this.noiseShape.length;++s)r.push(this.noiseShape[s]==null?n[s]:this.noiseShape[s]);return r}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=ut(e);if(0<this.rate&&this.rate<1){const s=n.training==null?!1:n.training,i=this.getNoiseShape(r);return R0(()=>d5(r,this.rate,i,this.seed),()=>r,s)}return e})}getConfig(){const e={rate:this.rate,noiseShape:this.noiseShape,seed:this.seed},n=super.getConfig();return Object.assign(e,n),e}dispose(){return super.dispose()}}lP.className="Dropout";Ce(lP);class C6 extends lP{constructor(e){super(e),this.inputSpec=[{ndim:3}]}getNoiseShape(e){const n=e.shape;return[n[0],1,n[2]]}}C6.className="SpatialDropout1D";Ce(C6);class E6 extends It{constructor(e){if(super(e),this.activation=null,this.useBias=!0,this.kernel=null,this.bias=null,this.DEFAULT_KERNEL_INITIALIZER="glorotNormal",this.DEFAULT_BIAS_INITIALIZER="zeros",e.batchInputShape==null&&e.inputShape==null&&e.inputDim!=null){let n=null;e.batchSize!=null&&(n=e.batchSize),this.batchInputShape=[n,e.inputDim]}this.units=e.units,Dr(this.units,"units"),this.activation=ku(e.activation),e.useBias!=null&&(this.useBias=e.useBias),this.kernelInitializer=On(e.kernelInitializer||this.DEFAULT_KERNEL_INITIALIZER),this.biasInitializer=On(e.biasInitializer||this.DEFAULT_BIAS_INITIALIZER),this.kernelConstraint=Tr(e.kernelConstraint),this.biasConstraint=Tr(e.biasConstraint),this.kernelRegularizer=Dn(e.kernelRegularizer),this.biasRegularizer=Dn(e.biasRegularizer),this.activityRegularizer=Dn(e.activityRegularizer),this.supportsMasking=!0,this.inputSpec=[{minNDim:2}]}build(e){e=zt(e);const n=e[e.length-1];this.kernel==null&&(this.kernel=this.addWeight("kernel",[n,this.units],null,this.kernelInitializer,this.kernelRegularizer,!0,this.kernelConstraint),this.useBias&&(this.bias=this.addWeight("bias",[this.units],null,this.biasInitializer,this.biasRegularizer,!0,this.biasConstraint))),this.inputSpec=[{minNDim:2,axes:{[-1]:n}}],this.built=!0}computeOutputShape(e){e=zt(e);const n=e.slice();return n[n.length-1]=this.units,n}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=ut(e),s=s5(this.activation.getClassName());let i;return s!=null?i=Za(r,this.kernel.read(),s,this.bias?this.bias.read():null):(i=Za(r,this.kernel.read()),this.bias!=null&&(i=Ca(i,this.bias.read())),this.activation!=null&&(i=this.activation.apply(i))),i})}getConfig(){const e={units:this.units,activation:Tu(this.activation),useBias:this.useBias,kernelInitializer:Un(this.kernelInitializer),biasInitializer:Un(this.biasInitializer),kernelRegularizer:dn(this.kernelRegularizer),biasRegularizer:dn(this.biasRegularizer),activityRegularizer:dn(this.activityRegularizer),kernelConstraint:_r(this.kernelConstraint),biasConstraint:_r(this.biasConstraint)},n=super.getConfig();return Object.assign(e,n),e}}E6.className="Dense";Ce(E6);class _6 extends It{constructor(e){e=e||{},super(e),this.inputSpec=[{minNDim:3}],this.dataFormat=e.dataFormat}computeOutputShape(e){e=zt(e);for(const n of e.slice(1))if(n==null)throw new te(`The shape of the input to "Flatten" is not fully defined (got ${e.slice(1)}). Make sure to pass a complete "input_shape" or "batch_input_shape" argument to the first layer in your model.`);return[e[0],lu(e,1)]}call(e,n){return oe(()=>{this.invokeCallHook(e,n);let r=ut(e);if(this.dataFormat==="channelsFirst"&&r.rank>1){const s=[0];for(let i=2;i<r.rank;++i)s.push(i);s.push(1),r=$t(r,s)}return Nme(r)})}getConfig(){const e={};this.dataFormat!=null&&(e.dataFormat=this.dataFormat);const n=super.getConfig();return Object.assign(e,n),e}}_6.className="Flatten";Ce(_6);class T6 extends It{constructor(e){super(e),this.supportsMasking=!0,this.activation=ku(e.activation)}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=ut(e);return this.activation.apply(r)})}getConfig(){const e={activation:Tu(this.activation)},n=super.getConfig();return Object.assign(e,n),e}}T6.className="Activation";Ce(T6);class k6 extends It{constructor(e){super(e),this.n=e.n,this.inputSpec=[{ndim:2}]}computeOutputShape(e){return[e[0],this.n,e[1]]}call(e,n){return oe(()=>(e=ut(e),kme(e,this.n)))}getConfig(){const e={n:this.n},n=super.getConfig();return Object.assign(e,n),e}}k6.className="RepeatVector";Ce(k6);class I6 extends It{constructor(e){super(e),this.targetShape=e.targetShape;for(let n=0;n<this.targetShape.length;++n)this.isUnknown(this.targetShape[n])&&(this.targetShape[n]=null)}isUnknown(e){return e<0||e==null}fixUnknownDimension(e,n){const r="Total size of new array must be unchanged.",s=n.slice();let i=1,o=null;for(let l=0;l<s.length;++l){const c=s[l];if(this.isUnknown(c))if(o===null)o=l;else throw new te("Can only specifiy one unknown dimension.");else i*=c}const a=lu(e);if(o!==null){if(i===0||a%i!==0)throw new te(r);s[o]=a/i}else if(a!==i)throw new te(r);return s}computeOutputShape(e){let n=!1;for(let r=0;r<e.length;++r)if(this.isUnknown(e[r])){n=!0;break}return n?e.slice(0,1).concat(this.targetShape):e.slice(0,1).concat(this.fixUnknownDimension(e.slice(1),this.targetShape))}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=ut(e),s=r.shape,i=s.slice(0,1).concat(this.fixUnknownDimension(s.slice(1),this.targetShape));return ee(r,i)})}getConfig(){const e={targetShape:this.targetShape},n=super.getConfig();return Object.assign(e,n),e}}I6.className="Reshape";Ce(I6);class N6 extends It{constructor(e){if(super(e),e.dims==null)throw new Error("Required configuration field `dims` is missing during Permute constructor call.");if(!Array.isArray(e.dims))throw new Error(`Permute constructor requires \`dims\` to be an Array, but received ${e.dims} instead.`);const n=ma(1,e.dims.length+1);if(!Nt(e.dims.slice().sort(),n))throw new Error("Invalid permutation `dims`: "+JSON.stringify(e.dims)+" `dims` must contain consecutive integers starting from 1.");this.dims=e.dims,this.dimsIncludingBatch=[0].concat(this.dims),this.inputSpec=[new Er({ndim:this.dims.length+1})]}computeOutputShape(e){e=zt(e);const n=e.slice();return this.dims.forEach((r,s)=>{n[s+1]=e[r]}),n}call(e,n){return $t(ut(e),this.dimsIncludingBatch)}getConfig(){const e={dims:this.dims},n=super.getConfig();return Object.assign(e,n),e}}N6.className="Permute";Ce(N6);class $6 extends It{constructor(e){super(e??{}),this.supportsMasking=!0,e!=null?this.maskValue=e.maskValue==null?0:e.maskValue:this.maskValue=0}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={maskValue:this.maskValue};return Object.assign(n,e),n}computeMask(e,n){const r=ut(e);return vb(ph(r,this.maskValue),-1)}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=ut(e),o=vb(ph(r,this.maskValue),-1,!0);return Y(r,$e(o,r.dtype))})}}$6.className="Masking";Ce($6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class A6 extends It{constructor(e){if(super(e),this.embeddings=null,this.DEFAULT_EMBEDDINGS_INITIALIZER="randomUniform",e.batchInputShape==null&&e.inputShape==null){let n=null;e.batchSize!=null&&(n=e.batchSize),e.inputLength==null?this.batchInputShape=[n,null]:this.batchInputShape=[n].concat(Jt(e.inputLength))}this.inputDim=e.inputDim,Dr(this.inputDim,"inputDim"),this.outputDim=e.outputDim,Dr(this.outputDim,"outputDim"),this.embeddingsInitializer=On(e.embeddingsInitializer||this.DEFAULT_EMBEDDINGS_INITIALIZER),this.embeddingsRegularizer=Dn(e.embeddingsRegularizer),this.activityRegularizer=Dn(e.activityRegularizer),this.embeddingsConstraint=Tr(e.embeddingsConstraint),this.maskZero=e.maskZero,this.supportsMasking=e.maskZero,this.inputLength=e.inputLength}build(e){this.embeddings=this.addWeight("embeddings",[this.inputDim,this.outputDim],this.dtype,this.embeddingsInitializer,this.embeddingsRegularizer,!0,this.embeddingsConstraint),this.built=!0}warnOnIncompatibleInputShape(e){}computeMask(e,n){return oe(()=>this.maskZero?(e=ut(e),ph(e,Dt(e))):null)}computeOutputShape(e){if(e=zt(e),this.inputLength==null)return[...e,this.outputDim];const n=Jt(this.inputLength);if(n.length!==e.length-1)throw new te(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);{let r=0;for(let s=0;s<n.length;++s){const i=n[s],o=e[s+1];if(i!=null&&o!=null&&i!==o)throw new te(`"inputLength" is ${this.inputLength}, but received input shape has shape ${e}`);i==null&&(n[r]=o),r++}}return[e[0],...n,this.outputDim]}call(e,n){return oe(()=>{this.invokeCallHook(e,n);let r=ut(e);r.dtype!=="int32"&&(r=Ja(r,"int32"));const s=u5(this.embeddings.read(),ee(r,[r.size]));return ee(s,zt(this.computeOutputShape(r.shape)))})}getConfig(){const e={inputDim:this.inputDim,outputDim:this.outputDim,embeddingsInitializer:Un(this.embeddingsInitializer),embeddingsRegularizer:dn(this.embeddingsRegularizer),activityRegularizer:dn(this.activityRegularizer),embeddingsConstraint:_r(this.embeddingsConstraint),maskZero:this.maskZero,inputLength:this.inputLength},n=super.getConfig();return Object.assign(e,n),e}}A6.className="Embedding";Ce(A6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class Wh extends It{constructor(e){super(e||{}),this.supportsMasking=!0}mergeFunction(e){throw new St}computeElementwiseOpOutputShape(e,n){if(e==null||n==null)return null;if(e.length<n.length)return this.computeElementwiseOpOutputShape(n,e);if(n.length===0)return e;const r=e.slice(0,e.length-n.length);for(let s=0;s<n.length;++s){const i=e[e.length-n.length+s],o=n[s];if(i==null||o==null||i<0||o<0)r.push(null);else if(i===1)r.push(o);else if(o===1)r.push(i);else{if(i!==o)throw new te("Operands could not be broadcast together with shapes "+JSON.stringify(e)+" "+JSON.stringify(n));r.push(i)}}return r}build(e){if(Array.isArray(e)&&!Array.isArray(e[0])&&(e=[zt(e)]),e=e,e.length<2)throw new te(`A merge layer should be called on an Array of at least 2 inputs. Got ${e.length} input(s).`);let n=[];for(const i of e)i!=null&&i[0]!==null&&n.push(i[0]);if(n=au(n),n.length>1)throw new te(`Can not merge tensors with different batch sizes. Got tensors with shapes: ${JSON.stringify(e)}.`);let r=e[0]==null?null:e[0].slice(1);for(let i=1;i<e.length;++i){const o=e[i]==null?null:e[i].slice(1);r=this.computeElementwiseOpOutputShape(r,o)}const s=e.map(i=>i.length);e.indexOf(null)===-1&&au(s).length===1?this.reshapeRequired=!1:this.reshapeRequired=!0}call(e,n){return oe(()=>{if(e=e,this.reshapeRequired){const r=[],s=e.map(i=>i.rank);if(s.indexOf(null)===-1){const i=_u(s);for(let o of e){const a=o.rank;for(let l=0;l<i-a;++l)o=$0(o,1);r.push(o)}return this.mergeFunction(r)}else{let i=!1;for(const l of e){const c=l.rank;if(c==null){const u=l.shape,d=u[0],h=u.slice(1).concat([d]);let f=ee(l,[d].concat(lu(u.slice(1))));f=$t(f,[1,0]),f=ee(f,h),r.push(f),i=!0}else if(c>1){const u=ma(1,c).concat([0]);r.push($t(l,u)),i=!0}else r.push(l)}let o=this.mergeFunction(r);const a=o.rank;if(i){if(a==null){const l=o.shape,c=l.length,u=l[c-1],d=[u].concat(l.slice(0,l.length-1));o=ee($t(ee(o,[-1,u]),[1,0]),d)}else if(a>1){const l=[a-1].concat(ma(0,a-1));o=$t(o,l)}}return o}}else return this.mergeFunction(e)})}computeOutputShape(e){e=e;let n;e[0]==null?n=null:n=e[0].slice(1);for(let s=1;s<e.length;++s){const i=e[s]==null?null:e[s].slice(1);n=this.computeElementwiseOpOutputShape(n,i)}let r=[];for(const s of e)s!=null&&s[0]!==null&&r.push(s[0]);return r=au(r),r.length===1?n=r.concat(n):n=[null].concat(n),n}computeMask(e,n){return oe(()=>{if(n==null)return null;if(!Array.isArray(n))throw new te("`mask` should be an Array");if(!Array.isArray(e))throw new te("`inputs` should be an Array");if(n.length!==e.length)throw new te(`The Array 'inputs' and 'mask' are expected to have the same length, but have different lengths (${e.length} vs ${n.length})`);if(n.every(s=>s==null))return null;n=n.map(s=>s==null?s:Br(s,0));let r=n[0];for(let s=1;s<n.length-1;++s)r=fa(r,n[s]);return r})}}class R6 extends Wh{constructor(e){super(e)}mergeFunction(e){return oe(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=xe(n,e[r]);return n})}}R6.className="Add";Ce(R6);class O6 extends Wh{constructor(e){super(e)}mergeFunction(e){return oe(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=Y(n,e[r]);return n})}}O6.className="Multiply";Ce(O6);class D6 extends Wh{constructor(e){super(e)}mergeFunction(e){return oe(()=>{let n=e[0].clone();for(let r=1;r<e.length;++r)n=xe(n,e[r]);return Y(1/e.length,n)})}}D6.className="Average";Ce(D6);class P6 extends Wh{constructor(e){super(e)}mergeFunction(e){return oe(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=ml(n,e[r]);return n})}}P6.className="Maximum";Ce(P6);class L6 extends Wh{constructor(e){super(e)}mergeFunction(e){return oe(()=>{let n=e[0];for(let r=1;r<e.length;++r)n=Cu(n,e[r]);return n})}}L6.className="Minimum";Ce(L6);class F6 extends Wh{constructor(e){super(e),this.DEFAULT_AXIS=-1,e==null&&(e={}),this.axis=e.axis==null?this.DEFAULT_AXIS:e.axis,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){if(!(Array.isArray(e)&&Array.isArray(e[0]))||e.length===1)throw new te("A `Concatenate` layer should be called on a list of at least 2 inputs");e=e;let n=!0;for(const s of e)if(s!=null){n=!1;break}if(n)return;const r=[];for(let s=0;s<e.length;++s){const i=e[s].slice();i.splice(this.axis,1);let o=!1;for(const a of r)if(Nt(a,i)){o=!0;break}o||r.push(i)}if(r.length>1)throw new te("A `Concatenate` layer requires inputs with matching shapes except for the concat axis. Got input shapes: "+JSON.stringify(e))}mergeFunction(e){return oe(()=>WD(e,this.axis))}computeOutputShape(e){if(!(Array.isArray(e)&&Array.isArray(e[0])))throw new te("A `Concatenate` layer should be called on a list of inputs.");const n=e,r=n[0].slice(),s=this.axis<0?r.length+this.axis:this.axis;for(const i of n.slice(1)){if(r[s]==null||i[s]==null){r[s]=null;break}r[s]+=i[s]}return r}computeMask(e,n){if(n==null)return null;if(!Array.isArray(n))throw new te("`mask` should be an array for Concatenate");if(!Array.isArray(e))throw new te("`inputs` should be an array for Concatenate");if(n.length!==e.length)throw new te(`Mismatch in the length of mask (${n.length}) and the legnth of inputs (${e.length})`);return oe(()=>{let r=!0;if(n.forEach(o=>{if(o!=null){r=!1;return}}),r)return null;const s=[];for(let o=0;o<e.length;++o)n[o]==null?s.push($e(pi(e[o]),"bool")):n[o].rank<e[o].rank?s.push(Br(n[o],-1)):s.push(n[o]);const i=Wn(s,this.axis);return jE(i,-1,!1)})}getConfig(){const e={axis:this.axis},n=super.getConfig();return Object.assign(e,n),e}}F6.className="Concatenate";Ce(F6);function ay(t,e){for(;t<0;)t+=e;return t}function Qge(t,e,n){if(t.shape.length>3||e.shape.length>3)throw new St("batchDot is not implemented for tensors of 4D or higher rank yet");if(P(t.shape.length>=2,()=>`batchDot requires the rank of x to be >= 2, but got ${t.shape.length}`),P(t.shape.length>=2,()=>`batchDot requires the rank of y to be >= 2, but got ${e.shape.length}`),typeof n=="number"&&(n=[n,n]),t.dtype==="complex64"||e.dtype==="complex64")throw new St("batchDot is not implemented for complex64-type Tensors yet.");const r=t.shape.length,s=e.shape.length;n==null&&(n=[r-1,s-2]);const i=n;return oe(()=>{let o;if(r>s){o=r-s;const l=[];for(let c=0;c<o;++c)l.push(1);e=ee(e,e.shape.concat(l))}else if(s>r){o=s-r;const l=[];for(let c=0;c<o;++c)l.push(1);t=ee(t,t.shape.concat(l))}else o=0;let a;if(t.shape.length===2&&e.shape.length===2)i[0]===i[1]?a=qe(Y(t,e),i[0]):a=qe(Y($t(t,[1,0]),e),i[1]);else{const l=i[0]!==t.shape.length-1,c=i[1]===e.shape.length-1;a=Et(t,e,l,c)}if(o>0){let l;r>s?l=r+s-3:l=r-1;const c=[];for(let u=l;u<l+o;++u)c.push(u);a=Ao(a,c)}return a.shape.length===1&&(a=Br(a,1)),a})}class M6 extends Wh{constructor(e){super(e),this.axes=e.axes,this.normalize=e.normalize==null?!1:e.normalize,this.supportsMasking=!0,this.reshapeRequired=!1}build(e){P(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0],r=e[1];if(n.length>3||r.length>3)throw new St("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);if(n[s[0]]!==r[s[1]])throw new te(`Dimension incompatibility: ${n[s[0]]} !== ${r[s[1]]}`)}mergeFunction(e){if(e.length!==2)throw new te(`A \`Dot\` layer must be called on exactly 2 inputs, but received ${e.length} input(s).`);let n=e[0],r=e[1],s;return Array.isArray(this.axes)?s=this.axes.map((i,o)=>ay(i,e[o].shape.length)):s=[ay(this.axes,n.shape.length),ay(this.axes,r.shape.length)],this.normalize&&(n=NS(n,s[0]),r=NS(r,s[1])),Qge(n,r,s)}interpretAxes(e,n){let r;return Array.isArray(this.axes)?r=this.axes:r=[ay(this.axes,e.length),ay(this.axes,n.length)],r}computeOutputShape(e){P(Array.isArray(e)&&e.length===2&&Array.isArray(e[0])&&Array.isArray(e[1]),()=>"A `Dot` layer should be called on a list of exactly 2 inputs.");const n=e[0].slice(),r=e[1].slice();if(n.length>3||r.length>3)throw new St("Dot layer does not support tensors of 4D or higher rank yet.");const s=this.interpretAxes(n,r);n.splice(s[0],1),r.splice(s[1],1),r.splice(0,1);const i=n.concat(r);return i.length===1&&i.push(1),i}computeMask(e,n){return null}getConfig(){const e={axes:this.axes,normalize:this.normalize},n=super.getConfig();return Object.assign(e,n),e}}M6.className="Dot";Ce(M6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class z6 extends It{constructor(e){super(e),this.supportsMasking=!0,this.stddev=e.stddev}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={stddev:this.stddev};return Object.assign(n,e),n}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=ut(e);return R0(()=>xe(D_(r.shape,0,this.stddev),r),()=>r,n.training||!1)})}}z6.className="GaussianNoise";Ce(z6);class B6 extends It{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return oe(()=>{this.invokeCallHook(e,n);const r=ut(e);return this.rate>0&&this.rate<1?R0(()=>{const i=Math.sqrt(this.rate/(1-this.rate));return Y(r,D_(r.shape,1,i))},()=>r,n.training||!1):r})}}B6.className="GaussianDropout";Ce(B6);class j6 extends It{constructor(e){super(e),this.supportsMasking=!0,this.rate=e.rate,this.noiseShape=e.noiseShape}_getNoiseShape(e){return this.noiseShape||ut(e).shape}computeOutputShape(e){return e}getConfig(){const e=super.getConfig(),n={rate:this.rate};return Object.assign(n,e),n}call(e,n){return oe(()=>{if(this.rate<1&&this.rate>0){const r=this._getNoiseShape(e);return R0(()=>{const i=ut(e),l=-1.6732632423543772*1.0507009873554805;let c=hc(Bu(r),this.rate);c=Ja(c,"float32");const u=((1-this.rate)*(1+this.rate*l**2))**-.5,d=-u*l*this.rate,h=xe(Y(i,c),Y(xe(c,-1),l));return xe(Y(h,u),d)},()=>ut(e),n.training||!1)}return e})}}j6.className="AlphaDropout";Ce(j6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function Ib(t,e,n,r,s,i=.001){let o;if(t.rank===2)o=ZR(t,e,n,r,s,i);else if(t.rank===3)o=eO(t,e,n,r,s,i);else if(t.rank===4)o=tO(t,e,n,r,s,i);else throw new St(`batchNormalization is not implemented for array of rank ${t.rank} yet`);return o}function Jge(t,e,n,r,s=.001){return oe(()=>{const i=m0(t,r),o=i.mean,a=i.variance;return[Ib(t,o,a,n,e,s),o,a]})}function Zge(t,e,n,r,s=.001){return oe(()=>{const i=m0(t,r),o=i.mean,a=i.variance,l=[];for(const p of ma(0,t.rank))r.indexOf(p)!==-1?l.push(1):l.push(t.shape[p]);const c=ee(o,l),u=ee(a,l),d=e==null?null:ee(e,l),h=n==null?null:ee(n,l);return[Ib(t,c,u,h,d,s),o,a]})}function eye(t,e,n,r,s=.001){return Nt(r.slice().sort(),ma(0,t.rank-1))?Jge(t,e,n,r,s):Zge(t,e,n,r,s)}class V6 extends It{constructor(e){e==null&&(e={}),super(e),this.supportsMasking=!0,this.axis=e.axis==null?-1:e.axis,this.momentum=e.momentum==null?.99:e.momentum,this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=On(e.betaInitializer||"zeros"),this.gammaInitializer=On(e.gammaInitializer||"ones"),this.movingMeanInitializer=On(e.movingMeanInitializer||"zeros"),this.movingVarianceInitializer=On(e.movingVarianceInitializer||"ones"),this.betaConstraint=Tr(e.betaConstraint),this.gammaConstraint=Tr(e.gammaConstraint),this.betaRegularizer=Dn(e.betaRegularizer),this.gammaRegularizer=Dn(e.gammaRegularizer)}build(e){e=zt(e);const n=this.axis>=0?this.axis:this.axis+e.length,r=e[n];if(r==null)throw new te(`Axis ${n} of input tensor should have a defined dimension but the layer received an input with shape ${JSON.stringify(e)}.`);this.inputSpec=[new Er({ndim:e.length,axes:{[n]:r}})];const s=[r];this.scale&&(this.gamma=this.addWeight("gamma",s,null,this.gammaInitializer,this.gammaRegularizer,!0,this.gammaConstraint)),this.center&&(this.beta=this.addWeight("beta",s,null,this.betaInitializer,this.betaRegularizer,!0,this.betaConstraint)),this.movingMean=this.addWeight("moving_mean",s,null,this.movingMeanInitializer,null,!1),this.movingVariance=this.addWeight("moving_variance",s,null,this.movingVarianceInitializer,null,!1),this.built=!0}call(e,n){return oe(()=>{const r=n.training==null?!1:n.training,s=ut(e),i=s.shape,o=i.length,a=ma(0,o),l=this.axis>=0?this.axis:this.axis+o;a.splice(l,1);const c=vh(1,o);c[l]=i[l];const u=a.slice();u.sort();const d=!Nt(u,ma(0,o).slice(0,o-1)),h=()=>{if(d){const b=ee(this.movingMean.read(),c),v=ee(this.movingVariance.read(),c),w=this.center?ee(this.beta.read(),c):null,C=this.scale?ee(this.gamma.read(),c):null;return Ib(s,b,v,w,C,this.epsilon)}else return Ib(s,this.movingMean.read(),this.movingVariance.read(),this.beta==null?null:this.beta.read(),this.gamma==null?null:this.gamma.read(),this.epsilon)};if(!r)return h();const[f,p,m]=eye(s,this.gamma.read(),this.beta.read(),a,this.epsilon),g=(b,v,w)=>{oe(()=>{const C=1-w,_=b.read(),E=Y(Fe(_,v),C);b.write(Fe(_,E))})};return(()=>{g(this.movingMean,p,this.momentum),g(this.movingVariance,m,this.momentum)})(),f})}getConfig(){const e={axis:this.axis,momentum:this.momentum,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Un(this.betaInitializer),gammaInitializer:Un(this.gammaInitializer),movingMeanInitializer:Un(this.movingMeanInitializer),movingVarianceInitializer:Un(this.movingVarianceInitializer),betaRegularizer:dn(this.betaRegularizer),gammaRegularizer:dn(this.gammaRegularizer),betaConstraint:_r(this.betaConstraint),gammaConstraint:_r(this.gammaConstraint)},n=super.getConfig();return Object.assign(e,n),e}}V6.className="BatchNormalization";Ce(V6);class U6 extends It{constructor(e){if(e==null&&(e={}),super(e),this.axis=e.axis==null?-1:e.axis,typeof this.axis=="number"){if(!Number.isInteger(this.axis))throw new Error(`Expected axis to be an integer, but received ${this.axis}`)}else if(Array.isArray(this.axis)){for(const n of this.axis)if(!Number.isInteger(n))throw new Error(`Expected axis to be an array of integers, but received ${JSON.stringify(this.axis)}`)}else throw new Error(`Expected axis to be an integer or an array of integers, but received ${JSON.stringify(this.axis)}`);this.epsilon=e.epsilon==null?.001:e.epsilon,this.center=e.center==null?!0:e.center,this.scale=e.scale==null?!0:e.scale,this.betaInitializer=On(e.betaInitializer||"zeros"),this.gammaInitializer=On(e.gammaInitializer||"ones"),this.betaRegularizer=Dn(e.betaRegularizer),this.gammaRegularizer=Dn(e.gammaRegularizer),this.supportsMasking=!0}build(e){e=zt(e);const n=e.length;typeof this.axis=="number"&&(this.axis=[this.axis]);for(let i=0;i<this.axis.length;++i)this.axis[i]<0&&(this.axis[i]+=n);for(const i of this.axis)if(i<0||i>=n)throw new Error(`Invalid axis: ${i}`);if(this.axis.length!==au(this.axis).length)throw new Error(`Found duplicate axes in: ${this.axis}`);const r=this.axis.map(i=>e[i]),s=!0;this.scale?this.gamma=this.addWeight("gamma",r,"float32",this.gammaInitializer,this.gammaRegularizer,s):this.gamma=null,this.center?this.beta=this.addWeight("beta",r,"float32",this.betaInitializer,this.betaRegularizer,s):this.beta=null,this.built=!0}call(e,n){const r=ut(e),s=r.shape,i=s.length;return oe(()=>{let{mean:a,variance:l}=m0(r,this.axis,!0);const c=vh(1,i);for(const m of this.axis)c[m]=s[m];const u=m=>m!=null&&m.shape.length!==i?ee(m,c):m;let d=this.scale?u(this.gamma.read()):null,h=this.center?u(this.beta.read()):null;const f=[],p=[];for(let m=0;m<i;++m)this.axis.indexOf(m)!==-1?(f.push(s[m]),p.push(1)):(f.push(1),p.push(s[m]));return a=Li(a,f),l=Li(l,f),d!=null&&(d=Li(d,p)),h!=null&&(h=Li(h,p)),Ib(r,a,l,h,d,this.epsilon)})}getConfig(){const e={axis:this.axis,epsilon:this.epsilon,center:this.center,scale:this.scale,betaInitializer:Un(this.betaInitializer),gammaInitializer:Un(this.gammaInitializer),betaRegularizer:dn(this.betaRegularizer),gammaRegularizer:dn(this.gammaRegularizer)},n=super.getConfig();return Object.assign(e,n),e}}U6.className="LayerNormalization";Ce(U6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function tye(t,e,n){return oe(()=>{if(t.rank!==4)throw new te(`temporalPadding expects input tensor to be 4-D, but received a ${t.rank}-D tensor.`);if(e==null&&(e=[[1,1],[1,1]]),e.length!==2||e[0].length!==2||e[1].length!==2)throw new te("spatial2dPadding expects `padding` to be an Array of two Arrays, each of which is an Array of two integers.");if(n==null&&(n=ga()),n!=="channelsLast"&&n!=="channelsFirst")throw new te(`Unknown data format: ${n}. Supported data formats are 'channelsLast' and 'channelsFirst.`);let r;return n==="channelsFirst"?r=[[0,0],[0,0],e[0],e[1]]:r=[[0,0],e[0],e[1],[0,0]],fc(t,r)})}class W6 extends It{constructor(e){if(e==null&&(e={}),super(e),this.dataFormat=e.dataFormat==null?ga():e.dataFormat,e.padding==null)this.padding=[[1,1],[1,1]];else if(typeof e.padding=="number")this.padding=[[e.padding,e.padding],[e.padding,e.padding]];else{if(e.padding=e.padding,e.padding.length!==2)throw new te(`ZeroPadding2D expects padding to be a length-2 array, but received a length-${e.padding.length} array.`);let n,r;if(typeof e.padding[0]=="number")n=[e.padding[0],e.padding[0]],r=[e.padding[1],e.padding[1]];else{if(e.padding=e.padding,e.padding[0].length!==2)throw new te(`ZeroPadding2D expects height padding to be a length-2 array, but received a length-${e.padding[0].length} array.`);if(n=e.padding[0],e.padding[1].length!==2)throw new te(`ZeroPadding2D expects width padding to be a length-2 array, but received a length-${e.padding[1].length} array.`);r=e.padding[1]}this.padding=[n,r]}this.inputSpec=[new Er({ndim:4})]}computeOutputShape(e){e=zt(e);let n,r;return this.dataFormat==="channelsFirst"?(e[2]!=null&&e[2]>=0?n=e[2]+this.padding[0][0]+this.padding[0][1]:n=null,e[3]!=null&&e[3]>=0?r=e[3]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],e[1],n,r]):(e[1]!=null&&e[1]>=0?n=e[1]+this.padding[0][0]+this.padding[0][1]:n=null,e[2]!=null&&e[2]>=0?r=e[2]+this.padding[1][0]+this.padding[1][1]:r=null,[e[0],n,r,e[3]])}call(e,n){return oe(()=>tye(ut(e),this.padding,this.dataFormat))}getConfig(){const e={padding:this.padding,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}W6.className="ZeroPadding2D";Ce(W6);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function V_(t,e,n,r,s,i){return oe(()=>{or(s),o5(i),to(r),n==null&&(n=[1,1]),r==null&&(r="valid"),s==null&&(s=ga()),i==null&&(i="max"),t=rP(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=p0(t,e,n,a):o=i0(t,e,n,a),s==="channelsFirst"&&(o=$t(o,[0,3,1,2])),o})}function H6(t,e,n,r,s,i){return oe(()=>{or(s),o5(i),to(r),n==null&&(n=[1,1,1]),r==null&&(r="valid"),s==null&&(s=ga()),i==null&&(i="max"),t=l6(t,s);let o;const a=r==="same"?"same":"valid";return i==="max"?o=CO(t,e,n,a):o=JR(t,e,n,a),s==="channelsFirst"&&(o=$t(o,[0,4,1,2,3])),o})}class G6 extends It{constructor(e){if(e.poolSize==null&&(e.poolSize=2),super(e),typeof e.poolSize=="number")this.poolSize=[e.poolSize];else if(Array.isArray(e.poolSize)&&e.poolSize.length===1&&typeof e.poolSize[0]=="number")this.poolSize=e.poolSize;else throw new te(`poolSize for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.poolSize)}`);if(Dr(this.poolSize,"poolSize"),e.strides==null)this.strides=this.poolSize;else if(typeof e.strides=="number")this.strides=[e.strides];else if(Array.isArray(e.strides)&&e.strides.length===1&&typeof e.strides[0]=="number")this.strides=e.strides;else throw new te(`strides for 1D convolutional layer must be a number or an Array of a single number, but received ${JSON.stringify(e.strides)}`);Dr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,to(this.padding),this.inputSpec=[new Er({ndim:3})]}computeOutputShape(e){e=zt(e);const n=da(e[1],this.poolSize[0],this.padding,this.strides[0]);return[e[0],n,e[2]]}call(e,n){return oe(()=>{this.invokeCallHook(e,n),e=$0(ut(e),2);const r=this.poolingFunction(ut(e),[this.poolSize[0],1],[this.strides[0],1],this.padding,"channelsLast");return Ao(r,[2])})}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides},n=super.getConfig();return Object.assign(e,n),e}}class K6 extends G6{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return or(i),to(s),V_(e,n,r,s,i,"max")}}K6.className="MaxPooling1D";Ce(K6);class q6 extends G6{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return or(i),to(s),V_(e,n,r,s,i,"avg")}}q6.className="AveragePooling1D";Ce(q6);class X6 extends It{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==2)throw new te(`If the strides property of a 2D pooling layer is an Array, it is expected to have a length of 2, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides];Dr(this.poolSize,"poolSize"),Dr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,or(this.dataFormat),to(this.padding),this.inputSpec=[new Er({ndim:4})]}computeOutputShape(e){e=zt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2];return n=da(n,this.poolSize[0],this.padding,this.strides[0]),r=da(r,this.poolSize[1],this.padding,this.strides[1]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r]:[e[0],n,r,e[3]]}call(e,n){return oe(()=>(this.invokeCallHook(e,n),this.poolingFunction(ut(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Y6 extends X6{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return or(i),to(s),V_(e,n,r,s,i,"max")}}Y6.className="MaxPooling2D";Ce(Y6);class Q6 extends X6{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return or(i),to(s),V_(e,n,r,s,i,"avg")}}Q6.className="AveragePooling2D";Ce(Q6);class J6 extends It{constructor(e){if(e.poolSize==null&&(e.poolSize=[2,2,2]),super(e),this.poolSize=Array.isArray(e.poolSize)?e.poolSize:[e.poolSize,e.poolSize,e.poolSize],e.strides==null)this.strides=this.poolSize;else if(Array.isArray(e.strides)){if(e.strides.length!==3)throw new te(`If the strides property of a 3D pooling layer is an Array, it is expected to have a length of 3, but received length ${e.strides.length}.`);this.strides=e.strides}else this.strides=[e.strides,e.strides,e.strides];Dr(this.poolSize,"poolSize"),Dr(this.strides,"strides"),this.padding=e.padding==null?"valid":e.padding,this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,or(this.dataFormat),to(this.padding),this.inputSpec=[new Er({ndim:5})]}computeOutputShape(e){e=zt(e);let n=this.dataFormat==="channelsFirst"?e[2]:e[1],r=this.dataFormat==="channelsFirst"?e[3]:e[2],s=this.dataFormat==="channelsFirst"?e[4]:e[3];return n=da(n,this.poolSize[0],this.padding,this.strides[0]),r=da(r,this.poolSize[1],this.padding,this.strides[1]),s=da(s,this.poolSize[2],this.padding,this.strides[2]),this.dataFormat==="channelsFirst"?[e[0],e[1],n,r,s]:[e[0],n,r,s,e[4]]}call(e,n){return oe(()=>(this.invokeCallHook(e,n),this.poolingFunction(ut(e),this.poolSize,this.strides,this.padding,this.dataFormat)))}getConfig(){const e={poolSize:this.poolSize,padding:this.padding,strides:this.strides,dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class Z6 extends J6{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return or(i),to(s),H6(e,n,r,s,i,"max")}}Z6.className="MaxPooling3D";Ce(Z6);class eK extends J6{constructor(e){super(e)}poolingFunction(e,n,r,s,i){return or(i),to(s),H6(e,n,r,s,i,"avg")}}eK.className="AveragePooling3D";Ce(eK);class tK extends It{constructor(e){super(e),this.inputSpec=[new Er({ndim:3})]}computeOutputShape(e){return[e[0],e[2]]}call(e,n){throw new St}}class nK extends tK{constructor(e){super(e||{})}call(e,n){return oe(()=>{const r=ut(e);return Vn(r,1)})}}nK.className="GlobalAveragePooling1D";Ce(nK);class rK extends tK{constructor(e){super(e||{})}call(e,n){return oe(()=>{const r=ut(e);return ji(r,1)})}}rK.className="GlobalMaxPooling1D";Ce(rK);class sK extends It{constructor(e){super(e),this.dataFormat=e.dataFormat==null?"channelsLast":e.dataFormat,or(this.dataFormat),this.inputSpec=[new Er({ndim:4})]}computeOutputShape(e){return e=e,this.dataFormat==="channelsLast"?[e[0],e[3]]:[e[0],e[1]]}call(e,n){throw new St}getConfig(){const e={dataFormat:this.dataFormat},n=super.getConfig();return Object.assign(e,n),e}}class iK extends sK{call(e,n){return oe(()=>{const r=ut(e);return this.dataFormat==="channelsLast"?Vn(r,[1,2]):Vn(r,[2,3])})}}iK.className="GlobalAveragePooling2D";Ce(iK);class oK extends sK{call(e,n){return oe(()=>{const r=ut(e);return this.dataFormat==="channelsLast"?ji(r,[1,2]):ji(r,[2,3])})}}oK.className="GlobalMaxPooling2D";Ce(oK);/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class aK extends It{constructor(e){super(e),this.layer=e.layer}build(e){this.built=!0}get trainable(){return this.layer!=null?this.layer.trainable:!1}set trainable(e){this.layer!=null&&(this.layer.trainable=e)}get trainableWeights(){return this.layer.trainableWeights}get nonTrainableWeights(){return this.layer.nonTrainableWeights}get updates(){return this.layer._updates}get losses(){return this.layer.losses}getWeights(){return this.layer.getWeights()}setWeights(e){this.layer.setWeights(e)}getConfig(){const e={layer:{className:this.layer.getClassName(),config:this.layer.getConfig()}},n=super.getConfig();return Object.assign(e,n),e}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.layer!=null&&this.layer.setFastWeightInitDuringBuild(e)}static fromConfig(e,n,r={}){const s=n.layer,i=Wl(s,r);delete n.layer;const o={layer:i};return Object.assign(o,n),new e(o)}}class lK extends aK{constructor(e){super(e),this.supportsMasking=!0}build(e){if(e=zt(e),e.length<3)throw new te(`TimeDistributed layer expects an input shape >= 3D, but received input shape ${JSON.stringify(e)}`);this.inputSpec=[{shape:e}];const n=[e[0]].concat(e.slice(2));this.layer.built||(this.layer.build(n),this.layer.built=!0),super.build(e)}computeOutputShape(e){e=zt(e);const n=[e[0]].concat(e.slice(2)),r=this.layer.computeOutputShape(n),s=e[1];return[r[0],s].concat(r.slice(1))}call(e,n){return oe(()=>(e=ut(e),y6((o,a)=>[ut(this.layer.call(o,n)),[]],e,[],!1,null,null,!1,!0)[1]))}}lK.className="TimeDistributed";Ce(lK);function nye(t){Uh(Sme,"BidirectionalMergeMode",t)}const rye="concat";class cK extends aK{constructor(e){super(e);const n=e.layer.getConfig(),r={};r.className=e.layer.getClassName(),r.config=n,this.forwardLayer=Wl(r),n.goBackwards=n.goBackwards!==!0;const s={};if(s.className=e.layer.getClassName(),s.config=n,this.backwardLayer=Wl(s),this.forwardLayer.name="forward_"+this.forwardLayer.name,this.backwardLayer.name="backward_"+this.backwardLayer.name,this.mergeMode=e.mergeMode===void 0?rye:e.mergeMode,nye(this.mergeMode),e.weights)throw new St("weights support is not implemented for Bidirectional layer yet.");this._stateful=e.layer.stateful,this.returnSequences=e.layer.returnSequences,this.returnState=e.layer.returnState,this.supportsMasking=!0,this._trainable=!0,this.inputSpec=e.layer.inputSpec,this.numConstants=null}get trainable(){return this._trainable}set trainable(e){this._trainable=e,this.forwardLayer!=null&&(this.forwardLayer.trainable=e),this.backwardLayer!=null&&(this.backwardLayer.trainable=e)}getWeights(){return this.forwardLayer.getWeights().concat(this.backwardLayer.getWeights())}setWeights(e){const n=e.length,r=Math.floor(n/2);this.forwardLayer.setWeights(e.slice(0,r)),this.backwardLayer.setWeights(e.slice(r))}computeOutputShape(e){let n=this.forwardLayer.computeOutputShape(e);Array.isArray(n)&&Array.isArray(n[0])||(n=[n]),n=n;let r,s,i;return this.returnState&&(i=n.slice(1)),r=n[0],r=r,this.mergeMode==="concat"?(r[r.length-1]*=2,s=[r]):this.mergeMode==null?s=[r,r.slice()]:s=[r],this.returnState?this.mergeMode==null?s.concat(i).concat(i.slice()):[r].concat(i).concat(i.slice()):Rs(s)}apply(e,n){let r=n==null?null:n.initialState,s=n==null?null:n.constants;n==null&&(n={});const i=g6(e,r,s,this.numConstants);if(e=i.inputs,r=i.initialState,s=i.constants,Array.isArray(e)&&(r=e.slice(1),e=e[0]),(r==null||r.length===0)&&s==null)return super.apply(e,n);const o=[],a=[];if(r!=null){const c=r.length;if(c%2>0)throw new te("When passing `initialState` to a Bidrectional RNN, the state should be an Array containing the states of the underlying RNNs.");n.initialState=r,o.push(...r);const u=r.map(d=>new Er({shape:d.shape}));this.forwardLayer.stateSpec=u.slice(0,c/2),this.backwardLayer.stateSpec=u.slice(c/2),a.push(...u)}if(s!=null)throw new St("Support for constants in Bidirectional layers is not implemented yet.");const l=o[0]instanceof ul;for(const c of o)if(c instanceof ul!==l)throw new te("The initial state of a Bidirectional layer cannot be specified as a mix of symbolic and non-symbolic tensors");if(l){const c=[e].concat(o),u=this.inputSpec.concat(a),d=this.inputSpec;this.inputSpec=u;const h=super.apply(c,n);return this.inputSpec=d,h}else return super.apply(e,n)}call(e,n){return oe(()=>{const r=n.initialState;let s,i;if(r==null)s=this.forwardLayer.call(e,n),i=this.backwardLayer.call(e,n);else{const l=r.slice(0,r.length/2),c=r.slice(r.length/2);s=this.forwardLayer.call(e,Object.assign(n,{initialState:l})),i=this.backwardLayer.call(e,Object.assign(n,{initialState:c}))}let o;this.returnState&&(Array.isArray(s)&&(o=s.slice(1).concat(i.slice(1))),s=s[0],i=i[0]),this.returnSequences&&(i=Gi(i,1));let a;return this.mergeMode==="concat"?a=WD([s,i]):this.mergeMode==="sum"?a=xe(s,i):this.mergeMode==="ave"?a=Y(.5,xe(s,i)):this.mergeMode==="mul"?a=Y(s,i):this.mergeMode==null&&(a=[s,i]),this.returnState?this.mergeMode==null?a.concat(o):[a].concat(o):a})}resetStates(e){this.forwardLayer.resetStates(),this.backwardLayer.resetStates()}build(e){Yd(this.forwardLayer.name,()=>{this.forwardLayer.build(e)}),Yd(this.backwardLayer.name,()=>{this.backwardLayer.build(e)}),this.built=!0}computeMask(e,n){Array.isArray(n)&&(n=n[0]);let r;if(this.returnSequences?this.mergeMode==null?r=[n,n]:r=n:this.mergeMode==null?r=[null,null]:r=null,this.returnState){const i=this.forwardLayer.states.map(o=>null);return Array.isArray(r)?r.concat(i).concat(i):[r].concat(i).concat(i)}else return r}get trainableWeights(){return this.forwardLayer.trainableWeights.concat(this.backwardLayer.trainableWeights)}get nonTrainableWeights(){return this.forwardLayer.nonTrainableWeights.concat(this.backwardLayer.nonTrainableWeights)}setFastWeightInitDuringBuild(e){super.setFastWeightInitDuringBuild(e),this.forwardLayer!=null&&this.forwardLayer.setFastWeightInitDuringBuild(e),this.backwardLayer!=null&&this.backwardLayer.setFastWeightInitDuringBuild(e)}getConfig(){const e={mergeMode:this.mergeMode},n=super.getConfig();return Object.assign(e,n),e}static fromConfig(e,n){const r=Wl(n.layer);if(delete n.layer,n.numConstants!=null)throw new St("Deserialization of a Bidirectional layer with numConstants present is not supported yet.");const s=n;return s.layer=r,new e(s)}}cK.className="Bidirectional";Ce(cK);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class uK extends It{constructor(e){super(e),this.scale=e.scale,e.offset?this.offset=e.offset:this.offset=0}getConfig(){const e={scale:this.scale,offset:this.offset},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return oe(()=>(e=ut(e),e.dtype!=="float32"&&(e=Ja(e,"float32")),xe(Y(e,this.scale),this.offset)))}}uK.className="Rescaling";Ce(uK);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const{resizeBilinear:sye,cropAndResize:iye}=Fi;class dK extends It{constructor(e){super(e),this.height=e.height,this.width=e.width}centerCrop(e,n,r,s,i,o,a,l){return oe(()=>{let c,u=!1;const d=n/o,h=r/a,f=(s+n)/o,p=(i+r)/a,m=[d,h,f,p],g=[];e.rank===3?(u=!0,c=Vs([e])):c=e;for(let C=0;C<c.shape[0];C++)g.push(m);const y=No(g,[g.length,4]),b=mh(0,g.length,1,"int32"),w=iye(c,y,b,[s,i],"nearest");return Ja(u?ut(Ki(w)):w,l)})}upsize(e,n,r,s){return oe(()=>{const i=sye(e,[n,r]);return Ja(i,s)})}call(e,n){return oe(()=>{const r=ut(e),s=r.dtype,i=r.shape,o=i[i.length-3],a=i[i.length-2];let l=0;o!==this.height&&(l=Math.floor((o-this.height)/2));let c=0;return a!==this.width&&(c=Math.floor((a-this.width)/2),c===0&&(c=1)),l>=0&&c>=0?this.centerCrop(r,l,c,this.height,this.width,o,a,s):this.upsize(e,this.height,this.width,s)})}getConfig(){const e={height:this.height,width:this.width},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=zt(e);const n=e.length-3,r=e.length-2;return e[n]=this.height,e[r]=this.width,e}}dK.className="CenterCrop";Ce(dK);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */function oye(t,e,n,r){let s=ut(t);if(s.dtype!=="int32"&&(s=Ja(s,"int32")),e==="int")return s;const i=s.shape;if(s.rank===0&&(s=Br(s,-1)),e==="oneHot"&&s.shape[s.shape.length-1]!==1&&(s=Br(s,-1)),s.rank>2)throw new te(`When outputMode is not int, maximum output rank is 2 Received outputMode ${e} and input shape ${i} which would result in output rank ${s.rank}.`);const o=["multiHot","oneHot"].includes(e),a=s;let l;if(typeof r<"u"&&e==="count"?l=vS(a,r,n,o):l=vS(a,[],n,o),e!=="tfIdf")return l;if(r)return Y(l,r);throw new te("When outputMode is 'tfIdf', weights must be provided.")}/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class hK extends It{constructor(e){super(e),this.numTokens=e.numTokens,e.outputMode?this.outputMode=e.outputMode:this.outputMode="multiHot"}getConfig(){const e={numTokens:this.numTokens,outputMode:this.outputMode},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){return e=zt(e),e==null?[this.numTokens]:this.outputMode==="oneHot"&&e[e.length-1]!==1?(e.push(this.numTokens),e):(e[e.length-1]=this.numTokens,e)}call(e,n){return oe(()=>{e=ut(e),e.dtype!=="int32"&&(e=Ja(e,"int32"));let r;if(typeof n.countWeights<"u"){if(this.outputMode!=="count")throw new te(`countWeights is not used when outputMode !== count.
              Received countWeights=${n.countWeights}`);r=ut(n.countWeights)}const s=ji(e),i=Ap(e),o=Gs(this.numTokens,s).bufferSync().get(0),a=hc(i,0).bufferSync().get(0);if(!(o&&a))throw new te(`Input values must be between 0 < values <= numTokens with numTokens=${this.numTokens}`);return oye(e,this.outputMode,this.numTokens,r)})}}hK.className="CategoryEncoding";Ce(hK);/**
 * @license
 * Copyright 2022 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const aye=["bilinear","nearest"],sz=new Set(aye);class fK extends It{constructor(e){if(super(e),this.height=e.height,this.width=e.width,e.interpolation)if(sz.has(e.interpolation))this.interpolation=e.interpolation;else throw new te(`Invalid interpolation parameter: ${e.interpolation} is not implemented`);else this.interpolation="bilinear";this.cropToAspectRatio=!!e.cropToAspectRatio}computeOutputShape(e){e=zt(e);const n=e[2];return[this.height,this.width,n]}getConfig(){const e={height:this.height,width:this.width,interpolation:this.interpolation,cropToAspectRatio:this.cropToAspectRatio},n=super.getConfig();return Object.assign(e,n),e}call(e,n){return oe(()=>{const r=[this.height,this.width];if(this.interpolation==="bilinear")return Fi.resizeBilinear(e,r,!this.cropToAspectRatio);if(this.interpolation==="nearest")return Fi.resizeNearestNeighbor(e,r,!this.cropToAspectRatio);throw new Error(`Interpolation is ${this.interpolation} but only ${[...sz]} are supported`)})}}fK.className="Resizing";Ce(fK);/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class pK{constructor(e){this.seed=e}next(){if(this.seed!==void 0)return this.seed++}}pK.className="RandomSeed";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */class mK extends It{constructor(e){super(e),this.randomGenerator=new pK(e.seed)}getConfig(){const e={seed:this.randomGenerator.seed},n=super.getConfig();return Object.assign(e,n),e}}mK.className="BaseRandomLayer";/**
 * @license
 * Copyright 2023 CodeSmith LLC
 *
 * Use of this source code is governed by an MIT-style
 * license that can be found in the LICENSE file or at
 * https://opensource.org/licenses/MIT.
 * =============================================================================
 */const lye=["bilinear","nearest"],iz=new Set(lye);class gK extends mK{constructor(e){super(e);const{factor:n,interpolation:r="bilinear"}=e;if(this.factor=n,Array.isArray(this.factor)&&this.factor.length===2)this.widthLower=this.factor[0],this.widthUpper=this.factor[1];else if(!Array.isArray(this.factor)&&this.factor>0)this.widthLower=-this.factor,this.widthUpper=this.factor;else throw new te(`Invalid factor: ${this.factor}. Must be positive number or tuple of 2 numbers`);if(this.widthLower<-1||this.widthUpper<-1)throw new te(`factor must have values larger than -1. Got: ${this.factor}`);if(this.widthUpper<this.widthLower)throw new te(`factor cannot have upper bound less than lower bound.
        Got upper bound: ${this.widthUpper}.
        Got lower bound: ${this.widthLower}
      `);if(r)if(iz.has(r))this.interpolation=r;else throw new te(`Invalid interpolation parameter: ${r} is not implemented`)}getConfig(){const e={factor:this.factor,interpolation:this.interpolation},n=super.getConfig();return Object.assign(e,n),e}computeOutputShape(e){e=zt(e);const n=e[2];return[this.imgHeight,-1,n]}call(e,n){return oe(()=>{const r=ut(e);this.imgHeight=r.shape[r.shape.length-3];const s=r.shape[r.shape.length-2];this.widthFactor=Bu([1],1+this.widthLower,1+this.widthUpper,"float32",this.randomGenerator.next());let i=this.widthFactor.dataSync()[0]*s;i=Math.round(i);const o=[this.imgHeight,i];switch(this.interpolation){case"bilinear":return Fi.resizeBilinear(e,o);case"nearest":return Fi.resizeNearestNeighbor(e,o);default:throw new Error(`Interpolation is ${this.interpolation}
          but only ${[...iz]} are supported`)}})}}gK.className="RandomWidth";Ce(gK);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 * =============================================================================
 */var oz;(function(t){t[t.FAIL=0]="FAIL",t[t.SHORTEST=1]="SHORTEST",t[t.LONGEST=2]="LONGEST"})(oz||(oz={}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ye(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&P(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the CPU backend.`)})}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cye=f_;class U_ extends $C{nextDataId(){return U_.nextDataId++}constructor(){super(),this.blockSize=48,this.firstUse=!0,this.data=new ER(this,ta())}write(e,n,r){this.firstUse&&(this.firstUse=!1,ce().get("IS_NODE")&&Ai(`
============================
Hi, looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, visit https://github.com/tensorflow/tfjs-node for more details. 
============================`));const s={id:this.nextDataId()};return this.data.set(s,{values:e,dtype:r,refCount:1}),s}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&Ua(r[0])){const i=r.map(o=>qa(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return{dataId:s,shape:e,dtype:n}}refCount(e){return this.data.has(e)?this.data.get(e).refCount:0}incRef(e){const n=this.data.get(e);n.refCount++}decRef(e){if(this.data.has(e)){const n=this.data.get(e);n.refCount--}}move(e,n,r,s,i){this.data.set(e,{values:n,dtype:s,refCount:i})}numDataIds(){return this.data.numDataIds()}async read(e){return this.readSync(e)}readSync(e){const{dtype:n,complexTensorInfos:r}=this.data.get(e);if(n==="complex64"){const s=this.readSync(r.real.dataId),i=this.readSync(r.imag.dataId);return ec(s,i)}return B4(this.data.get(e).values,n)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Ql(s));return xt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return xt(e.shape,e.dtype,n)}makeOutput(e,n,r){return ta().makeTensorFromTensorInfo(this.makeTensorInfo(n,r,e),this)}disposeData(e,n=!1){if(this.data.has(e)){if(this.data.get(e).refCount--,!n&&this.data.get(e).refCount>0)return!1;const{complexTensorInfos:r}=this.data.get(e);r!=null&&(this.disposeData(r.real.dataId,!0),this.disposeData(r.imag.dataId,!0)),this.data.delete(e)}return!0}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}async time(e){const n=fs();return e(),{kernelMs:fs()-n}}memory(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}}where(e){Ye([e],"where");const n=this.readSync(e.dataId);return cye(e.shape,n)}dispose(){}floatPrecision(){return 32}epsilon(){return super.epsilon()}}U_.nextDataId=0;/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yK(t){const e=new Float32Array(t.length);for(let n=0;n<t.length;++n)e[n]=Math.abs(t[n]);return e}const uye=t=>{const{x:e}=t.inputs,n=t.backend;Ye(e,"abs");let r=new Float32Array(fe(e.shape));const s=n.data.get(e.dataId).values;return r=yK(s),n.makeOutput(r,e.shape,e.dtype)},dye={kernelName:Zb,backendName:"cpu",kernelFunc:uye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ar(t){return(e,n,r,s,i)=>{const o=yt(e,n),a=o.length,l=et(o),c=fe(o),u=Pr(i,c),d=e.length,h=n.length,f=et(e),p=et(n),m=fh(e,o),g=fh(n,o);if(m.length+g.length===0)for(let y=0;y<u.length;++y)u[y]=t(r[y%r.length],s[y%s.length]);else for(let y=0;y<u.length;++y){const b=Ph(y,a,l),v=b.slice(-d);m.forEach(E=>v[E]=0);const w=ua(v,d,f),C=b.slice(-h);g.forEach(E=>C[E]=0);const _=ua(C,h,p);u[y]=t(r[w],s[_])}return[u,o]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function si(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=n.makeTensorInfo(r.shape,"complex64"),l=n.data.get(a.dataId);return l.complexTensorInfos={real:n.makeTensorInfo(r.shape,"float32",i),imag:n.makeTensorInfo(s.shape,"float32",o)},a}const hye={kernelName:zC,backendName:"cpu",kernelFunc:si};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DS(t,e,n="float32"){if(n==="complex64"){const s=DS(t,e,"float32"),i=DS(t,e,"float32");return si({inputs:{real:s,imag:i},backend:t})}const r=Hr(fe(e),n);return t.makeTensorInfo(e,n,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dl(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const fye={kernelName:Sm,backendName:"cpu",kernelFunc:dl};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wh(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.real,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const pye={kernelName:bE,backendName:"cpu",kernelFunc:wh};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bK(t,e,n,r){if(r==="int32"){const s=Int32Array.from(t);return[e,"int32",s]}if(r==="bool"){const s=Pu([0],n),[i,o]=ar((a,l)=>a!==l?1:0)(e,[],t,s,"bool");return[o,"bool",i]}throw new Error(`Error in Cast: failed to cast ${n} to ${r}`)}function Nu(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return dl({inputs:{x:s},backend:n});const u=DS(n,s.shape,s.dtype),d=Nu({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),h=si({inputs:{real:d,imag:u},backend:n});return n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),h}if(s.dtype==="complex64"){const u=wh({inputs:{input:s},backend:n}),d=Nu({inputs:{x:u},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(u),d}if(!kR(s.dtype,i)){const u=dl({inputs:{x:s},backend:n});return{dataId:u.dataId,shape:u.shape,dtype:i}}const o=n.data.get(s.dataId).values,[a,l,c]=bK(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,c)}const mye={kernelName:cm,backendName:"cpu",kernelFunc:Nu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kr(t,e,n,r){return n==null?({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;Ye([o,a],t);const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=o.dtype==="string"?tc(c):c,h=o.dtype==="string"?tc(u):u,f=r||o.dtype,[p,m]=e(o.shape,a.shape,d,h,f);return l.makeTensorInfo(m,f,p)}:({inputs:s,backend:i})=>{const{a:o,b:a}=s,l=i;if(o.dtype==="complex64"||a.dtype==="complex64"){const c=Nu({inputs:{x:o},backend:l,attrs:{dtype:"complex64"}}),u=l.data.get(c.dataId),d=u.complexTensorInfos.real,h=u.complexTensorInfos.imag,f=l.data.get(d.dataId).values,p=l.data.get(h.dataId).values,m=Nu({inputs:{x:a},backend:l,attrs:{dtype:"complex64"}}),g=l.data.get(m.dataId),y=g.complexTensorInfos.real,b=g.complexTensorInfos.imag,v=l.data.get(y.dataId).values,w=l.data.get(b.dataId).values,[C,_,E]=n(o.shape,a.shape,f,p,v,w),I=l.makeTensorInfo(E,"float32",C),O=l.makeTensorInfo(E,"float32",_),R=si({inputs:{real:I,imag:O},backend:l});return l.disposeIntermediateTensorInfo(c),l.disposeIntermediateTensorInfo(m),l.disposeIntermediateTensorInfo(I),l.disposeIntermediateTensorInfo(O),R}else{const c=l.data.get(o.dataId).values,u=l.data.get(a.dataId).values,d=r||o.dtype,[h,f]=e(o.shape,a.shape,c,u,d);return l.makeTensorInfo(f,d,h)}}}function cP(t){return(e,n,r,s,i,o)=>{const a=yt(e,n),l=fe(a),c=a.length,u=et(a),d=Pr("float32",l),h=Pr("float32",l),f=fh(e,a),p=fh(n,a),m=ec(r,s),g=ec(i,o),y=e.length,b=et(e),v=n.length,w=et(n);if(f.length+p.length===0)for(let C=0;C<d.length;C++){const _=C%m.length,E=C%g.length,I=t(m[_*2],m[_*2+1],g[E*2],g[E*2+1]);d[C]=I.real,h[C]=I.imag}else for(let C=0;C<d.length;C++){const _=Ph(C,c,u),E=_.slice(-y);f.forEach(B=>E[B]=0);const I=ua(E,y,b),O=_.slice(-v);p.forEach(B=>O[B]=0);const R=ua(O,v,w),z=t(m[I*2],m[I*2+1],g[R*2],g[R*2+1]);d[C]=z.real,h[C]=z.imag}return[d,h,a]}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vK=ar((t,e)=>t+e),gye=cP((t,e,n,r)=>({real:t+n,imag:e+r})),Mp=kr(Lh,vK,gye),yye={kernelName:Lh,backendName:"cpu",kernelFunc:Mp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uP(t,e,n,r,s){const i=fe(r),o=Hr(s,n);for(let a=0;a<t.length;a++){const l=t[a];if(l<0)throw new Error("Input x must be non-negative!");l>=s||(i>0?o[l]+=e[a]:o[l]+=1)}return o}function wK(t,e,n,r=!1){const s=t.shape[0],i=t.shape[1],o=xt([s,n],e.dtype);for(let a=0;a<s;a++)for(let l=0;l<i;l++){const c=t.get(a,l);if(c<0)throw new Error("Input x must be non-negative!");c>=n||(r?o.set(1,a,c):e.size>0?o.set(o.get(a,c)+e.get(a,l),a,c):o.set(o.get(a,c)+1,a,c))}return o}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xK=ar((t,e)=>t&e),bye=kr(av,xK),vye={kernelName:av,backendName:"cpu",kernelFunc:bye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gl(t){return(e,n,r)=>{const s=Yn(n,e.length);for(let i=0;i<e.length;++i)s[i]=t(e[i],r);return s}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function en(t,e,n){const r=gl(e);return Hu(t,r,n)}function Hu(t,e,n){return({inputs:r,attrs:s,backend:i})=>{const{x:o}=r;Ye(o,t);const a=i,l=a.data.get(o.dataId).values;let c;if(o.dtype==="string"){if(!Array.isArray(l))throw new Error("String tensor's value was not an instance of Array");c=tc(l)}else c=l;const u=n||o.dtype,d=e(c,u,s);return a.makeTensorInfo(o.shape,u,d)}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const SK=gl(t=>Math.ceil(t)),wye=Hu(um,SK),xye={kernelName:um,backendName:"cpu",kernelFunc:wye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function CK(t,e,n,r){const s=Yn(n,fe(e));if(r&&n!=="string"){let i=0;t.forEach(o=>{const a=fe(o.shape);s.set(o.vals,i),i+=a})}else{let i=0;t.forEach(o=>{const a=n==="string"?tc(o.vals):o.vals;let l=0;for(let c=0;c<o.shape[0];++c){const u=c*e[1]+i;for(let d=0;d<o.shape[1];++d)s[u+d]=a[l++]}i+=o.shape[1]})}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const EK=ar((t,e)=>t===e?1:0),_K=kr(gv,EK,null,"bool"),Sye={kernelName:gv,backendName:"cpu",kernelFunc:_K};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TK=gl(t=>Math.exp(t)),kK=Hu(ym,TK,"float32"),Cye={kernelName:ym,backendName:"cpu",kernelFunc:kK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const IK=gl(t=>Math.expm1(t)),Eye=Hu(bm,IK),_ye={kernelName:bm,backendName:"cpu",kernelFunc:Eye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NK=gl(t=>Math.floor(t)),Tye=Hu(vm,NK),kye={kernelName:vm,backendName:"cpu",kernelFunc:Tye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const $K=ar((t,e)=>Math.floor(t/e)),Iye=kr(wm,$K,null,"int32"),Nye={kernelName:wm,backendName:"cpu",kernelFunc:Iye};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AK(t,e,n,r,s,i,o,a,l){const c=xt([r,i],n);for(let u=0;u<r;u++){const d=[];let h=0;for(let f=0;f<s;f++){const p=t[u*s+f];h+=p*o[f],d.push(p)}if(h<0||h>=l/i)throw new Error(`Invalid indices: ${d} does not index into ${a}`);for(let f=0;f<i;f++)c.values[u*i+f]=e.get(...e.indexToLoc(h*i+f))}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RK(t,e,n){const r=xt(n,t.dtype);for(let s=0;s<r.size;++s){const o=r.indexToLoc(s).slice(),a=o[0],l=o[2],c=e.locToIndex([a,l]);o[2]=e.values[c];const u=t.locToIndex(o);0<=u&&u<t.values.length&&(r.values[s]=t.values[u])}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const OK=ar((t,e)=>t>e?1:0),$ye=kr(wv,OK,null,"bool"),Aye={kernelName:wv,backendName:"cpu",kernelFunc:$ye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DK=ar((t,e)=>t>=e?1:0),Rye=kr(xm,DK,null,"bool"),Oye={kernelName:xm,backendName:"cpu",kernelFunc:Rye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const PK=ar((t,e)=>t<e?1:0),Dye=kr(Sv,PK,null,"bool"),Pye={kernelName:Sv,backendName:"cpu",kernelFunc:Dye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const LK=ar((t,e)=>t<=e?1:0),Lye=kr(Cv,LK,null,"bool"),Fye={kernelName:Cv,backendName:"cpu",kernelFunc:Lye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FK(t,e,n){const r=(e-t)/(n-1),s=Hr(n,"float32");s[0]=t;for(let i=1;i<s.length;i++)s[i]=s[i-1]+r;return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const MK=gl(t=>Math.log(t)),Mye=Hu(Tm,MK),zye={kernelName:Tm,backendName:"cpu",kernelFunc:Mye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zK(t,e,n,r){const s=Pr(r,fe(n));for(let i=0;i<s.length;++i){const o=i*e;let a=t[o];for(let l=0;l<e;++l){const c=t[o+l];(Number.isNaN(c)||c>a)&&(a=c)}s[i]=a}return s}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BK=ar((t,e)=>Math.max(t,e)),Bye=kr(Im,BK),jye={kernelName:Im,backendName:"cpu",kernelFunc:Bye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jK=ar((t,e)=>Math.min(t,e)),Vye=kr(Nm,jK),Uye={kernelName:Nm,backendName:"cpu",kernelFunc:Vye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dP=ar((t,e)=>t*e),Wye=cP((t,e,n,r)=>({real:t*n-e*r,imag:t*r+e*n})),W_=kr(Am,dP,Wye),Hye={kernelName:Am,backendName:"cpu",kernelFunc:W_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VK(t,e,n){const r=cc(-1,n);return dP([],e,r,t,n)}function Gye(t){const{inputs:e,backend:n}=t,{x:r}=e;Ye(r,"neg");const s=n.data.get(r.dataId).values,[i,o]=VK(s,r.shape,r.dtype);return n.makeTensorInfo(o,r.dtype,i)}const Kye={kernelName:Dv,backendName:"cpu",kernelFunc:Gye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UK=ar((t,e)=>t!==e?1:0),qye=kr(Pv,UK,null,"bool"),Xye={kernelName:Pv,backendName:"cpu",kernelFunc:qye};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hP(t,e,n,r,s){const i=e.length,o=fe(e),a=et(e),l=et(s),c=Pr(n,fe(s));for(let u=0;u<o;++u){const d=Ph(u,i,a),h=new Array(d.length);for(let p=0;p<h.length;p++)h[p]=d[r[p]];const f=ua(h,i,l);c[f]=t[u]}return c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Us(t){const{inputs:e,attrs:n,backend:r}=t,{x:s}=e,{perm:i}=n;Ye(s,"transpose");const o=s.shape.length,a=new Array(o);for(let d=0;d<a.length;d++)a[d]=s.shape[i[d]];const l=r.data.get(s.dataId).values,c=hP(l,s.shape,s.dtype,i,a);return{dataId:r.write(c,a,s.dtype),shape:a,dtype:s.dtype}}const Yye={kernelName:qd,backendName:"cpu",kernelFunc:Us};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function WK(t,e,n,r){const[s,i]=Mr(t,r),o=Ms(e,"int32"),a=Hr(fe(s),o),l=fe(i);for(let c=0;c<a.length;++c){const u=c*l;let d=1;for(let h=0;h<l;++h)d*=n[u+h];a[c]=d}return{outVals:a,outShape:s,outDtype:o}}function Qye(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ye(s,"prod");const a=s.shape.length,l=Tt(i,s.shape),c=Gn(l,a);let u=l,d=s;const h=[];c!=null&&(d=Us({inputs:{x:s},backend:n,attrs:{perm:c}}),h.push(d),u=ir(u.length,a));const f=n.data.get(d.dataId).values,{outVals:p,outShape:m,outDtype:g}=WK(d.shape,d.dtype,f,u);let y=m;return o&&(y=sr(m,l)),h.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.makeTensorInfo(y,g,p)}const Jye={kernelName:jv,backendName:"cpu",kernelFunc:Qye};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zye(t,e,n){t.forEach((r,s)=>{if(r<0||r>=n){const i=Ph(s,e.length,et(e)).join(",");throw new Error(`indices[${i}] = ${r} is not in [0, ${n})`)}})}function ebe(t,e){for(let n=0;n<t.length;++n){const r=t[n],s=n===t.length-1?e:t[n+1].length;if(r.length===0)throw new Error("Ragged splits may not be empty");if(r[0]<0)throw new Error("Ragged splits must be non-negative");if(r[r.length-1]>s)throw new Error("Ragged splits must not point past values");for(let i=1;i<r.length;++i)if(r[i-1]>r[i])throw new Error("Ragged splits must be sorted in ascending order")}}function tbe(t,e,n,r){const s=[];let i=0;const o=e.length-1+n.length,a=new Array(o).fill(null).map(()=>[0]);ebe(n,r);let l=1;for(let c=0;c<e.length-1;++c){l*=e[c];const u=e[c+1];for(let d=1;d<l+1;++d)a[c].push(d*u)}for(let c=0;c<t.length;++c){let u=t[c],d=t[c]+1;for(let h=0;h<n.length;++h){const f=n[h],p=h+e.length-1;if(p>=0){const m=a[p],g=m[m.length-1]-f[u];for(let y=u;y<d;++y)a[p].push(f[y+1]+g)}u=f[u],d=f[d]}d!==u&&(s.push([u,d]),i+=d-u)}return{outSplits:a,valueSlices:s,numValues:i}}function nbe(t){const e=[];for(let n=0;n<t.length;++n){const r=t[n].length,s=Yn("int32",r);e.push(s),t[n].forEach((i,o)=>s[o]=i)}return e}function az(t,e){const n=t.slice(0,e);for(;n.length<e;)n.push(1);for(let r=e;r<t.length;r++)n[e-1]*=t[r];return n}function rbe(t,e,n,r,s,i){const o=az(e,2)[1],a=az(i,2)[1];let l=0;for(const c of n)for(let u=c[0];u<c[1];++u){for(let d=0;d<r;++d)s[l*a+d]=t[u*o+d];++l}}function sbe(t,e,n,r,s){const i=e.slice();i[0]=s;const o=Yn(n,fe(i)),a=t.length,l=a===0?0:a/e[0];return rbe(t,e,r,l,o,i),[o,i]}function HK(t,e,n,r,s,i,o,a){if(t.length===0)throw new Error("paramsNestedSplits must be non empty");if(e[0].length===0)throw new Error("Split tensors must not be scalars");const l=e[0][0]-1;if(Zye(i,o,l),r.length===0)throw new Error("params.rank must be nonzero");const c=r[0],{outSplits:u,valueSlices:d,numValues:h}=tbe(i,o,t,c),f=nbe(u),p=sbe(n,r,s,d,h);return[f,p[0],p[1]]}/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lz=2147483647;function GK(t,e,n,r,s,i,o){if(e.length>1)throw new Error("starts must be a scalar or vector");if(s.length>1)throw new Error("limits must be a scalar or vector");if(o.length>1)throw new Error("deltas must be a scalar or vector");const a=e.length===0,l=s.length===0,c=o.length===0,u=[];a||u.push(e[0]),l||u.push(s[0]),c||u.push(o[0]);for(let g=1;g<u.length;++g)if(u[g]!==u[g-1])throw new Error("starts, limits, and deltas must have the same shape");const d=u.length===0?1:u[0],h=Yn("int32",d+1);h[0]=0;for(let g=0;g<d;++g){const y=a?t[0]:t[g],b=l?r[0]:r[g],v=c?i[0]:i[g];if(v===0)throw new Error("Requires delta != 0");let w;if(v>0&&b<y||v<0&&b>y)w=0;else if(w=Math.ceil(Math.abs((b-y)/v)),w>lz)throw new Error(`Requires ((limit - start) / delta) <= ${lz}`);h[g+1]=h[g]+w}const f=h[d],p=Yn(n,f);let m=0;for(let g=0;g<d;++g){const y=h[g+1]-h[g];let b=a?t[0]:t[g];const v=c?i[0]:i[g];for(let w=0;w<y;++w)p[m++]=b,b+=v}return[h,p]}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var co=oa;class PS{constructor(e,n,r,s,i,o,a,l,c,u){this.shape=e,this.shapeShape=n,this.values=r,this.valuesShape=s,this.valuesDType=i,this.defaultValue=o,this.defaultValueShape=a,this.rowPartitionValues=l,this.rowPartitionValuesShapes=c,this.rowPartitionTypes=XH(u),this.raggedRank=YH(this.rowPartitionTypes)}getRowPartitionTypeByDimension(e){return this.rowPartitionTypes[0]===co.FIRST_DIM_SIZE?this.rowPartitionTypes[e+1]:this.rowPartitionTypes[e]}getRowPartitionTensor(e){return this.rowPartitionTypes[0]===co.FIRST_DIM_SIZE?this.rowPartitionValues[e+1]:this.rowPartitionValues[e]}getMaxWidth(e){const n=this.getRowPartitionTensor(e-1);switch(this.getRowPartitionTypeByDimension(e-1)){case co.VALUE_ROWIDS:return PS.getMaxWidthValueRowID(n);case co.ROW_SPLITS:return PS.getMaxWidthRowSplit(n);default:throw new Error(`Cannot handle partition type ${co[this.getRowPartitionTypeByDimension(e-1)]}`)}}static getMaxWidthRowSplit(e){const n=e.length;if(n===0||n===1)return 0;let r=0;for(let s=0;s<n-1;++s){const i=e[s+1]-e[s];i>r&&(r=i)}return r}static getMaxWidthValueRowID(e){const n=e.length;if(n===0)return 0;let r=0,s=e[0],i=0;for(let o=1;o<n;++o){const a=e[o];a!==s&&(s=a,i=Math.max(o-r,i),r=o)}return Math.max(n-r,i)}tensorShapeFromTensor(e,n,r=!0){if(n.length===0){if(e[0]===-1)return[];throw new Error("The only valid scalar shape tensor is the fully unknown shape specified as -1.")}return uz(e,r)}calculateOutputSize(e){const n=this.valuesShape,r=this.defaultValueShape;QH(r,n);const s=this.tensorShapeFromTensor(this.shape,this.shapeShape),o=qH(this.raggedRank,s,n);o[0]<0&&(o[0]=e);for(let a=1;a<=this.raggedRank;++a)o[a]<0&&(o[a]=this.getMaxWidth(a));return o}calculateFirstParentOutputIndex(e,n,r){const s=Math.min(e,r),i=[];let o=0;for(let a=0;a<s;++a,o+=n)i.push(o);for(let a=s;a<e;++a)i.push(-1);return P(i.length===e,()=>"Final length of result must be equal to firstDimension."),i}calculateOutputIndexRowSplit(e,n,r,s){const i=e.length,o=[];for(let a=0;a<i-1;++a){const l=e[a+1]-e[a];let c=Math.min(s,l),u=n[a];u===-1&&(c=0);for(let d=0;d<c;++d)o.push(u),u+=r;for(let d=0;d<l-c;++d)o.push(-1)}if(i>0&&o.length!==e[i-1])throw new Error("Invalid row split size.");return o}calculateOutputIndexValueRowID(e,n,r,s){const i=e.length,o=[];if(i===0)return[];let a=0,l=e[0];if(l>=n.length)throw new Error(`Got currentValueRowId=${l}, which is not less than ${n.length}`);let c=n[l];o.push(c);for(let u=1;u<i;++u){const d=e[u];if(d===l)c>=0&&(++a,a<s?c+=r:c=-1);else{if(a=0,l=d,d>=n.length)throw new Error(`Got nextValueRowId=${d} which is not less than ${n.length}`);c=n[d]}o.push(c)}if(o.length!==e.length)throw new Error("Invalid row ids.");return o}calculateOutputIndex(e,n,r,s){const i=this.getRowPartitionTensor(e),o=this.getRowPartitionTypeByDimension(e);switch(o){case co.VALUE_ROWIDS:return this.calculateOutputIndexValueRowID(i,n,r,s);case co.ROW_SPLITS:if(i.length-1>n.length)throw new Error(`Row partition size is greater than output size: ${i.length-1} > ${n.length}`);return this.calculateOutputIndexRowSplit(i,n,r,s);default:throw new Error(`Unsupported partition type: ${co[o]}`)}}getFirstDimensionSize(){const e=this.rowPartitionValues[0];if(this.rowPartitionTypes.length===0)throw new Error("No row_partition_types given.");const n=this.rowPartitionTypes[0];switch(n){case co.FIRST_DIM_SIZE:return e[0];case co.VALUE_ROWIDS:throw new Error("Cannot handle VALUE_ROWIDS in first dimension.");case co.ROW_SPLITS:return this.rowPartitionValuesShapes[0][0]-1;default:throw new Error(`Cannot handle type ${co[n]}`)}}compute(){if(this.rowPartitionValues[0].length<=0)throw new Error("Invalid first partition input. Tensor requires at least one element.");const n=this.getFirstDimensionSize(),r=this.calculateOutputSize(n),s=new Array(this.raggedRank+1);s[s.length-1]=1;for(let l=s.length-2;l>=0;--l)s[l]=s[l+1]*r[l+1];const i=uz(r,!1),o=Yn(this.valuesDType,fe(i));if(s[0]*r[0]>0){let l=this.calculateFirstParentOutputIndex(n,s[0],r[0]);for(let c=1;c<=this.raggedRank;++c)l=this.calculateOutputIndex(c-1,l,s[c],r[c]);this.setOutput(this.raggedRank,l,o,i)}return[i,o]}setOutput(e,n,r,s){if(r.length===0)return;const i=this.values,o=r;let a=s.slice();a=a.slice(e+1);const l=fe(a),c=n.length;let u=this.defaultValue;if(u.length!==l&&u.length!==1){const p=this.defaultValueShape;oe(()=>{const m=ee(u,p);u=Xd(m,a).dataSync()})}let d=0,h=0,f=0;for(let p=0;p<=c;++p){let m=p<c?n[p]:-1;if(m===f){++f;continue}if(h<f){const g=i.subarray(d*l),y=o.subarray(h*l),b=(f-h)*l;cz(y,g,b)}if(p>=c){const g=r.length;m=Math.floor(g/l)}if(m>f)if(this.defaultValue.length===1)o.subarray(f*l,m*l).fill(this.defaultValue[0]),f=m;else for(;m>f;){const g=o.slice(f*l);cz(g,u,l),++f}m<0?(d=p+1,h=f):(d=p,h=f,f=h+1)}}}function cz(t,e,n){for(let r=0;r<n;r++)t[r]=e[r]}function uz(t,e){const n=[];for(let r of t){if(r<0){if(!e)throw new Error(`Dimension ${r} must be >= 0`);if(r<-1)throw new Error(`Dimension ${r} must be >= -1`);r=-1}n.push(r)}return n}function KK(t,e,n,r,s,i,o,a,l,c){return new PS(t,e,n,r,s,i,o,a,l,c).compute()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qK(t,e,n,r){const s=t===e,i=t<e&&n<0,o=e<t&&n>1;if(s||i||o)return Hr(0,r);const a=Math.abs(Math.ceil((e-t)/n)),l=Hr(a,r);e<t&&n===1&&(n=-1),l[0]=t;for(let c=1;c<l.length;c++)l[c]=l[c-1]+n;return l}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XK=gl(t=>1/Math.sqrt(t)),ibe=Hu(Fm,XK),obe={kernelName:Fm,backendName:"cpu",kernelFunc:ibe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jd(t,e,n,r,s,i,o,a,l,c){const u=[r/s,s],d=t.values,h=e.values;if(r===0)return xt(n,e.dtype);const f=l instanceof dr?l:xt(u,e.dtype);typeof l=="string"||typeof l=="number"?f.values.fill(l):typeof l=="boolean"&&f.values.fill(+l);for(let p=0;p<i;p++){const m=[];let g=0;for(let y=0;y<o;y++){const b=d[p*o+y];m.push(b),g+=b*a[y]}if(g<0||g>=r/s)throw new Error(`Invalid indices: ${m} does not index into ${n}`);for(let y=0;y<s;y++)c?f.values[g*s+y]+=h[p*s+y]:f.values[g*s+y]=e.rank===0?h[0]:h[p*s+y]}return f}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const abe=gl(t=>1/(1+Math.exp(-t))),YK=en(Vm,t=>1/(1+Math.exp(-t))),lbe={kernelName:Vm,backendName:"cpu",kernelFunc:YK};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QK(t,e,n,r,s){const i=cD(r,e,n),o=fe(n),a=et(r);if(i){const d=uD(e,a);return s==="string"?t.slice(d,d+o):t.subarray(d,d+o)}const l=s==="string"?tc(t):t,c=xt(r,s,l),u=xt(n,s);for(let d=0;d<u.size;++d){const h=u.indexToLoc(d),f=h.map((p,m)=>p+e[m]);u.set(c.get(...f),...h)}return s==="string"?yG(u.values):u.values}function xh(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r;Ye(s,"slice");const[a,l]=E_(s,i,o);aD(s,a,l);const c=n.data.get(s.dataId).values,u=QK(c,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,u)}const cbe={kernelName:Kv,backendName:"cpu",kernelFunc:xh};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JK(t,e,n,r,s,i,o){const a=e[0],l=i[0],c=new Array(l),u=new Array(a),d=e[1];if(l===0){if(a!==0)throw new Error(sG(a));const g=Yn(n,0),y=Yn(s,0);return[g,[0,d],y,c,u]}let h=!0,f=0;const p=new Array(l).fill(0);for(let g=0;g<a;++g){const y=t[g*d];if(y<0)throw new Error(iG(g,y));if(y>=l)throw new Error(oG(g,y,l));++p[y],h=h&&y>=f,f=y}let m=!0;for(let g=0;g<l;++g){const y=p[g]===0;c[g]=y,m=m&&!y,p[g]=Math.max(p[g],1),g>0&&(p[g]+=p[g-1])}if(m&&h){const g=t,y=r;for(let b=0;b<a;++b)u[b]=b;return[g,[a,d],y,c,u]}else{const g=p[l-1],y=Yn(n,g*d),b=Yn(s,g),v=new Array(l).fill(0);for(let w=0;w<a;++w){const C=t[w*d],_=v[C],E=(C===0?0:p[C-1])+_;v[C]++;for(let I=0;I<d;++I)y[E*d+I]=t[w*d+I];b[E]=r[w],u[w]=E}for(let w=0;w<l;++w)if(v[w]===0){const _=w===0?0:p[w-1];y[_*d+0]=w;for(let E=1;E<d;++E)y[_*d+E]=0;b[_]=o}return[y,[g,d],b,c,u]}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZK(t,e,n,r,s){const i=fe(r),o=e[0],a=s.length,l=[];let c=1,u=-1;for(let g=0;g<a;++g){const y=s[g];if(y===-1){if(u!==-1)throw new Error(aG(u,g));u=g,l.push(1)}else{if(y<0)throw new Error(lG(g,y));c*=y,l.push(y)}}if(u!==-1){if(c<=0)throw new Error(cG());const g=Math.trunc(i/c);if(c*g!==i)throw new Error(uG(r,l));l[u]=g}if(fe(l)!==i)throw new Error(dG(r,l));const h=r.length,f=[];if(h>0){f[h-1]=1;for(let g=h-2;g>=0;--g)f[g]=f[g+1]*r[g+1]}const p=[];if(a>0){p[a-1]=1;for(let g=a-2;g>=0;--g)p[g]=p[g+1]*l[g+1]}const m=Yn(n,o*a);for(let g=0;g<o;++g){let y=0;for(let b=0;b<h;++b)y+=t[g*h+b]*f[b];for(let b=0;b<a;++b)m[g*a+b]=Math.trunc(y/p[b]),y%=p[b]}return[m,[o,a],l]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fP(t,e,n,r,s,i=!1,o=0){const a=r.length,l=[e[0],t.length/e[0]],c=l[1],d=a>0?s[a-1]+1:0;if(d<0)throw new Error(aA());const h=e.slice();h[0]=d;const f=h.reduce((v,w)=>v*w,1),p=Yn(n,f);if(a===0)return d>0&&p.fill(o),[p,h];if(d<=0)throw new Error(aA());let m=0,g=1,y=0,b=s[m];for(;;){let v=0;if(g<a){if(v=s[g],b===v){++g;continue}if(b>=v)throw new Error(hG())}if(b<0||b>=d)throw new Error(fG(b,d));b>y&&p.fill(o,y*c,b*c);for(let w=m;w<g;++w){const C=r[w];if(C<0||C>=l[0])throw new Error(pG(w,r[w],l[0]));for(let _=0;_<c;_++)p[b*c+_]+=t[C*c+_]}if(i)for(let w=0;w<c;w++)p[b*c+w]/=g-m;if(m=g,++g,y=b+1,b=v,g>a)break}return y<d&&p.fill(o,y*c,d*c),[p,h]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ube=gl(t=>Math.sqrt(t)),dbe=en(Wm,t=>Math.sqrt(t)),hbe={kernelName:Wm,backendName:"cpu",kernelFunc:dbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eq=ar((t,e)=>{const n=t-e;return n*n}),fbe=kr(Hm,eq),pbe={kernelName:Hm,backendName:"cpu",kernelFunc:fbe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tq=gl((t,e)=>{const{pattern:n,replaceGlobal:r,rewrite:s}=e;return t.replace(new RegExp(n,r?"g":""),s)}),mbe=Hu(Jv,tq),gbe={kernelName:Jv,backendName:"cpu",kernelFunc:mbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nq(t,e,n,r){const s=xt(t,e.dtype);for(let i=0;i<s.size;i++){const o=s.indexToLoc(i),a=new Array(o.length);for(let l=0;l<a.length;l++)a[l]=o[l]*n[l]+r[l];s.set(e.get(...a),...o)}return s}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ybe{constructor(e,n,r,s,i,o){this.separator=qa(e),this.nGramWidths=n,this.leftPad=qa(r),this.rightPad=qa(s),this.padWidth=i,this.preserveShort=o}getPadWidth(e){return Math.min(this.padWidth<0?e-1:this.padWidth,e-1)}getNumNGrams(e,n){const r=this.getPadWidth(n);return Math.max(0,e+2*r-n+1)}createNGrams(e,n,r,s,i,o){for(let a=0;a<i;++a){const l=this.getPadWidth(o),c=Math.max(0,l-a),u=Math.max(0,l-(i-(a+1))),d=o-(c+u),h=n+(c>0?0:a-l);let f=0;f+=c*this.leftPad.length;for(let b=0;b<d;++b)f+=e[h+b].length;f+=u*this.rightPad.length;const p=c+u+d-1;f+=p*this.separator.length,r[s+a]=new Uint8Array(f);const m=r[s+a];let g=0;const y=b=>b.forEach(v=>m[g++]=v);for(let b=0;b<c;++b)y(this.leftPad),y(this.separator);for(let b=0;b<d-1;++b)y(e[h+b]),y(this.separator);if(d>0){y(e[h+d-1]);for(let b=0;b<u;++b)y(this.separator),y(this.rightPad)}else{for(let b=0;b<u-1;++b)y(this.rightPad),y(this.separator);y(this.rightPad)}}}compute(e,n){const r=e.length,s=n.length;if(s>0){let l=n[0];if(l!==0)throw new Error(`First split value must be 0, got ${l}`);for(let c=1;c<s;++c){let u=n[c]>=l;if(u=u&&n[c]<=r,!u)throw new Error(`Invalid split value ${n[c]}, must be in [${l}, ${r}]`);l=n[c]}if(l!==r)throw new Error(`Last split value must be data size. Expected ${r}, got ${l}`)}const i=s-1,o=Yn("int32",s);if(r===0||s===0){const l=new Array(r);for(let c=0;c<=i;++c)o[c]=0;return[l,o]}o[0]=0;for(let l=1;l<=i;++l){const c=n[l]-n[l-1];let u=0;this.nGramWidths.forEach(d=>{u+=this.getNumNGrams(c,d)}),this.preserveShort&&c>0&&u===0&&(u=1),o[l]=o[l-1]+u}const a=new Array(o[i]);for(let l=0;l<i;++l){const c=n[l];let u=o[l];if(this.nGramWidths.forEach(d=>{const h=n[l+1]-n[l],f=this.getNumNGrams(h,d);this.createNGrams(e,c,a,u,f,d),u+=f}),this.preserveShort&&u===o[l]){const d=n[l+1]-n[l];if(d===0)continue;const h=d+2*this.padWidth;this.createNGrams(e,c,a,u,1,h)}}return[a,o]}}function rq(t,e,n,r,s,i,o,a){return new ybe(n,r,s,i,o,a).compute(t,e)}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bbe(t,e,n,r){if(!t.length)return;if(e.length===0){for(let i=0;i<t.length;++i)r.push(t.subarray(i,i+1));return}if(e.length===1){const i=e[0];let o=t.indexOf(i);for(;o!==-1;){const a=t.subarray(0,o);(!n||a.length!==0)&&r.push(a),t=t.subarray(o+1),o=t.indexOf(i)}(!n||t.length!==0)&&r.push(t);return}let s=0;for(let i=0;i<t.length+1;i++)if(i===t.length||e.indexOf(t[i])!==-1){const o=t.subarray(s,i);(!n||o.length!==0)&&r.push(o),s=i+1}}function sq(t,e,n){const r=t.length,s=[];let i=0,o=0;const a=new Array(r);for(let h=0;h<r;++h){const f=s.length;bbe(t[h],e,n,s);const p=s.length-f;a[h]=p,i+=p,o=Math.max(o,p)}const l=Yn("int32",i*2),c=new Array(i),u=[r,o];let d=0;for(let h=0;h<r;++h)for(let f=0;f<a[h];++f)l[d*2]=h,l[d*2+1]=f,c[d]=s[d],++d;return[l,c,u]}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iq(t,e){const n=Yn("int32",t.length);for(let r=0;r<t.length;++r)n[r]=tW(t[r]).modulo(e).getLowBitsUnsigned();return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const oq=ar((t,e)=>t-e),vbe=cP((t,e,n,r)=>({real:t-n,imag:e-r})),pP=kr(Gm,oq,vbe),wbe={kernelName:Gm,backendName:"cpu",kernelFunc:pP};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aq(t,e){const n=new Array(t.rank);for(let s=0;s<n.length;s++)n[s]=t.shape[s]*e[s];const r=xt(n,t.dtype);for(let s=0;s<r.values.length;++s){const i=r.indexToLoc(s),o=new Array(t.rank);for(let l=0;l<o.length;l++)o[l]=i[l]%t.shape[l];const a=t.locToIndex(o);r.values[s]=t.values[a]}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wy=(t,e)=>{const n=e.value-t.value;return n===0?t.index-e.index:n};function lq(t,e,n=0,r=t.length-1){for(;r>n;){if(r-n>600){const a=r-n+1,l=e-n+1,c=Math.log(a),u=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*u*(a-u)/a)*Math.sign(l-a/2),h=Math.max(n,Math.floor(e-l*u/a+d)),f=Math.min(r,Math.floor(e+(a-l)*u/a+d));lq(t,e,h,f)}const s=t[e];let i=n,o=r;for(Ll(t,n,e),wy(t[r],s)>0&&Ll(t,n,r);i<o;){for(Ll(t,i,o),i++,o--;wy(t[i],s)<0;)i=i+1;for(;wy(t[o],s)>0;)o=o-1}wy(t[n],s)===0?Ll(t,n,o):(o=o+1,Ll(t,o,r)),o<=e&&(n=o+1),e<=o&&(r=o-1)}}function cq(t,e,n,r,s){const i=e[e.length-1],[o,a]=[t.length/i,i],l=Pr(n,o*r),c=Pr("int32",o*r);for(let d=0;d<o;d++){const h=d*a,f=t.subarray(h,h+a);let p=new Array(f.length);f.forEach((b,v)=>p[v]={value:b,index:v}),r<p.length&&(lq(p,r),p=p.slice(0,r)),s&&p.sort(wy);const m=d*r,g=l.subarray(m,m+r),y=c.subarray(m,m+r);for(let b=0;b<r;b++)g[b]=p[b].value,y[b]=p[b].index}const u=e.slice();return u[u.length-1]=r,[xt(u,n,l),xt(u,"int32",c)]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uq(t,e,n,r){const s=Tt(e,n)[0],i=[1,n[0],1];for(let p=0;p<s;p++)i[0]*=n[p];i[1]=n[s];for(let p=s+1;p<n.length;p++)i[2]*=n[p];const o=new Map,a=new Int32Array(n[s]),l=new dr(i,r,t),c=[],u=i[0]===1&&i[2]===1;for(let p=0;p<n[s];p++){let m;if(u)m=t[p].toString();else{const y=[];for(let b=0;b<i[0];b++)for(let v=0;v<i[2];v++)y.push(l.get(b,p,v));m=y.join(",")}const g=o.get(m);if(g!=null)a[p]=g;else{const y=o.size;o.set(m,y),a[p]=y,c.push(p)}}const d=i.slice();d[1]=o.size;const h=new dr(d,r);c.forEach((p,m)=>{for(let g=0;g<i[0];g++)for(let y=0;y<i[2];y++)h.set(l.get(g,p,y),g,m,y)});const f=n.slice();return f[s]=d[1],{outputValues:h.values,outputShape:f,indices:a}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xbe=Object.freeze(Object.defineProperty({__proto__:null,addImpl:vK,bincountImpl:uP,bincountReduceImpl:wK,bitwiseAndImpl:xK,castImpl:bK,ceilImpl:SK,concatImpl:CK,equalImpl:EK,expImpl:TK,expm1Impl:IK,floorDivImpl:$K,floorImpl:NK,gatherNdImpl:AK,gatherV2Impl:RK,greaterEqualImpl:DK,greaterImpl:OK,lessEqualImpl:LK,lessImpl:PK,linSpaceImpl:FK,logImpl:MK,maxImpl:zK,maximumImpl:BK,minimumImpl:jK,multiplyImpl:dP,negImpl:VK,notEqualImpl:UK,prodImpl:WK,raggedGatherImpl:HK,raggedRangeImpl:GK,raggedTensorToTensorImpl:KK,rangeImpl:qK,rsqrtImpl:XK,scatterImpl:jd,sigmoidImpl:abe,simpleAbsImpl:yK,sliceImpl:QK,sparseFillEmptyRowsImpl:JK,sparseReshapeImpl:ZK,sparseSegmentReductionImpl:fP,sqrtImpl:ube,squaredDifferenceImpl:eq,staticRegexReplaceImpl:tq,stridedSliceImpl:nq,stringNGramsImpl:rq,stringSplitImpl:sq,stringToHashBucketFastImpl:iq,subImpl:oq,tileImpl:aq,topKImpl:cq,transposeImpl:hP,uniqueImpl:uq},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */FR("cpu",()=>new U_,1);/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dq=en(mm,t=>t>=0?t:Math.exp(t)-1),Sbe={kernelName:mm,backendName:"cpu",kernelFunc:dq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hq(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r;Ye([s],"leakyRelu");const o=fe(s.shape),a=n.data.get(s.dataId).values,l=Pr("float32",o);for(let c=0;c<a.length;c++)l[c]=a[c]<0?i*a[c]:a[c];return n.makeTensorInfo(s.shape,"float32",l)}const Cbe={kernelName:xv,backendName:"cpu",kernelFunc:hq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ebe=ar((t,e)=>t<0?e*t:t);function fq(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e;Ye([r,s],"prelu");const i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,[a,l]=Ebe(r.shape,s.shape,i,o,"float32");return n.makeTensorInfo(l,"float32",a)}const _be={kernelName:Bv,backendName:"cpu",kernelFunc:fq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pq=en(Dm,t=>Math.max(0,t)),Tbe={kernelName:Dm,backendName:"cpu",kernelFunc:pq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mq=en(Pm,t=>Math.min(Math.max(0,t),6)),kbe={kernelName:Pm,backendName:"cpu",kernelFunc:mq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LS(t,e,n,r,s){if(n==="linear")return dl({inputs:{x:e},backend:t});if(n==="relu")return pq({inputs:{x:e},backend:t});if(n==="elu")return dq({inputs:{x:e},backend:t});if(n==="relu6")return mq({inputs:{x:e},backend:t});if(n==="prelu")return fq({inputs:{x:e,alpha:r},backend:t});if(n==="leakyrelu")return hq({inputs:{x:e},backend:t,attrs:{alpha:s}});if(n==="sigmoid")return YK({inputs:{x:e},backend:t});throw new Error(`Activation ${n} has not been implemented for the CPU backend.`)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vn(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=fe(s.shape),a=TR(i,o),l=fe(a);P(o===l,()=>`The new shape (${a}) has ${l} elements and the old shape (${s.shape}) has ${o} elements. The new shape and old shape must have the same number of elements.`),n.incRef(s.dataId);const c=n.data.get(s.dataId);if(c.complexTensorInfos!=null){const u=c.complexTensorInfos.real,d=c.complexTensorInfos.imag;u.shape=a,d.shape=a}return{dataId:s.dataId,shape:a,dtype:s.dtype}}const Ibe={kernelName:Vv,backendName:"cpu",kernelFunc:vn};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gq(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;Ye([s,i],"matMul");const l=s.shape.length,c=i.shape.length,u=o?s.shape[l-2]:s.shape[l-1],d=a?i.shape[c-1]:i.shape[c-2],h=o?s.shape[l-1]:s.shape[l-2],f=a?i.shape[c-2]:i.shape[c-1],p=s.shape.slice(0,-2),m=i.shape.slice(0,-2),g=fe(p),y=fe(m),v=yt(s.shape.slice(0,-2),i.shape.slice(0,-2)).concat([h,f]);P(u===d,()=>`Error in matMul: inner shapes (${u}) and (${d}) of Tensors with shapes ${s.shape} and ${i.shape} and transposeA=${o} and transposeB=${a} must match.`);const w=o?[g,u,h]:[g,h,u],C=a?[y,f,d]:[y,d,f],_=vn({inputs:{x:s},backend:n,attrs:{shape:w}}),E=vn({inputs:{x:i},backend:n,attrs:{shape:C}}),I=o?_.shape[1]:_.shape[2],O=o?_.shape[2]:_.shape[1],R=a?E.shape[1]:E.shape[2],z=Math.max(g,y),B=n.data.get(_.dataId).values,j=n.data.get(E.dataId).values,G=et(_.shape),U=et(E.shape),[Q,se,V]=o?[G[0],1,G[1]]:[G[0],G[1],1],[W,L,J]=a?[1,U[1],U[0]]:[U[1],1,U[0]],Z=O*R,ie=xt([z,O,R],_.dtype),ue=ie.values,de=n.blockSize;for(let ye=0;ye<z;ye++){const Ee=ye%g,ge=ye%y;for(let Pe=0;Pe<O;Pe+=de){const We=Math.min(Pe+de,O);for(let le=0;le<R;le+=de){const Ve=Math.min(le+de,R);for(let Je=0;Je<I;Je+=de){const at=Math.min(Je+de,I);for(let _e=Pe;_e<We;_e++)for(let ze=le;ze<Ve;ze++){let it=0;for(let Xe=Je;Xe<at;Xe++){const xn=B[Ee*Q+_e*se+Xe*V],Ne=j[Xe*W+ze*L+ge*J];it+=xn*Ne}ue[ye*Z+(_e*R+ze)]+=it}}}}}return n.disposeIntermediateTensorInfo(_),n.disposeIntermediateTensorInfo(E),n.makeTensorInfo(v,ie.dtype,ie.values)}const Nbe={kernelName:iv,backendName:"cpu",kernelFunc:gq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $be(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;let h,f,p;const m=[];h=gq({inputs:{a:s,b:i},attrs:{transposeA:l,transposeB:c},backend:n}),o&&(f=Mp({inputs:{a:h,b:o},backend:n}),m.push(h),h=f),u&&(p=LS(n,h,u,a,d),m.push(h),h=p);for(const y of m)n.disposeIntermediateTensorInfo(y);return h}const Abe={kernelName:hb,backendName:"cpu",kernelFunc:$be};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Rbe=en(nm,t=>Math.acos(t)),Obe={kernelName:nm,backendName:"cpu",kernelFunc:Rbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Dbe=en(rm,t=>Math.acosh(t)),Pbe={kernelName:rm,backendName:"cpu",kernelFunc:Dbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lbe(t){const{inputs:e,backend:n}=t,r=e;Ye(e,"addN");const s=r.map(a=>n.data.get(a.dataId).values),i=xt(r[0].shape,r[0].dtype),o=i.values;for(let a=0;a<r.length;a++){const l=s[a];for(let c=0;c<o.length;c++)o[c]+=l[c]}return n.makeTensorInfo(i.shape,i.dtype,i.values)}const Fbe={kernelName:ev,backendName:"cpu",kernelFunc:Lbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Mbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ye(s,"all");const a=Tt(i,s.shape);let l=a;const c=Gn(l,s.shape.length);let u=s;c!=null&&(u=Us({inputs:{x:s},backend:n,attrs:{perm:c}}),l=ir(l.length,s.shape.length)),qr("all",l,u.shape.length);const[d,h]=Mr(u.shape,l),f=fe(h),p=Hr(fe(d),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<p.length;++y){const b=y*f;let v=m[b];for(let w=0;w<f;++w){const C=m[b+w];v=v&&C}p[y]=v}c!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,p);if(o){const y=sr(d,a),b=vn({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),b}return g}const zbe={kernelName:OC,backendName:"cpu",kernelFunc:Mbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ye(s,"any");const a=Tt(i,s.shape);let l=a;const c=Gn(l,s.shape.length);let u=s;c!=null&&(u=Us({inputs:{x:s},backend:n,attrs:{perm:c}}),l=ir(l.length,s.shape.length)),qr("any",l,u.shape.length);const[d,h]=Mr(u.shape,l),f=fe(h),p=Hr(fe(d),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<p.length;++y){const b=y*f;let v=m[b];for(let w=0;w<f;++w){const C=m[b+w];v=v||C}p[y]=v}c!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,p);if(o){const y=sr(d,a),b=vn({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),b}return g}const jbe={kernelName:DC,backendName:"cpu",kernelFunc:Bbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Ye(s,"argMax");let o=Tt(i,s.shape);const a=Gn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Us({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=ir(o.length,l.shape.length)),o=[o[0]],qr("argMax",o,l.shape.length);const[u,d]=Mr(l.shape,o),h=fe(u),f=Hr(h,"int32"),p=fe(d),m=n.data.get(l.dataId).values;for(let g=0;g<f.length;++g){const y=g*p;let b=m[y],v=0;for(let w=0;w<p;++w){const C=m[y+w];C>b&&(b=C,v=w)}f[g]=v}return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",f)}const Ube={kernelName:tv,backendName:"cpu",kernelFunc:Vbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wbe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;Ye(s,"argMin");let o=Tt(i,s.shape);const a=Gn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=Us({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=ir(o.length,l.shape.length)),o=[o[0]],qr("argMin",o,l.shape.length);const[u,d]=Mr(l.shape,o),h=fe(u),f=Hr(h,"int32"),p=fe(d),m=n.data.get(l.dataId).values;for(let g=0;g<f.length;++g){const y=g*p;let b=m[y],v=0;for(let w=0;w<p;++w){const C=m[y+w];C<b&&(b=C,v=w)}f[g]=v}return c.forEach(g=>n.disposeIntermediateTensorInfo(g)),n.makeTensorInfo(u,"int32",f)}const Hbe={kernelName:nv,backendName:"cpu",kernelFunc:Wbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gbe=en(sm,t=>Math.asin(t)),Kbe={kernelName:sm,backendName:"cpu",kernelFunc:Gbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qbe=en(im,t=>Math.asinh(t)),Xbe={kernelName:im,backendName:"cpu",kernelFunc:qbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ybe=en(om,t=>Math.atan(t)),Qbe={kernelName:om,backendName:"cpu",kernelFunc:Ybe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Jbe=ar((t,e)=>Math.atan2(t,e)),Zbe=kr(lm,Jbe),eve={kernelName:lm,backendName:"cpu",kernelFunc:Zbe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tve=en(am,t=>Math.atanh(t)),nve={kernelName:am,backendName:"cpu",kernelFunc:tve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mP(t,e,n,r,s,i){const o=s.strideHeight,a=s.strideWidth,l=s.dilationHeight,c=s.dilationWidth,u=s.effectiveFilterHeight,d=s.effectiveFilterWidth,h=s.padInfo.top,f=s.padInfo.left,p=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,m=xt(s.outShape,n),g=m.values,y=s.outShape[1]*s.outShape[2]*s.outShape[3],b=s.outShape[2]*s.outShape[3],v=s.outShape[3];for(let w=0;w<s.batchSize;++w){const C=w*y,_=w*r[0];for(let E=0;E<s.inChannels;++E)for(let I=0;I<s.outHeight;++I){const O=I*o-h,R=Math.max(0,O),z=Math.min(s.inHeight,u+O),B=C+I*b;for(let j=0;j<s.outWidth;++j){const G=j*a-f,U=Math.max(0,G),Q=Math.min(s.inWidth,d+G);let se=p,V=0,W=0;for(let J=R;J<z;J+=l){const Z=_+J*r[1];for(let ie=U;ie<Q;ie+=c){const ue=Z+ie*r[2],de=t[ue+E];i==="max"&&de>se?se=de:i==="avg"&&(V+=de,W++)}if(isNaN(se))break}const L=B+j*v+E;g[L]=i==="avg"?V/W:se}}}return m}function yq(t,e,n,r,s=!1,i=!1){const o=xt(r.outShape,"int32"),a=r.strideHeight,l=r.strideWidth,c=r.dilationHeight,u=r.dilationWidth,d=r.effectiveFilterHeight,h=r.effectiveFilterWidth,f=r.padInfo.top,p=r.padInfo.left,m=xt(e,n,t);for(let g=0;g<r.batchSize;++g)for(let y=0;y<r.inChannels;++y)for(let b=0;b<r.outHeight;++b){const v=b*a-f;let w=v;for(;w<0;)w+=c;const C=Math.min(r.inHeight,d+v);for(let _=0;_<r.outWidth;++_){const E=_*l-p;let I=E;for(;I<0;)I+=u;const O=Math.min(r.inWidth,h+E);let R=Number.NEGATIVE_INFINITY,z=-1;for(let B=w;B<C;B+=c){const j=B-v;for(let G=I;G<O;G+=u){const U=G-E,Q=m.get(g,B,G,y);Q>R&&(R=Q,s?z=i?((g*r.inHeight+B)*r.inWidth+G)*r.inChannels+y:(B*r.inWidth+G)*r.inChannels+y:z=j*h+U)}}o.set(z,g,b,_,y)}}return o}function bq(t,e,n,r,s,i){const o=s.strideDepth,a=s.strideHeight,l=s.strideWidth,c=s.dilationDepth,u=s.dilationHeight,d=s.dilationWidth,h=s.effectiveFilterDepth,f=s.effectiveFilterHeight,p=s.effectiveFilterWidth,m=s.padInfo.front,g=s.padInfo.top,y=s.padInfo.left,b=i==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,v=xt(s.outShape,n),w=v.values,C=s.outShape[1]*s.outShape[2]*s.outShape[3]*s.outShape[4],_=s.outShape[2]*s.outShape[3]*s.outShape[4],E=s.outShape[3]*s.outShape[4],I=s.outShape[4];for(let O=0;O<s.batchSize;++O){const R=O*C,z=O*r[0];for(let B=0;B<s.inChannels;++B)for(let j=0;j<s.outDepth;++j){const G=j*o-m;let U=G;for(;U<0;)U+=c;const Q=Math.min(s.inDepth,h+G),se=R+j*_;for(let V=0;V<s.outHeight;++V){const W=V*a-g;let L=W;for(;L<0;)L+=u;const J=Math.min(s.inHeight,f+W),Z=se+V*E;for(let ie=0;ie<s.outWidth;++ie){const ue=ie*l-y;let de=ue;for(;de<0;)de+=d;const ye=Math.min(s.inWidth,p+ue),Ee=Z+ie*I;let ge=b,Pe=0,We=0;for(let Ve=U;Ve<Q;Ve+=c){const Je=z+Ve*r[1];for(let at=L;at<J;at+=u){const _e=Je+at*r[2];for(let ze=de;ze<ye;ze+=d){const it=_e+ze*r[3],Xe=t[it+B];if(i==="max"&&Xe>ge?ge=Xe:i==="avg"&&(Pe+=Xe,We++),isNaN(ge))break}if(isNaN(ge))break}if(isNaN(ge))break}const le=Ee+B;w[le]=i==="avg"?Pe/Math.max(We,1):ge}}}}return v}function rve(t,e){const n=xt(e.outShape,"int32"),r=e.strideDepth,s=e.strideHeight,i=e.strideWidth,o=e.dilationDepth,a=e.dilationHeight,l=e.dilationWidth,c=e.effectiveFilterDepth,u=e.effectiveFilterHeight,d=e.effectiveFilterWidth,h=e.padInfo.front,f=e.padInfo.top,p=e.padInfo.left;for(let m=0;m<e.batchSize;++m)for(let g=0;g<e.inChannels;++g)for(let y=0;y<e.outDepth;++y){const b=y*r-h;let v=b;for(;v<0;)v+=o;const w=Math.min(e.inDepth,c+b);for(let C=0;C<e.outHeight;++C){const _=C*s-f;let E=_;for(;E<0;)E+=a;const I=Math.min(e.inHeight,u+_);for(let O=0;O<e.outWidth;++O){const R=O*i-p;let z=R;for(;z<0;)z+=l;const B=Math.min(e.inWidth,d+R);let j=Number.NEGATIVE_INFINITY,G=-1;for(let U=v;U<w;U+=o){const Q=U-b;for(let se=E;se<I;se+=a){const V=se-_;for(let W=z;W<B;W+=l){const L=W-R,J=t.get(m,U,se,W,g);J>=j&&(j=J,G=Q*u*d+V*u+L)}}}n.set(G,m,y,C,O,g)}}}return n}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Ye(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;P(Kr(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=zo(s.shape,i,o,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&Nt(u.inShape,u.outShape))d=dl({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,f=et(s.shape),p=mP(h,s.shape,s.dtype,f,u,"avg");d=n.makeTensorInfo(u.outShape,s.dtype,p.values)}return d}const ive={kernelName:rv,backendName:"cpu",kernelFunc:sve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ove(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;Ye(s,"avgPool3d");const u=uc(s.shape,i,o,1,a,l,c),d=n.data.get(s.dataId).values,h=bq(d,s.shape,s.dtype,et(s.shape),u,"avg");return n.makeTensorInfo(h.shape,"float32",h.values)}const ave={kernelName:sv,backendName:"cpu",kernelFunc:ove};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lve(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;Ye([s,i],"avgPool3DGrad");const u=uc(i.shape,o,a,1,l,c),d=u.strideDepth,h=u.strideHeight,f=u.strideWidth,p=u.filterDepth,m=u.filterHeight,g=u.filterWidth,y=u.dilationDepth,b=u.dilationHeight,v=u.dilationWidth,w=u.effectiveFilterDepth,C=u.effectiveFilterHeight,_=u.effectiveFilterWidth,E=w-1-u.padInfo.front,I=_-1-u.padInfo.left,O=C-1-u.padInfo.top,R=xt(i.shape,"float32"),z=1/(p*m*g),B=n.bufferSync(s);for(let j=0;j<u.batchSize;++j)for(let G=0;G<u.inChannels;++G)for(let U=0;U<u.inDepth;++U)for(let Q=0;Q<u.inHeight;++Q)for(let se=0;se<u.inWidth;++se){const V=U-E,W=Q-O,L=se-I;let J=0;for(let Z=0;Z<w;Z+=y){const ie=(V+Z)/d;if(!(ie<0||ie>=u.outDepth||Math.floor(ie)!==ie))for(let ue=0;ue<C;ue+=b){const de=(W+ue)/h;if(!(de<0||de>=u.outHeight||Math.floor(de)!==de))for(let ye=0;ye<_;ye+=v){const Ee=(L+ye)/f;if(Ee<0||Ee>=u.outWidth||Math.floor(Ee)!==Ee)continue;const ge=B.get(j,ie,de,Ee,G);J+=ge}}}R.set(J*z,j,U,Q,se,G)}return n.makeTensorInfo(R.shape,R.dtype,R.values)}const cve={kernelName:LC,backendName:"cpu",kernelFunc:lve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function uve(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;Ye([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=zo(o.shape,a,l,1,c),d=u.strideHeight,h=u.strideWidth,f=u.filterHeight,p=u.filterWidth,m=u.dilationHeight,g=u.dilationWidth,y=u.effectiveFilterHeight,b=u.effectiveFilterWidth,v=b-1-u.padInfo.left,w=y-1-u.padInfo.top,C=xt(o.shape,"float32"),_=1/(f*p),E=n.data.get(s.dataId).values,I=xt(s.shape,"float32",E);for(let O=0;O<u.batchSize;++O)for(let R=0;R<u.inChannels;++R)for(let z=0;z<u.inHeight;++z)for(let B=0;B<u.inWidth;++B){const j=z-w,G=B-v;let U=0;for(let Q=0;Q<y;Q+=m){const se=(j+Q)/d;if(!(se<0||se>=u.outHeight||Math.floor(se)!==se))for(let V=0;V<b;V+=g){const W=(G+V)/h;if(W<0||W>=u.outWidth||Math.floor(W)!==W)continue;const L=I.get(O,se,W,R);U+=L}}C.set(U*_,O,z,B,R)}return n.makeTensorInfo(C.shape,C.dtype,C.values)}const dve={kernelName:PC,backendName:"cpu",kernelFunc:uve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,scale:i,offset:o,mean:a,variance:l}=e;P(a.shape.length===l.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),P(o==null||a.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),P(i==null||a.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks."),Ye([s,a,l,i,o],"batchNorm");let{varianceEpsilon:c}=r;c==null&&(c=.001);const u=n.data.get(s.dataId).values,d=n.data.get(a.dataId).values,h=n.data.get(l.dataId).values,f=i?n.data.get(i.dataId).values:new Float32Array([1]),p=o?n.data.get(o.dataId).values:new Float32Array([0]),m=new Float32Array(u.length),g=p.length,y=f.length,b=h.length,v=d.length;let w=0,C=0,_=0,E=0;for(let I=0;I<u.length;++I)m[I]=p[w++]+(u[I]-d[C++])*f[_++]/Math.sqrt(h[E++]+c),w>=g&&(w=0),C>=v&&(C=0),_>=y&&(_=0),E>=b&&(E=0);return n.makeTensorInfo(s.shape,s.dtype,m)}const fve={kernelName:bv,backendName:"cpu",kernelFunc:hve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;Ye([s],"batchToSpaceND");const a=i.reduce((y,b)=>y*b),l=C0(s.shape,i,a),c=E0(l.length,i.length),u=_0(s.shape,i,a),d=gD(o,i.length),h=yD(u,o,i.length),f=vn({inputs:{x:s},backend:n,attrs:{shape:l}}),p=Us({inputs:{x:f},backend:n,attrs:{perm:c}}),m=vn({inputs:{x:p},backend:n,attrs:{shape:u}}),g=xh({inputs:{x:m},backend:n,attrs:{begin:d,size:h}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const mve={kernelName:ov,backendName:"cpu",kernelFunc:pve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function gve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=uP(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}const yve={kernelName:FC,backendName:"cpu",kernelFunc:gve};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bve(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.data.get(r.dataId).values,o=n.data.get(s.dataId).values,a=yt(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const vve={kernelName:MC,backendName:"cpu",kernelFunc:bve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wve=en(dm,(t,e)=>{const n=e;return t>n.clipValueMax?n.clipValueMax:t<n.clipValueMin?n.clipValueMin:t}),xve={kernelName:dm,backendName:"cpu",kernelFunc:wve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sve=t=>{const{x:e}=t.inputs,n=t.backend,r=new Float32Array(fe(e.shape)),s=n.data.get(e.dataId),i=s.complexTensorInfos.real,o=s.complexTensorInfos.imag,a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values;for(let c=0;c<a.length;c++){const u=a[c],d=l[c];r[c]=Math.hypot(u,d)}return n.makeOutput(r,e.shape,"float32")},Cve={kernelName:lv,backendName:"cpu",kernelFunc:Sve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zp(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.data.get(r.dataId).complexTensorInfos.imag,i=n.data.get(s.dataId).values;return n.makeTensorInfo(s.shape,s.dtype,i)}const Eve={kernelName:sE,backendName:"cpu",kernelFunc:zp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Bp(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=Tt(s,e[0].shape)[0],o=e.map(m=>m.shape);fD(o,i);let a=Ya(e.map(m=>m.shape),i);if(fe(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(m=>fe(m.shape)>0);if(l.length===1)return dl({inputs:{x:l[0]},backend:n});if(l[0].dtype==="complex64"){const m=l.map(w=>wh({inputs:{input:w},backend:n})),g=l.map(w=>zp({inputs:{input:w},backend:n})),y=Bp({inputs:m,backend:n,attrs:{axis:i}}),b=Bp({inputs:g,backend:n,attrs:{axis:i}}),v=si({inputs:{real:y,imag:b},backend:n});return m.forEach(w=>n.disposeIntermediateTensorInfo(w)),g.forEach(w=>n.disposeIntermediateTensorInfo(w)),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),v}const c=l.map(m=>{const y=[-1,fe(m.shape.slice(i))];return vn({inputs:{x:m},backend:n,attrs:{shape:y}})}),u=c.map(m=>({vals:n.data.get(m.dataId).values,shape:m.shape}));a=Ya(c.map(m=>m.shape),1);const d=c[0].shape[0]===1,h=CK(u,a,e[0].dtype,d),f=Ya(l.map(m=>m.shape),i),p=n.makeTensorInfo(f,e[0].dtype,h);return c.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const _ve={kernelName:cv,backendName:"cpu",kernelFunc:Bp};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vq(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r;Ye([s,i],"conv2d");const d=dc(l),h=Fr(s.shape,i.shape,o,c,a,u,!1,d),f=h.filterHeight,p=h.filterWidth,m=h.dilationHeight,g=h.dilationWidth,y=h.padInfo.left,b=h.padInfo.top,v=h.dataFormat==="channelsLast",w=new dr(h.outShape,s.dtype),C=et(s.shape),_=et(i.shape),E=C[0],I=v?C[1]:C[2],O=v?C[2]:1,R=v?1:C[1],z=w.strides[0],B=v?w.strides[1]:w.strides[2],j=v?w.strides[2]:1,G=v?1:w.strides[1],U=n.data.get(s.dataId).values,Q=n.data.get(i.dataId).values,se=w.values;for(let V=0;V<h.batchSize;++V){const W=V*E,L=V*z;for(let J=0;J<h.outHeight;++J){const Z=L+J*B,ie=J*h.strideHeight-b;for(let ue=0;ue<f;++ue){const de=ie+ue*m;if(de<0||de>=h.inHeight)continue;const ye=ue*_[0],Ee=W+de*I;for(let ge=0;ge<h.outWidth;++ge){const Pe=Z+ge*j,We=ge*h.strideWidth-y;for(let le=0;le<p;++le){const Ve=We+le*g;if(Ve<0||Ve>=h.inWidth)continue;const Je=ye+le*_[1],at=Ee+Ve*O;let _e=Je;for(let ze=0;ze<h.inChannels;++ze){const it=U[at+ze*R];for(let Xe=0;Xe<h.outChannels;++Xe)se[Pe+Xe*G]+=it*Q[_e+Xe];_e+=h.outChannels}}}}}}return n.makeTensorInfo(w.shape,w.dtype,se)}const Tve={kernelName:uv,backendName:"cpu",kernelFunc:vq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r;Ye([s,i],"conv2dBackpropFilter");const d=dc(l),h=Fr(s.shape,u,o,1,a,c,!1,d),{strideHeight:f,strideWidth:p,filterHeight:m,filterWidth:g}=h,y=h.dataFormat==="channelsLast",b=new dr(h.filterShape,"float32"),v=h.padInfo.left,w=h.padInfo.top,C=n.data.get(s.dataId).values,_=n.data.get(i.dataId).values,E=new dr(s.shape,s.dtype,C),I=new dr(i.shape,i.dtype,_);for(let O=0;O<m;++O){const R=Math.max(0,Math.ceil((w-O)/f)),z=Math.min(h.outHeight,(h.inHeight+w-O)/f);for(let B=0;B<g;++B){const j=Math.max(0,Math.ceil((v-B)/p)),G=Math.min(h.outWidth,(h.inWidth+v-B)/p);for(let U=0;U<h.inChannels;++U)for(let Q=0;Q<h.outChannels;++Q){let se=0;for(let V=0;V<h.batchSize;++V)for(let W=R;W<z;++W){const L=O+W*f-w;for(let J=j;J<G;++J){const Z=B+J*p-v;y?se+=E.get(V,L,Z,U)*I.get(V,W,J,Q):se+=E.get(V,U,L,Z)*I.get(V,Q,W,J)}}b.set(se,O,B,U,Q)}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Ive={kernelName:BC,backendName:"cpu",kernelFunc:kve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nve(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r;Ye([s,i],"conv2dBackpropInput");const d=et(i.shape),h=et(s.shape);let f=dc(c);const p=Fr(o,i.shape,a,1,l,u,!1,f),m=new dr(p.inShape,"float32"),g=m.values,y=n.data.get(s.dataId).values,b=n.data.get(i.dataId).values,[v,w,C]=d,{batchSize:_,filterHeight:E,filterWidth:I,inChannels:O,inHeight:R,inWidth:z,outChannels:B,outHeight:j,outWidth:G,strideHeight:U,strideWidth:Q}=p;f=p.dataFormat;const se=E-1-p.padInfo.top,V=I-1-p.padInfo.left,W=f==="channelsLast",L=m.strides[0],J=W?m.strides[1]:m.strides[2],Z=W?m.strides[2]:1,ie=W?1:m.strides[1],ue=h[0],de=W?h[1]:h[2],ye=W?h[2]:1,Ee=W?1:h[1];for(let ge=0;ge<_;++ge)for(let Pe=0;Pe<O;++Pe)for(let We=0;We<R;++We){const le=We-se,Ve=Math.max(0,Math.ceil(le/U)),Je=Math.min(j,(E+le)/U);for(let at=0;at<z;++at){const _e=at-V,ze=Math.max(0,Math.ceil(_e/Q)),it=Math.min(G,(I+_e)/Q);let Xe=0;for(let Ne=Ve;Ne<Je;++Ne){const Bt=Ne*U-le;for(let At=ze;At<it;++At){const Sn=At*Q-_e,Wt=ue*ge+de*Ne+ye*At,tn=v*(E-1-Bt)+w*(I-1-Sn)+C*Pe;for(let rt=0;rt<B;++rt){const Vt=y[Wt+Ee*rt],Cn=b[tn+rt];Xe+=Vt*Cn}}}const xn=L*ge+J*We+Z*at+ie*Pe;g[xn]=Xe}}return n.makeTensorInfo(m.shape,m.dtype,m.values)}const $ve={kernelName:dv,backendName:"cpu",kernelFunc:Nve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ave(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r;Ye([s,i],"conv3d");const c=Fu(s.shape,i.shape,o,l,a),{filterDepth:u,filterHeight:d,filterWidth:h,dilationDepth:f,dilationHeight:p,dilationWidth:m,padInfo:g}=c,y=g.front,b=g.left,v=g.top,w=new dr(c.outShape,s.dtype),C=n.data.get(s.dataId).values,_=n.data.get(i.dataId).values,E=w.values,I=et(s.shape),O=et(i.shape);for(let R=0;R<c.batchSize;++R){const z=R*I[0],B=R*w.strides[0];for(let j=0;j<c.outDepth;++j){const G=B+j*w.strides[1],U=j*c.strideDepth-y;for(let Q=0;Q<u;++Q){const se=U+Q*f;if(se<0||se>=c.inDepth)continue;const V=Q*O[0],W=z+se*I[1];for(let L=0;L<c.outHeight;++L){const J=G+L*w.strides[2],Z=L*c.strideHeight-v;for(let ie=0;ie<d;++ie){const ue=Z+ie*p;if(ue<0||ue>=c.inHeight)continue;const de=V+ie*O[1],ye=W+ue*I[2];for(let Ee=0;Ee<c.outWidth;++Ee){const ge=J+Ee*c.outChannels,Pe=Ee*c.strideWidth-b;for(let We=0;We<h;++We){const le=Pe+We*m;if(le<0||le>=c.inWidth)continue;const Ve=de+We*O[2],Je=ye+le*c.inChannels;let at=Ve;for(let _e=0;_e<c.inChannels;++_e){const ze=C[Je+_e];for(let it=0;it<c.outChannels;++it)E[ge+it]+=ze*_[at+it];at+=c.outChannels}}}}}}}}return n.makeTensorInfo(w.shape,w.dtype,w.values)}const Rve={kernelName:hv,backendName:"cpu",kernelFunc:Ave};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ove(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r;Ye([s,i],"conv3dBackpropFilterV2");const c=et(s.shape),u=et(i.shape),d=Fu(s.shape,l,o,1,a),h=d.strideDepth,f=d.strideHeight,p=d.strideWidth,m=d.filterDepth,g=d.filterHeight,y=d.filterWidth,b=new dr(d.filterShape,"float32"),v=b.values,[w,C,_,E]=b.strides,I=n.data.get(i.dataId).values,[O,R,z,B]=u,j=n.data.get(s.dataId).values,[G,U,Q,se]=c,V=d.padInfo.front,W=d.padInfo.left,L=d.padInfo.top;for(let J=0;J<m;++J){const Z=Math.max(0,Math.ceil((V-J)/h)),ie=Math.min(d.outDepth,(d.inDepth+V-J)/h),ue=J*w;for(let de=0;de<g;++de){const ye=Math.max(0,Math.ceil((L-de)/f)),Ee=Math.min(d.outHeight,(d.inHeight+L-de)/f),ge=de*C+ue;for(let Pe=0;Pe<y;++Pe){const We=Math.max(0,Math.ceil((W-Pe)/p)),le=Math.min(d.outWidth,(d.inWidth+W-Pe)/p),Ve=Pe*_+ge;for(let Je=0;Je<d.inChannels;++Je){const at=Je*E+Ve;for(let _e=0;_e<d.outChannels;++_e){let ze=0;for(let it=0;it<d.batchSize;++it){const Xe=it*G,xn=it*O;for(let Ne=Z;Ne<ie;++Ne){const At=(J+Ne*h-V)*U+Xe,Sn=Ne*R+xn;for(let Wt=ye;Wt<Ee;++Wt){const rt=(de+Wt*f-L)*Q+At,Vt=Wt*z+Sn;for(let Cn=We;Cn<le;++Cn){const ro=(Pe+Cn*p-W)*se+rt,Es=Cn*B+Vt;ze+=j[ro+Je]*I[Es+_e]}}}}v[at+_e]=ze}}}}}return n.makeTensorInfo(b.shape,b.dtype,b.values)}const Dve={kernelName:jC,backendName:"cpu",kernelFunc:Ove};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Pve(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r;Ye([s],"conv3dBackpropInputV2");const c=et(s.shape),u=et(i.shape),d=Fu(l,i.shape,a,1,o),h=new dr(d.inShape,"float32"),f=h.values,[p,m,g,y]=h.strides,b=n.data.get(s.dataId).values,[v,w,C,_]=c,E=n.data.get(i.dataId).values,[I,O,R,z]=u,{batchSize:B,filterDepth:j,filterHeight:G,filterWidth:U,inChannels:Q,inDepth:se,inHeight:V,inWidth:W,outChannels:L,outDepth:J,outHeight:Z,outWidth:ie,strideDepth:ue,strideHeight:de,strideWidth:ye}=d,Ee=j-1-d.padInfo.front,ge=G-1-d.padInfo.top,Pe=U-1-d.padInfo.left;for(let We=0;We<B;++We)for(let le=0;le<Q;++le)for(let Ve=0;Ve<se;++Ve){const Je=Ve-Ee,at=Math.max(0,Math.ceil(Je/ue)),_e=Math.min(J,(j+Je)/ue);for(let ze=0;ze<V;++ze){const it=ze-ge,Xe=Math.max(0,Math.ceil(it/de)),xn=Math.min(Z,(G+it)/de);for(let Ne=0;Ne<W;++Ne){const Bt=Ne-Pe,At=Math.max(0,Math.ceil(Bt/ye)),Sn=Math.min(ie,(U+Bt)/ye);let Wt=0;for(let tn=at;tn<_e;++tn){const rt=tn*ue-Je;for(let Vt=Xe;Vt<xn;++Vt){const Cn=Vt*de-it;for(let Kn=At;Kn<Sn;++Kn){const ro=Kn*ye-Bt,Es=v*We+w*tn+C*Vt+_*Kn,Ea=I*(j-1-rt)+O*(G-1-Cn)+R*(U-1-ro)+z*le;for(let Ho=0;Ho<L;++Ho){const vc=b[Es+Ho],wc=E[Ea+Ho];Wt+=vc*wc}}}}f[p*We+m*Ve+g*ze+y*Ne+le]=Wt}}}return n.makeTensorInfo(h.shape,h.dtype,h.values)}const Lve={kernelName:VC,backendName:"cpu",kernelFunc:Pve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fve=en(hm,t=>Math.cos(t)),Mve={kernelName:hm,backendName:"cpu",kernelFunc:Fve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zve=en(fm,t=>Math.cosh(t)),Bve={kernelName:fm,backendName:"cpu",kernelFunc:zve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jve(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,[u,d,h,f]=s.shape,p=i.shape[0],[m,g]=a,y=xt([p,m,g,f],"float32"),b=n.data.get(i.dataId).values,v=n.data.get(o.dataId).values,w=n.data.get(s.dataId).values,C=et(s.shape),_=et(y.shape);for(let E=0;E<p;E++){const I=E*4,O=b[I],R=b[I+1],z=b[I+2],B=b[I+3],j=v[E];if(j>=u)continue;const G=m>1?(z-O)*(d-1)/(m-1):0,U=g>1?(B-R)*(h-1)/(g-1):0;for(let Q=0;Q<m;Q++){const se=m>1?O*(d-1)+Q*G:.5*(O+z)*(d-1);if(se<0||se>d-1){for(let V=0;V<g;V++)for(let W=0;W<f;W++){const L=W+V*_[2]+Q*_[1]+E*_[0];y.values[L]=c}continue}if(l==="bilinear"){const V=Math.floor(se),W=Math.ceil(se),L=se-V;for(let J=0;J<g;J++){const Z=g>1?R*(h-1)+J*U:.5*(R+B)*(h-1);if(Z<0||Z>h-1){for(let ye=0;ye<f;ye++){const Ee=ye+J*_[2]+Q*_[1]+E*_[0];y.values[Ee]=c}continue}const ie=Math.floor(Z),ue=Math.ceil(Z),de=Z-ie;for(let ye=0;ye<f;ye++){let Ee=ye+ie*C[2]+V*C[1]+j*C[0];const ge=w[Ee];Ee=ye+ue*C[2]+V*C[1]+j*C[0];const Pe=w[Ee];Ee=ye+ie*C[2]+W*C[1]+j*C[0];const We=w[Ee];Ee=ye+ue*C[2]+W*C[1]+j*C[0];const le=w[Ee],Ve=ge+(Pe-ge)*de,Je=We+(le-We)*de;Ee=ye+J*_[2]+Q*_[1]+E*_[0],y.values[Ee]=Ve+(Je-Ve)*L}}}else for(let V=0;V<g;++V){const W=g>1?R*(h-1)+V*U:.5*(R+B)*(h-1);if(W<0||W>h-1){for(let Z=0;Z<f;Z++){const ie=Z+V*_[2]+Q*_[1]+E*_[0];y.values[ie]=c}continue}const L=Math.round(W),J=Math.round(se);for(let Z=0;Z<f;Z++){const ie=Z+L*C[2]+J*C[1]+j*C[0],ue=Z+V*_[2]+Q*_[1]+E*_[0];y.values[ue]=w[ie]}}}}return n.makeTensorInfo(y.shape,y.dtype,y.values)}const Vve={kernelName:WC,backendName:"cpu",kernelFunc:jve};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Uve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;Ye(s,"cumprod");const l=Gn([i],s.shape.length);let c=s;l!=null&&(c=Us({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=ir(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumprod in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Ms(c.dtype,"int32"),h=RC(fe(c.shape),d),f=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],m=a?(y,b)=>y+p-b-1:(y,b)=>y+b;for(let y=0;y<f.length;y+=p)for(let b=0;b<p;b++){const v=m(y,b);if(b===0)h[v]=o?1:f[v];else{const w=m(y,b-1);h[v]=o?f[w]*h[w]:f[v]*h[w]}}const g=n.makeTensorInfo(c.shape,d,h);if(l!=null){const y=Mu(l),b=Us({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),b}return g}const Wve={kernelName:UC,backendName:"cpu",kernelFunc:Uve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;Ye(s,"cumsum");const l=Gn([i],s.shape.length);let c=s;l!=null&&(c=Us({inputs:{x:s},backend:n,attrs:{perm:l}}));const u=ir(1,s.shape.length)[0];if(u!==c.shape.length-1)throw new Error(`backend.cumsum in CPU expects an inner-most axis=${c.shape.length-1} but got axis=${u}`);const d=Ms(c.dtype,"int32"),h=Hr(fe(c.shape),d),f=n.data.get(c.dataId).values,p=c.shape[c.shape.length-1],m=a?(y,b)=>y+p-b-1:(y,b)=>y+b;for(let y=0;y<f.length;y+=p)for(let b=0;b<p;b++){const v=m(y,b);if(b===0)h[v]=o?0:f[v];else{const w=m(y,b-1);h[v]=o?f[w]+h[w]:f[v]+h[w]}}const g=n.makeTensorInfo(c.shape,d,h);if(l!=null){const y=Mu(l),b=Us({inputs:{x:g},backend:n,attrs:{perm:y}});return n.disposeIntermediateTensorInfo(g),n.disposeIntermediateTensorInfo(c),b}return g}const Gve={kernelName:fv,backendName:"cpu",kernelFunc:Hve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=uP(l,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=wK(l,c,o,a);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const qve={kernelName:HC,backendName:"cpu",kernelFunc:Kve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r;P(o==="NHWC",()=>`Only NHWC dataFormat supported on CPU for depthToSpace. Got ${o}`);const a=s.shape[0],l=s.shape[1],c=s.shape[2],u=s.shape[3],d=l*i,h=c*i,f=u/(i*i),p=n.data.get(s.dataId).values,m=new Float32Array(a*d*h*f);let g=0;for(let y=0;y<a;++y)for(let b=0;b<d;++b){const v=Math.floor(b/i),w=b%i;for(let C=0;C<h;++C){const _=Math.floor(C/i),E=C%i,I=(w*i+E)*f;for(let O=0;O<f;++O){const z=O+I+u*(_+c*(v+l*y));m[g++]=p[z]}}}return n.makeTensorInfo([a,d,h,f],s.dtype,m)}const Yve={kernelName:GC,backendName:"cpu",kernelFunc:Xve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wq(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;Ye([s,i],"depthwiseConv2DNative");const u=et(s.shape),d=et(i.shape);let h=l;h==null&&(h=[1,1]),P(Kr(o,h),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${h}'`);const f=Fr(s.shape,i.shape,o,h,a,c,!0),{filterHeight:p,filterWidth:m,dilationHeight:g,dilationWidth:y,padInfo:b}=f,v=b.left,w=b.top,C=f.outChannels/f.inChannels,_=new dr(f.outShape,s.dtype),E=n.data.get(s.dataId).values,I=n.data.get(i.dataId).values,O=_.values;for(let R=0;R<f.batchSize;++R){const z=R*u[0],B=R*_.strides[0];for(let j=0;j<f.outHeight;++j){const G=B+j*_.strides[1],U=j*f.strideHeight-w;for(let Q=0;Q<p;++Q){const se=U+Q*g;if(se<0||se>=f.inHeight)continue;const V=Q*d[0],W=z+se*u[1];for(let L=0;L<f.outWidth;++L){const J=G+L*_.strides[2],Z=L*f.strideWidth-v;for(let ie=0;ie<m;++ie){const ue=Z+ie*y;if(ue<0||ue>=f.inWidth)continue;const de=V+ie*d[1],ye=W+ue*f.inChannels;let Ee=J,ge=de;for(let Pe=0;Pe<f.inChannels;++Pe){const We=E[ye+Pe];for(let le=0;le<C;++le)O[Ee+le]+=We*I[ge+le];Ee+=C,ge+=C}}}}}}return n.makeTensorInfo(_.shape,_.dtype,_.values)}const Qve={kernelName:pv,backendName:"cpu",kernelFunc:wq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jve(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r;Ye([s,i],"depthwiseConv2dNativeBackpropFilter");const d=Fr(s.shape,u,o,a,l,c,!0),{strideHeight:h,strideWidth:f,filterHeight:p,filterWidth:m}=d,g=new dr(d.filterShape,"float32"),y=d.padInfo.left,b=d.padInfo.top,v=d.outChannels/d.inChannels,w=n.data.get(s.dataId).values,C=new dr(s.shape,s.dtype,w),_=n.data.get(i.dataId).values,E=new dr(i.shape,i.dtype,_);for(let I=0;I<p;++I){const O=Math.max(0,Math.ceil((b-I)/h)),R=Math.min(d.outHeight,(d.inHeight+b-I)/h);for(let z=0;z<m;++z){const B=Math.max(0,Math.ceil((y-z)/f)),j=Math.min(d.outWidth,(d.inWidth+y-z)/f);for(let G=0;G<d.outChannels;++G){const U=Math.trunc(G/v),Q=G%v;let se=0;for(let V=0;V<d.batchSize;++V)for(let W=O;W<R;++W){const L=I+W*h-b;for(let J=B;J<j;++J){const Z=z+J*f-y;se+=C.get(V,L,Z,U)*E.get(V,W,J,G)}}g.set(se,I,z,U,Q)}}}return n.makeTensorInfo(g.shape,g.dtype,g.values)}const Zve={kernelName:KC,backendName:"cpu",kernelFunc:Jve};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e0e(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r;Ye([s,i],"depthwiseConv2DNativeBackpropInput");const d=et(s.shape),h=et(i.shape),f=Fr(u,i.shape,o,a,l,c,!0),p=new dr(f.inShape,"float32"),m=p.values,[g,y,b]=p.strides,v=n.data.get(s.dataId).values,[w,C,_]=d,E=n.data.get(i.dataId).values,[I,O,R]=h,{batchSize:z,filterHeight:B,filterWidth:j,inChannels:G,inHeight:U,inWidth:Q,outChannels:se,outHeight:V,outWidth:W,strideHeight:L,strideWidth:J}=f,Z=B-1-f.padInfo.top,ie=j-1-f.padInfo.left,ue=se/G;for(let de=0;de<z;++de)for(let ye=0;ye<G;++ye)for(let Ee=0;Ee<U;++Ee){const ge=Ee-Z,Pe=Math.max(0,Math.ceil(ge/L)),We=Math.min(V,(B+ge)/L);for(let le=0;le<Q;++le){const Ve=le-ie,Je=Math.max(0,Math.ceil(Ve/J)),at=Math.min(W,(j+Ve)/J);let _e=0;for(let ze=Pe;ze<We;++ze){const it=ze*L-ge;for(let Xe=Je;Xe<at;++Xe){const xn=Xe*J-Ve,Ne=w*de+C*ze+_*Xe,Bt=I*(B-1-it)+O*(j-1-xn)+R*ye;for(let At=0;At<ue;++At){const Sn=ye*ue+At,Wt=v[Ne+Sn],tn=E[Bt+At];_e+=Wt*tn}}}m[g*de+y*Ee+b*le+ye]=_e}}return n.makeTensorInfo(p.shape,p.dtype,p.values)}const t0e={kernelName:qC,backendName:"cpu",kernelFunc:e0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function n0e(t){const{inputs:e,backend:n}=t,{x:r}=e,s=fe(r.shape),i=n.data.get(r.dataId).values,o=xt([s,s],r.dtype),a=o.values;for(let c=0;c<i.length;c++)a[c*s+c]=i[c];const l=[...r.shape,...r.shape];return n.makeTensorInfo(l,o.dtype,o.values)}const r0e={kernelName:XC,backendName:"cpu",kernelFunc:n0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s0e={kernelName:mv,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s}=t,{strides:i,pad:o,dilations:a}=n,l=e,c=l.data.get(r.dataId).values,u=r.shape.length,d=l.data.get(s.dataId).values,h=s.shape.length,{batchSize:f,inHeight:p,inWidth:m,inChannels:g,outHeight:y,outWidth:b,padInfo:v,strideHeight:w,strideWidth:C,filterHeight:_,filterWidth:E,dilationHeight:I,dilationWidth:O,outShape:R}=s0(r.shape,s.shape,i,o,"NHWC",a),z=fe(R),B=R.length,j=Yn(r.dtype,z);for(let U=0;U<f;++U)for(let Q=0;Q<y;++Q){const se=Q*w-v.top;for(let V=0;V<b;++V){const W=V*C-v.left;for(let L=0;L<g;++L){let J=Number.MIN_SAFE_INTEGER;for(let ie=0;ie<_;++ie){const ue=se+ie*I;if(ue>=0&&ue<p)for(let de=0;de<E;++de){const ye=W+de*O;if(ye>=0&&ye<m){const Ee=ua([U,ue,ye,L],u,et(r.shape)),ge=ua([ie,de,L],h,et(s.shape)),Pe=c[Ee]+d[ge];Pe>J&&(J=Pe)}}}const Z=ua([U,Q,V,L],B,et(R));j[Z]=J}}}return{dataId:l.write(Pu(j,r.dtype),R,r.dtype),shape:R,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const i0e={kernelName:pS,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Bi(r.shape,c.data.get(r.dataId).values),d=Bi(s.shape,c.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:v,strideWidth:w,filterHeight:C,filterWidth:_,dilationHeight:E,dilationWidth:I,outShape:O}=s0(r.shape,s.shape,o,a,"NHWC",l);P(i.rank===O.length,()=>`Error in ${pS}, dy must have the same rank as output ${O.length}, but got ${i.rank}`);const R=Bi(O,c.data.get(i.dataId).values),z=IR(s.shape,s.dtype);for(let j=0;j<h;++j)for(let G=0;G<g;++G){const U=G*v-b.top;for(let Q=0;Q<y;++Q){const se=Q*w-b.left;for(let V=0;V<m;++V){let W=Number.MIN_SAFE_INTEGER,L=0,J=0;for(let Z=0;Z<C;++Z){const ie=U+Z*E;if(ie>=0&&ie<f)for(let ue=0;ue<_;++ue){const de=se+ue*I;if(de>=0&&de<p){const ye=u[j][ie][de][V]+d[Z][ue][V];ye>W&&(W=ye,L=Z,J=ue)}}}z[L][J][V]+=R[j][G][Q][V]}}}return{dataId:c.write(Pu(z,r.dtype),s.shape,s.dtype),shape:s.shape,dtype:s.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const o0e={kernelName:fS,backendName:"cpu",kernelFunc:({inputs:t,backend:e,attrs:n})=>{const{x:r,filter:s,dy:i}=t,{strides:o,pad:a,dilations:l}=n,c=e,u=Bi(r.shape,c.data.get(r.dataId).values),d=Bi(s.shape,c.data.get(s.dataId).values),{batchSize:h,inHeight:f,inWidth:p,inChannels:m,outHeight:g,outWidth:y,padInfo:b,strideHeight:v,strideWidth:w,filterHeight:C,filterWidth:_,dilationHeight:E,dilationWidth:I,outShape:O}=s0(r.shape,s.shape,o,a,"NHWC",l);P(i.rank===O.length,()=>`Error in ${fS}, dy must have the same rank as output ${O.length}, but got ${i.rank}`);const R=Bi(O,c.data.get(i.dataId).values),z=IR(r.shape,r.dtype);for(let j=0;j<h;++j)for(let G=0;G<g;++G){const U=G*v-b.top;for(let Q=0;Q<y;++Q){const se=Q*w-b.left;for(let V=0;V<m;++V){let W=Number.MIN_SAFE_INTEGER,L=U<0?0:U,J=se<0?0:se;for(let Z=0;Z<C;++Z){const ie=U+Z*E;if(ie>=0&&ie<f)for(let ue=0;ue<_;++ue){const de=se+ue*I;if(de>=0&&de<p){const ye=u[j][ie][de][V]+d[Z][ue][V];ye>W&&(W=ye,L=ie,J=de)}}}z[j][L][J][V]+=R[j][G][Q][V]}}}return{dataId:c.write(Pu(z,r.dtype),r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a0e(t){const{inputs:e,backend:n,attrs:r}=t,{image:s}=e,{canvas:i,options:o}=r,{contextOptions:a,imageOptions:l}=o||{},c=(l==null?void 0:l.alpha)||1,u=(a==null?void 0:a.contextType)||"2d";if(u!=="2d")throw new Error(`Context type ${a.contextType} is not supported by the CPU backend.`);const d=i.getContext(u,(a==null?void 0:a.contextAttributes)||{});if(d==null)throw new Error(`Could not get the context with ${u} type.`);const[h,f]=s.shape.slice(0,2),p=s.shape.length===2?1:s.shape[2],m=n.data.get(s.dataId).values,g=s.dtype==="float32"?255:1,y=new Uint8ClampedArray(f*h*4);for(let v=0;v<h*f;++v){const w=[0,0,0,255*c];for(let _=0;_<p;_++){const E=m[v*p+_];if(s.dtype==="float32"){if(E<0||E>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${E}.`)}else if(s.dtype==="int32"&&(E<0||E>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${E}.`);p===1?(w[0]=E*g,w[1]=E*g,w[2]=E*g):w[_]=E*g}const C=v*4;y[C+0]=Math.round(w[0]),y[C+1]=Math.round(w[1]),y[C+2]=Math.round(w[2]),y[C+3]=Math.round(w[3])}i.width=f,i.height=h;const b=new ImageData(y,f,h);return d.putImageData(b,0,0),s}const l0e={kernelName:YC,backendName:"cpu",kernelFunc:a0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function F0(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ye(s,"sum");let a;s.dtype==="bool"?a=Nu({inputs:{x:s},backend:n,attrs:{dtype:"int32"}}):a=dl({inputs:{x:s},backend:n});const l=a.shape.length,c=Tt(i,a.shape),u=Gn(c,l);let d=c,h=a;u!=null&&(h=Us({inputs:{x:a},backend:n,attrs:{perm:u}}),d=ir(d.length,l)),qr("sum",d,h.shape.length);const[f,p]=Mr(h.shape,d),m=Ms(h.dtype,"int32");let g=DS(n,f,m);const y=fe(p),b=n.data.get(g.dataId).values,v=n.data.get(h.dataId).values;for(let w=0;w<b.length;++w){const C=w*y;let _=0;for(let E=0;E<y;++E)_+=v[C+E];b[w]=_}if(o){const w=sr(g.shape,c),C=g;g=vn({inputs:{x:g},backend:n,attrs:{shape:w}}),n.disposeIntermediateTensorInfo(C)}return n.disposeIntermediateTensorInfo(a),u!=null&&n.disposeIntermediateTensorInfo(h),g}const c0e={kernelName:qv,backendName:"cpu",kernelFunc:F0};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u0e(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=_D(s,i.length);kD(o.length,l,i);const{path:c,steps:u}=ID(a,l),d=u.length;let h=null,f=o.length;const p=[];for(let m=0;m<d;++m){for(const g of u[m]){const{permutationIndices:y,expandDims:b}=TD(f,l[g]);let v;ND(y)?v=i[g]:(v=Us({inputs:{x:i[g]},backend:n,attrs:{perm:y}}),p.push(v));const w=v.shape.slice();for(let C=0;C<b.length;++C)w.splice(b[C],0,1);Nt(v.shape,w)||(v=vn({inputs:{x:v},backend:n,attrs:{shape:w}}),p.push(v)),h===null?h=v:(h=W_({inputs:{a:v,b:h},backend:n}),p.push(h))}m<d-1&&(c[m]>=0&&(h=F0({inputs:{x:h},backend:n,attrs:{axis:c[m]-(o.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const d0e={kernelName:QC,backendName:"cpu",kernelFunc:u0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function h0e(t){const{inputs:e,backend:n}=t,{dy:r,y:s}=e;Ye([r,s],"eluGrad");const i=new Float32Array(fe(s.shape)),o=n.data.get(s.dataId).values,a=n.data.get(r.dataId).values;for(let l=0;l<o.length;++l){const c=o[l];c>=0?i[l]=a[l]:i[l]=a[l]*(c+1)}return n.makeTensorInfo(s.shape,"float32",i)}const f0e={kernelName:JC,backendName:"cpu",kernelFunc:h0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const p0e=bD,m0e=vD,g0e=wD,y0e=xD,b0e=SD,v0e=CD,w0e=en(gm,t=>{const e=Math.sign(t),n=Math.abs(t),r=1/(1+p0e*n);return e*(1-((((v0e*r+b0e)*r+y0e)*r+g0e)*r+m0e)*r*Math.exp(-n*n))}),x0e={kernelName:gm,backendName:"cpu",kernelFunc:w0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function FS(t){const{inputs:e,backend:n,attrs:r}=t,{input:s}=e,{dim:i}=r,o=s.shape.length,a=s.shape.slice();let l=i;return i<0&&(P(-(o+1)<=i,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+i+1),a.splice(l,0,1),vn({inputs:{x:s},backend:n,attrs:{shape:a}})}const S0e={kernelName:yv,backendName:"cpu",kernelFunc:FS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const C0e=ar((t,e)=>t/e),gP=kr(pm,C0e),LA={kernelName:pm,backendName:"cpu",kernelFunc:gP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xq(t,e,n){const r=t.shape,s=r[0],i=r[1],o=n.data.get(t.dataId),a=o.complexTensorInfos.real,l=o.complexTensorInfos.imag,c=[s,i],u=fe(c),d=Pr("float32",u),h=Pr("float32",u);for(let g=0;g<s;g++){const y=xh({inputs:{x:a},backend:n,attrs:{begin:[g,0],size:[1,i]}}),b=xh({inputs:{x:l},backend:n,attrs:{begin:[g,0],size:[1,i]}}),v=si({inputs:{real:y,imag:b},backend:n}),{real:w,imag:C}=E0e(v,e,n),_=ec(w,C);for(let E=0;E<i;E++){const I=ED(_,E);d[g*i+E]=I.real,h[g*i+E]=I.imag}n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(b),n.disposeIntermediateTensorInfo(v)}const f=n.makeTensorInfo(c,"float32",d),p=n.makeTensorInfo(c,"float32",h),m=si({inputs:{real:f,imag:p},backend:n});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),m}function E0e(t,e,n){const r=fe(t.shape),s=n.data.get(t.dataId),i=n.data.get(s.complexTensorInfos.real.dataId).values,o=n.data.get(s.complexTensorInfos.imag.dataId).values;if(_0e(r)){const a=FA(i,o,r,e,n),l=[t.shape[0],t.shape[1]];if(e){const c=n.makeTensorInfo(l,"float32",a.real),u=n.makeTensorInfo(l,"float32",a.imag),d=n.makeTensorInfo([],"float32",cc(r,"float32")),h=dl({inputs:{x:d},backend:n}),f=LA.kernelFunc({inputs:{a:c,b:d},backend:n}),p=LA.kernelFunc({inputs:{a:u,b:h},backend:n}),m=n.data.get(f.dataId).values,g=n.data.get(p.dataId).values;return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),{real:m,imag:g}}return a}else{const a=ec(i,o),l=T0e(a,r,e);return JH(l)}}function _0e(t){return(t&t-1)===0}function FA(t,e,n,r,s){if(n===1)return{real:t,imag:e};const i=ec(t,e),o=n/2,a=ZH(i),l=a.real,c=a.imag,u=[l.length],d=s.makeTensorInfo(u,"float32",l),h=s.makeTensorInfo(u,"float32",c),f=si({inputs:{real:d,imag:h},backend:s}),p=eG(i),m=p.real,g=p.imag,y=[m.length],b=s.makeTensorInfo(y,"float32",m),v=s.makeTensorInfo(y,"float32",g),w=si({inputs:{real:b,imag:v},backend:s}),C=FA(l,c,o,r,s),_=C.real,E=C.imag,I=[_.length],O=s.makeTensorInfo(I,"float32",_),R=s.makeTensorInfo(I,"float32",E),z=si({inputs:{real:O,imag:R},backend:s}),B=FA(m,g,o,r,s),j=B.real,G=B.imag,U=[j.length],Q=s.makeTensorInfo(U,"float32",j),se=s.makeTensorInfo(U,"float32",G),V=si({inputs:{real:Q,imag:se},backend:s}),W=nG(n,r),L=[W.real.length],J=s.makeTensorInfo(L,"float32",W.real),Z=s.makeTensorInfo(L,"float32",W.imag),ie=si({inputs:{real:J,imag:Z},backend:s}),ue=W_({inputs:{a:ie,b:V},backend:s}),de=Mp({inputs:{a:z,b:ue},backend:s}),ye=pP({inputs:{a:z,b:ue},backend:s}),Ee=wh({inputs:{input:de},backend:s}),ge=wh({inputs:{input:ye},backend:s}),Pe=zp({inputs:{input:de},backend:s}),We=zp({inputs:{input:ye},backend:s}),le=Bp({inputs:[Ee,ge],backend:s,attrs:{axis:0}}),Ve=Bp({inputs:[Pe,We],backend:s,attrs:{axis:0}}),Je=s.data.get(le.dataId).values,at=s.data.get(Ve.dataId).values;return s.disposeIntermediateTensorInfo(d),s.disposeIntermediateTensorInfo(h),s.disposeIntermediateTensorInfo(f),s.disposeIntermediateTensorInfo(b),s.disposeIntermediateTensorInfo(v),s.disposeIntermediateTensorInfo(w),s.disposeIntermediateTensorInfo(O),s.disposeIntermediateTensorInfo(R),s.disposeIntermediateTensorInfo(z),s.disposeIntermediateTensorInfo(Q),s.disposeIntermediateTensorInfo(se),s.disposeIntermediateTensorInfo(V),s.disposeIntermediateTensorInfo(J),s.disposeIntermediateTensorInfo(Z),s.disposeIntermediateTensorInfo(ie),s.disposeIntermediateTensorInfo(ue),s.disposeIntermediateTensorInfo(de),s.disposeIntermediateTensorInfo(ye),s.disposeIntermediateTensorInfo(Ee),s.disposeIntermediateTensorInfo(Pe),s.disposeIntermediateTensorInfo(ge),s.disposeIntermediateTensorInfo(We),s.disposeIntermediateTensorInfo(le),s.disposeIntermediateTensorInfo(Ve),{real:Je,imag:at}}function T0e(t,e,n){const r=new Float32Array(e*2);for(let s=0;s<e;s++){let i=0,o=0;for(let a=0;a<e;a++){const l=rG(s*a,e,n),c=ED(t,a);i+=c.real*l.real-c.imag*l.imag,o+=c.real*l.imag+c.imag*l.real}n&&(i/=e,o/=e),tG(r,i,o,s)}return r}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k0e(t){const{inputs:e,backend:n}=t,{input:r}=e,s=fe(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=vn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=xq(a,!1,n),c=vn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const I0e={kernelName:ZC,backendName:"cpu",kernelFunc:k0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yP(t){const{backend:e,attrs:n}=t,{shape:r,value:s,dtype:i}=n,o=i||Dh(s),a=Yn(o,fe(r));return $0e(a,s,o),e.makeTensorInfo(r,o,a)}const N0e={kernelName:eE,backendName:"cpu",kernelFunc:yP};function $0e(t,e,n){t.fill(e)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A0e={kernelName:tE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,s=n,i=Pr(r.dtype,fe(r.shape)),[o,a,l,c]=r.shape,u=s.data.get(r.dataId).values;for(let h=0;h<o;h++){const f=h*l*a*c;for(let p=0;p<a;p++){const m=p*(l*c);for(let g=0;g<l;g++){const y=g*c;for(let b=0;b<c;b++){const v=Math.round(l-g-1),w=f+m+y+b;let C=u[w];if(v>=0&&v<l){const _=v*c,E=f+m+_+b;C=u[E]}i[w]=C}}}}return{dataId:s.write(i,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function R0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r;let m=vq({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(o){const g=m;if(u==="NCHW"&&o.shape.length===1&&o.shape[0]!==1){const y=vn({inputs:{x:o},backend:n,attrs:{shape:[o.shape[0],1,1]}});m=Mp({inputs:{a:m,b:y},backend:n}),n.disposeIntermediateTensorInfo(y)}else m=Mp({inputs:{a:m,b:o},backend:n});n.disposeIntermediateTensorInfo(g)}if(f){const g=m;if(u==="NCHW"&&f==="prelu"&&a.shape.length===1&&a.shape[0]!==1){const y=vn({inputs:{x:a},backend:n,attrs:{shape:[a.shape[0],1,1]}});m=LS(n,m,f,y,p),n.disposeIntermediateTensorInfo(y)}else m=LS(n,m,f,a,p);n.disposeIntermediateTensorInfo(g)}return m}const O0e={kernelName:fb,backendName:"cpu",kernelFunc:R0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function D0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r;let m=wq({inputs:{x:s,filter:i},backend:n,attrs:{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h}});if(o){const g=m;m=Mp({inputs:{a:m,b:o},backend:n}),n.disposeIntermediateTensorInfo(g)}if(f){const g=m;m=LS(n,m,f,a,p),n.disposeIntermediateTensorInfo(g)}return m}const P0e={kernelName:pb,backendName:"cpu",kernelFunc:D0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function L0e(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=fe(r.shape),o=s.shape,a=o[o.length-1],[l,c,u,d]=C_(r,s);if(c===0)return n.makeTensorInfo(l,r.dtype,[]);const h=n.data.get(s.dataId).values,f=n.bufferSync(r),p=AK(h,f,r.dtype,c,a,u,d,r.shape,i);return n.makeTensorInfo(l,r.dtype,p.values)}const F0e={kernelName:nE,backendName:"cpu",kernelFunc:L0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function M0e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r;Ye([s,i],"gatherV2");const l=Tt(o,s.shape)[0],c=n.data.get(i.dataId).values,u=s.shape[l];for(let w=0;w<c.length;++w){const C=c[w];P(C<=u-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${u-1}]`)}let d=a;a==null&&(d=0);const h=fe(i.shape),f=AD(s,i,l,d),p=vn({inputs:{x:s},backend:n,attrs:{shape:[f.batchSize,f.outerSize,f.dimSize,f.sliceSize]}}),m=vn({inputs:{x:i},backend:n,attrs:{shape:[f.batchSize,h/f.batchSize]}}),g=[f.batchSize,f.outerSize,h/f.batchSize,f.sliceSize],y=n.bufferSync(m),b=n.bufferSync(p),v=RK(b,y,g);return n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.makeTensorInfo(f.outputShape,v.dtype,v.values)}const z0e={kernelName:vv,backendName:"cpu",kernelFunc:M0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function B0e(t){const{inputs:e,backend:n}=t,{input:r}=e,s=fe(r.shape),i=r.shape[r.shape.length-1],o=s/i,a=vn({inputs:{x:r},backend:n,attrs:{shape:[o,i]}}),l=xq(a,!0,n),c=vn({inputs:{x:l},backend:n,attrs:{shape:r.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(l),c}const j0e={kernelName:rE,backendName:"cpu",kernelFunc:B0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V0e=en(Cm,t=>Number.isFinite(t)?1:0,"bool"),U0e={kernelName:Cm,backendName:"cpu",kernelFunc:V0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const W0e=en(Em,t=>Math.abs(t)===1/0?1:0,"bool"),H0e={kernelName:Em,backendName:"cpu",kernelFunc:W0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G0e=en(_m,t=>Number.isNaN(t)?1:0,"bool"),K0e={kernelName:_m,backendName:"cpu",kernelFunc:G0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q0e(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=FK(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const X0e={kernelName:iE,backendName:"cpu",kernelFunc:q0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y0e=en(km,t=>Math.log1p(t)),Q0e={kernelName:km,backendName:"cpu",kernelFunc:Y0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const J0e=ar((t,e)=>t&&e),Z0e=kr(Ev,J0e,null,"bool"),ewe={kernelName:Ev,backendName:"cpu",kernelFunc:Z0e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const twe=en(_v,t=>t?0:1,"bool"),nwe={kernelName:_v,backendName:"cpu",kernelFunc:twe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const rwe=ar((t,e)=>t||e),swe=kr(Tv,rwe,null,"bool"),iwe={kernelName:Tv,backendName:"cpu",kernelFunc:swe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function owe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r;Ye(s,"LRN");const c=s.shape[3],u=c-1,d=n.data.get(s.dataId).values,h=fe(s.shape),f=new Float32Array(h);function p(m){const g=m%c;let y=m-g+Math.max(0,g-i);const b=m-g+Math.min(g+i,u);let v=0;for(;y<=b;y++){const w=d[y];v+=w*w}return v}for(let m=0;m<h;m++){const g=p(m),y=d[m]*Math.pow(o+a*g,-l);f[m]=y}return n.makeTensorInfo(s.shape,s.dtype,f)}const awe={kernelName:kv,backendName:"cpu",kernelFunc:owe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function lwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r;Ye(o,"LRNGrad");const d=fe(o.shape),h=o.shape[3],f=n.data.get(o.dataId).values,p=n.data.get(s.dataId).values,m=n.data.get(i.dataId).values,g=new Float32Array(d),y=d;for(let b=0;b<y;b++){const v=b%h,w=b-v+Math.max(0,v-a),C=b-v+Math.min(h,v+a+1);let _=0;for(let E=w;E<C;E++)_+=Math.pow(p[E],2);_=c*_+l;for(let E=w;E<C;E++){let I=-2*c*u*p[E]*m[b]/_;b===E&&(I+=Math.pow(_,-u)),I*=f[b],g[E]+=I}}return n.makeTensorInfo(o.shape,s.dtype,g)}const cwe={kernelName:oE,backendName:"cpu",kernelFunc:lwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sq(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=n;let l=s.shape;const c=l.length,u=Tt(i,l);let d=u;const h=Gn(d,c);let f=a.data.get(s.dataId).values;if(h!=null){const w=new Array(c);for(let C=0;C<w.length;C++)w[C]=l[h[C]];f=hP(f,l,s.dtype,h,w),d=ir(d.length,c),l=w}Ye(s,"max"),qr("max",d,c);const[p,m]=Mr(l,d),g=fe(m),y=zK(f,g,p,s.dtype),b=a.write(y,p,s.dtype);let v=p;return o&&(v=sr(p,u)),{dataId:b,shape:v,dtype:s.dtype}}const uwe={kernelName:Iv,backendName:"cpu",kernelFunc:Sq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;Ye(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;P(Kr(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=zo(s.shape,i,o,c,a,l);let d;if(u.filterWidth===1&&u.filterHeight===1&&Nt(u.inShape,u.outShape))d=dl({inputs:{x:s},backend:n});else{const h=n.data.get(s.dataId).values,f=et(s.shape),p=mP(h,s.shape,s.dtype,f,u,"max");d=n.makeTensorInfo(u.outShape,s.dtype,p.values)}return d}const hwe={kernelName:Nv,backendName:"cpu",kernelFunc:dwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r;Ye(s,"maxPool3d");const u=uc(s.shape,i,o,1,a,l,c),d=n.data.get(s.dataId).values,h=bq(d,s.shape,s.dtype,et(s.shape),u,"max");return n.makeTensorInfo(h.shape,"float32",h.values)}const pwe={kernelName:$v,backendName:"cpu",kernelFunc:fwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mwe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,{filterSize:o,strides:a,pad:l,dimRoundingMode:c}=r;Ye([s,i],"maxPool3DGrad");const u=uc(i.shape,o,a,1,l,c),d=n.bufferSync(i),h=rve(d,u),f=u.strideDepth,p=u.strideHeight,m=u.strideWidth,g=u.dilationDepth,y=u.dilationHeight,b=u.dilationWidth,v=u.effectiveFilterDepth,w=u.effectiveFilterHeight,C=u.effectiveFilterWidth,_=v-1-u.padInfo.front,E=C-1-u.padInfo.left,I=w-1-u.padInfo.top,O=xt(i.shape,"float32"),R=n.bufferSync(s);for(let z=0;z<u.batchSize;++z)for(let B=0;B<u.inChannels;++B)for(let j=0;j<u.inDepth;++j)for(let G=0;G<u.inHeight;++G)for(let U=0;U<u.inWidth;++U){const Q=j-_,se=G-I,V=U-E;let W=0;for(let L=0;L<v;L+=g){const J=(Q+L)/f;if(!(J<0||J>=u.outDepth||Math.floor(J)!==J))for(let Z=0;Z<w;Z+=y){const ie=(se+Z)/p;if(!(ie<0||ie>=u.outHeight||Math.floor(ie)!==ie))for(let ue=0;ue<C;ue+=b){const de=(V+ue)/m;if(de<0||de>=u.outWidth||Math.floor(de)!==de)continue;const ye=v*w*C-1-h.get(z,J,ie,de,B),Ee=L*w*C+Z*C+ue,ge=ye===Ee?1:0;if(ge===0)continue;const Pe=R.get(z,J,ie,de,B);W+=Pe*ge}}}O.set(W,z,j,G,U,B)}return n.makeTensorInfo(O.shape,O.dtype,O.values)}const gwe={kernelName:lE,backendName:"cpu",kernelFunc:mwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ywe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;Ye([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=zo(a.shape,l,c,1,u,d),f=n.data.get(a.dataId).values,p=xt(h.outShape,a.dtype,yq(f,a.shape,a.dtype,h).values),m=h.strideHeight,g=h.strideWidth,y=h.dilationHeight,b=h.dilationWidth,v=h.effectiveFilterHeight,w=h.effectiveFilterWidth,C=w-1-h.padInfo.left,_=v-1-h.padInfo.top,E=xt(a.shape,"float32"),I=n.data.get(s.dataId).values,O=xt(s.shape,"float32",I);for(let R=0;R<h.batchSize;++R)for(let z=0;z<h.inChannels;++z)for(let B=0;B<h.inHeight;++B)for(let j=0;j<h.inWidth;++j){const G=B-_,U=j-C;let Q=0;for(let se=0;se<v;se+=y){const V=(G+se)/m;if(!(V<0||V>=h.outHeight||Math.floor(V)!==V))for(let W=0;W<w;W+=b){const L=(U+W)/g;if(L<0||L>=h.outWidth||Math.floor(L)!==L)continue;const J=v*w-1-p.get(R,V,L,z),Z=se*w+W,ie=J===Z?1:0;if(ie===0)continue;const ue=O.get(R,V,L,z);Q+=ue*ie}}E.set(Q,R,B,j,z)}return n.makeTensorInfo(E.shape,E.dtype,E.values)}const bwe={kernelName:aE,backendName:"cpu",kernelFunc:ywe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vwe(t,e,n,r,s){const i=et(e),o=mP(t,e,n,i,s,"max"),a=yq(t,e,n,s,!0,r);return[o.values,a.values]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wwe={kernelName:cE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;Ye(r,"MaxPoolWithArgmax");const c=l.data.get(r.dataId).values,u=zo(r.shape,s,i,[1,1],o),[d,h]=vwe(c,r.shape,r.dtype,a,u),f=l.write(d,u.outShape,r.dtype),p=l.write(h,u.outShape,r.dtype);return[{dataId:f,shape:u.outShape,dtype:r.dtype},{dataId:p,shape:u.outShape,dtype:"int32"}]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=Tt(i,s.shape),c=Mr(s.shape,a)[1],u=fe(c),d=[],h=n.makeTensorInfo([],"float32",new Float32Array([u]));d.push(h);const f=Nu({inputs:{x:s},backend:n,attrs:{dtype:"float32"}});d.push(f);const p=gP({inputs:{a:f,b:h},backend:n});d.push(p);const m=F0({inputs:{x:p},backend:n,attrs:{axis:i,keepDims:o}});return d.forEach(g=>n.disposeIntermediateTensorInfo(g)),m}const Swe={kernelName:Av,backendName:"cpu",kernelFunc:xwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;Ye(s,"min");const a=Tt(i,s.shape);let l=a;const c=Gn(l,s.shape.length);let u=s;c!=null&&(u=Us({inputs:{x:s},backend:n,attrs:{perm:c}}),l=ir(l.length,s.shape.length)),qr("min",l,u.shape.length);const[d,h]=Mr(u.shape,l),f=fe(h),p=Hr(fe(d),u.dtype),m=n.data.get(u.dataId).values;for(let y=0;y<p.length;++y){const b=y*f;let v=m[b];for(let w=0;w<f;++w){const C=m[b+w];(Number.isNaN(C)||C<v)&&(v=C)}p[y]=v}c!=null&&n.disposeIntermediateTensorInfo(u);const g=n.makeTensorInfo(d,u.dtype,p);if(o){const y=sr(d,a),b=vn({inputs:{x:g},backend:n,attrs:{shape:y}});return n.disposeIntermediateTensorInfo(g),b}return g}const Ewe={kernelName:Rv,backendName:"cpu",kernelFunc:Cwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _we(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,mode:o}=r;Ye(s,"mirrorPad");const a=i.map((v,w)=>v[0]+s.shape[w]+v[1]),l=i.map(v=>v[0]),c=i.map((v,w)=>v[0]+s.shape[w]),u=o==="reflect"?0:1,d=n.data.get(s.dataId).values,h=s.shape.length,f=et(s.shape),p=fe(a),m=a.length,g=et(a),y=Pr(s.dtype,p);for(let v=0;v<p;v++){let w=Ph(v,m,g);for(let _=0;_<m;_++)w[_]<l[_]?w[_]=l[_]*2-w[_]-u:w[_]>=c[_]&&(w[_]=(c[_]-1)*2-w[_]+u);w=w.map((_,E)=>_-l[E]);const C=ua(w,h,f);y[v]=d[C]}return{dataId:n.write(y,a,s.dtype),shape:a,dtype:s.dtype}}const Twe={kernelName:Ov,backendName:"cpu",kernelFunc:_we};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kwe=ar((t,e)=>{const n=t%e;return t<0&&e<0||t>=0&&e>=0?n:(n+e)%e}),Iwe=kr($m,kwe),Nwe={kernelName:$m,backendName:"cpu",kernelFunc:Iwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cq(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=s.shape.length;let a=i;if(a===-1&&(a=o-1),a!==o-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${o} and dim was ${a}`);const l=Tt([a],s.shape),c=Sq({inputs:{x:s},backend:n,attrs:{reductionIndices:l,keepDims:!1}}),u=sr(c.shape,l),d=vn({inputs:{x:c},backend:n,attrs:{shape:u}}),h=pP({inputs:{a:s,b:d},backend:n}),f=kK({inputs:{x:h},backend:n}),p=F0({inputs:{x:f},backend:n,attrs:{axis:l,keepDims:!1}}),m=vn({inputs:{x:p},backend:n,attrs:{shape:u}}),g=gP({inputs:{a:f,b:m},backend:n});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),g}const $we={kernelName:Qv,backendName:"cpu",kernelFunc:Cq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Awe(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r;Ye(s,"multinomial");const l=a?s:Cq({inputs:{logits:s},backend:n,attrs:{dim:-1}}),c=l.shape[0],u=l.shape[1],d=n.data.get(l.dataId).values,h=[c,i],f=Hr(fe(h),"int32");for(let p=0;p<c;++p){const m=p*u,g=new Float32Array(u-1);g[0]=d[m];for(let v=1;v<g.length;++v)g[v]=g[v-1]+d[m+v];const y=JE.alea(o.toString()),b=p*i;for(let v=0;v<i;++v){const w=y();f[b+v]=g.length;for(let C=0;C<g.length;C++)if(w<g[C]){f[b+v]=C;break}}}return a||n.disposeIntermediateTensorInfo(l),n.makeTensorInfo(h,"int32",f)}const Rwe={kernelName:uE,backendName:"cpu",kernelFunc:Awe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Owe=v_;function Dwe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r;Ye(s,"NonMaxSuppression");const c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,{selectedIndices:d}=Owe(c,u,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const Pwe={kernelName:dE,backendName:"cpu",kernelFunc:Dwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lwe=w_;function Fwe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r;Ye(s,"NonMaxSuppressionPadded");const u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,{selectedIndices:h,validOutputs:f}=Lwe(u,d,o,a,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const Mwe={kernelName:hE,backendName:"cpu",kernelFunc:Fwe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zwe=x_;function Bwe(t){const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r;Ye(s,"NonMaxSuppressionWithScore");const u=n.data.get(s.dataId).values,d=n.data.get(i.dataId).values,h=o,f=a,p=l,m=c,{selectedIndices:g,selectedScores:y}=zwe(u,d,h,f,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const jwe={kernelName:fE,backendName:"cpu",kernelFunc:Bwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vwe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r;Ye(s,"oneHot");const c=fe(s.shape),u=new Float32Array(c*o);u.fill(l);const d=n.data.get(s.dataId).values;for(let h=0;h<c;++h)d[h]>=0&&d[h]<o&&(u[h*o+d[h]]=a);return n.makeTensorInfo([...s.shape,o],i,u)}const Uwe={kernelName:Fv,backendName:"cpu",kernelFunc:Vwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function MS(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("zerosLike is not supported for string tensors");if(r.dtype==="complex64"){const s=wh({inputs:{input:r},backend:n}),i=MS({inputs:{x:s},backend:n}),o=zp({inputs:{input:r},backend:n}),a=MS({inputs:{x:o},backend:n}),l=si({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return yP({backend:n,attrs:{shape:r.shape,value:0,dtype:r.dtype}})}const Wwe={kernelName:t0,backendName:"cpu",kernelFunc:MS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Eq(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported for string tensors");if(r.dtype==="complex64"){const s=wh({inputs:{input:r},backend:n}),i=Eq({inputs:{x:s},backend:n}),o=zp({inputs:{input:r},backend:n}),a=MS({inputs:{x:o},backend:n}),l=si({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return yP({backend:n,attrs:{shape:r.shape,value:1,dtype:r.dtype}})}const Hwe={kernelName:Lv,backendName:"cpu",kernelFunc:Eq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _q(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return FS({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(u=>{Gr(i,u.shape,"All tensors passed to stack must have matching shapes"),P(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=FS({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(d),d}),c=Bp({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const Gwe={kernelName:Mv,backendName:"cpu",kernelFunc:_q};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Kwe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;Ye(s,"pad");const a=i.map((b,v)=>b[0]+s.shape[v]+b[1]),l=i.map(b=>b[0]),c=n.data.get(s.dataId).values,u=fe(s.shape),d=s.shape.length,h=et(s.shape),f=fe(a),p=a.length,m=et(a),g=Pr(s.dtype,f);o!==0&&g.fill(o);for(let b=0;b<u;b++){const w=Ph(b,d,h).map((_,E)=>_+l[E]),C=ua(w,p,m);g[C]=c[b]}return{dataId:n.write(g,a,s.dtype),shape:a,dtype:s.dtype}}const Tq={kernelName:zv,backendName:"cpu",kernelFunc:Kwe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qwe=ar((t,e)=>Math.pow(t,e)),Xwe=kr(Rm,qwe),Ywe={kernelName:Rm,backendName:"cpu",kernelFunc:Xwe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Qwe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,a=s.map(g=>n.data.get(g.dataId).values),l=s.map(g=>g.shape),c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values,[d,h,f]=HK(a,l,c,i.shape,i.dtype,u,o.shape),p=d.map(g=>n.makeTensorInfo([g.length],"int32",g)),m=n.makeTensorInfo(f,i.dtype,h);return p.concat([m])}const Jwe={kernelName:pE,backendName:"cpu",kernelFunc:Qwe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zwe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=GK(o,r.shape,r.dtype,a,s.shape,l,i.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],r.dtype,u);return[d,h]}const exe={kernelName:mE,backendName:"cpu",kernelFunc:Zwe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function txe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.data.get(s.dataId).values,u=n.data.get(i.dataId).values,d=n.data.get(o.dataId).values,h=a.map(g=>n.data.get(g.dataId).values),f=a.map(g=>g.shape),[p,m]=KK(c,s.shape,u,i.shape,i.dtype,d,o.shape,h,f,l);return n.makeTensorInfo(p,i.dtype,m)}const nxe={kernelName:gE,backendName:"cpu",kernelFunc:txe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rxe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,dtype:i,step:o}=n,a=qK(r,s,o,i);return e.makeTensorInfo([a.length],i,a)}const sxe={kernelName:yE,backendName:"cpu",kernelFunc:rxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ixe=en(Om,t=>1/t),oxe={kernelName:Om,backendName:"cpu",kernelFunc:ixe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function axe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;Ye(s,"resizeBilinear");const l=et(s.shape),[c,u]=a,[d,h,f,p]=s.shape,m=n.data.get(s.dataId).values,g=new Float32Array(fe([d,c,u,p])),y=[i&&c>1?h-1:h,i&&u>1?f-1:f],b=[i&&c>1?c-1:c,i&&u>1?u-1:u];let v=0;const w=y[0]/b[0],C=y[1]/b[1];for(let _=0;_<d;_++)for(let E=0;E<c;E++){let I;o?I=w*(E+.5)-.5:I=w*E;const O=Math.max(0,Math.floor(I)),R=I-O,z=Math.min(h-1,Math.ceil(I)),B=_*l[0]+O*l[1],j=_*l[0]+z*l[1];for(let G=0;G<u;G++){let U;o?U=C*(G+.5)-.5:U=C*G;const Q=Math.max(0,Math.floor(U)),se=U-Q,V=Math.min(f-1,Math.ceil(U)),W=B+Q*l[2],L=j+Q*l[2],J=B+V*l[2],Z=j+V*l[2];for(let ie=0;ie<p;ie++){const ue=m[W+ie],de=m[L+ie],ye=m[J+ie],Ee=m[Z+ie],ge=ue+(ye-ue)*se,Pe=de+(Ee-de)*se,We=ge+(Pe-ge)*R;g[v++]=We}}}return n.makeTensorInfo([d,c,u,p],"float32",g)}const lxe={kernelName:Wv,backendName:"cpu",kernelFunc:axe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cxe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;Ye([i,s],"resizeBilinearGrad");const a=et(s.shape),[l,c,u,d]=s.shape,[,h,f]=i.shape,p=new Float32Array(l*c*u*d),m=[o&&h>1?c-1:c,o&&f>1?u-1:u],g=[o&&h>1?h-1:h,o&&f>1?f-1:f],y=m[0]/g[0],b=m[1]/g[1],v=n.data.get(i.dataId).values;let w=0;for(let C=0;C<l;C++){const _=C*a[0];for(let E=0;E<h;E++){const I=E*y,O=Math.floor(I),R=Math.min(Math.ceil(I),c-1),z=_+O*a[1],B=_+R*a[1],j=I-O,G=1-j;for(let U=0;U<f;U++){const Q=U*b,se=Math.floor(Q),V=Math.min(Math.ceil(Q),u-1),W=Q-se,L=1-W,J=z+se*a[2],Z=z+V*a[2],ie=B+se*a[2],ue=B+V*a[2],de=G*L,ye=G*W,Ee=j*L,ge=j*W;for(let Pe=0;Pe<d;Pe++){const We=v[w++];p[J+Pe]+=We*de,p[Z+Pe]+=We*ye,p[ie+Pe]+=We*Ee,p[ue+Pe]+=We*ge}}}}return n.makeTensorInfo([l,u,c,d],"float32",p)}const uxe={kernelName:wE,backendName:"cpu",kernelFunc:cxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dxe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r;Ye(s,"resizeNearestNeighbor");const l=et(s.shape),[c,u]=a,[d,h,f,p]=s.shape,m=n.data.get(s.dataId).values,g=new Float32Array(d*c*u*p),y=[i&&c>1?h-1:h,i&&u>1?f-1:f],b=[i&&c>1?c-1:c,i&&u>1?u-1:u],v=y[0]/b[0],w=y[1]/b[1];let C=0;for(let _=0;_<d;_++){const E=_*l[0];for(let I=0;I<c;I++){const O=o?v*(I+.5):v*I;let R=Math.min(h-1,i?Math.round(O):Math.floor(O));o&&(R=Math.max(0,R));const z=E+R*l[1];for(let B=0;B<u;B++){const j=o?w*(B+.5):w*B;let G=Math.min(f-1,i?Math.round(j):Math.floor(j));o&&(G=Math.max(0,G));const U=z+G*l[2];for(let Q=0;Q<p;Q++){const se=m[U+Q];g[C++]=se}}}}return n.makeTensorInfo([d,c,u,p],s.dtype,g)}const hxe={kernelName:Uv,backendName:"cpu",kernelFunc:dxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fxe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r;Ye([i,s],"resizeNearestNeighborGrad");const a=et(s.shape),l=et(i.shape),[c,u,d,h]=s.shape,[,f,p]=i.shape,m=new Float32Array(c*u*d*h),g=n.data.get(i.dataId).values,y=[o&&f>1?u-1:u,o&&p>1?d-1:d],b=[o&&f>1?f-1:f,o&&p>1?p-1:p],v=y[0]/b[0],w=y[1]/b[1],C=1/v,_=1/w,E=Math.ceil(C)*2+2,I=Math.ceil(_)*2+2;for(let O=0;O<c;O++){const R=O*a[0];for(let z=0;z<u;z++){const B=R+z*a[1],j=Math.floor(z*C),G=Math.floor(j-E/2);for(let U=0;U<d;U++){const Q=B+U*a[2],se=Math.floor(U*_),V=Math.floor(se-I/2);for(let W=0;W<h;W++){let L=0;for(let J=0;J<E;J++){const Z=J+G;if(Z<0||Z>=f)continue;const ie=R+Z*l[1],ue=Z*v,de=Math.min(u-1,o?Math.round(ue):Math.floor(ue));if(z===de)for(let ye=0;ye<I;ye++){const Ee=ye+V;if(Ee<0||Ee>=p)continue;const ge=ie+Ee*l[2],Pe=Ee*w,We=Math.min(d-1,o?Math.round(Pe):Math.floor(Pe));U===We&&(L+=g[ge+W])}}m[Q+W]=L}}}}return n.makeTensorInfo(s.shape,s.dtype,m)}const pxe={kernelName:vE,backendName:"cpu",kernelFunc:fxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function mxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r;Ye(s,"reverse");const o=s.shape.length,a=Tt(i,s.shape);if(o===0)return dl({inputs:{x:s},backend:n});const l=new dr(s.shape,s.dtype),c=n.bufferSync(s);for(let u=0;u<l.size;u++){const d=l.indexToLoc(u),h=d.slice();a.forEach(f=>h[f]=s.shape[f]-1-h[f]),l.set(c.get(...h),...d)}return n.makeTensorInfo(l.shape,l.dtype,l.values)}const gxe={kernelName:Hv,backendName:"cpu",kernelFunc:mxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const yxe={kernelName:FE,backendName:"cpu",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=Pr(r.dtype,fe(r.shape)),[c,u,d,h]=r.shape,[f,p]=mD(o,u,d),m=255,g=Math.sin(s),y=Math.cos(s),b=a.data.get(r.dataId).values;for(let w=0;w<c;w++){const C=w*d*u*h;for(let _=0;_<u;_++){const E=_*(d*h);for(let I=0;I<d;I++){const O=I*h;for(let R=0;R<h;R++){const z=[c,_,I,R],B=z[2],j=z[1];let G=(B-f)*y-(j-p)*g,U=(B-f)*g+(j-p)*y;G=Math.round(G+f),U=Math.round(U+p);let Q=i;if(typeof i!="number"&&(R===3?Q=m:Q=i[R]),G>=0&&G<d&&U>=0&&U<u){const V=U*(d*h),W=G*h,L=C+V+W+R;Q=b[L]}const se=C+E+O+R;l[se]=Q}}}}return{dataId:a.write(l,r.shape,r.dtype),shape:r.shape,dtype:r.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bxe=en(Lm,t=>{const e=Math.floor(t);return t-e<.5?Math.floor(t):t-e>.5?Math.ceil(t):e%2===0?e:e+1}),vxe={kernelName:Lm,backendName:"cpu",kernelFunc:bxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function wxe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=ju(i,s,o),h=!0,f=n.bufferSync(s),p=n.bufferSync(i),m=jd(f,p,o,d,c,l,a,u,0,h);return n.makeTensorInfo(o,m.dtype,m.values)}const xxe={kernelName:xE,backendName:"cpu",kernelFunc:wxe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sxe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<e?n=s+1:r=s;return r}function Cxe(t,e){let n=0,r=t.length,s=0;for(;n<r;)s=Math.floor((n+r)/2),t[s]<=e?n=s+1:r=s;return r}function Exe(t,e,n,r,s,i){const o=Yn("int32",n*s);for(let a=0;a<n;++a){const l=t.slice(a*r,(a+1)*r),c=a*s;for(let u=0;u<s;++u)o[c+u]=i==="left"?Sxe(l,e[u+c]):Cxe(l,e[u+c])}return o}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _xe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,c=Exe(a,l,s.shape[0],s.shape[1],i.shape[1],o);return n.makeTensorInfo(i.shape,"int32",c)}const Txe={kernelName:CE,backendName:"cpu",kernelFunc:_xe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function kxe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e;Ye([r,s,i],"select");const o=r.shape.length,a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=Ms(s.dtype,i.dtype),d=Hr(fe(s.shape),u);let h=0;const f=o===0||o>1||s.shape.length===1?1:fe(s.shape.slice(1));for(let p=0;p<a.length;p++)for(let m=0;m<f;m++)a[p]===1?d[h++]=l[p]:d[h++]=c[p];return n.makeTensorInfo(s.shape,u,d)}const Ixe={kernelName:Gv,backendName:"cpu",kernelFunc:kxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nxe=T_,$xe=k_,Axe=en(Mm,t=>t>=0?$xe*t:Nxe*(Math.exp(t)-1)),Rxe={kernelName:Mm,backendName:"cpu",kernelFunc:Axe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oxe=en(jm,t=>t<0?-1:t>0?1:0),Dxe={kernelName:jm,backendName:"cpu",kernelFunc:Oxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pxe=en(zm,t=>Math.sin(t)),Lxe={kernelName:zm,backendName:"cpu",kernelFunc:Pxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fxe=en(Bm,t=>Math.sinh(t)),Mxe={kernelName:Bm,backendName:"cpu",kernelFunc:Fxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zxe=11920928955078125e-23,dz=Math.log(zxe)+2,Bxe=en(Um,t=>{const e=t>-dz,n=t<dz,r=Math.exp(t);let s;return n?s=r:e?s=t:s=Math.log(1+r),s}),jxe={kernelName:Um,backendName:"cpu",kernelFunc:Bxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vxe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;Ye([s],"spaceToBatchND");const a=fe(i),l=[[0,0]];l.push(...o);for(let _=1+i.length;_<s.shape.length;++_)l.push([0,0]);const c=Tq.kernelFunc({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),u=C0(c.shape,i,a,!1),d=E0(u.length,i.length,!1),h=_0(c.shape,i,a,!1),m=vn({inputs:{x:c},backend:n,attrs:{shape:u}}),b=Us({inputs:{x:m},backend:n,attrs:{perm:d}}),C=vn({inputs:{x:b},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(b),C}const Uxe={kernelName:Xv,backendName:"cpu",kernelFunc:Vxe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wxe(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
        ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
        ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.data.get(r.dataId).values,l=n.data.get(s.dataId).values,c=n.data.get(i.dataId).values,u=n.data.get(o.dataId).values[0],[d,h,f,p,m]=JK(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],s.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const Hxe={kernelName:EE,backendName:"cpu",kernelFunc:Wxe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gxe(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape
        ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape
        ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.data.get(s.dataId).values),a=n.data.get(r.dataId).values,l=Array.from(n.data.get(i.dataId).values),[c,u,d]=ZK(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const Kxe={kernelName:_E,backendName:"cpu",kernelFunc:Gxe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qxe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
          ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
          ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=fP(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const Xxe={kernelName:TE,backendName:"cpu",kernelFunc:qxe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Yxe(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
         ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
         ${i.shape}`);if(s.shape[0]!==i.shape[0])throw new Error("segmentIds and indices should have same size.");const o=n.data.get(r.dataId).values,a=n.data.get(s.dataId).values,l=n.data.get(i.dataId).values,[c,u]=fP(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const Qxe={kernelName:kE,backendName:"cpu",kernelFunc:Yxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Jxe(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=ju(i,s,a),f=!1,p=n.bufferSync(s);let m;switch(i.dtype){case"bool":{const g=n.bufferSync(i),y=!!n.data.get(o.dataId).values[0];m=jd(p,g,a,h,u,c,l,d,y,f);break}case"float32":{const g=n.bufferSync(i),y=n.data.get(o.dataId).values[0];m=jd(p,g,a,h,u,c,l,d,y,f);break}case"int32":{const g=n.bufferSync(i),y=n.data.get(o.dataId).values[0];m=jd(p,g,a,h,u,c,l,d,y,f);break}case"string":{const g=n.bufferSync(i),y=Ql(n.data.get(o.dataId).values[0]);m=jd(p,g,a,h,u,c,l,d,y,f);break}default:throw new Error(`Unsupported type ${i.dtype}`)}return n.makeTensorInfo(a,m.dtype,m.values)}const Zxe={kernelName:IE,backendName:"cpu",kernelFunc:Jxe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function e1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=Tt(o,s.shape)[0],l=$D(s,i,a),c=new Array(s.shape.length).fill(0),u=s.shape.slice();return l.map(d=>{const h=[...u];h[a]=d;const f=xh({inputs:{x:s},backend:n,attrs:{begin:c,size:h}});return c[a]+=d,f})}const t1e={kernelName:Yv,backendName:"cpu",kernelFunc:e1e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n1e={kernelName:NE,backendName:"cpu",kernelFunc:({inputs:t,backend:e})=>{const{x:n}=t,r=e;Ye(n,"square");const s=r.data.get(n.dataId).values,i=new Float32Array(s.length);for(let a=0;a<s.length;++a){const l=s[a];i[a]=l*l}return{dataId:r.write(i,n.shape,n.dtype),shape:n.shape,dtype:n.dtype}}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const r1e=en(Ym,(t,e)=>{const n=e;return isNaN(t)?NaN:t>0?1:n.alpha}),s1e={kernelName:Ym,backendName:"cpu",kernelFunc:r1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r;Ye(s,"stridedSlice");const{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:v,strides:w}=dD(s.shape,i,o,a,l,c,u,d,h);let C;if(m)C=vn({inputs:{x:s},backend:n,attrs:{shape:p}});else if(g||y){P(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const _=lD(b,v,w),E=xh({inputs:{x:s},backend:n,attrs:{begin:b,size:_}});C=vn({inputs:{x:E},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(E)}else{const _=n.bufferSync(s),E=nq(f,_,w,b);C=n.makeTensorInfo(p,E.dtype,E.values)}return C}const o1e={kernelName:$E,backendName:"cpu",kernelFunc:i1e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function a1e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,h=n.data.get(u.dataId).values,f=n.data.get(d.dataId).values,[p,m]=rq(h,f,s,i,o,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const l1e={kernelName:AE,backendName:"cpu",kernelFunc:a1e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c1e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.data.get(i.dataId).values,l=n.data.get(o.dataId).values[0],[c,u,d]=sq(a,l,s),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const u1e={kernelName:RE,backendName:"cpu",kernelFunc:c1e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function d1e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.data.get(i.dataId).values,a=iq(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const h1e={kernelName:OE,backendName:"cpu",kernelFunc:d1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f1e=en(Km,t=>Math.tan(t)),p1e={kernelName:Km,backendName:"cpu",kernelFunc:f1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m1e=en(qm,t=>Math.tanh(t)),g1e={kernelName:qm,backendName:"cpu",kernelFunc:m1e};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y1e(t){const{inputs:e,backend:n}=t,{tensor:r,indices:s,updates:i}=e,{sliceRank:o,numUpdates:a,sliceSize:l,strides:c,outputSize:u}=ju(i,s,r.shape),d=!1,h=n.bufferSync(s),f=n.bufferSync(i),p=n.bufferSync(r),m=jd(h,f,r.shape,u,l,a,o,c,p,d);return n.makeTensorInfo(r.shape,m.dtype,m.values)}const b1e={kernelName:SE,backendName:"cpu",kernelFunc:y1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function v1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;Ye(s,"tile");const o=aq(n.bufferSync(s),i);return n.makeTensorInfo(o.shape,o.dtype,o.values)}const w1e={kernelName:Xm,backendName:"cpu",kernelFunc:v1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function x1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r;Ye(s,"topk");const a=n.data.get(s.dataId).values,[l,c]=cq(a,s.shape,s.dtype,i,o);return[n.makeTensorInfo(l.shape,l.dtype,l.values),n.makeTensorInfo(c.shape,c.dtype,c.values)]}const S1e={kernelName:DE,backendName:"cpu",kernelFunc:x1e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C1e(t){const{inputs:e,attrs:n,backend:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=n,[u,d,h,f]=s.shape,[p,m]=c??[d,h],g=[u,p,m,f],y=et(s.shape),b=y[0],v=y[1],w=y[2],C=et(g),_=C[0],E=C[1],I=C[2],O=Pr(s.dtype,fe(g));O.fill(l);const R=r.data.get(s.dataId).values,z=r.data.get(i.dataId).values;for(let j=0;j<u;++j){const G=i.shape[0]===1?z:z.subarray(j*8,j*8+8);for(let U=0;U<p;++U)for(let Q=0;Q<m;++Q)for(let se=0;se<f;++se){let V;const W=G[6]*Q+G[7]*U+1;if(W===0)continue;const L=(G[0]*Q+G[1]*U+G[2])/W,J=(G[3]*Q+G[4]*U+G[5])/W,Z=hz(L,h,a),ie=hz(J,d,a);switch(o){case"nearest":V=N1e(R,d,h,b,v,w,j,ie,Z,se,l);break;case"bilinear":V=$1e(R,d,h,b,v,w,j,ie,Z,se,l);break;default:throw new Error(`Error in Transform: Expect 'nearest' or 'bilinear', but got ${o}`)}const ue=j*_+U*E+Q*I+se;O[ue]=V}return r.makeTensorInfo(g,s.dtype,O)}return{dataId:r.write(O,g,s.dtype),shape:s.shape,dtype:s.dtype}}const E1e={kernelName:PE,backendName:"cpu",kernelFunc:C1e};function hz(t,e,n){switch(n){case"reflect":return _1e(t,e);case"wrap":return T1e(t,e);case"nearest":return I1e(t,e);case"constant":default:return k1e(t)}}function _1e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=2*e;n<r&&(n=r*Math.trunc(-n/r)+n),n=n<-e?n+r:-n-1}else if(n>e-1)if(e<=1)n=0;else{const r=2*e;n-=r*Math.trunc(n/r),n>=e&&(n=r-n-1)}return yu(0,n,e-1)}function T1e(t,e){let n=t;if(n<0)if(e<=1)n=0;else{const r=e-1;n+=e*(Math.trunc(-n/r)+1)}else if(n>e-1)if(e<=1)n=0;else{const r=e-1;n-=e*Math.trunc(n/r)}return yu(0,n,e-1)}function k1e(t,e){return t}function I1e(t,e){return yu(0,t,e-1)}function xy(t,e,n,r,s,i,o,a,l,c,u){const d=o*r+a*s+l*i+c;return 0<=a&&a<e&&0<=l&&l<n?t[d]:u}function N1e(t,e,n,r,s,i,o,a,l,c,u){const d=Math.round(a),h=Math.round(l);return xy(t,e,n,r,s,i,o,d,h,c,u)}function $1e(t,e,n,r,s,i,o,a,l,c,u){const d=Math.floor(a),h=Math.floor(l),f=d+1,p=h+1,m=(p-l)*xy(t,e,n,r,s,i,o,d,h,c,u)+(l-h)*xy(t,e,n,r,s,i,o,d,p,c,u),g=(p-l)*xy(t,e,n,r,s,i,o,f,h,c,u)+(l-h)*xy(t,e,n,r,s,i,o,f,p,c,u);return(f-a)*m+(a-d)*g}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A1e(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;Ye(i,"unique");const o=r.data.get(i.dataId).values,{outputValues:a,outputShape:l,indices:c}=uq(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const R1e={kernelName:LE,backendName:"cpu",kernelFunc:A1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O1e(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s.shape.length,a=s.shape[i],l=new Array(o-1);let c=0;for(let f=0;f<o;f++)f!==i&&(l[c++]=s.shape[f]);const u=new Array(o).fill(0),d=s.shape.slice();d[i]=1;const h=new Array(a);for(let f=0;f<h.length;f++){u[i]=f;const p=xh({inputs:{x:s},backend:n,attrs:{begin:u,size:d}});h[f]=vn({inputs:{x:p},backend:n,attrs:{shape:l}}),n.disposeIntermediateTensorInfo(p)}return h}const D1e={kernelName:Zv,backendName:"cpu",kernelFunc:O1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function P1e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r;Ye(s,"unsortedSegmentSum");const a=s.shape.length,l=i.shape.length,c=[],u=[],d=a-l;let h=i;for(let p=0;p<d;++p){const m=FS({inputs:{input:h},backend:n,attrs:{dim:p+1}});h=m,u.push(m)}for(let p=0;p<o;++p){const m=cc(p,"int32"),g=n.makeTensorInfo([],"int32",m),y=_K({inputs:{a:g,b:h},backend:n}),b=Nu({inputs:{x:y},backend:n,attrs:{dtype:"float32"}}),v=W_({inputs:{a:b,b:s},backend:n}),w=F0({inputs:{x:v},backend:n,attrs:{axis:0,keepDims:!1}});c.push(w),u.push(g),u.push(y),u.push(b),u.push(v),u.push(w)}const f=_q({inputs:c,backend:n,attrs:{axis:0}});return u.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const L1e={kernelName:e0,backendName:"cpu",kernelFunc:P1e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F1e=[Abe,dye,Obe,Pbe,yye,Fbe,zbe,jbe,Ube,Hbe,Kbe,Xbe,Qbe,eve,nve,ive,ave,cve,dve,Nbe,fve,mve,yve,vye,vve,mye,xye,xve,hye,Cve,_ve,Tve,Ive,$ve,Rve,Dve,Lve,Mve,Bve,Vve,Wve,Gve,qve,Yve,Qve,Zve,t0e,r0e,s0e,i0e,o0e,l0e,d0e,Sbe,f0e,Sye,x0e,Cye,S0e,_ye,I0e,N0e,A0e,kye,Nye,O0e,P0e,F0e,z0e,Aye,Oye,fye,j0e,Eve,U0e,H0e,K0e,Cbe,Pye,Fye,X0e,zye,Q0e,ewe,nwe,iwe,awe,cwe,uwe,jye,hwe,pwe,gwe,bwe,wwe,Swe,Ewe,Uye,Twe,Nwe,Rwe,Hye,Kye,Pwe,Mwe,jwe,Xye,Uwe,Hwe,Gwe,Tq,Ywe,_be,Jye,Jwe,exe,nxe,sxe,pye,LA,oxe,Tbe,kbe,Ibe,lxe,uxe,hxe,pxe,gxe,yxe,vxe,obe,xxe,Txe,Ixe,Rxe,lbe,Dxe,Lxe,Mxe,cbe,$we,jxe,Uxe,Hxe,Kxe,Xxe,Qxe,Zxe,t1e,hbe,n1e,pbe,gbe,s1e,o1e,l1e,u1e,h1e,wbe,c0e,p1e,g1e,b1e,w1e,S1e,E1e,Yye,R1e,D1e,L1e,Wwe];for(const t of F1e)ME(t);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Nd={},Bx={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function M1e(t,e){Nd[t]=e}function ya(t,e){if(!(t in Nd)||e!=null){const r=B1e(t,e);if(r!==null)Nd[t]=r;else return console.log("Could not get context for WebGL version",t),null}const n=Nd[t];return n==null||n.isContextLost()?(delete Nd[t],ya(t)):(n.disable(n.DEPTH_TEST),n.disable(n.STENCIL_TEST),n.disable(n.BLEND),n.disable(n.DITHER),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SAMPLE_COVERAGE),n.enable(n.SCISSOR_TEST),n.enable(n.CULL_FACE),n.cullFace(n.BACK),Nd[t])}function z1e(t){if(!ce().getBool("IS_SAFARI")&&typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function B1e(t,e){if(t!==1&&t!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");const n=e??z1e(t);return n.addEventListener("webglcontextlost",r=>{r.preventDefault(),delete Nd[t]},!1),ce().getBool("SOFTWARE_WEBGL_ENABLED")&&(Bx.failIfMajorPerformanceCaveat=!1),t===1?n.getContext("webgl",Bx)||n.getContext("experimental-webgl",Bx):n.getContext("webgl2",Bx)}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var Nb;(function(t){t[t.DENSE=0]="DENSE",t[t.SHARED_BATCH=1]="SHARED_BATCH"})(Nb||(Nb={}));var Mi;(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(Mi||(Mi={}));var Vr;(function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"})(Vr||(Vr={}));function M0(t,e){return[e,t]}function j1e(t,e){return t*e}function jx(t){const e=fe(t),n=Math.ceil(e/4);return uS(n)}function cg(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function V1e(t,e){const[n,r]=cg(t,e);return n*r*4}function bP(t,e){const n=t;let r,s,i,o,a,l,c,u,d,h;return ce().getNumber("WEBGL_VERSION")===2?(r=n.R32F,s=n.R16F,i=n.RGBA16F,o=n.RGBA32F,a=n.RED,c=4,u=1,d=n.HALF_FLOAT,h=n.FLOAT,l=n.RGBA8):(r=t.RGBA,s=t.RGBA,i=t.RGBA,o=n.RGBA,a=t.RGBA,c=4,u=4,d=e!=null?e.HALF_FLOAT_OES:null,h=t.FLOAT,l=t.RGBA),{internalFormatFloat:r,internalFormatHalfFloat:s,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:l,downloadUnpackNumChannels:c,defaultNumChannels:u,textureTypeHalfFloat:d,textureTypeFloat:h}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Me(t,e){const n=e();return ce().getBool("DEBUG")&&U1e(t),n}function U1e(t){const e=t.getError();if(e!==t.NO_ERROR)throw new Error("WebGL Error: "+K1e(t,e))}const W1e=596e-10,H1e=65504;function G1e(t){return!!(ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||W1e<Math.abs(t)&&Math.abs(t)<H1e)}function K1e(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return`Unknown error code ${e}`}}function Vx(t,e){return gc(t,()=>t.getExtension(e),'Extension "'+e+'" not supported on this browser.')}function q1e(t,e){const n=gc(t,()=>t.createShader(t.VERTEX_SHADER),"Unable to create vertex WebGLShader.");if(Me(t,()=>t.shaderSource(n,e)),Me(t,()=>t.compileShader(n)),t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(n)),new Error("Failed to compile vertex shader.");return n}function X1e(t,e){const n=gc(t,()=>t.createShader(t.FRAGMENT_SHADER),"Unable to create fragment WebGLShader.");if(Me(t,()=>t.shaderSource(n,e)),Me(t,()=>t.compileShader(n)),ce().get("ENGINE_COMPILE_ONLY"))return n;if(t.getShaderParameter(n,t.COMPILE_STATUS)===!1)throw kq(e,t.getShaderInfoLog(n)),new Error("Failed to compile fragment shader.");return n}const Y1e=/ERROR: [0-9]+:([0-9]+):/g;function kq(t,e){const n=Y1e.exec(e);if(n==null){console.log(`Couldn't parse line number in error: ${e}`),console.log(t);return}const r=+n[1],s=t.split(`
`),i=s.length.toString().length+2,o=s.map((d,h)=>Kd((h+1).toString(),i)+d);let a=0;for(let d=0;d<o.length;d++)a=Math.max(o[d].length,a);const l=o.slice(0,r-1),c=o.slice(r-1,r),u=o.slice(r);console.log(l.join(`
`)),console.log(e.split(`
`)[0]),console.log(`%c ${Kd(c[0],a)}`,"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(u.join(`
`))}function Q1e(t){return gc(t,()=>t.createProgram(),"Unable to create WebGLProgram.")}function J1e(t,e){if(Me(t,()=>t.linkProgram(e)),!ce().get("ENGINE_COMPILE_ONLY")&&t.getProgramParameter(e,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Failed to link vertex and fragment shaders.")}function eN(t,e){if(Me(t,()=>t.validateProgram(e)),t.getProgramParameter(e,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(e)),new Error("Shader program validation failed.")}function Z1e(t,e){const n=gc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Me(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),Me(t,()=>t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function eSe(t,e){const n=gc(t,()=>t.createBuffer(),"Unable to create WebGLBuffer");return Me(t,()=>t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,n)),Me(t,()=>t.bufferData(t.ELEMENT_ARRAY_BUFFER,e,t.STATIC_DRAW)),n}function tSe(t){return gc(t,()=>t.createTexture(),"Unable to create WebGLTexture.")}function nSe(t,e){const n=ce().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){const r=`[${t}x${e}]`;throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n){const r=`[${t}x${e}]`,s=`[${n}x${n}]`;throw new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+s+".")}}function rSe(t){return gc(t,()=>t.createFramebuffer(),"Unable to create WebGLFramebuffer.")}function fz(t,e,n,r,s,i,o){const a=t.getAttribLocation(e,n);return a===-1?!1:(Me(t,()=>t.bindBuffer(t.ARRAY_BUFFER,r)),Me(t,()=>t.vertexAttribPointer(a,s,t.FLOAT,!1,i,o)),Me(t,()=>t.enableVertexAttribArray(a)),!0)}function sSe(t,e,n){cSe(t,n),Me(t,()=>t.activeTexture(t.TEXTURE0+n)),Me(t,()=>t.bindTexture(t.TEXTURE_2D,e))}function iSe(t,e,n){return gc(t,()=>t.getUniformLocation(e,n),'uniform "'+n+'" not present in program.')}function oSe(t,e,n){return t.getUniformLocation(e,n)}function aSe(t,e,n,r){Me(t,()=>sSe(t,e,r)),Me(t,()=>t.uniform1i(n,r))}function tN(t,e,n){Me(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,n)),Me(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0))}function pz(t,e){Me(t,()=>t.bindFramebuffer(t.FRAMEBUFFER,e)),Me(t,()=>t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0))}function Ux(t){const e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+lSe(t,e))}function lSe(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return`unknown error ${e}`}}function gc(t,e,n){const r=Me(t,()=>e());if(r==null)throw new Error(n);return r}function cSe(t,e){const n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n){const s=`[gl.TEXTURE0, gl.TEXTURE${n}]`;throw new Error(`textureUnit must be in ${s}.`)}}function jp(t,e=2){return fe(t.slice(0,t.length-e))}function Vp(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Wx(t){let e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[jp(t),...Vp(t)]),e}function uSe(t,e=!1){let n=ce().getNumber("WEBGL_MAX_TEXTURE_SIZE"),r=ce().getNumber("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE");r===1/0&&ce().getBool("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE")&&(r=n/2),e&&(n=n*2,r=r*2,t=t.map((a,l)=>l>=t.length-2?AC(t[l]):t[l]),t.length===1&&(t=[2,t[0]])),t.length!==2&&(t=lc(t).newShape);let s=fe(t),i=null;t.length<=1&&s<=n?i=[1,s]:t.length===2&&t[0]<=n&&t[1]<=n?i=t:t.length===3&&t[0]*t[1]<=n&&t[2]<=n?i=[t[0]*t[1],t[2]]:t.length===3&&t[0]<=n&&t[1]*t[2]<=n?i=[t[0],t[1]*t[2]]:t.length===4&&t[0]*t[1]*t[2]<=n&&t[3]<=n?i=[t[0]*t[1]*t[2],t[3]]:t.length===4&&t[0]<=n&&t[1]*t[2]*t[3]<=n&&(i=[t[0],t[1]*t[2]*t[3]]);const o=i!=null&&Math.max(...i)>r&&Math.min(...i)<=(e?2:1)&&Math.min(...i)>0;if(i==null||o)if(e){const a=jp(t);let l=2,c=2;t.length&&([l,c]=Vp(t)),s=a*(l/2)*(c/2),i=uS(s).map(u=>u*2)}else i=uS(s);return i}function Hx(t){return t%2===0}function zS(t,e){if(t=t.slice(-2),e=e.slice(-2),Nt(t,e)||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){const n=t[t.length-1],r=e[e.length-1];if(n===r||Hx(n)&&Hx(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&Hx(t[0])&&Hx(e[0])}let nN,rN;function dSe(t){if(nN==null){const e=ya(t);nN=e.getParameter(e.MAX_TEXTURE_SIZE)}return nN}function hSe(t){if(rN==null){const e=ya(t);rN=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,rN)}function fSe(t){if(t===0)return 0;let e;const n=ya(t);return _o(n,"EXT_disjoint_timer_query_webgl2")&&t===2?e=2:_o(n,"EXT_disjoint_timer_query")?e=1:e=0,e}function _o(t,e){return t.getExtension(e)!=null}function mz(t){try{if(ya(t)!=null)return!0}catch(e){return console.log("Error when getting WebGL context: ",e),!1}return!1}function pSe(t){if(t===0)return!1;const e=ya(t);if(t===1){if(!_o(e,"OES_texture_float"))return!1}else if(!_o(e,"EXT_color_buffer_float"))return!1;return MA(e)}function mSe(t){if(t===0)return!1;const e=ya(t);if(t===1){if(!_o(e,"OES_texture_float")||!_o(e,"WEBGL_color_buffer_float"))return!1}else{if(_o(e,"EXT_color_buffer_float"))return MA(e);const r="EXT_color_buffer_half_float";if(_o(e,r)){const s=e.getExtension(r);return gSe(e,s)}return!1}return MA(e)}function MA(t){const e=bP(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);const i=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,i),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);const o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(i),o}function gSe(t,e){const n=bP(t,e),r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,r,0);const a=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(r),t.deleteFramebuffer(o),a}function ySe(t){return t!==2?!1:ya(t).fenceSync!=null}function z0(t,e){Array.isArray(t)||(t=[t]),t.forEach(n=>{n!=null&&P(n.dtype!=="complex64",()=>`${e} does not support complex64 tensors in the WebGL backend.`)})}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Qe=ce();Qe.registerFlag("HAS_WEBGL",()=>Qe.getNumber("WEBGL_VERSION")>0);Qe.registerFlag("WEBGL_VERSION",()=>mz(2)?2:mz(1)?1:0);Qe.registerFlag("WEBGL_CHECK_NUMERICAL_PROBLEMS",()=>!1);Qe.registerFlag("WEBGL_BUFFER_SUPPORTED",()=>Qe.get("WEBGL_VERSION")===2);Qe.registerFlag("WEBGL_CPU_FORWARD",()=>!0);Qe.registerFlag("WEBGL_FORCE_F16_TEXTURES",()=>!1);Qe.registerFlag("WEBGL_PACK",()=>Qe.getBool("HAS_WEBGL"));Qe.registerFlag("WEBGL_PACK_NORMALIZATION",()=>Qe.getBool("WEBGL_PACK"));Qe.registerFlag("WEBGL_PACK_CLIP",()=>Qe.getBool("WEBGL_PACK"));Qe.registerFlag("WEBGL_PACK_DEPTHWISECONV",()=>Qe.getBool("WEBGL_PACK"));Qe.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",()=>Qe.getBool("WEBGL_PACK"));Qe.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",()=>Qe.getBool("WEBGL_PACK"));Qe.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",()=>Qe.getBool("WEBGL_PACK"));Qe.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",()=>Qe.getBool("WEBGL_PACK"));Qe.registerFlag("WEBGL_PACK_REDUCE",()=>Qe.getBool("WEBGL_PACK"));Qe.registerFlag("WEBGL_LAZILY_UNPACK",()=>Qe.getBool("WEBGL_PACK"));Qe.registerFlag("WEBGL_CONV_IM2COL",()=>Qe.getBool("WEBGL_PACK"));Qe.registerFlag("WEBGL_PACK_CONV2DTRANSPOSE",()=>Qe.getBool("WEBGL_PACK"));Qe.registerFlag("WEBGL_MAX_TEXTURE_SIZE",()=>dSe(Qe.getNumber("WEBGL_VERSION")));Qe.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",()=>hSe(Qe.getNumber("WEBGL_VERSION")));Qe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",()=>{const t=Qe.getNumber("WEBGL_VERSION");return t===0?0:fSe(t)});Qe.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",()=>Qe.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&!DR());Qe.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",()=>pSe(Qe.getNumber("WEBGL_VERSION")));Qe.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",()=>Qe.getBool("WEBGL_FORCE_F16_TEXTURES")?!1:Qe.getBool("WEBGL_RENDER_FLOAT32_CAPABLE"));Qe.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",()=>mSe(Qe.getNumber("WEBGL_VERSION")));Qe.registerFlag("WEBGL_FENCE_API_ENABLED",()=>ySe(Qe.getNumber("WEBGL_VERSION")));Qe.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",()=>Qe.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0);Qe.registerFlag("WEBGL_DELETE_TEXTURE_THRESHOLD",()=>-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_DELETE_TEXTURE_THRESHOLD must be -1 (indicating never delete) or at least 0, but got ${t}.`)});Qe.registerFlag("WEBGL_FLUSH_THRESHOLD",()=>DR()?1:-1,t=>{if(typeof t!="number")throw new Error(`WEBGL_FLUSH_THRESHOLD must be a number but got ${t}.`);if(t<0&&t!==-1)throw new Error(`WEBGL_FLUSH_THRESHOLD must be -1 (indicating never manual flush) or at least 0, but got ${t}.`)});Qe.registerFlag("CPU_HANDOFF_SIZE_THRESHOLD",()=>128);Qe.registerFlag("WEBGL_USE_SHAPES_UNIFORMS",()=>!1);Qe.registerFlag("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD",()=>1e5);Qe.registerFlag("TOPK_K_CPU_HANDOFF_THRESHOLD",()=>128);Qe.registerFlag("WEBGL_EXP_CONV",()=>!1);Qe.registerFlag("SOFTWARE_WEBGL_ENABLED",()=>Qe.getBool("IS_TEST"));Qe.registerFlag("WEBGL_MAX_SIZE_FOR_NARROW_TEXTURE",()=>1/0);Qe.registerFlag("WEBGL_AUTO_SQUARIFY_NARROW_TEXTURE_SHAPE",()=>!1);Qe.registerFlag("WEBGL2_ISNAN_CUSTOM",()=>!1);Qe.registerFlag("ENGINE_COMPILE_ONLY",()=>!1);/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cs(){let t,e,n,r,s,i,o,a,l,c;return ce().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",s="texture",i="outputColor",o="out vec4 outputColor;",a=ce().getBool("WEBGL2_ISNAN_CUSTOM")?`
      bool isnan_custom(float val) {
        uint floatToUint = floatBitsToUint(val);
        return (floatToUint & 0x7fffffffu) > 0x7f800000u;
      }

      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan_custom(val.x),
          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));
      }

      #define isnan(value) isnan_custom(value)
    `:"",l="",c=`
      #define round(value) newRound(value)
      int newRound(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 newRound(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `):(t="",e="attribute",n="varying",r="varying",s="texture2D",i="gl_FragColor",o="",a=`
      #define isnan(value) isnan_custom(value)
      bool isnan_custom(float val) {
        return (val > 0. || val < 1. || val == 0.) ? false : true;
      }
      bvec4 isnan_custom(vec4 val) {
        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));
      }
    `,l=`
      uniform float INFINITY;

      bool isinf(float val) {
        return abs(val) == INFINITY;
      }
      bvec4 isinf(vec4 val) {
        return equal(abs(val), vec4(INFINITY));
      }
    `,c=`
      int round(float value) {
        return int(floor(value + 0.5));
      }

      ivec4 round(vec4 value) {
        return ivec4(floor(value + vec4(0.5)));
      }
    `),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:s,output:i,defineOutput:o,defineSpecialNaN:a,defineSpecialInf:l,defineRound:c}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Hh(t,e,n="index"){const r=et(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / ${s}`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * ${s}`:`index -= ${t[i]} * ${s}`;return`${o}; ${a};`}).join("")}function H_(t,e,n="index"){const r=et(e);return r.map((s,i)=>{const o=`int ${t[i]} = ${n} / outShapeStrides[${i}]`,a=i===r.length-1?`int ${t[i+1]} = ${n} - ${t[i]} * outShapeStrides[${i}]`:`index -= ${t[i]} * outShapeStrides[${i}]`;return`${o}; ${a};`}).join("")}function bSe(t,e){const n=t.length,r=t.map(i=>`${e}[${i}]`),s=new Array(n-1);s[n-2]=r[n-1];for(let i=n-3;i>=0;--i)s[i]=`(${s[i+1]} * ${r[i+1]})`;return s}function vSe(t,e,n="index"){const r=t.map((i,o)=>o),s=bSe(r,e);return s.map((i,o)=>{const a=`int ${t[o]} = ${n} / ${s[o]}`,l=o===s.length-1?`int ${t[o+1]} = ${n} - ${t[o]} * ${s[o]}`:`index -= ${t[o]} * ${s[o]}`;return`${a}; ${l};`}).join("")}function vP(t){const e=et(t).map(n=>n.toString());return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * ${e[0]} + coords.y * ${e[1]} + coords.z;
  }
`}function wP(){return`
  int getFlatIndex(ivec3 coords) {
    return coords.x * outShapeStrides[0] + coords.y * outShapeStrides[1] + coords.z;
  }
`}const Iq=`
  const float FLOAT_MAX = 1.70141184e38;
  const float FLOAT_MIN = 1.17549435e-38;

  lowp vec4 encode_float(highp float v) {
    if (isnan(v)) {
      return vec4(255, 255, 255, 255);
    }

    highp float av = abs(v);

    if(av < FLOAT_MIN) {
      return vec4(0.0, 0.0, 0.0, 0.0);
    } else if(v > FLOAT_MAX) {
      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
    } else if(v < -FLOAT_MAX) {
      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
    }

    highp vec4 c = vec4(0,0,0,0);

    highp float e = floor(log2(av));
    highp float m = exp2(fract(log2(av))) - 1.0;

    c[2] = floor(128.0 * m);
    m -= c[2] / 128.0;
    c[1] = floor(32768.0 * m);
    m -= c[1] / 32768.0;
    c[0] = floor(8388608.0 * m);

    highp float ebias = e + 127.0;
    c[3] = floor(ebias / 2.0);
    ebias -= c[3] * 2.0;
    c[2] += floor(ebias) * 128.0;

    c[3] += 128.0 * step(0.0, -v);

    return c / 255.0;
  }
`;/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{getBroadcastDims:Nq}=bG;function wSe(t,e,n){const r=[];if(t.forEach(f=>{const p=fe(f.shapeInfo.logicalShape);if(f.shapeInfo.isUniform?r.push(`uniform float ${f.name}${p>1?`[${p}]`:""};`):(r.push(`uniform sampler2D ${f.name};`),r.push(`uniform int offset${f.name};`)),n.enableShapeUniforms){const{uniformShape:m}=xP(n.packedInputs,f.shapeInfo.logicalShape,f.shapeInfo.texShape);switch(m.length){case 1:r.push(`uniform int ${f.name}Shape;`);break;case 2:r.push(`uniform ivec2 ${f.name}Shape;`);break;case 3:r.push(`uniform ivec3 ${f.name}Shape;`);break;case 4:r.push(`uniform ivec4 ${f.name}Shape;`);break}r.push(`uniform ivec2 ${f.name}TexShape;`)}}),n.enableShapeUniforms){switch(e.logicalShape.length){case 1:r.push("uniform int outShape;");break;case 2:r.push("uniform ivec2 outShape;"),r.push("uniform int outShapeStrides;");break;case 3:r.push("uniform ivec3 outShape;"),r.push("uniform ivec2 outShapeStrides;");break;case 4:r.push("uniform ivec4 outShape;"),r.push("uniform ivec3 outShapeStrides;");break}r.push("uniform ivec2 outTexShape;")}n.customUniforms&&n.customUniforms.forEach(f=>{r.push(`uniform ${f.type} ${f.name}${f.arrayIndex?`[${f.arrayIndex}]`:""};`)});const s=r.join(`
`),i=t.map(f=>xSe(f,e,n.packedInputs,n.enableShapeUniforms)).join(`
`),o=e.texShape,a=Cs(),l=ESe(a);let c,u,d=kSe(a);return e.isPacked?(c=SSe(e.logicalShape,o,n.enableShapeUniforms),u=TSe(a)):(c=CSe(e.logicalShape,o,n.enableShapeUniforms),u=_Se(a)),n.packedInputs&&(d+=ASe),[d,l,u,s,c,i,n.userCode].join(`
`)}function ug(t,e=!1){const n=t.shapeInfo.logicalShape;switch(n.length){case 0:return USe(t,e);case 1:return HSe(t,e);case 2:return KSe(t,e);case 3:return XSe(t,e);case 4:return QSe(t,e);case 5:return JSe(t);case 6:return ZSe(t);default:throw new Error(`${n.length}-D input sampling is not yet supported`)}}function $q(t,e){switch(t.shapeInfo.logicalShape.length){case 0:return VSe(t);case 1:return WSe(t,e);case 2:return GSe(t,e);case 3:return qSe(t,e);default:return YSe(t,e)}}function xSe(t,e,n=!1,r){let s="";n?s+=$q(t,r):s+=ug(t,r);const i=t.shapeInfo.logicalShape,o=e.logicalShape;return i.length<=o.length&&(n?s+=eCe(t,e):s+=tCe(t,e)),s}function SSe(t,e,n){switch(t.length){case 0:return Aq();case 1:return RSe(t,e,n);case 2:return BSe(t,e,n);case 3:return DSe(t,e,n);default:return LSe(t,e,n)}}function CSe(t,e,n){switch(t.length){case 0:return Aq();case 1:return OSe(t,e,n);case 2:return jSe(t,e,n);case 3:return PSe(t,e,n);case 4:return FSe(t,e,n);case 5:return MSe(t,e);case 6:return zSe(t,e);default:throw new Error(`${t.length}-D output sampling is not yet supported`)}}function ESe(t){return`
    float sampleTexture(sampler2D textureSampler, vec2 uv) {
      return ${t.texture2D}(textureSampler, uv).r;
    }
  `}function _Se(t){return`
    void setOutput(float val) {
      ${t.output} = vec4(val, 0, 0, 0);
    }
  `}function TSe(t){return`
    void setOutput(vec4 val) {
      ${t.output} = val;
    }
  `}function kSe(t){return`${t.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${t.varyingFs} vec2 resultUV;
    ${t.defineOutput}
    const vec2 halfCR = vec2(0.5, 0.5);

    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    uniform float NAN;
    ${t.defineSpecialNaN}
    ${t.defineSpecialInf}
    ${t.defineRound}

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    int idiv(int a, int b, float sign) {
      int res = a / b;
      int mod = imod(a, b);
      if (sign < 0. && mod != 0) {
        res -= 1;
      }
      return res;
    }

    //Based on the work of Dave Hoskins
    //https://www.shadertoy.com/view/4djSRW
    #define HASHSCALE1 443.8975
    float random(float seed){
      vec2 p = resultUV * seed;
      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);
      p3 += dot(p3, p3.yzx + 19.19);
      return fract((p3.x + p3.y) * p3.z);
    }

    ${ISe}
    ${NSe}
    ${$Se}
  `}const ISe=`
vec2 uvFromFlat(int texNumR, int texNumC, int index) {
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
  int texelIndex = index / 2;
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,NSe=`
vec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,
  int texNumC, int row, int col) {
  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = texelIndex / texNumC;
  int texC = texelIndex - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,$Se=`
vec2 packedUVfrom3D(int texNumR, int texNumC,
    int texelsInBatch, int texelsInLogicalRow, int b,
    int row, int col) {
  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
  int texR = index / texNumC;
  int texC = index - texR * texNumC;
  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
}
`,ASe=`
  float getChannel(vec4 frag, vec2 innerDims) {
    vec2 modCoord = mod(innerDims, 2.);
    return modCoord.x == 0. ?
      (modCoord.y == 0. ? frag.r : frag.g) :
      (modCoord.y == 0. ? frag.b : frag.a);
  }
  float getChannel(vec4 frag, int dim) {
    float modCoord = mod(float(dim), 2.);
    return modCoord == 0. ? frag.r : frag.g;
  }
`;function Aq(){return`
    int getOutputCoords() {
      return 0;
    }
  `}function RSe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];return r[0]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ceil(float(outTexShape[1]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.x * ${r[1]}.0);
      }
    `:r[1]===1?n?`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ceil(float(outTexShape[0]) / 2.0));
      }
    `:`
      int getOutputCoords() {
        return 2 * int(resultUV.y * ${r[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      return 2 * (resTexRC.x * packedTexShape[1] + resTexRC.y);
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      return 2 * (resTexRC.x * ${r[1]} + resTexRC.y);
    }
  `}function OSe(t,e,n){return e[0]===1?n?`
      int getOutputCoords() {
        return int(resultUV.x * float(outTexShape[1]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.x * ${e[1]}.0);
      }
    `:e[1]===1?n?`
      int getOutputCoords() {
        return int(resultUV.y * float(outTexShape[0]));
      }
    `:`
      int getOutputCoords() {
        return int(resultUV.y * ${e[0]}.0);
      }
    `:n?`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      return resTexRC.x * outTexShape[1] + resTexRC.y;
    }
  `:`
    int getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      return resTexRC.x * ${e[1]} + resTexRC.y;
    }
  `}function DSe(t,e,n){if(n)return`
    ivec3 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec3(b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[2]/2),i=s*Math.ceil(t[1]/2);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec3(b, r, c);
    }
  `}function PSe(t,e,n){if(n)return`
  ivec3 getOutputCoords() {
    ivec2 resTexRC = ivec2(resultUV.yx *
                           vec2(outTexShape[0], outTexShape[1]));
    int index = resTexRC.x * outTexShape[1] + resTexRC.y;
    ${H_(["r","c","d"],t)}
    return ivec3(r, c, d);
  }
`;const r=Hh(["r","c","d"],t);return`
    ivec3 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec3(r, c, d);
    }
  `}function LSe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));
      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;

      int texelsInLogicalRow = int(ceil(float(outShape[3]) / 2.0));
      int texelsInBatch = texelsInLogicalRow * int(ceil(float(outShape[2]) / 2.0));
      int texelsInBatchN = texelsInBatch * outShape[1];

      int b2 = index / texelsInBatchN;
      index -= b2 * texelsInBatchN;

      int b = index / texelsInBatch;
      index -= b * texelsInBatch;

      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec4(b2, b, r, c);
    }
  `;const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)],s=Math.ceil(t[t.length-1]/2),i=s*Math.ceil(t[t.length-2]/2);let o=i,a="",l="b, r, c";for(let c=2;c<t.length-1;c++)o*=t[t.length-c-1],a=`
      int b${c} = index / ${o};
      index -= b${c} * ${o};
    `+a,l=`b${c}, `+l;return`
    ivec${t.length} getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));
      int index = resTexRC.x * ${r[1]} + resTexRC.y;

      ${a}

      int b = index / ${i};
      index -= b * ${i};

      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec${t.length}(${l});
    }
  `}function FSe(t,e,n){if(n)return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      ${H_(["r","c","d","d2"],t)}
      return ivec4(r, c, d, d2);
    }
  `;const r=Hh(["r","c","d","d2"],t);return`
    ivec4 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      ${r}
      return ivec4(r, c, d, d2);
    }
  `}function MSe(t,e){const n=Hh(["r","c","d","d2","d3"],t);return`
    ivec5 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx * vec2(${e[0]},
                             ${e[1]}));

      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec5 outShape = ivec5(r, c, d, d2, d3);
      return outShape;
    }
  `}function zSe(t,e){const n=Hh(["r","c","d","d2","d3","d4"],t);return`
    ivec6 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
        vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;

      ${n}

      ivec6 result = ivec6(r, c, d, d2, d3, d4);
      return result;
    }
  `}function BSe(t,e,n){const r=[Math.ceil(e[0]/2),Math.ceil(e[1]/2)];if(Nt(t,e))return n?`
      ivec2 getOutputCoords() {
        ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
        return 2 * ivec2(resultUV.yx * vec2(packedTexShape[0], packedTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return 2 * ivec2(resultUV.yx * vec2(${r[0]}, ${r[1]}));
      }
    `;const s=Math.ceil(t[1]/2);return n?`
    ivec2 getOutputCoords() {
      ivec2 packedTexShape = ivec2(ceil(float(outTexShape[0]) / 2.0), ceil(float(outTexShape[1]) / 2.0));
      int texelsInLogicalRow = int(ceil(float(outShape[1]) / 2.0));
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(packedTexShape[0], packedTexShape[1]));

      int index = resTexRC.x * packedTexShape[1] + resTexRC.y;
      int r = 2 * (index / texelsInLogicalRow);
      int c = imod(index, texelsInLogicalRow) * 2;

      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${r[0]}, ${r[1]}));

      int index = resTexRC.x * ${r[1]} + resTexRC.y;
      int r = 2 * (index / ${s});
      int c = imod(index, ${s}) * 2;

      return ivec2(r, c);
    }
  `}function jSe(t,e,n){return Nt(t,e)?n?`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(outTexShape[0], outTexShape[1]));
      }
    `:`
      ivec2 getOutputCoords() {
        return ivec2(resultUV.yx * vec2(${e[0]}, ${e[1]}));
      }
    `:t[1]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(index, 0);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(index, 0);
      }
    `:t[0]===1?n?`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(outTexShape[0], outTexShape[1]));
        int index = resTexRC.x * outTexShape[1] + resTexRC.y;
        return ivec2(0, index);
      }
    `:`
      ivec2 getOutputCoords() {
        ivec2 resTexRC = ivec2(resultUV.yx *
                               vec2(${e[0]}, ${e[1]}));
        int index = resTexRC.x * ${e[1]} + resTexRC.y;
        return ivec2(0, index);
      }
    `:n?`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(outTexShape[0], outTexShape[1]));
      int index = resTexRC.x * outTexShape[1] + resTexRC.y;
      int r = index / outShape[1];
      int c = index - r * outShape[1];
      return ivec2(r, c);
    }
  `:`
    ivec2 getOutputCoords() {
      ivec2 resTexRC = ivec2(resultUV.yx *
                             vec2(${e[0]}, ${e[1]}));
      int index = resTexRC.x * ${e[1]} + resTexRC.y;
      int r = index / ${t[1]};
      int c = index - r * ${t[1]};
      return ivec2(r, c);
    }
  `}function Gh(t){return`offset${t}`}function VSe(t){const e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=Cs();return`
    vec4 ${n}() {
      return ${r.texture2D}(${e}, halfCR);
    }
  `}function USe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`float ${r}() {return ${n};}`;const[s,i]=t.shapeInfo.texShape;if(s===1&&i===1)return`
      float ${r}() {
        return sampleTexture(${n}, halfCR);
      }
    `;const o=Gh(n);if(e)return`
    float ${r}() {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], ${o});
      return sampleTexture(${n}, uv);
    }
  `;const[a,l]=t.shapeInfo.texShape;return`
    float ${r}() {
      vec2 uv = uvFromFlat(${a}, ${l}, ${o});
      return sampleTexture(${n}, uv);
    }
  `}function WSe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=t.shapeInfo.texShape,i=Cs();if(e)return`
    vec4 ${r}(int index) {
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      vec2 uv = packedUVfrom1D(
        packedTexShape[0], packedTexShape[1], index);
      return ${i.texture2D}(${n}, uv);
    }
  `;const o=[Math.ceil(s[0]/2),Math.ceil(s[1]/2)];return`
    vec4 ${r}(int index) {
      vec2 uv = packedUVfrom1D(
        ${o[0]}, ${o[1]}, index);
      return ${i.texture2D}(${n}, uv);
    }
  `}function HSe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1);if(t.shapeInfo.isUniform)return`
      float ${r}(int index) {
        ${dg(t)}
      }
    `;const s=t.shapeInfo.texShape,i=s[0],o=s[1];if(o===1&&i===1)return`
      float ${r}(int index) {
        return sampleTexture(${n}, halfCR);
      }
    `;const a=Gh(n);return o===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / float(${n}TexShape[0]));
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2(0.5, (float(index + ${a}) + 0.5) / ${i}.0);
        return sampleTexture(${n}, uv);
      }
    `:i===1?e?`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / float(${n}TexShape[1]), 0.5);
        return sampleTexture(${n}, uv);
      }
    `:`
      float ${r}(int index) {
        vec2 uv = vec2((float(index + ${a}) + 0.5) / ${o}.0, 0.5);
        return sampleTexture(${n}, uv);
      }
    `:e?`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${n}TexShape[0], ${n}TexShape[1], index + ${a});
      return sampleTexture(${n}, uv);
    }
  `:`
    float ${r}(int index) {
      vec2 uv = uvFromFlat(${i}, ${o}, index + ${a});
      return sampleTexture(${n}, uv);
    }
  `}function GSe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=i[0],a=i[1],l=Cs();if(i!=null&&Nt(n,i))return e?`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);

        return ${l.texture2D}(${r}, uv);
      }
    `:`
      vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${a}.0, ${o}.0);

        return ${l.texture2D}(${r}, uv);
      }
    `;if(e)return`
    vec4 ${s}(int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom2D(valuesPerRow, packedTexShape[0], packedTexShape[1], row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `;const c=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)],u=Math.ceil(n[1]/2);return`
    vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${u}, ${c[0]}, ${c[1]}, row, col);
      return ${l.texture2D}(${r}, uv);
    }
  `}function KSe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape;if(i!=null&&Nt(n,i)){if(e)return`
      float ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `;const h=i[0],f=i[1];return`
    float ${s}(int row, int col) {
      vec2 uv = (vec2(col, row) + halfCR) / vec2(${f}.0, ${h}.0);
      return sampleTexture(${r}, uv);
    }
  `}const{newShape:o,keptDims:a}=lc(n),l=o;if(l.length<n.length){const h=hg(t,l),f=["row","col"];return`
      ${ug(h,e)}
      float ${s}(int row, int col) {
        return ${s}(${fg(f,a)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col) {
        int index = round(dot(vec2(row, col), vec2(${n[1]}, 1)));
        ${dg(t)}
      }
    `;const c=i[0],u=i[1],d=Gh(r);return u===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2(0.5, (index + 0.5) / float(${r}TexShape[0]));
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2(0.5, (index + 0.5) / ${c}.0);
      return sampleTexture(${r}, uv);
    }
  `:c===1?e?`
      float ${s}(int row, int col) {
        float index = dot(vec3(row, col, ${d}), vec3(${r}Shape[1], 1, 1));
        vec2 uv = vec2((index + 0.5) / float(${r}TexShape[1]), 0.5);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col) {
      float index = dot(vec3(row, col, ${d}), vec3(${n[1]}, 1, 1));
      vec2 uv = vec2((index + 0.5) / ${u}.0, 0.5);
      return sampleTexture(${r}, uv);
    }
  `:e?`
      float ${s}(int row, int col) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${r}Shape[1] + col + ${d};
        vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
        return sampleTexture(${r}, uv);
      }
    `:`
  float ${s}(int row, int col) {
    // Explicitly use integer operations as dot() only works on floats.
    int index = row * ${n[1]} + col + ${d};
    vec2 uv = uvFromFlat(${c}, ${u}, index);
    return sampleTexture(${r}, uv);
  }
`}function qSe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=t.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(n[0]===1){const h=n.slice(1),f=[1,2],p=hg(t,h),m=["b","row","col"];return`
        ${$q(p,e)}
        vec4 ${s}(int b, int row, int col) {
          return ${s}(${fg(m,f)});
        }
      `}const a=Cs();if(e)return`
    vec4 ${s}(int b, int row, int col) {
      ivec2 packedTexShape = ivec2(ceil(float(${r}TexShape[0]) / 2.0), ceil(float(${r}TexShape[1]) / 2.0));
      int valuesPerRow = int(ceil(float(${r}Shape[2]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${r}Shape[1]) / 2.0));
      vec2 uv = packedUVfrom3D(
        packedTexShape[0], packedTexShape[1], texelsInBatch, valuesPerRow, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `;const l=o[0],c=o[1],u=Math.ceil(n[2]/2),d=u*Math.ceil(n[1]/2);return`
    vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${c}, ${d}, ${u}, b, row, col);
      return ${a.texture2D}(${r}, uv);
    }
  `}function XSe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[1]*n[2],o=n[2],{newShape:a,keptDims:l}=lc(n),c=a;if(c.length<n.length){const m=hg(t,c),g=["row","col","depth"];return`
        ${ug(m,e)}
        float ${s}(int row, int col, int depth) {
          return ${s}(${fg(g,l)});
        }
      `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth) {
        int index = round(dot(vec3(row, col, depth),
                          vec3(${i}, ${o}, 1)));
        ${dg(t)}
      }
    `;const u=t.shapeInfo.texShape,d=u[0],h=u[1],f=t.shapeInfo.flatOffset;if(h===i&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        int stride1 = ${r}Shape[2];
        float texR = float(row);
        float texC = dot(vec2(col, depth), vec2(stride1, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
        float ${s}(int row, int col, int depth) {
          float texR = float(row);
          float texC = dot(vec2(col, depth), vec2(${o}, 1));
          vec2 uv = (vec2(texC, texR) + halfCR) /
                     vec2(${h}.0, ${d}.0);
          return sampleTexture(${r}, uv);
        }
      `;if(h===o&&f==null)return e?`
      float ${s}(int row, int col, int depth) {
        float texR = dot(vec2(row, col), vec2(${r}Shape[1], 1));
        float texC = float(depth);
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
    float ${s}(int row, int col, int depth) {
      float texR = dot(vec2(row, col), vec2(${n[1]}, 1));
      float texC = float(depth);
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${h}.0, ${d}.0);
      return sampleTexture(${r}, uv);
    }
  `;const p=Gh(r);return e?`
    float ${s}(int row, int col, int depth) {
      // Explicitly use integer operations as dot() only works on floats.
      int stride0 = ${r}Shape[1] * ${r}Shape[2];
      int stride1 = ${r}Shape[2];
      int index = row * stride0 + col * stride1 + depth + ${p};
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index);
      return sampleTexture(${r}, uv);
    }
    `:`
      float ${s}(int row, int col, int depth) {
        // Explicitly use integer operations as dot() only works on floats.
        int index = row * ${i} + col * ${o} + depth + ${p};
        vec2 uv = uvFromFlat(${d}, ${h}, index);
        return sampleTexture(${r}, uv);
      }
  `}function YSe(t,e){const n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=Cs();if(e)return`
    vec4 ${r}(int b2, int b, int row, int col) {
      int valuesPerRow = int(ceil(float(${n}Shape[3]) / 2.0));
      int texelsInBatch = valuesPerRow * int(ceil(float(${n}Shape[2]) / 2.0));
      int index = b * texelsInBatch + (row / 2) * valuesPerRow + (col / 2);
      texelsInBatch *= ${n}Shape[1];
      index = b2 * texelsInBatch + index;
      ivec2 packedTexShape = ivec2(ceil(float(${n}TexShape[0]) / 2.0), ceil(float(${n}TexShape[1]) / 2.0));
      int texR = index / packedTexShape[1];
      int texC = index - texR * packedTexShape[1];
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(packedTexShape[1], packedTexShape[0]); return ${s.texture2D}(${n}, uv);
    }
  `;const i=t.shapeInfo.logicalShape,o=i.length,a=t.shapeInfo.texShape,l=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],c=l[0],u=l[1],d=Math.ceil(i[o-1]/2);let h=d*Math.ceil(i[o-2]/2),f="int b, int row, int col",p=`b * ${h} + (row / 2) * ${d} + (col / 2)`;for(let m=2;m<o-1;m++)f=`int b${m}, `+f,h*=i[o-m-1],p=`b${m} * ${h} + `+p;return`
    vec4 ${r}(${f}) {
      int index = ${p};
      int texR = index / ${u};
      int texC = index - texR * ${u};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${u}, ${c});
      return ${s.texture2D}(${n}, uv);
    }
  `}function QSe(t,e){const n=t.shapeInfo.logicalShape,r=t.name,s="get"+r.charAt(0).toUpperCase()+r.slice(1),i=n[3],o=n[2]*i,a=n[1]*o,{newShape:l,keptDims:c}=lc(n);if(l.length<n.length){const b=hg(t,l),v=["row","col","depth","depth2"];return`
      ${ug(b,e)}
      float ${s}(int row, int col, int depth, int depth2) {
        return ${s}(${fg(v,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${s}(int row, int col, int depth, int depth2) {
        int index = round(dot(vec4(row, col, depth, depth2),
                          vec4(${a}, ${o}, ${i}, 1)));
        ${dg(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1],p=`int stride2 = ${r}Shape[3];`,m=`int stride1 = ${r}Shape[2] * stride2;`,g=`int stride0 = ${r}Shape[1] * stride1;`;if(f===a&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        ${p}
        ${m}
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(stride1, stride2, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = float(row);
        float texC =
            dot(vec3(col, depth, depth2),
                vec3(${o}, ${i}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;if(f===i&&u==null)return e?`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${r}Shape[1] * ${r}Shape[2], ${r}Shape[2], 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${r}TexShape[1], ${r}TexShape[0]);
        return sampleTexture(${r}, uv);
      }
    `:`
      float ${s}(int row, int col, int depth, int depth2) {
        float texR = dot(vec3(row, col, depth),
                         vec3(${n[1]*n[2]}, ${n[2]}, 1));
        float texC = float(depth2);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${r}, uv);
      }
    `;const y=Gh(r);return e?`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      ${p}
      ${m}
      ${g}
      int index = row * stride0 + col * stride1 +
          depth * stride2 + depth2;
      vec2 uv = uvFromFlat(${r}TexShape[0], ${r}TexShape[1], index + ${y});
      return sampleTexture(${r}, uv);
    }
  `:`
    float ${s}(int row, int col, int depth, int depth2) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} +
          depth * ${i} + depth2;
      vec2 uv = uvFromFlat(${h}, ${f}, index + ${y});
      return sampleTexture(${r}, uv);
    }
  `}function JSe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),s=e[4],i=e[3]*s,o=e[2]*i,a=e[1]*o,{newShape:l,keptDims:c}=lc(e);if(l.length<e.length){const m=hg(t,l),g=["row","col","depth","depth2","depth3"];return`
      ${ug(m)}
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        return ${r}(${fg(g,c)});
      }
    `}if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float index = dot(
          vec4(row, col, depth, depth2),
          vec4(${a}, ${o}, ${i}, ${s})) +
          depth3;
        ${dg(t)}
      }
    `;const u=t.shapeInfo.flatOffset,d=t.shapeInfo.texShape,h=d[0],f=d[1];if(f===a&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
                         vec4(${o}, ${i}, ${s}, 1));
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(f===s&&u==null)return`
      float ${r}(int row, int col, int depth, int depth2, int depth3) {
        float texR = dot(
          vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]},
               ${e[2]*e[3]}, ${e[3]}, 1));
        int texC = depth3;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${f}.0, ${h}.0);
        return sampleTexture(${n}, uv);
      }
    `;const p=Gh(n);return`
    float ${r}(int row, int col, int depth, int depth2, int depth3) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${a} + col * ${o} + depth * ${i} +
          depth2 * ${s} + depth3 + ${p};
      vec2 uv = uvFromFlat(${h}, ${f}, index);
      return sampleTexture(${n}, uv);
    }
  `}function ZSe(t){const e=t.shapeInfo.logicalShape,n=t.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),{newShape:s,keptDims:i}=lc(e);if(s.length<e.length){const g=hg(t,s),y=["row","col","depth","depth2","depth3","depth4"];return`
      ${ug(g)}
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        return ${r}(${fg(y,i)});
      }
    `}const o=e[5],a=e[4]*o,l=e[3]*a,c=e[2]*l,u=e[1]*c;if(t.shapeInfo.isUniform)return`
      float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
        int index = round(dot(
          vec4(row, col, depth, depth2),
          vec4(${u}, ${c}, ${l}, ${a})) +
          dot(
            vec2(depth3, depth4),
            vec2(${o}, 1)));
        ${dg(t)}
      }
    `;const d=t.shapeInfo.flatOffset,h=t.shapeInfo.texShape,f=h[0],p=h[1];if(p===u&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        int texR = row;
        float texC = dot(vec4(col, depth, depth2, depth3),
          vec4(${c}, ${l}, ${a}, ${o})) +
               float(depth4);
        vec2 uv = (vec2(texC, texR) + halfCR) /
                   vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;if(p===o&&d==null)return`
      float ${r}(int row, int col, int depth,
                    int depth2, int depth3, int depth4) {
        float texR = dot(vec4(row, col, depth, depth2),
          vec4(${e[1]*e[2]*e[3]*e[4]},
               ${e[2]*e[3]*e[4]},
               ${e[3]*e[4]},
               ${e[4]})) + float(depth3);
        int texC = depth4;
        vec2 uv = (vec2(texC, texR) + halfCR) /
                  vec2(${p}.0, ${f}.0);
        return sampleTexture(${n}, uv);
      }
    `;const m=Gh(n);return`
    float ${r}(int row, int col, int depth,
                  int depth2, int depth3, int depth4) {
      // Explicitly use integer operations as dot() only works on floats.
      int index = row * ${u} + col * ${c} + depth * ${l} +
          depth2 * ${a} + depth3 * ${o} + depth4 + ${m};
      vec2 uv = uvFromFlat(${f}, ${p}, index);
      return sampleTexture(${n}, uv);
    }
  `}function dg(t){const e=t.name,n=fe(t.shapeInfo.logicalShape);return n<2?`return ${e};`:`
    for (int i = 0; i < ${n}; i++) {
      if (i == index) {
        return ${e}[i];
      }
    }
  `}function eCe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=t.shapeInfo.logicalShape.length,o=e.logicalShape.length,a=Nq(t.shapeInfo.logicalShape,e.logicalShape),l=on(o),c=o-i;let u;const d=["x","y","z","w","u","v"];i===0?u="":o<2&&a.length>=1?u="coords = 0;":u=a.map(b=>`coords.${d[b+c]} = 0;`).join(`
`);let h="";o<2&&i>0?h="coords":h=t.shapeInfo.logicalShape.map((b,v)=>`coords.${d[v+c]}`).join(", ");let f="return outputValue;";const m=fe(t.shapeInfo.logicalShape)===1,y=fe(e.logicalShape)===1;if(i===1&&!m&&!y)f=`
      return vec4(outputValue.xy, outputValue.xy);
    `;else if(m&&!y)o===1?f=`
        return vec4(outputValue.x, outputValue.x, 0., 0.);
      `:f=`
        return vec4(outputValue.x);
      `;else if(a.length){const b=i-2,v=i-1;a.indexOf(b)>-1&&a.indexOf(v)>-1?f="return vec4(outputValue.x);":a.indexOf(b)>-1?f="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":a.indexOf(v)>-1&&(f="return vec4(outputValue.xx, outputValue.zz);")}return`
    vec4 ${s}() {
      ${l} coords = getOutputCoords();
      ${u}
      vec4 outputValue = get${r}(${h});
      ${f}
    }
  `}function tCe(t,e){const n=t.name,r=n.charAt(0).toUpperCase()+n.slice(1),s="get"+r+"AtOutCoords",i=e.texShape,o=t.shapeInfo.texShape,a=t.shapeInfo.logicalShape.length,l=e.logicalShape.length;if(!t.shapeInfo.isUniform&&a===l&&t.shapeInfo.flatOffset==null&&Nt(o,i))return`
      float ${s}() {
        return sampleTexture(${n}, resultUV);
      }
    `;const c=on(l),u=Nq(t.shapeInfo.logicalShape,e.logicalShape),d=l-a;let h;const f=["x","y","z","w","u","v"];a===0?h="":l<2&&u.length>=1?h="coords = 0;":h=u.map(m=>`coords.${f[m+d]} = 0;`).join(`
`);let p="";return l<2&&a>0?p="coords":p=t.shapeInfo.logicalShape.map((m,g)=>`coords.${f[g+d]}`).join(", "),`
    float ${s}() {
      ${c} coords = getOutputCoords();
      ${h}
      return get${r}(${p});
    }
  `}function on(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function xP(t,e,n){const{newShape:r,keptDims:s}=lc(e),i=e.length,o=t&&i===3&&e[0]===1,a=o?e.slice(1):r,l=!t&&i>1&&!Nt(e,n)&&r.length<i||o;return{useSqueezeShape:l,uniformShape:l?a:e,keptDims:s}}function hg(t,e){const n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function fg(t,e){return e.map(n=>t[n]).join(", ")}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nCe(t,e,n,r){const s=n.map((u,d)=>{const h={logicalShape:u.shape,texShape:u.isUniform?null:u.texData.texShape,isUniform:u.isUniform,isPacked:u.isUniform?!1:u.texData.isPacked,flatOffset:null};return u.texData!=null&&u.texData.slice!=null&&u.texData.slice.flatOffset>0&&(h.flatOffset=u.texData.slice.flatOffset),{name:e.variableNames[d],shapeInfo:h}}),i=s.map(u=>u.shapeInfo),o={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},a=wSe(s,o,e),l=X1e(t.gl,a),c=t.createProgram(l);return ce().get("ENGINE_COMPILE_ONLY")?{program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:o,variablesLocations:null,customUniformLocations:null,infLoc:null,nanLoc:null,outShapeLocation:null,outShapeStridesLocation:null,outTexShapeLocation:null}:(t.buildVao(c),Object.assign({program:e,fragmentShader:l,source:a,webGLProgram:c,inShapeInfos:i,outShapeInfo:o},Rq(t,e,c)))}function Rq(t,e,n){const r=[],s=[];let i,o,a,l=null,c=null;c=t.getUniformLocation(n,"NAN",!1),ce().getNumber("WEBGL_VERSION")===1&&(l=t.getUniformLocation(n,"INFINITY",!1));const u=!1;for(const d of e.variableNames){const h={name:d,uniform:t.getUniformLocation(n,d,u),offset:t.getUniformLocation(n,`offset${d}`,u)};e.enableShapeUniforms&&(h.shape=t.getUniformLocation(n,`${d}Shape`,u),h.texShape=t.getUniformLocation(n,`${d}TexShape`,u)),r.push(h)}if(e.enableShapeUniforms&&(i=t.getUniformLocation(n,"outShape",u),a=t.getUniformLocation(n,"outShapeStrides",u),o=t.getUniformLocation(n,"outTexShape",u)),e.customUniforms)for(const d of e.customUniforms)s.push(t.getUniformLocation(n,d.name,u));return{variablesLocations:r,customUniformLocations:s,infLoc:l,nanLoc:c,outShapeLocation:i,outShapeStridesLocation:a,outTexShapeLocation:o}}function gz(t,e){if(t.length!==e.length)throw Error(`Binary was compiled with ${t.length} inputs, but was executed with ${e.length} inputs`);t.forEach((n,r)=>{const s=n.logicalShape,i=e[r],o=i.shape;if(!Nt(s,o))throw Error(`Binary was compiled with different shapes than the current args. Shapes ${s} and ${o} must match`);if(n.isUniform&&i.isUniform)return;const a=n.texShape,l=i.isUniform?null:i.texData.texShape;if(!Nt(a,l))throw Error(`Binary was compiled with different texture shapes than the current args. Shape ${a} and ${l} must match`)})}function rCe(t,e,n,r,s){e.program.enableShapeUniforms||(gz(e.inShapeInfos,n),gz([e.outShapeInfo],[r]));const i=r.texData.texture,o=r.texData.texShape;r.texData.isPacked?t.setOutputPackedMatrixTexture(i.texture,o[0],o[1]):t.setOutputMatrixTexture(i.texture,o[0],o[1]),t.setProgram(e.webGLProgram),t.bindVertexArray(e.webGLProgram.vao),ce().getNumber("WEBGL_VERSION")===1&&e.infLoc!==null&&t.gl.uniform1f(e.infLoc,1/0),e.nanLoc!==null&&t.gl.uniform1f(e.nanLoc,NaN);for(let l=0;l<n.length;++l){const c=n[l],{uniform:u,offset:d,shape:h,texShape:f}=e.variablesLocations[l];if(h){const{uniformShape:p}=xP(e.program.packedInputs,c.shape,c.texData.texShape);switch(p.length){case 1:t.gl.uniform1iv(h,new Int32Array(p));break;case 2:t.gl.uniform2iv(h,new Int32Array(p));break;case 3:t.gl.uniform3iv(h,new Int32Array(p));break;case 4:t.gl.uniform4iv(h,new Int32Array(p));break}}if(f&&t.gl.uniform2i(f,c.texData.texShape[0],c.texData.texShape[1]),u!=null){if(c.isUniform){if(fe(c.shape)<2)t.gl.uniform1f(u,c.uniformValues[0]);else{let p=c.uniformValues;p instanceof Float32Array||(p=new Float32Array(p)),t.gl.uniform1fv(u,p)}continue}c.texData.slice!=null&&d!=null&&t.gl.uniform1i(d,c.texData.slice.flatOffset),t.setInputMatrixTexture(c.texData.texture.texture,u,l)}}const a=e.outShapeLocation;if(a)switch(r.shape.length){case 1:t.gl.uniform1iv(a,new Int32Array(r.shape));break;case 2:t.gl.uniform2iv(a,new Int32Array(r.shape));break;case 3:t.gl.uniform3iv(a,new Int32Array(r.shape));break;case 4:t.gl.uniform4iv(a,new Int32Array(r.shape));break}if(e.outShapeStridesLocation){const l=et(r.shape);switch(r.shape.length){case 2:t.gl.uniform1iv(e.outShapeStridesLocation,new Int32Array(l));break;case 3:t.gl.uniform2iv(e.outShapeStridesLocation,new Int32Array(l));break;case 4:t.gl.uniform3iv(e.outShapeStridesLocation,new Int32Array(l));break}}if(e.outTexShapeLocation&&t.gl.uniform2i(e.outTexShapeLocation,r.texData.texShape[0],r.texData.texShape[1]),e.program.customUniforms&&s)for(let l=0;l<e.program.customUniforms.length;++l){const c=e.program.customUniforms[l],u=e.customUniformLocations[l],d=s[l];if(c.type==="float")t.gl.uniform1fv(u,d);else if(c.type==="vec2")t.gl.uniform2fv(u,d);else if(c.type==="vec3")t.gl.uniform3fv(u,d);else if(c.type==="vec4")t.gl.uniform4fv(u,d);else if(c.type==="int")t.gl.uniform1iv(u,d);else if(c.type==="ivec2")t.gl.uniform2iv(u,d);else if(c.type==="ivec3")t.gl.uniform3iv(u,d);else if(c.type==="ivec4")t.gl.uniform4iv(u,d);else throw Error(`uniform type ${c.type} is not supported yet.`)}t.executeProgram()}function sCe(t,e,n){let r="";e.concat(n).forEach(o=>{const a=o.texData!=null&&o.texData.slice!=null&&o.texData.slice.flatOffset>0;if(t.enableShapeUniforms&&!o.isUniform){const l=o.texData.texShape,{useSqueezeShape:c,uniformShape:u,keptDims:d}=xP(t.packedInputs,o.shape,l);let h="",f="",p="";if(u.length===1&&t.packedInputs){const C=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)];h=`${C[0]>1}_${C[1]>1}`}else if(u.length===2&&!t.packedInputs)f=`${u[0]>1}_${u[1]>1}`;else if(u.length>2&&!t.packedInputs){const C=et(u);p=`${C[0]===l[1]}_${C[C.length-1]===l[1]}`}const m=o.shape.length,g=u.length===2&&Nt(o.shape,l),y=fe(o.shape)===1,b=fh(o.shape,n.shape),v=!t.packedInputs&&m===n.shape.length&&Nt(l,n.texData.texShape),w=t.packedInputs||u.length>2?"":`${l[0]>1}_${l[1]>1}`;r+=`${m}_${v}_${c?d:""}_${u.length}_${y}_${b}_${g}_${h}_${f}_${p}_${w}_${a}`}else{const l=o.isUniform?"uniform":o.texData.texShape;r+=`${o.shape}_${l}_${a}`}});const s=t.userCode;let i=t.constructor.name;return i+="_"+r+"_"+s+`${ce().getNumber("WEBGL_VERSION")}`,i}function os(t){return ce().getBool("WEBGL_USE_SHAPES_UNIFORMS")&&t<=4}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class iCe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outPackingScheme=Nb.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Cs();this.outputShape=e,this.enableShapeUniforms=os(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?H_(["r","c","d"],e):Hh(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getA(rc.x, rc.y, rc.z);
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class oCe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outPackingScheme=Nb.DENSE,this.customUniforms=[{name:"texShape",type:"ivec2"}];const n=Cs();this.outputShape=e,this.enableShapeUniforms=os(this.outputShape.length),this.userCode=`
      ivec3 outCoordsFromFlatIndex(int index) {
        ${this.enableShapeUniforms?H_(["r","c","d"],e):Hh(["r","c","d"],e)}
        return ivec3(r, c, d);
      }

      void main() {
        ivec2 resTexRC = ivec2(resultUV.yx * vec2(texShape[0], texShape[1]));
        int index = 4 * (resTexRC.x * texShape[1] + resTexRC.y);

        vec4 result = vec4(0.);

        for (int i=0; i<4; i++) {
          int flatIndex = index + i;
          ivec3 rc = outCoordsFromFlatIndex(flatIndex);
          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aCe{constructor(e){this.variableNames=["A"],this.outTexUsage=Mi.DOWNLOAD;const n=Cs();this.outputShape=e,this.userCode=`
      ${Iq}

      void main() {
        float x = getAAtOutCoords();
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lCe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outTexUsage=Mi.DOWNLOAD;const n=Cs();this.outputShape=e,this.userCode=`
      ${Iq}

      void main() {
        ivec3 coords = getOutputCoords();
        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));
        ${n.output} = encode_float(x);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cCe={R:0,G:1,B:2,A:3};class yz{constructor(e,n=!1,r="RGBA"){this.variableNames=["A"],this.customUniforms=[{name:"texShape",type:"ivec2"}];const s=Cs();this.outputShape=e,this.enableShapeUniforms=os(this.outputShape.length);let i="result";n&&(i="floor(result * 255. + 0.5)");let o="";for(let a=0;a<r.length;a++){const l=r[a];o+=`
          if(offset == ${a}) {
            result = values[${cCe[l]}];
          }`}this.userCode=`
      ${this.enableShapeUniforms?wP():vP(e)}

      void main() {
        ivec3 coords = getOutputCoords();
        int flatIndex = getFlatIndex(coords);
        float result = 0.;
        int offset = imod(flatIndex, ${r.length});

        flatIndex = idiv(flatIndex, ${r.length}, 1.);

        int r = flatIndex / texShape[1];
        if (r < texShape[0]) {
          int c = imod(flatIndex, texShape[1]);
          vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
          vec4 values = ${s.texture2D}(A, uv);
          ${o}
        }
        ${s.output} = vec4(${i}, 0., 0., 0.);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class uCe{constructor(e,n=!1){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.customUniforms=[{name:"texShape",type:"ivec2"}];const r=Cs();this.outputShape=e,this.enableShapeUniforms=os(this.outputShape.length);let s="",i="result";n&&(i="floor(result * 255. + 0.5)");for(let o=0;o<=1;o++)for(let a=0;a<=1;a++){const l=o*2+a;s+=`
          localCoords = coords;
          if(localCoords[2] + ${a} < ${this.enableShapeUniforms?"outShape[2]":`${e[2]}`}) {
          localCoords[2] += ${a};
          if (localCoords[1] + ${o} < ${this.enableShapeUniforms?"outShape[1]":`${e[1]}`}) {
            localCoords[1] += ${o};

            flatIndex = getFlatIndex(localCoords);
            offset = imod(flatIndex, 4);

            flatIndex = idiv(flatIndex, 4, 1.);

            int r = flatIndex / texShape[1];
            int c = imod(flatIndex, texShape[1]);
            vec2 uv = (vec2(c, r) + halfCR) / vec2(texShape[1], texShape[0]);
            values = ${r.texture2D}(A, uv);

            if (offset == 0) {
              result[${l}] = values[0];
            } else if (offset == 1) {
              result[${l}] = values[1];
            } else if (offset == 2) {
              result[${l}] = values[2];
            } else {
              result[${l}] = values[3];
            }
          }
        }
        `}this.userCode=`
        ${this.enableShapeUniforms?wP():vP(e)}

        void main() {
          ivec3 coords = getOutputCoords();

          vec4 result = vec4(0.);
          int flatIndex, r, c, offset;
          ivec3 localCoords;
          vec2 uv;
          vec4 values;

          ${s}

          ${r.output} = ${i};
        }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function dCe(t){const e=Cs(),n=`${e.version}
    precision highp float;
    ${e.attribute} vec3 clipSpacePos;
    ${e.attribute} vec2 uv;
    ${e.varyingVs} vec2 resultUV;

    void main() {
      gl_Position = vec4(clipSpacePos, 1);
      resultUV = uv;
    }`;return q1e(t,n)}function hCe(t){const e=new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]);return Z1e(t,e)}function fCe(t){const e=new Uint16Array([0,1,2,2,1,3]);return eSe(t,e)}function B0(t,e,n,r,s,i){nSe(e,n);const o=tSe(t),a=t.TEXTURE_2D;return Me(t,()=>t.bindTexture(a,o)),Me(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)),Me(t,()=>t.texParameteri(a,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),Me(t,()=>t.texParameteri(a,t.TEXTURE_MIN_FILTER,t.NEAREST)),Me(t,()=>t.texParameteri(a,t.TEXTURE_MAG_FILTER,t.NEAREST)),ce().getNumber("WEBGL_VERSION")===1?Me(t,()=>t.texImage2D(a,0,r,e,n,0,s,i,null)):Me(t,()=>t.texStorage2D(a,1,r,e,n)),Me(t,()=>t.bindTexture(t.TEXTURE_2D,null)),{texture:o,texShape:[n,e]}}function Oq(t){return t.internalFormatFloat}function pCe(t,e,n,r){const[s,i]=M0(e,n);return B0(t,s,i,Oq(r),r.textureFormatFloat,t.FLOAT)}function Dq(t){return t.internalFormatHalfFloat}function mCe(t,e,n,r){const[s,i]=M0(e,n);return B0(t,s,i,Dq(r),r.textureFormatFloat,r.textureTypeHalfFloat)}function Pq(t){return t.downloadTextureFormat}function gCe(t,e,n,r){const[s,i]=M0(e,n);return B0(t,s,i,Pq(r),t.RGBA,t.UNSIGNED_BYTE)}function Lq(t){return t.internalFormatPackedFloat}function yCe(t,e,n,r){const[s,i]=cg(e,n);return B0(t,s,i,Lq(r),t.RGBA,t.FLOAT)}function Fq(t){return t.internalFormatPackedHalfFloat}function bCe(t,e,n,r){const[s,i]=cg(e,n);return B0(t,s,i,Fq(r),t.RGBA,r.textureTypeHalfFloat)}function vCe(t,e,n){return Me(t,()=>t.bindBuffer(t.ARRAY_BUFFER,n)),fz(t,e,"clipSpacePos",n,3,20,0)&&fz(t,e,"uv",n,2,20,12)}function wCe(t,e,n,r,s,i){Me(t,()=>t.bindTexture(t.TEXTURE_2D,e));let o,a,l;s instanceof Uint8Array?(o=new Uint8Array(n*r*4),a=t.UNSIGNED_BYTE,l=t.RGBA):(o=new Float32Array(n*r*4),a=t.FLOAT,l=i.internalFormatPackedFloat),o.set(s),ce().getNumber("WEBGL_VERSION")===2?Me(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n,r,t.RGBA,a,o)):Me(t,()=>t.texImage2D(t.TEXTURE_2D,0,l,n,r,0,t.RGBA,a,o)),Me(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function xCe(t,e,n){Me(t,()=>t.bindTexture(t.TEXTURE_2D,e)),n.data instanceof Uint8Array?ce().getNumber("WEBGL_VERSION")===2?Me(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,n.width,n.height,t.RGBA,t.UNSIGNED_BYTE,n.data)):Me(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,n.data)):ce().getNumber("WEBGL_VERSION")===2?Me(t,()=>t.texSubImage2D(t.TEXTURE_2D,0,0,0,t.RGBA,t.UNSIGNED_BYTE,n)):Me(t,()=>t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)),Me(t,()=>t.bindTexture(t.TEXTURE_2D,null))}function SCe(t,e,n,r){const s=t.createBuffer();Me(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,s));const a=4*4*e*n;return Me(t,()=>t.bufferData(t.PIXEL_PACK_BUFFER,a,t.STREAM_READ)),Me(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,0)),Me(t,()=>t.bindBuffer(t.PIXEL_PACK_BUFFER,null)),s}function CCe(t,e,n){const r=t,s=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,s),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),s}function ECe(t,e,n,r){const[s,i]=M0(e,n),o=4,a=new Uint8Array(j1e(e*n,o));return Me(t,()=>t.readPixels(0,0,s,i,r.downloadTextureFormat,t.UNSIGNED_BYTE,a)),new Float32Array(a.buffer)}function _Ce(t,e,n,r,s,i,o,a){const l=t,c=new Float32Array(V1e(i,o));return l.bindBuffer(l.PIXEL_PACK_BUFFER,e),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,c),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),c}function TCe(t,e,n){const r=new Float32Array(e*n*4);return Me(t,()=>t.readPixels(0,0,n,e,t.RGBA,t.FLOAT,r)),r}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class sN{constructor(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.itemsToPoll=[];const n=ce().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,M1e(n,e)):this.gl=ya(n),e=this.gl,ce().getNumber("WEBGL_VERSION")===2){const i=e;this.createVertexArray=()=>Me(i,()=>i.createVertexArray()),this.bindVertexArray=o=>Me(i,()=>i.bindVertexArray(o)),this.deleteVertexArray=o=>Me(i,()=>i.deleteVertexArray(o)),this.getVertexArray=()=>Me(i,()=>i.getParameter(i.VERTEX_ARRAY_BINDING))}else if(e!=null){const i=e.getExtension("OES_vertex_array_object");if(i==null)throw new Error("All WebGL1 implementations are expected to offer OES_vertex_array_object.");this.createVertexArray=()=>Me(e,()=>i.createVertexArrayOES()),this.bindVertexArray=o=>Me(e,()=>i.bindVertexArrayOES(o)),this.deleteVertexArray=o=>Me(e,()=>i.deleteVertexArrayOES(o)),this.getVertexArray=()=>Me(e,()=>e.getParameter(i.VERTEX_ARRAY_BINDING_OES))}let r="WEBGL_color_buffer_float";const s="EXT_color_buffer_half_float";if(this.parallelCompilationExtension=this.gl.getExtension("KHR_parallel_shader_compile"),ce().getNumber("WEBGL_VERSION")===1){const i="OES_texture_float",o="OES_texture_half_float";if(this.textureFloatExtension=Vx(this.gl,i),_o(this.gl,o))this.textureHalfFloatExtension=Vx(this.gl,o);else if(ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support half float textures, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.");if(this.colorBufferFloatExtension=this.gl.getExtension(r),_o(this.gl,s))this.colorBufferHalfFloatExtension=Vx(this.gl,s);else if(ce().get("WEBGL_FORCE_F16_TEXTURES"))throw new Error("GL context does not support color renderable half floats, yet the environment flag WEBGL_FORCE_F16_TEXTURES is set to true.")}else if(r="EXT_color_buffer_float",_o(this.gl,r))this.colorBufferFloatExtension=this.gl.getExtension(r);else if(_o(this.gl,s))this.colorBufferHalfFloatExtension=this.gl.getExtension(s);else throw new Error("GL context does not support color renderable floats");this.vertexBuffer=hCe(this.gl),this.indexBuffer=fCe(this.gl),this.framebuffer=rSe(this.gl),this.textureConfig=bP(this.gl,this.textureHalfFloatExtension)}get debug(){return ce().getBool("DEBUG")}dispose(){if(this.disposed)return;this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");const e=this.gl;Me(e,()=>e.finish()),Me(e,()=>e.bindFramebuffer(e.FRAMEBUFFER,null)),Me(e,()=>e.deleteFramebuffer(this.framebuffer)),Me(e,()=>e.bindBuffer(e.ARRAY_BUFFER,null)),Me(e,()=>e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),Me(e,()=>e.deleteBuffer(this.indexBuffer)),this.disposed=!0}createFloat32MatrixTexture(e,n){return this.throwIfDisposed(),pCe(this.gl,e,n,this.textureConfig)}createFloat16MatrixTexture(e,n){return this.throwIfDisposed(),mCe(this.gl,e,n,this.textureConfig)}createUnsignedBytesMatrixTexture(e,n){return this.throwIfDisposed(),gCe(this.gl,e,n,this.textureConfig)}uploadPixelDataToTexture(e,n){this.throwIfDisposed(),xCe(this.gl,e,n)}uploadDenseMatrixToTexture(e,n,r,s){this.throwIfDisposed(),wCe(this.gl,e,n,r,s,this.textureConfig)}createFloat16PackedMatrixTexture(e,n){return this.throwIfDisposed(),bCe(this.gl,e,n,this.textureConfig)}createPackedMatrixTexture(e,n){return this.throwIfDisposed(),yCe(this.gl,e,n,this.textureConfig)}deleteMatrixTexture(e){this.throwIfDisposed(),this.outputTexture===e&&(pz(this.gl,this.framebuffer),this.outputTexture=null),Me(this.gl,()=>this.gl.deleteTexture(e))}downloadByteEncodedFloatMatrixFromOutputTexture(e,n,r){return this.downloadMatrixDriver(e,()=>ECe(this.gl,n,r,this.textureConfig))}downloadPackedMatrixFromBuffer(e,n,r,s,i,o){return _Ce(this.gl,e,n,r,s,i,o,this.textureConfig)}downloadFloat32MatrixFromBuffer(e,n){return CCe(this.gl,e,n)}createBufferFromTexture(e,n,r){this.bindTextureToFrameBuffer(e);const s=SCe(this.gl,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),s}createAndWaitForFence(){const e=this.createFence(this.gl);return this.pollFence(e)}createFence(e){let n,r;if(ce().getBool("WEBGL_FENCE_API_ENABLED")){const s=e,i=s.fenceSync(s.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=()=>{const o=s.clientWaitSync(i,0,0);return o===s.ALREADY_SIGNALED||o===s.CONDITION_SATISFIED},n=i}else ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=()=>this.isQueryAvailable(n,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))):r=()=>!0;return{query:n,isFencePassed:r}}downloadMatrixFromPackedTexture(e,n,r){return this.downloadMatrixDriver(e,()=>TCe(this.gl,n,r))}createProgram(e){this.throwIfDisposed();const n=this.gl;this.vertexShader==null&&(this.vertexShader=dCe(n));const r=Q1e(n);Me(n,()=>n.attachShader(r,this.vertexShader)),Me(n,()=>n.attachShader(r,e)),J1e(n,r);const s=Object.assign(r,{vao:this.createVertexArray()});return this.debug&&eN(n,s),s}buildVao(e){this.setProgram(e),this.bindVertexArray(e.vao);const n=this.gl;Me(n,()=>n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,this.indexBuffer)),vCe(n,e,this.vertexBuffer)}deleteProgram(e){this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&(Me(this.gl,()=>this.gl.deleteProgram(e)),this.deleteVertexArray(e.vao))}setProgram(e){this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&eN(this.gl,this.program),Me(this.gl,()=>this.gl.useProgram(e))}getUniformLocation(e,n,r=!0){return this.throwIfDisposed(),r?iSe(this.gl,e,n):oSe(this.gl,e,n)}getAttributeLocation(e,n){return this.throwIfDisposed(),Me(this.gl,()=>this.gl.getAttribLocation(e,n))}getUniformLocationNoThrow(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)}setInputMatrixTexture(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),aSe(this.gl,e,n,r)}setOutputMatrixTexture(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)}setOutputPackedMatrixTexture(e,n,r){this.throwIfDisposed();const[s,i]=cg(n,r);this.setOutputMatrixTextureDriver(e,s,i)}setOutputMatrixWriteRegion(e,n,r,s){this.setOutputMatrixWriteRegionDriver(r,e,s,n)}setOutputPackedMatrixWriteRegion(e,n,r,s){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")}debugValidate(){this.program!=null&&eN(this.gl,this.program),Ux(this.gl)}executeProgram(){this.throwIfDisposed(),this.throwIfNoProgram();const e=this.gl;if(this.debug){const n=this.getVertexArray();console.assert(n===this.program.vao,"VAO changed between setProgram and executeProgram!"),this.debugValidate()}Me(e,()=>e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0))}blockUntilAllProgramsCompleted(){this.throwIfDisposed(),Me(this.gl,()=>this.gl.finish())}getQueryTimerExtension(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=Vx(this.gl,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension}getQueryTimerExtensionWebGL2(){return this.getQueryTimerExtension()}getQueryTimerExtensionWebGL1(){return this.getQueryTimerExtension()}beginQuery(){if(ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.createQuery();return r.beginQuery(s.TIME_ELAPSED_EXT,i),i}const e=this.getQueryTimerExtensionWebGL1(),n=e.createQueryEXT();return e.beginQueryEXT(e.TIME_ELAPSED_EXT,n),n}endQuery(){if(ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){const n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT);return}const e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}async waitForQueryAndGetTime(e){return await B$(()=>this.disposed||this.isQueryAvailable(e,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))),this.getQueryTime(e,ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}getQueryTime(e,n){if(n===0)return null;if(n===2){const r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}else{const r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6}}isQueryAvailable(e,n){if(n===0)return!0;if(n===2){const r=this.gl,s=this.getQueryTimerExtensionWebGL2(),i=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(s.GPU_DISJOINT_EXT)),i&&!this.disjoint}else{const r=this.getQueryTimerExtensionWebGL1(),s=r.getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),s&&!this.disjoint}}pollFence(e){return new Promise(n=>{this.addItemToPoll(()=>e.isFencePassed(),()=>n())})}pollItems(){const e=kCe(this.itemsToPoll.map(n=>n.isDoneFn));for(let n=0;n<=e;++n){const{resolveFn:r}=this.itemsToPoll[n];r()}this.itemsToPoll=this.itemsToPoll.slice(e+1)}addItemToPoll(e,n){if(this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1)return;let r;"setTimeoutCustom"in ce().platform&&(r=ce().platform.setTimeoutCustom.bind(ce().platform)),B$(()=>(this.pollItems(),this.itemsToPoll.length===0),()=>0,null,r)}bindTextureToFrameBuffer(e){this.throwIfDisposed(),tN(this.gl,e,this.framebuffer),this.debug&&Ux(this.gl)}unbindTextureToFrameBuffer(){this.outputTexture!=null?(tN(this.gl,this.outputTexture,this.framebuffer),this.debug&&Ux(this.gl)):pz(this.gl,this.framebuffer)}downloadMatrixDriver(e,n){this.bindTextureToFrameBuffer(e);const r=n();return this.unbindTextureToFrameBuffer(),r}setOutputMatrixTextureDriver(e,n,r){this.throwIfDisposed();const s=this.gl;tN(s,e,this.framebuffer),this.debug&&Ux(s),this.outputTexture=e,Me(s,()=>s.viewport(0,0,n,r)),Me(s,()=>s.scissor(0,0,n,r))}setOutputMatrixWriteRegionDriver(e,n,r,s){this.throwIfDisposed(),Me(this.gl,()=>this.gl.scissor(e,n,r,s))}throwIfDisposed(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")}throwIfNoProgram(){if(this.program==null)throw new Error("No GPU program is currently set.")}}function kCe(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const{addImpl:ICe,bincountImpl:Mq,bincountReduceImpl:NCe,bitwiseAndImpl:$Ce,castImpl:ACe,ceilImpl:RCe,concatImpl:OCe,equalImpl:DCe,expImpl:PCe,expm1Impl:LCe,floorImpl:FCe,gatherNdImpl:MCe,gatherV2Impl:zCe,greaterImpl:BCe,greaterEqualImpl:jCe,lessImpl:VCe,lessEqualImpl:UCe,linSpaceImpl:WCe,logImpl:HCe,maxImpl:GCe,maximumImpl:KCe,minimumImpl:qCe,multiplyImpl:XCe,negImpl:YCe,notEqualImpl:QCe,prodImpl:JCe,raggedGatherImpl:ZCe,raggedRangeImpl:eEe,raggedTensorToTensorImpl:tEe,rangeImpl:nEe,rsqrtImpl:rEe,scatterImpl:sEe,sigmoidImpl:iEe,simpleAbsImpl:zq,sliceImpl:oEe,sparseFillEmptyRowsImpl:aEe,sparseReshapeImpl:lEe,sparseSegmentReductionImpl:Bq,sqrtImpl:cEe,staticRegexReplaceImpl:uEe,stridedSliceImpl:dEe,stringNGramsImpl:hEe,stringSplitImpl:fEe,stringToHashBucketFastImpl:pEe,subImpl:mEe,tileImpl:gEe,topKImpl:yEe,transposeImpl:SP,uniqueImpl:bEe}=xbe;/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jq(t,e){return["x","y","z","w","u","v"].slice(0,e).map(n=>`${t}.${n}`)}function bs(t,e){return e===1?[t]:jq(t,e)}function vEe(t,e){if(t===1)return"rc";let n="";for(let r=0;r<t;r++)n+=e[r],r<t-1&&(n+=",");return n}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wEe{constructor(e){if(this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.enableShapeUniforms=os(this.outputShape.length),this.rank===0)this.userCode=`
        void main() {
          setOutput(vec4(getA(), 0., 0., 0.));
        }
      `;else{const n=bs("rc",this.rank),r=on(this.rank),s=this.getOutOfBoundsCondition(n),i=this.getSetup(n),o=this.getOutput(n);this.userCode=`
        void main() {
          ${r} rc = getOutputCoords();

          if(${s}) {
            setOutput(vec4(0));
          } else {
            ${i}

            setOutput(vec4(${o}));
          }
        }
      `}}getSourceCoordsArr(e){const n=[];for(let r=0;r<=1;r++)for(let s=0;s<=1;s++){let i=`${r===0?"r":"rp1"}, ${s===0?"c":"cp1"}`;for(let o=2;o<this.rank;o++)i=`${e[e.length-1-o]},`+i;n.push(i)}return n}getOutOfBoundsCondition(e){if(this.rank===1)return`rc > ${this.enableShapeUniforms?"outShape":this.outputShape[0]}`;let n="";for(let r=this.rank-2;r<this.rank;r++)n+=`${e[r]} >= ${this.enableShapeUniforms?`outShape[${r}]`:this.outputShape[r]}`,r<this.rank-1&&(n+="||");return n}getSetup(e){if(this.rank===1)return"";const n=e.slice(-2),r=this.enableShapeUniforms?`outShape[${this.rank} - 1]`:this.outputShape[this.rank-1],s=this.enableShapeUniforms?`outShape[${this.rank} - 2]`:this.outputShape[this.rank-2];return`
      int r = ${n[0]};
      int c = ${n[1]};
      int rp1 = r + 1;
      int cp1 = c + 1;

      bool cEdge = cp1 >= ${r};
      bool rEdge = rp1 >= ${s};
    `}getOutput(e){const n=this.getSourceCoordsArr(e);return this.rank===1?`getA(rc), (rc + 1 >= ${this.enableShapeUniforms?"outShape":this.outputShape[0]} ? 0. : getA(rc + 1)), 0, 0`:`getA(${n[0]}),
            cEdge ? 0. : getA(${n[1]}),
            rEdge ? 0. : getA(${n[2]}),
            rEdge || cEdge ? 0. : getA(${n[3]})`}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Vq{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec3"}],this.outputShape=e,this.enableShapeUniforms=os(this.outputShape.length);let r="";for(let s=0;s<4;s++){let i="thisRC = rc;";s%2===1&&(i+="thisRC.z += 1;"),s>1&&(i+="thisRC.y += 1;"),r+=`
        ${i}
        ${s>0?"if(thisRC.y < rows && thisRC.z < cols){":""}
          int flatIndex = getFlatIndex(thisRC);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);
          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${s}] =
            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);
        ${s>0?"}":""}
      `}this.userCode=`
      ${xEe(n,this.enableShapeUniforms)}
      ${this.enableShapeUniforms?wP():vP(e)}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.);

        ivec3 thisRC;
        int rows = ${this.enableShapeUniforms?"outShape[1]":e[1]};
        int cols = ${this.enableShapeUniforms?"outShape[2]":e[2]};

        ${r}

        setOutput(result);
      }
    `}}function xEe(t,e){return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e?vSe(["r","c","d"],"inputShape"):Hh(["r","c","d"],t)}
      return ivec3(r, c, d);
    }
  `}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class SEe{constructor(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0,this.freeTextures={},this.usedTextures={},this.logEnabled=!1}acquireTexture(e,n,r){const s=vz(n,r),i=wz(e,s,r);i in this.freeTextures||(this.freeTextures[i]=[]),i in this.usedTextures||(this.usedTextures[i]=[]);const o=bz(e,s,this.gpgpu.gl,this.gpgpu.textureConfig,r);if(this.freeTextures[i].length>0){this.numFreeTextures--,this.numUsedTextures++,this._numBytesFree-=o,this.log();const l=this.freeTextures[i].pop();return this.usedTextures[i].push(l),l}let a;return s===Vr.PACKED_2X2_FLOAT32?a=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):s===Vr.PACKED_2X2_FLOAT16?a=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):s===Vr.UNPACKED_FLOAT32?a=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):s===Vr.UNPACKED_FLOAT16?a=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):s===Vr.PACKED_4X1_UNSIGNED_BYTE&&(a=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[i].push(a),this.numUsedTextures++,this._numBytesAllocated+=o,this.log(),a}releaseTexture(e,n,r,s){if(this.freeTextures==null)return;const i=vz(r,s),o=wz(n,i,s);o in this.freeTextures||(this.freeTextures[o]=[]);const a=bz(n,i,this.gpgpu.gl,this.gpgpu.textureConfig,s),l=ce().getNumber("WEBGL_DELETE_TEXTURE_THRESHOLD");l!==-1&&this._numBytesAllocated>l?(this.gpgpu.deleteMatrixTexture(e.texture),this._numBytesAllocated-=a):(this.freeTextures[o].push(e),this.numFreeTextures++,this._numBytesFree+=a),this.numUsedTextures--;const c=this.usedTextures[o],u=c&&c.indexOf(e);if(u==null||u<0)throw new Error("Cannot release a texture that was never provided by this texture manager");c[u]=c[c.length-1],c.pop(),this.log()}log(){if(!this.logEnabled)return;const e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",`${this.numFreeTextures} / ${this.numUsedTextures}`,`(${e})`);const n=this._numBytesFree/this._numBytesAllocated;console.log(`Bytes allocated: ${this._numBytesAllocated}`),console.log(`Bytes unused: ${this._numBytesFree} (${Math.round(100*n)}%)`)}get numBytesAllocated(){return this._numBytesAllocated}get numBytesFree(){return this._numBytesFree}getNumUsedTextures(){return this.numUsedTextures}getNumFreeTextures(){return this.numFreeTextures}dispose(){if(this.freeTextures!=null){for(const e in this.freeTextures)this.freeTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});for(const e in this.usedTextures)this.usedTextures[e].forEach(n=>{this.gpgpu.deleteMatrixTexture(n.texture)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0,this._numBytesAllocated=0,this._numBytesFree=0}}}function CEe(t,e){const n=t;if(e===n.R32F)return 4;if(e===n.R16F)return 2;if(e===n.RGBA32F)return 16;if(e===t.RGBA)return 16;if(e===n.RGBA16F)return 8;if(e===n.RGBA8)return 4;throw new Error(`Unknown internal format ${e}`)}function bz(t,e,n,r,s){const i=EEe(e,r);let o;if(s){const[l,c]=cg(t[0],t[1]);o=l*c}else{const[l,c]=M0(t[0],t[1]);o=l*c}const a=CEe(n,i);return o*a}function EEe(t,e){switch(t){case Vr.PACKED_2X2_FLOAT32:return Lq(e);case Vr.PACKED_2X2_FLOAT16:return Fq(e);case Vr.UNPACKED_FLOAT32:return Oq(e);case Vr.UNPACKED_FLOAT16:return Dq(e);case Vr.PACKED_4X1_UNSIGNED_BYTE:return Pq(e);default:throw new Error(`Unknown physical texture type ${t}`)}}function _Ee(t){return ce().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?t?Vr.PACKED_2X2_FLOAT32:Vr.UNPACKED_FLOAT32:t?Vr.PACKED_2X2_FLOAT16:Vr.UNPACKED_FLOAT16}function vz(t,e){if(t===Mi.UPLOAD)return Vr.PACKED_2X2_FLOAT32;if(t===Mi.RENDER||t==null)return _Ee(e);if(t===Mi.DOWNLOAD||t===Mi.PIXELS)return Vr.PACKED_4X1_UNSIGNED_BYTE;throw new Error(`Unknown logical texture type ${t}`)}function wz(t,e,n){return`${t[0]}_${t[1]}_${e}_${n}`}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Wa{constructor(e,n){this.variableNames=["A"],this.outputShape=e,this.enableShapeUniforms=os(this.outputShape.length),this.userCode=`
      float unaryOperation(float x) {
        ${n}
      }

      void main() {
        float x = getAAtOutCoords();
        float y = unaryOperation(x);

        setOutput(y);
      }
    `}}const Vo="if (isnan(x)) return x;",TEe="return x;",xz="return abs(x);",kEe="return (x >= 0.0) ? x : (exp(x) - 1.0);",IEe=Vo+`
  return (x < 0.0) ? 0.0 : x;
`,NEe=Vo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,Lc="return x;",$Ee="return 1.0 / (1.0 + exp(-1.0 * x));";/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const AEe="return x;",REe=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,OEe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,DEe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,PEe="return 1.0 / (1.0 + exp(-1.0 * x));";class Xc{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.enableShapeUniforms=os(this.outputShape.length),this.userCode=`
      vec4 unaryOperation(vec4 x) {
        ${n}
      }

      void main() {
        vec4 x = getAAtOutCoords();
        vec4 y = unaryOperation(x);

        setOutput(y);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LEe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!1,this.outputShape=e,this.enableShapeUniforms=os(this.outputShape.length);const n=e.length,r=bs("rc",n),s=on(n),i=vEe(n,r),o=r.slice(-2),a=n<=1?"rc":`vec2(${o.join(",")})`;this.userCode=`
      void main() {
        ${s} rc = getOutputCoords();
        vec4 packedInput = getA(${i});

        setOutput(getChannel(packedInput, ${a}));
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FEe=f_,MEe=1e-7,zEe=1e-4,Gx={};function BEe(t){return t in Gx||(Gx[t]={}),Gx[t]}const jEe=ce().getNumber("CPU_HANDOFF_SIZE_THRESHOLD"),VEe=600;function UEe(){return ce().global.screen==null?1024:ce().global.screen.height*ce().global.screen.width*window.devicePixelRatio*VEe/1024/1024}class G_ extends $C{nextDataId(){return G_.nextDataId++}constructor(e){if(super(),this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.lastGlFlushTime=0,this.warnedAboutMemory=!1,this.pendingDeletes=0,this.disposed=!1,!ce().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");let n;if(e!=null){if(e instanceof sN)n=e;else{const r=ya(ce().getNumber("WEBGL_VERSION"),e);n=new sN(r)}this.binaryCache={},this.gpgpuCreatedLocally=!1}else{const r=ya(ce().getNumber("WEBGL_VERSION"));n=new sN(r),this.binaryCache=BEe(ce().getNumber("WEBGL_VERSION")),this.gpgpuCreatedLocally=!0}this.gpgpu=n,this.canvas=this.gpgpu.gl.canvas,this.textureManager=new SEe(this.gpgpu),this.numMBBeforeWarning=UEe(),this.texData=new ER(this,ta())}numDataIds(){return this.texData.numDataIds()-this.pendingDeletes}writeTexture(e,n,r,s,i,o){const a=this.makeTensorInfo(n,r),l=this.texData.get(a.dataId);l.isPacked=!1,l.texture={texture:e,texShape:[s,i]},l.texShape=[s,i];const c=Wx(n),u=new yz(c,!1,o),d=this.runWebGLProgram(u,[a],r,[[s,i]]);return d.shape=n,l.texture=null,this.disposeIntermediateTensorInfo(a),d.dataId}write(e,n,r){if((ce().getBool("WEBGL_CHECK_NUMERICAL_PROBLEMS")||ce().getBool("DEBUG"))&&this.checkNumericalProblems(e),r==="complex64"&&e!=null)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");const s={id:this.nextDataId()};return this.texData.set(s,{shape:n,dtype:r,values:e,usage:Mi.UPLOAD,refCount:1}),s}refCount(e){return this.texData.has(e)?this.texData.get(e).refCount:0}incRef(e){const n=this.texData.get(e);n.refCount++}decRef(e){if(this.texData.has(e)){const n=this.texData.get(e);n.refCount--}}move(e,n,r,s,i){if(ce().getBool("DEBUG")&&this.checkNumericalProblems(n),s==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.texData.set(e,{shape:r,dtype:s,values:n,usage:Mi.UPLOAD,refCount:i})}disposeIntermediateTensorInfo(e){this.disposeData(e.dataId)}readSync(e){const n=this.texData.get(e),{values:r,dtype:s,complexTensorInfos:i,slice:o,shape:a,isPacked:l}=n;if(o!=null){let h;l?h=new Xc(a,Lc):h=new Wa(a,Lc);const f=this.runWebGLProgram(h,[{dataId:e,shape:a,dtype:s}],s),p=this.readSync(f.dataId);return this.disposeIntermediateTensorInfo(f),p}if(r!=null)return this.convertAndCacheOnCPU(e);if(s==="string")return r;const c=this.activeTimers!=null;let u;c&&(u=fs());let d;if(s==="complex64"){const h=this.readSync(i.real.dataId),f=this.readSync(i.imag.dataId);d=ec(h,f)}else d=this.getValuesFromTexture(e);return c&&(this.downloadWaitMs+=fs()-u),this.convertAndCacheOnCPU(e,d)}async read(e){if(this.pendingRead.has(e)){const p=this.pendingRead.get(e);return new Promise(m=>p.push(m))}const n=this.texData.get(e),{values:r,shape:s,slice:i,dtype:o,complexTensorInfos:a,isPacked:l}=n;if(i!=null){let p;l?p=new Xc(s,Lc):p=new Wa(s,Lc);const m=this.runWebGLProgram(p,[{dataId:e,shape:s,dtype:o}],o),g=this.read(m.dataId);return this.disposeIntermediateTensorInfo(m),g}if(r!=null)return this.convertAndCacheOnCPU(e);if(ce().getBool("DEBUG")&&!ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&ce().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");let c=null,u;if(o!=="complex64"&&ce().get("WEBGL_BUFFER_SUPPORTED")){u=this.decode(e);const p=this.texData.get(u.dataId);c=this.gpgpu.createBufferFromTexture(p.texture.texture,...jx(s))}this.pendingRead.set(e,[]),o!=="complex64"&&await this.gpgpu.createAndWaitForFence();let d;if(o==="complex64"){const p=await Promise.all([this.read(a.real.dataId),this.read(a.imag.dataId)]),m=p[0],g=p[1];d=ec(m,g)}else if(c==null)d=this.getValuesFromTexture(e);else{const p=fe(s);d=this.gpgpu.downloadFloat32MatrixFromBuffer(c,p)}if(u!=null&&this.disposeIntermediateTensorInfo(u),c!=null){const p=this.gpgpu.gl;Me(p,()=>p.deleteBuffer(c))}const h=this.convertAndCacheOnCPU(e,d),f=this.pendingRead.get(e);return this.pendingRead.delete(e),f.forEach(p=>p(h)),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)&&ta().removeDataId(e,this),this.pendingDeletes--),h}readToGPU(e,n={}){const r=this.texData.get(e),{values:s,shape:i,slice:o,dtype:a,isPacked:l,texture:c}=r;if(a==="complex64")throw new Error("Does not support reading texture for complex64 dtype.");if(o!=null){let f;l?f=new Xc(i,Lc):f=new Wa(i,Lc);const p=this.runWebGLProgram(f,[{dataId:e,shape:i,dtype:a}],a),m=this.readToGPU(p,n);return this.disposeIntermediateTensorInfo(p),m}if(c==null)throw s!=null?new Error("Data is not on GPU but on CPU."):new Error("There is no data on GPU or CPU.");const u=this.decode(e,n.customTexShape),d=ta().makeTensorFromTensorInfo(u),h=this.texData.get(u.dataId);return Object.assign({tensorRef:d},h.texture)}bufferSync(e){const n=this.readSync(e.dataId);if(e.dtype==="string")try{const r=n.map(s=>Ql(s));return xt(e.shape,e.dtype,r)}catch{throw new Error("Failed to decode encoded string bytes into utf-8")}return xt(e.shape,e.dtype,n)}checkNumericalProblems(e){if(e!=null)for(let n=0;n<e.length;n++){const r=e[n];if(!G1e(r))throw ce().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error(`The value ${r} cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'`):Error(`The value ${r} cannot be represented on this device.`)}}getValuesFromTexture(e){const{shape:n,dtype:r,isPacked:s}=this.texData.get(e),i=fe(n);if(ce().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){const h=this.decode(e),f=this.texData.get(h.dataId),p=this.gpgpu.downloadMatrixFromPackedTexture(f.texture.texture,...jx(n)).subarray(0,i);return this.disposeIntermediateTensorInfo(h),p}const o=ce().getBool("WEBGL_PACK")&&s===!0,a=o?Wx(n):n,l=o?new lCe(a):new aCe(a),c=this.runWebGLProgram(l,[{shape:a,dtype:r,dataId:e}],"float32"),u=this.texData.get(c.dataId),d=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(u.texture.texture,u.texShape[0],u.texShape[1]).subarray(0,i);return this.disposeIntermediateTensorInfo(c),d}timerAvailable(){return ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0}time(e){const n=this.activeTimers,r=[];let s=!1;this.programTimersStack==null?(this.programTimersStack=r,s=!0):this.activeTimers.push(r),this.activeTimers=r,e();const i=ol(this.activeTimers.map(l=>l.query)).filter(l=>l!=null),o=ol(this.activeTimers.map(l=>l.name)).filter(l=>l!=null);this.activeTimers=n,s&&(this.programTimersStack=null);const a={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:null,wallMs:null};return(async()=>{if(ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0){const l=await Promise.all(i);a.kernelMs=O4(l),a.getExtraProfileInfo=()=>l.map((c,u)=>({name:o[u],ms:c})).map(c=>`${c.name}: ${c.ms}`).join(", ")}else a.kernelMs={error:"WebGL query timers are not supported in this environment."};return this.uploadWaitMs=0,this.downloadWaitMs=0,a})()}memory(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU,numBytesInGPUAllocated:this.textureManager.numBytesAllocated,numBytesInGPUFree:this.textureManager.numBytesFree}}startTimer(){return ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?this.gpgpu.beginQuery():{startMs:fs(),endMs:null}}endTimer(e){return ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0?(this.gpgpu.endQuery(),e):(e.endMs=fs(),e)}async getQueryTime(e){if(ce().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE")>0)return this.gpgpu.waitForQueryAndGetTime(e);const n=e;return n.endMs-n.startMs}disposeData(e,n=!1){if(this.pendingDisposal.has(e))return!1;if(!this.texData.has(e))return!0;if(n?this.texData.get(e).refCount=0:this.texData.get(e).refCount--,!n&&this.texData.get(e).refCount>0)return!1;if(this.pendingRead.has(e))return this.pendingDisposal.add(e),this.pendingDeletes++,!1;this.releaseGPUData(e);const{complexTensorInfos:r}=this.texData.get(e);return r!=null&&(this.disposeData(r.real.dataId,n),this.disposeData(r.imag.dataId,n)),this.texData.delete(e),!0}releaseGPUData(e){const{texture:n,dtype:r,texShape:s,usage:i,isPacked:o,slice:a}=this.texData.get(e),l=a&&a.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),n!=null&&(this.numBytesInGPU-=this.computeBytes(s,r),this.textureManager.releaseTexture(n,s,i,o)));const u=this.texData.get(e);u.texture=null,u.texShape=null,u.isPacked=!1,u.slice=null}getTexture(e){return this.uploadToGPU(e),this.texData.get(e).texture.texture}getDataInfo(e){return this.texData.get(e)}shouldExecuteOnCPU(e,n=jEe){return ce().getBool("WEBGL_CPU_FORWARD")&&e.every(r=>this.texData.get(r.dataId).texture==null&&fe(r.shape)<n)}getGPGPUContext(){return this.gpgpu}where(e){Ai("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");const n=e.dataSync();return FEe(e.shape,n)}packedUnaryOp(e,n,r){const s=new Xc(e.shape,n),i=this.compileAndRun(s,[e],r);return ta().makeTensorFromTensorInfo(i)}abs(e){if(this.shouldExecuteOnCPU([e])&&e.dtype!=="complex64"){const s=zq(this.texData.get(e.dataId).values);return this.makeOutput(e.shape,e.dtype,s)}if(ce().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,xz,e.dtype);const n=new Wa(e.shape,xz),r=this.compileAndRun(n,[e]);return ta().makeTensorFromTensorInfo(r)}makeTensorInfo(e,n,r){let s;if(n==="string"&&r!=null&&r.length>0&&Ua(r[0])){const i=r.map(o=>qa(o));s=this.write(i,e,n)}else s=this.write(r,e,n);return this.texData.get(s).usage=null,{dataId:s,shape:e,dtype:n}}makeOutput(e,n,r){return ta().makeTensorFromTensorInfo(this.makeTensorInfo(e,n,r),this)}unpackTensor(e){const n=new LEe(e.shape);return this.runWebGLProgram(n,[e],e.dtype)}packTensor(e){const n=new wEe(e.shape);return this.runWebGLProgram(n,[e],e.dtype,null,!0)}packedReshape(e,n){const r=[jp(e.shape),...Vp(e.shape)],s={dtype:e.dtype,shape:r,dataId:e.dataId},i=[jp(n),...Vp(n)],o=new Vq(i,r),a=!0,l=[r],c=this.runWebGLProgram(o,[s],e.dtype,l,a);return{dataId:c.dataId,shape:n,dtype:c.dtype}}decode(e,n){const r=this.texData.get(e),{isPacked:s,shape:i,dtype:o}=r;if(n!=null){const h=fe(i),f=n[0]*n[1]*4;P(h<=f,()=>"customTexShape is too small. Row * Column * 4 should be equal or larger than the size of the tensor data.")}const a=Wx(i);let l;s?l=new oCe(a):l=new iCe(a);const c=!0,u=[n??jx(a)],d=this.runWebGLProgram(l,[{shape:a,dtype:o,dataId:e}],o,u,c,n);return{dtype:o,shape:i,dataId:d.dataId}}runWebGLProgram(e,n,r,s,i=!1,o){const a=this.makeTensorInfo(e.outputShape,r),l=this.texData.get(a.dataId);if(e.packedOutput&&(l.isPacked=!0),e.outPackingScheme===Nb.DENSE){const y=o??jx(e.outputShape);l.texShape=y.map(b=>b*2)}if(e.outTexUsage!=null&&(l.usage=e.outTexUsage),fe(a.shape)===0)return l.values=Pr(a.dtype,0),a;const c=[],u=n.map(y=>{if(y.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");let b=this.texData.get(y.dataId);if(b.texture==null){if(!e.packedInputs&&fe(y.shape)<=ce().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:y.shape,texData:null,isUniform:!0,uniformValues:b.values};e.packedInputs&&(b.isPacked=!0,b.shape=y.shape)}if(this.uploadToGPU(y.dataId),!!b.isPacked!=!!e.packedInputs)y=b.isPacked?this.unpackTensor(y):this.packTensor(y),c.push(y),b=this.texData.get(y.dataId);else if(b.isPacked&&!zS(b.shape,y.shape)){const v=y,w=y.shape;y.shape=b.shape,y=this.packedReshape(y,w),c.push(y),b=this.texData.get(y.dataId),v.shape=w}return{shape:y.shape,texData:b,isUniform:!1}});this.uploadToGPU(a.dataId);const d={shape:a.shape,texData:l,isUniform:!1},h=sCe(e,u,d),f=this.getAndSaveBinary(h,()=>nCe(this.gpgpu,e,u,d)),p=this.activeTimers!=null;let m;p&&(m=this.startTimer()),ce().get("ENGINE_COMPILE_ONLY")||rCe(this.gpgpu,f,u,d,s),c.forEach(y=>this.disposeIntermediateTensorInfo(y)),p&&(m=this.endTimer(m),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(m)}));const g=ce().getNumber("WEBGL_FLUSH_THRESHOLD");if(g>0){const y=fs();y-this.lastGlFlushTime>g&&(this.gpgpu.gl.flush(),this.lastGlFlushTime=y)}if(!ce().getBool("WEBGL_LAZILY_UNPACK")&&l.isPacked&&i===!1){const y=this.unpackTensor(a);return this.disposeIntermediateTensorInfo(a),y}return a}compileAndRun(e,n,r,s,i=!1){return r=r||n[0].dtype,this.runWebGLProgram(e,n,r,s,i)}getAndSaveBinary(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]}getTextureManager(){return this.textureManager}dispose(){this.disposed||(ce().getBool("IS_TEST")||Object.keys(this.binaryCache).forEach(n=>{this.gpgpu.deleteProgram(this.binaryCache[n].webGLProgram),delete this.binaryCache[n]}),this.textureManager.dispose(),this.canvas!=null&&typeof HTMLCanvasElement<"u"&&this.canvas instanceof HTMLCanvasElement?this.canvas.remove():this.canvas=null,this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)}floatPrecision(){return this.floatPrecisionValue==null&&(this.floatPrecisionValue=oe(()=>{if(!ce().get("WEBGL_RENDER_FLOAT32_ENABLED")){const e=ce().getBool("DEBUG");ce().set("DEBUG",!1);const n=this.abs(tt(1e-8)).dataSync()[0];if(ce().set("DEBUG",e),n>0)return 32}return 16})),this.floatPrecisionValue}epsilon(){return this.floatPrecision()===32?MEe:zEe}uploadToGPU(e){const n=this.texData.get(e),{shape:r,dtype:s,values:i,texture:o,usage:a,isPacked:l}=n;if(o!=null)return;const c=this.activeTimers!=null;let u;c&&(u=fs());let d=n.texShape;if(d==null&&(d=uSe(r,l),n.texShape=d),i!=null){const h=Wx(r);let f,p=d[1],m=d[0];const g=i instanceof Uint8Array||i instanceof Uint8ClampedArray;(l||!g)&&([p,m]=cg(d[0],d[1])),l?f=new uCe(h,g):f=new yz(h,g);const y=g?[m,p]:d,b=this.makeTensorInfo(y,s),v=this.texData.get(b.dataId);g?v.usage=Mi.PIXELS:v.usage=Mi.UPLOAD,v.texShape=y,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(b.dataId),p,m,i);const w=[[m,p]],_=this.runWebGLProgram(f,[b],s,w,!0),E=this.texData.get(_.dataId);n.texShape=E.texShape,n.isPacked=E.isPacked,n.usage=E.usage,ce().get("ENGINE_COMPILE_ONLY")?this.disposeData(_.dataId):(n.texture=E.texture,n.values=null,this.texData.delete(_.dataId)),this.disposeIntermediateTensorInfo(b),c&&(this.uploadWaitMs+=fs()-u)}else{const h=this.acquireTexture(d,a,s,l);n.texture=h}}convertAndCacheOnCPU(e,n){const r=this.texData.get(e),{dtype:s}=r;return n!=null&&(r.values=WEe(n,s)),r.values}acquireTexture(e,n,r,s){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>this.numMBBeforeWarning*1024*1024){const i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn(`High memory usage in GPU: ${i} MB, most likely due to a memory leak`)}return this.textureManager.acquireTexture(e,n,s)}computeBytes(e,n){return e[0]*e[1]*db(n)}checkCompileCompletion(){for(const[,e]of Object.entries(this.binaryCache))this.checkCompletion_(e)}async checkCompileCompletionAsync(){const e=[];if(this.gpgpu.parallelCompilationExtension){for(const[,n]of Object.entries(this.binaryCache))e.push(this.checkCompletionAsync_(n));return Promise.all(e)}else{for(const[,n]of Object.entries(this.binaryCache)){const r=new Promise(s=>{try{this.checkCompletion_(n),s(!0)}catch(i){throw i}});e.push(r)}return Promise.all(e)}}async checkCompletionAsync_(e){return this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.parallelCompilationExtension.COMPLETION_STATUS_KHR)?this.checkCompletion_(e):(await hD(),this.checkCompletionAsync_(e))}checkCompletion_(e){if(this.gpgpu.gl.getProgramParameter(e.webGLProgram,this.gpgpu.gl.LINK_STATUS)===!1)throw console.log(this.gpgpu.gl.getProgramInfoLog(e.webGLProgram)),this.gpgpu.gl.getShaderParameter(e.fragmentShader,this.gpgpu.gl.COMPILE_STATUS)===!1?(kq(e.source,this.gpgpu.gl.getShaderInfoLog(e.fragmentShader)),new Error("Failed to compile fragment shader.")):new Error("Failed to link vertex and fragment shaders.");return!0}getUniformLocations(){for(const e of Object.values(this.binaryCache)){this.gpgpu.buildVao(e.webGLProgram);const{variablesLocations:n,customUniformLocations:r,infLoc:s,nanLoc:i,outShapeLocation:o,outShapeStridesLocation:a,outTexShapeLocation:l}=Rq(this.gpgpu,e.program,e.webGLProgram);e.variablesLocations=n,e.customUniformLocations=r,e.infLoc=s,e.nanLoc=i,e.outShapeLocation=o,e.outShapeStridesLocation=a,e.outTexShapeLocation=l}}createTensorFromGPUData(e,n,r){e.channels=e.channels||"RGBA";const{texture:s,height:i,width:o,channels:a}=e,l=ta().backend;if(!l.gpgpu.gl.isTexture(s))throw new Error("The texture is invalid. Also, please make sure the texture and the TFJS WebGL backend are using the same canvas. If you want to use your own custom canvas, you have to create and use the custom TFJS WebGL backend created from the canvas through 'new tf.MathBackendWebGL(customCanvas)'.");const c=l.writeTexture(s,n,r,i,o,a);return ta().makeTensorFromDataId(c,n,r,l)}}G_.nextDataId=0;function WEe(t,e){if(e==="float32"||e==="complex64")return t;if(e==="int32"||e==="bool"){const n=e==="int32"?new Int32Array(t.length):new Uint8Array(t.length);for(let r=0;r<n.length;++r)n[r]=Math.round(t[r]);return n}else throw new Error(`Unknown dtype ${e}`)}/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */PR()&&FR("webgl",()=>new G_,2);/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const CP=`
  if (isnan(a)) return a;
  if (isnan(b)) return b;
`;class Sh{constructor(e,n,r){this.variableNames=["A","B"],this.outputShape=yt(n,r),this.enableShapeUniforms=os(this.outputShape.length),this.userCode=`
      float binaryOperation(float a, float b) {
        ${e}
      }

      void main() {
        float a = getAAtOutCoords();
        float b = getBAtOutCoords();
        setOutput(binaryOperation(a, b));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Kh=`
  result.r = isNaN.r ? NAN : result.r;
  result.g = isNaN.g ? NAN : result.g;
  result.b = isNaN.b ? NAN : result.b;
  result.a = isNaN.a ? NAN : result.a;
`;class pg{constructor(e,n,r,s=!1){this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.packedInputs=!0,this.packedOutput=!0,this.outputShape=yt(n,r);const i=this.outputShape.length;this.enableShapeUniforms=os(i);let o="";if(s)if(i===0||fe(this.outputShape)===1)o=`
          result.y = 0.;
          result.z = 0.;
          result.w = 0.;
        `;else if(o=`
          ${on(i)} coords = getOutputCoords();
        `,i===1)this.enableShapeUniforms?o+=`
            result.y = (coords + 1) >= outShape ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `:o+=`
            result.y = (coords + 1) >= ${this.outputShape[0]} ? 0. : result.y;
            result.z = 0.;
            result.w = 0.;
          `;else{const l=bs("coords",i);this.enableShapeUniforms?o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= outShape[${i} - 2];
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= outShape[${i} - 1];
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `:o+=`
            bool nextRowOutOfBounds =
              (${l[i-2]} + 1) >= ${this.outputShape[i-2]};
            bool nextColOutOfBounds =
              (${l[i-1]} + 1) >= ${this.outputShape[i-1]};
            result.y = nextColOutOfBounds ? 0. : result.y;
            result.z = nextRowOutOfBounds ? 0. : result.z;
            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;
          `}this.userCode=`
      vec4 binaryOperation(vec4 a, vec4 b) {
        ${e}
      }

      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();

        vec4 result = binaryOperation(a, b);
        ${o}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bi(t){const{inputs:e,backend:n}=t,{x:r}=e;return n.incRef(r.dataId),{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}const HEe={kernelName:Sm,backendName:"webgl",kernelFunc:bi};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Gu(t){const{inputs:e,backend:n}=t,{real:r,imag:s}=e,i=n.makeTensorInfo(r.shape,"complex64"),o=n.texData.get(i.dataId),a=bi({inputs:{x:r},backend:n}),l=bi({inputs:{x:s},backend:n});return o.complexTensorInfos={real:a,imag:l},i}const GEe={kernelName:zC,backendName:"webgl",kernelFunc:Gu};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Uq="return (a < 0.) ? b * a : a;",Wq=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function KEe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{alpha:i}=r,o=n.makeTensorInfo([],"float32",cc(i,"float32")),a=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pg(Wq,s.shape,o.shape):new Sh(Uq,s.shape,o.shape),l=n.runWebGLProgram(a,[s,o],"float32");return n.disposeIntermediateTensorInfo(o),l}const qEe={kernelName:xv,backendName:"webgl",kernelFunc:KEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Hq="return (a < 0.) ? b * a : a;",Gq=`
  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));
  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);
`;function XEe(t){const{inputs:e,backend:n}=t,{x:r,alpha:s}=e,i=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pg(Gq,r.shape,s.shape):new Sh(Hq,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],"float32")}const YEe={kernelName:Bv,backendName:"webgl",kernelFunc:XEe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mg="if (isnan(x)) return x;";function Lt({opSnippet:t,packedOpSnippet:e,cpuKernelImpl:n,dtype:r}){return({inputs:s,backend:i})=>{const{x:o}=s,a=i,l=r||o.dtype;if(a.shouldExecuteOnCPU([o])&&n!=null){const d=a.texData.get(o.dataId),h=n(d.values,l);return a.makeTensorInfo(o.shape,l,h)}const c=ce().getBool("WEBGL_PACK_UNARY_OPERATIONS")&&e!=null;let u;return c?u=new Xc(o.shape,e):u=new Wa(o.shape,t),a.runWebGLProgram(u,[o],l)}}function Yr({opSnippet:t,packedOpSnippet:e,checkOutOfBounds:n=!1,supportsComplex:r=!1,cpuKernelImpl:s,dtype:i}){return({inputs:o,backend:a})=>{const{a:l,b:c}=o,u=a;if(r&&l.dtype==="complex64"){const p=u.texData.get(l.dataId),m=u.texData.get(c.dataId),[g,y]=[[p.complexTensorInfos.real,m.complexTensorInfos.real],[p.complexTensorInfos.imag,m.complexTensorInfos.imag]].map(v=>{const[w,C]=v,_={dataId:w.dataId,dtype:w.dtype,shape:l.shape},E={dataId:C.dataId,dtype:C.dtype,shape:c.shape},I=new Sh(t,l.shape,c.shape);return u.runWebGLProgram(I,[_,E],Ms(w.dtype,C.dtype))}),b=Gu({inputs:{real:g,imag:y},backend:u});return u.disposeIntermediateTensorInfo(g),u.disposeIntermediateTensorInfo(y),b}const d=i||Ms(l.dtype,c.dtype);if((l.dtype==="string"||c.dtype==="string"||u.shouldExecuteOnCPU([l,c]))&&s!=null){const p=u.texData.get(l.dataId).values,m=u.texData.get(c.dataId).values,g=l.dtype==="string"?tc(p):p,y=l.dtype==="string"?tc(m):m,[b,v]=s(l.shape,c.shape,g,y,d),w=u.makeTensorInfo(v,d),C=u.texData.get(w.dataId);return C.values=b,w}const h=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")&&e!=null;let f;return h?f=new pg(e,l.shape,c.shape,n):f=new Sh(t,l.shape,c.shape),u.runWebGLProgram(f,[l,c],d)}}function $b(t,e=!1){if(t==="linear")return e?AEe:TEe;if(t==="relu")return e?OEe:IEe;if(t==="elu")return e?REe:kEe;if(t==="relu6")return e?DEe:NEe;if(t==="prelu")return e?Gq:Hq;if(t==="leakyrelu")return e?Wq:Uq;if(t==="sigmoid")return e?PEe:$Ee;throw new Error(`Activation ${t} has not been implemented for the WebGL backend.`)}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Kq{constructor(e,n,r,s=!1,i=!1,o=!1,a=null,l=!1,c=!1){this.variableNames=["matrixA","matrixB"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=r,this.enableShapeUniforms=os(this.outputShape.length);const u=s?e[1]:e[2],d=Math.ceil(u/2),h=s?"i * 2, rc.y":"rc.y, i * 2",f=i?"rc.z, i * 2":"i * 2, rc.z",p=s?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],m=i?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"];let g="",y="";a&&(l?g=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${a}
        }`:c?g=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${a}
        }`:g=`vec4 activation(vec4 x) {
          ${a}
        }`,y="result = activation(result);");const b=o?"result += getBiasAtOutCoords();":"";o&&this.variableNames.push("bias"),l&&this.variableNames.push("preluActivationWeights"),c&&this.variableNames.push("leakyreluAlpha");let v="rc.x",w="rc.x";e[0]<n[0]?v=`imod(rc.x, ${e[0]})`:n[0]<e[0]&&(w=`imod(rc.x, ${n[0]})`),this.userCode=`
      ${g}
      // Don't use uniform for sharedDimensionPacked for performance.
      const float sharedDimension = ${d}.0;

      vec4 dot2x2ARowBCol(ivec3 rc) {
        vec4 result = vec4(0);
        int batchA = ${v};
        int batchB = ${w};
        for (int i = 0; i < ${d}; i++) {
          vec4 a = getMatrixA(batchA, ${h});
          vec4 b = getMatrixB(batchB, ${f});

          // These swizzled products need to be separately added.
          // See: https://github.com/tensorflow/tfjs/issues/1735
          result += (${p[0]} * ${m[0]});
          result += (${p[1]} * ${m[1]});
        }
        return result;
      }

      void main() {
        ivec3 rc = getOutputCoords();
        vec4 result = dot2x2ARowBCol(rc);

        ${b}

        ${y}

        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Sz={REAL:"return areal * breal - aimag * bimag;",IMAG:"return areal * bimag + aimag * breal;"};class Cz{constructor(e,n,r){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=yt(n,r),this.userCode=`
      float binaryOpComplex(
          float areal, float aimag, float breal, float bimag) {
        ${e}
      }

      void main() {
        float areal = getARealAtOutCoords();
        float aimag = getAImagAtOutCoords();
        float breal = getBRealAtOutCoords();
        float bimag = getBImagAtOutCoords();
        setOutput(binaryOpComplex(areal, aimag, breal, bimag));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Ez="return a * b;";function EP(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=Ms(r.dtype,s.dtype);if(r.dtype==="complex64"){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),c=new Cz(Sz.REAL,r.shape,s.shape),u=new Cz(Sz.IMAG,r.shape,s.shape),d=[{dataId:a.complexTensorInfos.real.dataId,dtype:a.complexTensorInfos.real.dtype,shape:r.shape},{dataId:a.complexTensorInfos.imag.dataId,dtype:a.complexTensorInfos.imag.dtype,shape:r.shape},{dataId:l.complexTensorInfos.real.dataId,dtype:l.complexTensorInfos.real.dtype,shape:s.shape},{dataId:l.complexTensorInfos.imag.dataId,dtype:l.complexTensorInfos.imag.dtype,shape:s.shape}],h=n.runWebGLProgram(c,d,"float32"),f=n.runWebGLProgram(u,d,"float32"),p=Gu({inputs:{real:h,imag:f},backend:n});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}if(n.shouldExecuteOnCPU([r,s])){const a=n.texData.get(r.dataId),l=n.texData.get(s.dataId),[c,u]=XCe(r.shape,s.shape,a.values,l.values,i),d=n.makeTensorInfo(u,i),h=n.texData.get(d.dataId);return h.values=c,d}let o;return ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?o=new pg(Ez,r.shape,s.shape):o=new Sh(Ez,r.shape,s.shape),n.runWebGLProgram(o,[r,s],i)}const QEe={kernelName:Am,backendName:"webgl",kernelFunc:EP};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function JEe(t,e,n){const r=[jp(t.shape),...Vp(t.shape)],s={dtype:t.dtype,shape:r,dataId:t.dataId},i=[jp(e),...Vp(e)],o=new Vq(i,r),a=!0,l=[r],c=n.runWebGLProgram(o,[s],t.dtype,l,a);return{dataId:c.dataId,shape:e,dtype:c.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Oe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{shape:i}=r,o=n,a=fe(s.shape),l=TR(i,a),c=fe(l);P(a===c,()=>`The new shape (${l}) has ${c} elements and the old shape (${s.shape}) has ${a} elements. The new shape and old shape must have the same number of elements.`);const u=o.texData.get(s.dataId);return u.isPacked&&!zS(s.shape,l)&&!(u.texture!==null&&zS(u.shape,l))?JEe(s,l,o):(o.incRef(s.dataId),{dataId:s.dataId,shape:l,dtype:s.dtype})}const ZEe={kernelName:Vv,backendName:"webgl",kernelFunc:Oe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _z{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];const a=Math.floor(r/4)*4,l=r%4;let c="sumValue += dot(values, ones);";if(n!=null){const d=1/n;c=`sumValue += dot(values * ${ah(d)?d.toPrecision(2):d}, ones);`}let u="";i%r>0&&(u=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return 0.0;
        }
      `),this.userCode=`
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${u}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        float sumValue = 0.0;

        for (int i = 0; i < ${a}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${c}
        }

        int inIdx = inOffset + ${a};
        if (${l===1}) {
          vec4 values = vec4(getValue(batch, inIdx), 0.0, 0.0, 0.0);

          ${c}
        } else if (${l===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1), 0.0, 0.0);

          ${c}
        } else if (${l===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2), 0.0);

          ${c}
        }
        setOutput(sumValue);
      }
    `}}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e_e{constructor(e,n){this.variableNames=["x"];const{windowSize:r,batchSize:s,inSize:i,outSize:o}=e;this.outputShape=[s,o];let a="0.0",l="";n==="prod"?a="1.0":n==="min"?(a="1.0 / 1e-20",l="min"):n==="max"&&(a="-1.0 / 1e-20",l="max");let c=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="sum"?c="sumValue":n==="prod"?c="prodValue":n==="all"?c="allValue":n==="any"&&(c="anyValue");const u=Math.floor(r/4)*4,d=r%4;let h=`
      if (${n==="sum"}) {
        sumValue += dot(values, ones);
      } else if (${n==="prod"}) {
        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);
        prodValue *= tmp[0] * tmp[1];
      } else {
        minMaxValue = ${l}(values, minMaxValue);
        if (${n==="min"} || ${n==="max"}) {
          minMaxValue = ${l}(values, minMaxValue);
          bvec4 isNaN = isnan(values);
          if (isNaN.r || isNaN.g || isNaN.b || isNaN.a) {
            minMaxValue = vec4(NAN);
          }
        }
      }
    `,f="vec4";n==="all"?(a="1.0",h=`
        bool reducedAllValue = all(values);
        float floatedReducedAllValue = float(reducedAllValue);
        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);
      `,f="bvec4"):n==="any"&&(a="0.0",h=`
        bool reducedAnyValue = any(values);
        float floatedReducedAnyValue = float(reducedAnyValue);
        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);
      `,f="bvec4");let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `),this.userCode=`
      const float initializationValue = ${a};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float getValue(int batch, int inIdx) {
        ${p}
        return getX(batch, inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${r};

        vec4 minMaxValue = vec4(${a});
        float prodValue = 1.0;
        float sumValue = 0.0;
        float allValue = 1.0;
        float anyValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===2}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          ${h}
        } else if (${d===3}) {
          ${f} values = ${f}(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          ${h}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t_e(t){const e=[];for(;e.length===0||e[e.length-1].outSize!==1;){const n=e.length?e[e.length-1].outSize:t[1],r=__(n);e.push({inSize:n,windowSize:r,outSize:Math.ceil(n/r)})}return e}function qh(t,e,n,r){const s=t_e(t.shape);let i=t;for(let o=0;o<s.length;o++){const{inSize:a,windowSize:l,outSize:c}=s[o];let u,d;n==="mean"?u=o===0?new _z({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},a):new _z({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c}):u=new e_e({windowSize:l,inSize:a,batchSize:t.shape[0],outSize:c},n),d=i,i=r.runWebGLProgram(u,[i],e),d.dataId!==t.dataId&&r.disposeIntermediateTensorInfo(d)}return i}/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class n_e{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[n[o]];this.outputShape=r,this.rank=r.length;const s=on(this.rank),i=r_e(n);this.userCode=`
    void main() {
      ${s} resRC = getOutputCoords();
      setOutput(getA(${i}));
    }
    `}}function r_e(t){const e=t.length;if(e>6)throw Error(`Transpose for rank ${e} is not yet supported`);const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(e);for(let s=0;s<t.length;s++)r[t[s]]=n[s];return r.join()}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class s_e{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0;const r=new Array(e.length);for(let u=0;u<r.length;u++)r[u]=e[n[u]];if(this.outputShape=r,this.rank=r.length,this.rank>6)throw Error(`Packed transpose for rank ${this.rank} is not yet supported.`);const s=on(this.rank),i=jq("rc",this.rank),o=new Array(this.rank);for(let u=0;u<n.length;u++)o[n[u]]=i[u];const a=`vec2(${o.slice(-2).join()})`,l=`++${i[this.rank-1]} < ${r[this.rank-1]}`,c=`getChannel(getA(${o.join()}), ${a})`;this.userCode=`
    void main() {
      ${s} rc = getOutputCoords();
      vec4 result = vec4(0.);
      result[0] = ${c};
      if(${l}) {
        result[1] = ${c};
      }
      --${i[this.rank-1]};
      if(++${i[this.rank-2]} < ${r[this.rank-2]}) {
        result[2] = ${c};
        if(${l}) {
          result[3] = ${c};
        }
      }
      setOutput(result);
    }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K_(t,e,n){const r=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new s_e(t.shape,e):new n_e(t.shape,e);return n.runWebGLProgram(r,[t],t.dtype)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i_e(t,e,n,r){const s=e,i=t.shape.length,o=Tt(s,t.shape);let a=o;const l=Gn(a,i),c=l!=null;let u=t;c&&(u=K_(t,l,r),a=ir(a.length,i)),qr("sum",a,i);const[d,h]=Mr(u.shape,a);let f=d;n&&(f=sr(d,o));const p=fe(h),g=fe(t.shape)/p,y=Oe({inputs:{x:u},attrs:{shape:[g,p]},backend:r}),b=zE(t.dtype),v=qh(y,b,"sum",r),w=Oe({inputs:{x:v},attrs:{shape:f},backend:r});return r.disposeIntermediateTensorInfo(y),r.disposeIntermediateTensorInfo(v),c&&r.disposeIntermediateTensorInfo(u),w}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function q_(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r;return i_e(s,i,o,n)}const o_e={kernelName:qv,backendName:"webgl",kernelFunc:q_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ws(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{perm:i}=r,o=n,a=s.shape.length,l=new Array(a);for(let u=0;u<l.length;u++)l[u]=s.shape[i[u]];let c;if(o.shouldExecuteOnCPU([s])){const d=o.texData.get(s.dataId).values,h=SP(d,s.shape,s.dtype,i,l);c=o.makeTensorInfo(l,s.dtype);const f=o.texData.get(c.dataId);f.values=h}else c=K_(s,i,o);return c}const a_e={kernelName:qd,backendName:"webgl",kernelFunc:ws};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const qq=1e3;function BS({a:t,b:e,transposeA:n,transposeB:r,backend:s,bias:i=null,preluActivationWeights:o=null,leakyreluAlpha:a=0,activation:l=null}){const c=t.shape.length,u=e.shape.length,d=n?t.shape[c-2]:t.shape[c-1],h=r?e.shape[u-1]:e.shape[u-2],f=n?t.shape[c-1]:t.shape[c-2],p=r?e.shape[u-2]:e.shape[u-1],m=t.shape.slice(0,-2),g=e.shape.slice(0,-2),y=fe(m),b=fe(g),w=yt(t.shape.slice(0,-2),e.shape.slice(0,-2)).concat([f,p]);P(d===h,()=>`Error in matMul: inner shapes (${d}) and (${h}) of Tensors with shapes ${t.shape} and ${e.shape} and transposeA=${n} and transposeB=${r} must match.`);const C=n?[y,d,f]:[y,f,d],_=r?[b,p,h]:[b,h,p],E=Oe({inputs:{x:t},backend:s,attrs:{shape:C}}),I=Oe({inputs:{x:e},backend:s,attrs:{shape:_}}),O=[E,I],R=Math.max(y,b),z=n?E.shape[1]:E.shape[2],B=i!=null,j=o!=null,G=l==="leakyrelu",U=l!=null?$b(l,!0):null,Q=B||j||G||U!=null;let se;if((f===1||p===1)&&z>qq&&Q===!1){let W=E,L=I;n&&(W=ws({inputs:{x:E},backend:s,attrs:{perm:[0,2,1]}}),O.push(W)),r&&(L=ws({inputs:{x:I},backend:s,attrs:{perm:[0,2,1]}}),O.push(L));const J=p!==1,Z=p===1;let ie=W;J&&(ie=Oe({inputs:{x:W},backend:s,attrs:{shape:[R,z,1]}}),O.push(ie));const ue=p===1?2:1;let de=L;Z&&(de=Oe({inputs:{x:L},backend:s,attrs:{shape:[R,1,z]}}),O.push(de));const ye=EP({inputs:{a:ie,b:de},backend:s});se=q_({inputs:{x:ye},backend:s,attrs:{axis:ue,keepDims:!0}}),O.push(ye)}else{const W=Ms(t.dtype,e.dtype),L=new Kq(C,_,[R,f,p],n,r,B,U,j,G),J=[E,I];if(i!=null&&J.push(i),j&&J.push(o),G){const Z=s.makeTensorInfo([],"float32",cc(a,"float32"));J.push(Z),O.push(Z)}se=s.runWebGLProgram(L,J,W)}const V=Oe({inputs:{x:se},backend:s,attrs:{shape:w}});O.push(se);for(const W of O)s.disposeIntermediateTensorInfo(W);return V}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l_e(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i,bias:o,preluActivationWeights:a}=e,{transposeA:l,transposeB:c,activation:u,leakyreluAlpha:d}=r;return BS({a:s,b:i,transposeA:l,transposeB:c,backend:n,bias:o,preluActivationWeights:a,leakyreluAlpha:d,activation:u})}const c_e={kernelName:hb,backendName:"webgl",kernelFunc:l_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Tz="return abs(x);";function u_e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])&&r.dtype!=="complex64"){const i=n.texData.get(r.dataId),o=zq(i.values);return n.makeTensorInfo(r.shape,r.dtype,o)}let s;return ce().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Xc(r.shape,Tz):s=new Wa(r.shape,Tz),n.runWebGLProgram(s,[r],r.dtype)}const d_e={kernelName:Zb,backendName:"webgl",kernelFunc:u_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const h_e=Vo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return acos(x);
`,f_e=Lt({opSnippet:h_e}),p_e={kernelName:nm,backendName:"webgl",kernelFunc:f_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m_e=Vo+`
  if (x < 1.0) return NAN;
return log(x + sqrt(x * x - 1.0));`,g_e=Lt({opSnippet:m_e}),y_e={kernelName:rm,backendName:"webgl",kernelFunc:g_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kz="return a + b;",b_e=Yr({opSnippet:kz,packedOpSnippet:kz,supportsComplex:!0,cpuKernelImpl:ICe}),v_e={kernelName:Lh,backendName:"webgl",kernelFunc:b_e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class w_e{constructor(e,n){this.outputShape=[],this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`float v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        float result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class x_e{constructor(e,n){this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.variableNames=n.map((i,o)=>`T${o}`);const r=[];this.variableNames.forEach(i=>{r.push(`vec4 v${i} = get${i}AtOutCoords();`)});const s=this.variableNames.map(i=>`v${i}`).join(" + ");this.userCode=`
      void main() {
        ${r.join(`
        `)}

        vec4 result = ${s};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function S1(t){const{inputs:e,backend:n}=t,r=e;if(r.length===1)return bi({inputs:{x:r[0]},backend:n});if(r.length>ce().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){const l=Math.floor(r.length/2),c=S1({inputs:r.slice(0,l),backend:n}),u=S1({inputs:r.slice(l),backend:n});return S1({inputs:[c,u],backend:n})}const s=r.map(l=>l.dtype).reduce((l,c)=>Ms(l,c)),i=r.map(l=>l.shape),a=ce().getBool("WEBGL_PACK")?new x_e(r[0].shape,i):new w_e(r[0].shape,i);return n.runWebGLProgram(a,r,s)}const S_e={kernelName:ev,backendName:"webgl",kernelFunc:S1};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=Tt(i,s.shape);let c=l;const u=Gn(c,a);let d=s;u!=null&&(d=ws({inputs:{x:s},backend:n,attrs:{perm:u}}),c=ir(c.length,a)),qr("all",c,a);const[h,f]=Mr(d.shape,c),p=fe(f),m=Oe({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=qh(m,m.dtype,"all",n);let y;if(o){const b=sr(h,l);y=Oe({inputs:{x:g},backend:n,attrs:{shape:b}})}else y=Oe({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(d),y}const E_e={kernelName:OC,backendName:"webgl",kernelFunc:C_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function __e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=Tt(i,s.shape);let c=l;const u=Gn(c,a);let d=s;u!=null&&(d=ws({inputs:{x:s},backend:n,attrs:{perm:u}}),c=ir(c.length,a)),qr("any",c,a);const[h,f]=Mr(d.shape,c),p=fe(f),m=Oe({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=qh(m,m.dtype,"any",n);let y;if(o){const b=sr(h,l);y=Oe({inputs:{x:g},backend:n,attrs:{shape:b}})}else y=Oe({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(d),y}const T_e={kernelName:DC,backendName:"webgl",kernelFunc:__e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class k_e{constructor(e,n,r){this.variableNames=["A"];const{windowSize:s,batchSize:i,outSize:o}=e;r||this.variableNames.push("bestIndicesA"),this.outputShape=[i,o];const a=n==="max"?">":"<",l=r?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = outIdx * ${s};

        int bestIndex = inOffset;
        float bestValue = getA(batch, bestIndex);

        for (int i = 0; i < ${s}; i++) {
          int inIdx = ${l};
          float candidate = getA(batch, inIdx);
          if (candidate ${a} bestValue) {
            bestValue = candidate;
            bestIndex = inIdx;
          }
        }
        setOutput(float(bestIndex));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class I_e{constructor(e,n,r,s){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,P(e.length>2,()=>`Packed arg${r.charAt(0).toUpperCase()+r.slice(1)} supports only inputs with rank above 2.`);const i=e[e.length-1],o=Math.ceil(i/n);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),s||this.variableNames.push("bestIndicesA");const a=this.outputShape,l=a.length,c=on(l),u=bs("coords",l);let d,h;if(o===1){h=l+1;const I=on(h);d=`
        ${I} sourceLocR = ${I}(${u.join()}, 0);
        ++${u[l-1]};
        ${I} sourceLocG = ${I}(${u.join()}, 0);
        ++${u[l-2]};
        ${I} sourceLocA = ${I}(${u.join()}, 0);
        --${u[l-1]};
        ${I} sourceLocB = ${I}(${u.join()}, 0);
        --${u[l-2]};`}else h=l,d=`
        ${c} sourceLocR = coords;
        ++${u[l-1]};
        ${c} sourceLocG = coords;
        ++${u[l-2]};
        ${c} sourceLocA = coords;
        --${u[l-1]};
        ${c} sourceLocB = coords;
        --${u[l-2]};`;const f=["x","y","z","w","u","v"].slice(0,h),p="."+f[h-1],m=f.map(I=>"int "+I),g=bs("sourceLocR",h-1).concat("inIdx.r"),y=bs("sourceLocG",h-1).concat("inIdx.g"),b=bs("sourceLocB",h-1).concat("inIdx.b"),v=bs("sourceLocA",h-1).concat("inIdx.a"),w=r==="max"?"greaterThan":"lessThan",C=s?"":`
          inIdx = round(vec4(getBestIndicesAChannel(${g.join()}),
                             getBestIndicesAChannel(${y.join()}),
                             getBestIndicesAChannel(${b.join()}),
                             getBestIndicesAChannel(${v.join()})));`,_=`vec4(
            getAChannel(${g.join()}),
            hasNextCol ? getAChannel(${y.join()}) : 0.,
            hasNextRow ? getAChannel(${b.join()}) : 0.,
            hasNextRow && hasNextCol ? getAChannel(${v.join()}) : 0.)`,E=s?"":`
      float getBestIndicesAChannel(${m.join()}) {
        return getChannel(getBestIndicesA(${f.join()}),
                                          vec2(${f.slice(-2).join()}));
      }`;this.userCode=`
      float getAChannel(${m.join()}) {
        return getChannel(getA(${f.join()}),
                               vec2(${f.slice(-2).join()}));
      }
      ${E}
      void main() {
        ${c} coords = getOutputCoords();
        bool hasNextCol = ${u[l-1]} < ${a[l-1]-1};
        bool hasNextRow = ${u[l-2]} < ${a[l-2]-1};
        ${d}
        ivec4 srcIdx = ivec4(sourceLocR${p}, sourceLocG${p},
          sourceLocB${p}, sourceLocA${p}) * ${n};
        ivec4 inIdx = srcIdx;
        vec4 bestIndex = vec4(inIdx);
        vec4 bestValue = ${_};

        for (int i = 0; i < ${n}; i++) {
          inIdx = srcIdx;
          ${C}
          vec4 candidate = ${_};
          bvec4 nan = isnan(candidate);
          bvec4 replace = bvec4(
            vec4(${w}(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));

          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,
                           replace.y  ? candidate.y : bestValue.y,
                           replace.z  ? candidate.z : bestValue.z,
                           replace.w  ? candidate.w : bestValue.w);
          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));
          srcIdx++;
        }
        setOutput(bestIndex);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Xq(t,e,n,r=null){let s=e.shape[0],i=e.shape[1];r!=null&&(s=r.shape[0],i=r.shape[1]);const o=__(i),a={windowSize:o,inSize:i,batchSize:s,outSize:Math.ceil(i/o)},l=new k_e(a,n,r==null),c=[e];r!=null&&c.push(r);const u=t.runWebGLProgram(l,c,"int32");if(u.shape[1]===1)return u;const d=Xq(t,e,n,u);return t.disposeIntermediateTensorInfo(u),d}function Yq(t,e,n,r=null){const s=r!=null?r.shape:e.shape,i=s[s.length-1],o=__(i),a=new I_e(s,o,n,r==null),l=r==null?[e]:[e,r],c=t.runWebGLProgram(a,l,"int32");if(c.shape.length===e.shape.length){const u=Yq(t,e,n,c);return t.disposeIntermediateTensorInfo(c),u}return c}function Qq(t,e,n,r){const s=[n];if(qr("arg"+r.charAt(0).toUpperCase()+r.slice(1),s,e.shape.length),!ce().getBool("WEBGL_PACK_REDUCE")||e.shape.length<=2){const i=[],o=t.texData.get(e.dataId),a=o!==null&&o.isPacked;let l=e;a&&(l=t.unpackTensor(e),i.push(l));const[c,u]=Mr(l.shape,s),d=fe(u),h=Oe({inputs:{x:l},backend:t,attrs:{shape:[-1,d]}});i.push(h);const f=Xq(t,h,r);i.push(f);const p=Oe({inputs:{x:f},backend:t,attrs:{shape:c}});return i.forEach(m=>t.disposeIntermediateTensorInfo(m)),p}return Yq(t,e,r)}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=Tt(i,s.shape);const a=Gn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=ws({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=ir(o.length,l.shape.length)),qr("argMax",[o[0]],l.shape.length);const u=Qq(n,l,o[0],"max");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const $_e={kernelName:tv,backendName:"webgl",kernelFunc:N_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i}=r;let o=Tt(i,s.shape);const a=Gn(o,s.shape.length);let l=s;const c=[];a!=null&&(l=ws({inputs:{x:s},backend:n,attrs:{perm:a}}),c.push(l),o=ir(o.length,l.shape.length)),qr("argMin",[o[0]],l.shape.length);const u=Qq(n,l,o[0],"min");return c.forEach(d=>n.disposeIntermediateTensorInfo(d)),u}const R_e={kernelName:nv,backendName:"webgl",kernelFunc:A_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const O_e=Vo+`
  if (abs(x) > 1.) {
    return NAN;
  }
  return asin(x);
`,D_e=Lt({opSnippet:O_e}),P_e={kernelName:sm,backendName:"webgl",kernelFunc:D_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const L_e=Vo+"return log(x + sqrt(x * x + 1.0));",F_e=Lt({opSnippet:L_e}),M_e={kernelName:im,backendName:"webgl",kernelFunc:F_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const z_e=Vo+`
  return atan(x);
`,B_e=Lt({opSnippet:z_e}),j_e={kernelName:om,backendName:"webgl",kernelFunc:B_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const V_e=CP+`
  return atan(a, b);
`,U_e=`
  vec4 result = atan(a, b);
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Kh+`
  return result;
`,W_e=Yr({opSnippet:V_e,packedOpSnippet:U_e}),H_e={kernelName:lm,backendName:"webgl",kernelFunc:W_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const G_e=Vo+`
  if ((x < -1.0) || (x > 1.0)) return NAN;
return (log(1.0 + x) - log(1.0 - x)) / 2.0;`,K_e=Lt({opSnippet:G_e}),q_e={kernelName:am,backendName:"webgl",kernelFunc:K_e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Ab{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideHeight,l=e.strideWidth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,f=e.padInfo.top,p=e.padInfo.left;this.outputShape=e.outShape;const m=n==="avg",g=`((batch  * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + d`,y=`(xR * ${e.inWidth} + xC) * ${e.inChannels} + d`;let b="0.0";if(m||(b="-1.0 / 1e-20"),r){const I=">=";this.userCode=`
        const ivec2 strides = ivec2(${a}, ${l});
        const ivec2 pads = ivec2(${f}, ${p});

        void main() {
          ivec4 coords = getOutputCoords();
          int batch = coords[0];
          int d = coords[3];

          ivec2 xRCCorner = coords.yz * strides - pads;
          int xRCorner = xRCCorner.x;
          int xCCorner = xRCCorner.y;

          // max/min x(?, ?, d) to get y(yR, yC, d).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;
          float avgValue = 0.0;

          for (int wR = 0; wR < ${d};
              wR += ${c}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${h};
                wC += ${u}) {
              int xC = xCCorner + wC;

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float value = getX(batch, xR, xC, d);

              // If a min / max value has already been found, use it. If not,
              // use the current value.
              float currMinMaxValue = mix(
                  value, minMaxValue, minMaxValueFound);
              if (value ${I} currMinMaxValue) {
                minMaxValue = value;
                minMaxValueFound = 1.0;
                minMaxPosition = ${s?i?g:y:`wR * ${h} + wC`};
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const v="max";let w=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(w="avgValue / max(count, 1.0)");const C=Math.floor(o/4)*4,_=o%4,E=`
      if (${m}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${v}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec2 strides = ivec2(${a}, ${l});
      const ivec2 pads = ivec2(${f}, ${p});
      const float initializationValue = ${b};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xR, int xC, int d) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xR, xC, d);
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d = coords[3];

        ivec2 xRCCorner = coords.yz * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // max/min x(?, ?, d) to get y(yR, yC, d).
        // ? = to be determined
        vec4 minMaxValue = vec4(${b});
        float avgValue = 0.0;
        count = 0.0;

        for (int wR = 0; wR < ${d};
            wR += ${c}) {
          int xR = xRCorner + wR;

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${C}; wC += 4) {
            int xC = xCCorner + wC * ${u};

            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              getValue(batch, xR, xC + 3 * ${u}, d)
            );

            ${E}
          }

          int xC = xCCorner + ${C};
          if (${_===1}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              initializationValue,
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${_===2}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              initializationValue,
              initializationValue
            );

            ${E}
          } else if (${_===3}) {
            vec4 values = vec4(
              getValue(batch, xR, xC, d),
              getValue(batch, xR, xC + ${u}, d),
              getValue(batch, xR, xC + 2 * ${u}, d),
              initializationValue
            );

            ${E}
          }
        }
        setOutput(${w});
      }
    `}}class _P{constructor(e,n,r,s=!1,i=!1){if(this.variableNames=["x"],n==="avg"&&r)throw new Error("Cannot compute positions for average pool.");const o=e.filterWidth,a=e.strideDepth,l=e.strideHeight,c=e.strideWidth,u=e.dilationDepth,d=e.dilationHeight,h=e.dilationWidth,f=e.effectiveFilterDepth,p=e.effectiveFilterHeight,m=e.effectiveFilterWidth,g=e.padInfo.front,y=e.padInfo.top,b=e.padInfo.left;this.outputShape=e.outShape;const v=n==="avg";let w="0.0";if(v||(w="-1.0 / 1e-20"),r){const R=">=";this.userCode=`
        const ivec3 strides =
            ivec3(${a}, ${l}, ${c});
        const ivec3 pads = ivec3(${g}, ${y}, ${b});

        void main() {
          ivec5 coords = getOutputCoords();
          int batch = coords.x;
          int ch = coords.u;

          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
          int xDCorner = xCorner.x;
          int xRCorner = xCorner.y;
          int xCCorner = xCorner.z;

          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).
          // ? = to be determined
          float minMaxValue = 0.0;
          float minMaxValueFound = 0.0;
          int minMaxPosition = 0;

          for (int wD = 0; wD < ${f};
              wD += ${u}) {
            int xD = xDCorner + wD;

            if (xD < 0 || xD >= ${e.inDepth}) {
              continue;
            }

            for (int wR = 0; wR < ${p};
                wR += ${d}) {
              int xR = xRCorner + wR;

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int wC = 0; wC < ${m};
                  wC += ${h}) {
                int xC = xCCorner + wC;

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float value = getX(batch, xD, xR, xC, ch);

                // If a min / max value has already been found, use it. If not,
                // use the current value.
                float currMinMaxValue = mix(
                    value, minMaxValue, minMaxValueFound);
                if (value ${R} currMinMaxValue) {
                  minMaxValue = value;
                  minMaxValueFound = 1.0;
                  minMaxPosition = ${s?i?`(((batch * ${e.inDepth} + xD) * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`((xD * ${e.inHeight} + xR) * ${e.inWidth} + xC) * ${e.inChannels} + ch`:`wD * ${p} * ${m} +
                      wR * ${m} + wC`};
                }
              }
            }
          }
          setOutput(float(minMaxPosition));
        }
      `;return}const C="max";let _=`${n}(${n}(${n}(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])`;n==="avg"&&(_="avgValue / max(count, 1.0)");const E=Math.floor(o/4)*4,I=o%4,O=`
      if (${v}) {
        avgValue += dot(values, ones);
      } else {
        minMaxValue = ${C}(values, minMaxValue);
      }
    `;this.userCode=`
      const ivec3 strides =
        ivec3(${a}, ${l}, ${c});
      const ivec3 pads = ivec3(${g}, ${y}, ${b});
      const float initializationValue = ${w};
      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);

      float count = 0.0;

      float getValue(int batch, int xD, int xR, int xC, int ch) {
        if (xC < 0 || xC >= ${e.inWidth}) {
          return initializationValue;
        }
        count += 1.0;
        return getX(batch, xD, xR, xC, ch);
      }

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xDCorner = xCorner.x;
        int xRCorner = xCorner.y;
        int xCCorner = xCorner.z;

        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).
        // ? = to be determined
        vec4 minMaxValue = vec4(${w});
        float avgValue = 0.0;
        count = 0.0;

        for (int wD = 0; wD < ${f};
            wD += ${u}) {
          int xD = xDCorner + wD;

          if (xD < 0 || xD >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${p};
            wR += ${d}) {
            int xR = xRCorner + wR;

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${E}; wC += 4) {
              int xC = xCCorner + wC * ${h};

              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                getValue(batch, xD, xR, xC + 3 * ${h}, ch)
              );

              ${O}
            }

            int xC = xCCorner + ${E};
            if (${I===1}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                initializationValue,
                initializationValue,
                initializationValue
              );

              ${O}
            } else if (${I===2}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                initializationValue,
                initializationValue
              );

              ${O}
            } else if (${I===3}) {
              vec4 values = vec4(
                getValue(batch, xD, xR, xC, ch),
                getValue(batch, xD, xR, xC + ${h}, ch),
                getValue(batch, xD, xR, xC + 2 * ${h}, ch),
                initializationValue
              );

              ${O}
            }
          }
        }
        setOutput(${_});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;z0(s,"avgPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;P(Kr(o,c),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=zo(s.shape,i,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&Nt(u.inShape,u.outShape))return bi({inputs:{x:s},backend:n});const d=new Ab(u,"avg",!1);return n.runWebGLProgram(d,[s],"float32")}const Y_e={kernelName:rv,backendName:"webgl",kernelFunc:X_e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q_e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dimRoundingMode:l,dataFormat:c}=r,u=[1,1,1],d=uc(s.shape,i,o,u,a,l,c),h=new _P(d,"avg",!1);return n.runWebGLProgram(h,[s],"float32")}const J_e={kernelName:sv,backendName:"webgl",kernelFunc:Q_e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Z_e{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterHeight,c=e.effectiveFilterWidth,u=l-1-e.padInfo.top,d=c-1-e.padInfo.left,h=1/(n*r);this.userCode=`
      const ivec2 pads = ivec2(${u}, ${d});
      const float avgMultiplier = float(${h});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${l};
            wR += ${o}) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${c};
            wC+= ${a}) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);

            dotProd += dyValue * avgMultiplier;
          }
        }
        setOutput(dotProd);
      }
    `}}class eTe{constructor(e){this.variableNames=["dy"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.effectiveFilterDepth,h=e.effectiveFilterHeight,f=e.effectiveFilterWidth,p=d-1-e.padInfo.front,m=h-1-e.padInfo.top,g=f-1-e.padInfo.left,y=1/(n*r*s);this.userCode=`
      const ivec3 pads = ivec3(${p}, ${m}, ${g});
      const float avgMultiplier = float(${y});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${d};
            wD += ${l}) {
          float dyD = float(dyDCorner + wD) / ${i}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${h};
              wR += ${c}) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${f};
                wC += ${u}) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);

              dotProd += dyValue * avgMultiplier;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function tTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],h=uc(o.shape,a,l,d,c,u),f=new eTe(h);return n.runWebGLProgram(f,[s],o.dtype)}const nTe={kernelName:LC,backendName:"webgl",kernelFunc:tTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rTe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i;z0([s,i],"avgPoolGrad");const{filterSize:a,strides:l,pad:c}=r,u=zo(o.shape,a,l,1,c),d=new Z_e(u);return n.runWebGLProgram(d,[s],o.dtype)}const sTe={kernelName:PC,backendName:"webgl",kernelFunc:rTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function iTe(t){const{inputs:e,backend:n,attrs:r}=t,{a:s,b:i}=e,{transposeA:o,transposeB:a}=r;return BS({a:s,b:i,transposeA:o,transposeB:a,backend:n})}const oTe={kernelName:iv,backendName:"webgl",kernelFunc:iTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class aTe{constructor(e,n,r,s,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],yt(e,n),yt(e,r);let a="0.0";s!=null&&(yt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="1.0";i!=null&&(yt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        float x = getXAtOutCoords();
        float mean = getMeanAtOutCoords();
        float variance = getVarianceAtOutCoords();
        float offset = ${a};
        float scale = ${l};
        float inv = scale * inversesqrt(variance + float(${o}));
        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class lTe{constructor(e,n,r,s,i,o){this.packedInputs=!0,this.packedOutput=!0,this.variableNames=["x","mean","variance"],yt(e,n),yt(e,r);let a="vec4(0.0)";s!=null&&(yt(e,s),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");let l="vec4(1.0)";i!=null&&(yt(e,i),this.variableNames.push("scale"),l="getScaleAtOutCoords()"),this.outputShape=e,this.userCode=`
      void main() {
        vec4 offset = ${a};
        vec4 scale = ${l};

        vec4 x = getXAtOutCoords();
        vec4 mean = getMeanAtOutCoords();
        vec4 variance = getVarianceAtOutCoords();

        vec4 inv = scale * inversesqrt(variance + vec4(${o}));

        setOutput((x - mean) * inv + offset);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cTe=({inputs:t,backend:e,attrs:n})=>{const{x:r,mean:s,variance:i,offset:o,scale:a}=t;P(s.shape.length===i.shape.length,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),P(o==null||s.shape.length===o.shape.length,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),P(a==null||s.shape.length===a.shape.length,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let{varianceEpsilon:l}=n;l==null&&(l=.001);const c=[r,s,i];let u=null;o!=null&&(u=o.shape,c.push(o));let d=null;a!=null&&(d=a.shape,c.push(a));const h=ce().getBool("WEBGL_PACK_NORMALIZATION")?new lTe(r.shape,s.shape,i.shape,u,d,l):new aTe(r.shape,s.shape,i.shape,u,d,l);return e.runWebGLProgram(h,c,c[0].dtype)},uTe={kernelName:bv,backendName:"webgl",kernelFunc:cTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class dTe{constructor(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;const n=on(this.rank);this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const r=hTe(this.rank);let s;const i=e.map((o,a)=>`sourceLoc.${zA[a]} = start[${a}] + coords.${zA[a]};`);s=`
        ${n} sourceLoc;
        ${n} coords = getOutputCoords();
        ${i.join(`
`)}
      `,this.userCode=`
      void main() {
        ${s}
        setOutput(getSource(${r}));
      }
    `}}const zA=["x","y","z","w","u","v"];function hTe(t){if(t===1)return"sourceLoc";if(t<=6)return zA.slice(0,t).map(e=>"sourceLoc."+e).join(",");throw Error(`Slicing for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class fTe{constructor(e){this.variableNames=["source"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=e,this.rank=e.length,this.customUniforms=[{name:"start",arrayIndex:this.rank,type:"int"}];const n=on(this.rank),r=bs("coords",this.rank),s=bs("sourceLoc",this.rank),i=this.rank===1?"sourceLoc":`vec2(${s.slice(-2).join()})`,o=`getChannel(getSource(${s.join()}), ${i})`,a=`
      result.x = ${o};
      if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
        ++${s[this.rank-1]};
        result.y = ${o};
        --${s[this.rank-1]};
      }
    `,l=this.rank===1?"":`
      --${r[this.rank-1]};
      if (++${r[this.rank-2]} < ${e[this.rank-2]}) {
        ++${s[this.rank-2]};
        result.z = ${o};
        if (++${r[this.rank-1]} < ${e[this.rank-1]}) {
          ++${s[this.rank-1]};
          result.w = ${o};
        }
      }
    `,c=this.rank<=4?`sourceLoc = coords +
            ${n}(${e.map((u,d)=>`start[${d}]`).join()});`:e.map((u,d)=>`${s[d]} = ${r[d]} + start[${d}];`).join(`
`);this.userCode=`
      void main() {
        ${n} coords = getOutputCoords();
        ${n} sourceLoc;
        ${c}
        vec4 result = vec4(0.);
        ${a}
        ${l}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function pTe(t,e,n,r){const s=r.texData.get(t.dataId),i=r.makeTensorInfo(n,t.dtype),o=r.texData.get(i.dataId);Object.assign(o,s),o.refCount=1,o.shape=n,o.dtype=t.dtype;let a=uD(e,et(t.shape));s.slice&&(a+=s.slice.flatOffset),o.slice={flatOffset:a,origDataId:s.slice&&s.slice.origDataId||t.dataId};const l=r.dataRefCount.get(o.slice.origDataId)||1;return r.dataRefCount.set(o.slice.origDataId,l+1),i}function gg(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,size:o}=r,[a,l]=E_(s,i,o);if(aD(s,a,l),fe(l)===0)return n.makeTensorInfo(l,s.dtype,[]);if(n.shouldExecuteOnCPU([s])||s.dtype==="string"){const d=n.texData.get(s.dataId),h=oEe(d.values,a,l,s.shape,s.dtype);return n.makeTensorInfo(l,s.dtype,h)}const{isPacked:c}=n.texData.get(s.dataId),u=cD(s.shape,a,l);if(c||!u){const d=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new fTe(l):new dTe(l),h=[a];return n.runWebGLProgram(d,[s],s.dtype,h)}return n.uploadToGPU(s.dataId),pTe(s,a,l,n)}const mTe={kernelName:Kv,backendName:"webgl",kernelFunc:gg};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gTe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,crops:o}=r;P(s.shape.length<=4,()=>"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((b,v)=>b*v),l=C0(s.shape,i,a),c=E0(l.length,i.length),u=_0(s.shape,i,a),d=gD(o,i.length),h=yD(u,o,i.length),f=[],p=Oe({inputs:{x:s},backend:n,attrs:{shape:l}}),m=ws({inputs:{x:p},backend:n,attrs:{perm:c}}),g=Oe({inputs:{x:m},backend:n,attrs:{shape:u}}),y=gg({inputs:{x:g},backend:n,attrs:{begin:d,size:h}});return f.push(p),f.push(m),f.push(g),f.forEach(b=>n.disposeIntermediateTensorInfo(b)),y},yTe={kernelName:ov,backendName:"webgl",kernelFunc:gTe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function bTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o}=r,a=n.readSync(s.dataId),l=n.readSync(i.dataId),c=Mq(a,l,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,c)}const vTe={kernelName:FC,backendName:"webgl",kernelFunc:bTe};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const wTe=`
  int r = int(a.r) & int(b.r);
  int g = int(a.g) & int(b.g);
  int rb = int(a.b) & int(b.b);
  int ra = int(a.a) & int(b.a);
  return vec4(r, g, rb, ra);
`,xTe=`
  return float(int(a.r) & int(b.r));
`;function STe(t){const{inputs:e,backend:n}=t,{a:r,b:s}=e,i=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS"),o=ce().getNumber("WEBGL_VERSION");if(n.shouldExecuteOnCPU([r,s])||o===1){const l=n.texData.get(r.dataId).values,c=n.texData.get(s.dataId).values,[u,d]=$Ce(r.shape,s.shape,l,c,r.dtype),h=n.makeTensorInfo(d,r.dtype),f=n.texData.get(h.dataId);return f.values=u,h}let a;return i?a=new pg(wTe,r.shape,s.shape,!1):a=new Sh(xTe,r.shape,s.shape),n.runWebGLProgram(a,[r,s],r.dtype)}const CTe={kernelName:av,backendName:"webgl",kernelFunc:STe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ETe(t){const{inputs:e,backend:n}=t,{s0:r,s1:s}=e,i=n.readSync(r.dataId),o=n.readSync(s.dataId),a=yt(Array.from(i),Array.from(o));return n.makeTensorInfo([a.length],"int32",Int32Array.from(a))}const _Te={kernelName:MC,backendName:"webgl",kernelFunc:ETe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TTe="return float(a != b);",Jq=Yr({opSnippet:TTe,cpuKernelImpl:QCe,dtype:"bool"}),kTe={kernelName:Pv,backendName:"webgl",kernelFunc:Jq};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function j0(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return bi({inputs:{x:s.complexTensorInfos.real},backend:n})}const ITe={kernelName:bE,backendName:"webgl",kernelFunc:j0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const NTe="return float(int(x));";function $Te(t,e){const n=new Wa(t.shape,NTe),r=e.runWebGLProgram(n,[t],"int32");return{dataId:r.dataId,shape:r.shape,dtype:r.dtype}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function BA(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dtype:i}=r;if(i==="complex64"){if(s.dtype==="complex64")return bi({inputs:{x:s},backend:n});const o=ur(s.shape),a=BA({inputs:{x:s},backend:n,attrs:{dtype:"float32"}}),l=Gu({inputs:{real:a,imag:o},backend:n});return o.dispose(),n.disposeIntermediateTensorInfo(a),l}if(s.dtype==="complex64"){const o=j0({inputs:{input:s},backend:n}),a=BA({inputs:{x:o},backend:n,attrs:{dtype:i}});return n.disposeIntermediateTensorInfo(o),a}if(!kR(s.dtype,i)){const o=bi({inputs:{x:s},backend:n});return{dataId:o.dataId,shape:o.shape,dtype:i}}if(n.shouldExecuteOnCPU([s])){const o=n.texData.get(s.dataId).values,[a,l,c]=ACe(o,s.shape,s.dtype,i);return n.makeTensorInfo(a,l,c)}if(i==="int32")return $Te(s,n);if(i==="bool"){const o=n.makeTensorInfo([],"bool",Pr("bool",1)),l=Jq({inputs:{a:s,b:o},backend:n});return n.disposeIntermediateTensorInfo(o),l}throw new Error(`Error in Cast: failed to cast ${s.dtype} to ${i}`)}const ATe={kernelName:cm,backendName:"webgl",kernelFunc:BA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Iz="return ceil(x);",RTe=Lt({opSnippet:Iz,packedOpSnippet:Iz,cpuKernelImpl:RCe}),OTe={kernelName:um,backendName:"webgl",kernelFunc:RTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DTe{constructor(e){this.variableNames=["A"],this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`

      void main() {
        float value = getAAtOutCoords();
        if (isnan(value)) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, minVal, maxVal));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PTe{constructor(e){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"minVal",type:"float"},{name:"maxVal",type:"float"}],this.outputShape=e,this.userCode=`
      void main() {
        vec4 value = getAAtOutCoords();

        if (any(isnan(value))) {
          setOutput(value);
          return;
        }

        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{clipValueMin:i,clipValueMax:o}=r;let a;ce().getBool("WEBGL_PACK_CLIP")?a=new PTe(s.shape):a=new DTe(s.shape);const l=[[i],[o]];return n.runWebGLProgram(a,[s],s.dtype,l)}const FTe={kernelName:dm,backendName:"webgl",kernelFunc:LTe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MTe{constructor(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode=`
      void main() {
        float re = abs(getRealAtOutCoords());
        float im = abs(getImagAtOutCoords());
        float mx = max(re, im);

        // sadly the length function in glsl is not underflow-safe
        // (at least not on Intel GPUs). So the safe solution is
        // to ensure underflow-safety in all cases.
        setOutput(
          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))
        );
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Nz(t,e){return{dataId:e.dataId,dtype:e.dtype,shape:t.shape}}function zTe(t){const{inputs:e,backend:n}=t,{x:r}=e,s=n.texData.get(r.dataId),i=new MTe(r.shape),o=[Nz(r,s.complexTensorInfos.real),Nz(r,s.complexTensorInfos.imag)];return n.runWebGLProgram(i,o,o[0].dtype)}const BTe={kernelName:lv,backendName:"webgl",kernelFunc:zTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jTe{constructor(e){this.outputShape=[],this.outputShape=Ya(e,1),this.variableNames=e.map((o,a)=>`T${a}`);const n=new Array(e.length-1);n[0]=e[0][1];for(let o=1;o<n.length;o++)n[o]=n[o-1]+e[o][1];const r=[`if (yC < ${n[0]}) setOutput(getT0(yR, yC));`];for(let o=1;o<n.length;o++){const a=n[o-1];r.push(`else if (yC < ${n[o]}) setOutput(getT${o}(yR, yC-${a}));`)}const s=n.length,i=n[n.length-1];r.push(`else setOutput(getT${s}(yR, yC-${i}));`),this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int yR = coords.x;
        int yC = coords.y;

        ${r.join(`
        `)}
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class VTe{constructor(e,n){this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[],this.outputShape=Ya(e,n);const r=this.outputShape,s=r.length,i=on(s),o=bs("coords",s),a=["x","y","z","w","u","v"].slice(0,s);this.variableNames=e.map((m,g)=>`T${g}`);const l=new Array(e.length-1);l[0]=e[0][n];for(let m=1;m<l.length;m++)l[m]=l[m-1]+e[m][n];const c=a[n],u=a.slice(-2),d=a.join();let h=`if (${c} < ${l[0]}) {
        return getChannel(
            getT0(${d}), vec2(${u.join()}));
        }`;for(let m=1;m<l.length;m++){const g=l[m-1];h+=`
        if (${c} < ${l[m]}  && ${c} >= ${l[m-1]}) {
          return getChannel(
            getT${m}(${Kx(a,c,g)}),
            vec2(${Kx(u,c,g)}));
        }`}const f=l.length,p=l[l.length-1];h+=`
        return getChannel(
          getT${f}(${Kx(a,c,p)}),
          vec2(${Kx(u,c,p)}));`,this.userCode=`
      float getValue(${a.map(m=>"int "+m)}) {
        ${h}
      }

      void main() {
        ${i} coords = getOutputCoords();
        vec4 result = vec4(getValue(${o}), 0., 0., 0.);

        ${o[s-1]} = ${o[s-1]} + 1;
        if (${o[s-1]} < ${r[s-1]}) {
          result.g = getValue(${o});
        }

        ${o[s-2]} = ${o[s-2]} + 1;
        if (${o[s-2]} < ${r[s-2]}) {
          result.a = getValue(${o});
        }

        ${o[s-1]} = ${o[s-1]} - 1;
        if (${o[s-2]} < ${r[s-2]} &&
            ${o[s-1]} < ${r[s-1]}) {
          result.b = getValue(${o});
        }
        setOutput(result);
      }
    `}}function Kx(t,e,n){const r=t.indexOf(e);return t.map((i,o)=>o===r?`${i} - ${n}`:i).join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X_(t){const{inputs:e,backend:n}=t,{input:r}=e,s=n.texData.get(r.dataId);return bi({inputs:{x:s.complexTensorInfos.imag},backend:n})}const UTe={kernelName:sE,backendName:"webgl",kernelFunc:X_};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Sy(t,e,n){const r=t[0].dtype;if(r==="complex64"){const f=t.map(b=>j0({inputs:{input:b},backend:n})),p=t.map(b=>X_({inputs:{input:b},backend:n})),m=Sy(f,e,n),g=Sy(p,e,n),y=Gu({inputs:{real:m,imag:g},backend:n});return f.forEach(b=>n.disposeIntermediateTensorInfo(b)),p.forEach(b=>n.disposeIntermediateTensorInfo(b)),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),y}let s=n.shouldExecuteOnCPU(t);if(r==="string"&&(s=!0),s){const f=t.map(w=>{const _=[-1,fe(w.shape.slice(e))];return Oe({inputs:{x:w},backend:n,attrs:{shape:_}})}),p=f.map(w=>({vals:n.readSync(w.dataId),shape:w.shape})),m=Ya(f.map(w=>w.shape),1),g=f[0].shape[0]===1,y=OCe(p,m,r,g),b=Ya(t.map(w=>w.shape),e),v=n.makeTensorInfo(b,r,y);return f.forEach(w=>n.disposeIntermediateTensorInfo(w)),v}const i=t.filter(f=>fe(f.shape)>0),o=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&i[0].shape.length>1;if(i.length===1){const f=o?new Wa(t[0].shape,Lc):new Xc(t[0].shape,Lc);return n.runWebGLProgram(f,t,r)}const a=ce().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER");if(i.length>a){const f=[];for(let m=0;m<i.length;m+=a){const g=i.slice(m,m+a);f.push(Sy(g,e,n))}const p=Sy(f,e,n);for(const m of f)n.disposeIntermediateTensorInfo(m);return p}if(o){const f=new VTe(i.map(p=>p.shape),e);return n.runWebGLProgram(f,i,r)}const{tensors2D:l,outShape:c}=WTe(i,e,n),u=new jTe(l.map(f=>f.shape)),d=n.runWebGLProgram(u,l,r);l.forEach(f=>n.disposeIntermediateTensorInfo(f));const h=Oe({inputs:{x:d},attrs:{shape:c},backend:n});return n.disposeIntermediateTensorInfo(d),h}function WTe(t,e,n){const r=Ya(t.map(i=>i.shape),e);return{tensors2D:t.map(i=>Oe({inputs:{x:i},attrs:{shape:[-1,fe(i.shape.slice(e))]},backend:n})),outShape:r}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Zq(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r,i=Tt(s,e[0].shape)[0],o=e.map(c=>c.shape);fD(o,i);const a=Ya(e.map(c=>c.shape),i);if(fe(a)===0)return n.makeTensorInfo(a,e[0].dtype,[]);const l=e.filter(c=>fe(c.shape)>0);return l.length===1?bi({inputs:{x:l[0]},backend:n}):Sy(l,i,n)}const HTe={kernelName:cv,backendName:"webgl",kernelFunc:Zq};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class e8{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.outputShape=e.outShape;const o=e.padInfo.top,a=e.padInfo.left,l=e.strideHeight,c=e.strideWidth,u=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4,g=e.dataFormat==="channelsLast",y=g?1:2,b=g?2:3,v=g?3:1;let w="",C="";r&&(s?w=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?w=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:w=`
          float activation(float x) {
            ${r}
          }
        `,C="result = activation(result);");const _=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${w}

      const ivec2 strides = ivec2(${l}, ${c});
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d2 = coords[${v}];

        ivec2 xRCCorner =
            ivec2(coords[${y}], coords[${b}]) * strides - pads;
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${h}; wR++) {
          int xR = xRCorner + wR * ${u};

          if (xR < 0 || xR >= ${e.inHeight}) {
            continue;
          }

          for (int wC = 0; wC < ${f}; wC++) {
            int xC = xCCorner + wC * ${d};

            if (xC < 0 || xC >= ${e.inWidth}) {
              continue;
            }

            for (int d1 = 0; d1 < ${p}; d1 += 4) {
              vec4 wValues = vec4(
                getW(wR, wC, d1, d2),
                getW(wR, wC, d1 + 1, d2),
                getW(wR, wC, d1 + 2, d2),
                getW(wR, wC, d1 + 3, d2)
              );

              if (${g}) {
                vec4 xValues = vec4(
                  getX(batch, xR, xC, d1),
                  getX(batch, xR, xC, d1 + 1),
                  getX(batch, xR, xC, d1 + 2),
                  getX(batch, xR, xC, d1 + 3)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec4 xValues = vec4(
                  getX(batch, d1, xR, xC),
                  getX(batch, d1 + 1, xR, xC),
                  getX(batch, d1 + 2, xR, xC),
                  getX(batch, d1 + 3, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }
            }

            if (${m===1}) {

              if (${g}) {
                dotProd +=
                    getX(batch, xR, xC, ${p}) *
                    getW(wR, wC, ${p}, d2);
              } else {
                dotProd +=
                    getX(batch, ${p}, xR, xC) *
                    getW(wR, wC, ${p}, d2);
              }

            } else if (${m===2}) {
              vec2 wValues = vec2(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2)
              );

              if (${g}) {
                vec2 xValues = vec2(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec2 xValues = vec2(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            } else if (${m===3}) {
              vec3 wValues = vec3(
                getW(wR, wC, ${p}, d2),
                getW(wR, wC, ${p} + 1, d2),
                getW(wR, wC, ${p} + 2, d2)
              );

              if (${g}) {
                vec3 xValues = vec3(
                  getX(batch, xR, xC, ${p}),
                  getX(batch, xR, xC, ${p} + 1),
                  getX(batch, xR, xC, ${p} + 2)
                );
                dotProd += dot(xValues, wValues);
              } else {
                vec3 xValues = vec3(
                  getX(batch, ${p}, xR, xC),
                  getX(batch, ${p} + 1, xR, xC),
                  getX(batch, ${p} + 2, xR, xC)
                );
                dotProd += dot(xValues, wValues);
              }

            }
          }
        }

        float result = dotProd;
        ${_}
        ${C}
        setOutput(result);
      }
    `}}class GTe{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const n=e.padInfo.front,r=e.padInfo.top,s=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=e.dilationDepth,c=e.dilationHeight,u=e.dilationWidth,d=e.filterDepth,h=e.filterHeight,f=e.filterWidth,p=Math.floor(e.inChannels/4)*4,m=e.inChannels%4;this.userCode=`
      const ivec3 strides = ivec3(${i}, ${o}, ${a});
      const ivec3 pads = ivec3(${n}, ${r}, ${s});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d2 = coords.u;

        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;
        int xFCorner = xFRCCorner.x;
        int xRCorner = xFRCCorner.y;
        int xCCorner = xFRCCorner.z;

        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get
        // y(yF, yR, yC, d2). ? = to be determined. : = across all
        // values in that axis.
        float dotProd = 0.0;
        for (int wF = 0; wF < ${d}; wF++) {
          int xF = xFCorner + wF * ${l};

          if (xF < 0 || xF >= ${e.inDepth}) {
            continue;
          }

          for (int wR = 0; wR < ${h}; wR++) {
            int xR = xRCorner + wR * ${c};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int wC = 0; wC < ${f}; wC++) {
              int xC = xCCorner + wC * ${u};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              for (int d1 = 0; d1 < ${p}; d1 += 4) {
                vec4 xValues = vec4(
                  getX(batch, xF, xR, xC, d1),
                  getX(batch, xF, xR, xC, d1 + 1),
                  getX(batch, xF, xR, xC, d1 + 2),
                  getX(batch, xF, xR, xC, d1 + 3)
                );
                vec4 wValues = vec4(
                  getW(wF, wR, wC, d1, d2),
                  getW(wF, wR, wC, d1 + 1, d2),
                  getW(wF, wR, wC, d1 + 2, d2),
                  getW(wF, wR, wC, d1 + 3, d2)
                );

                dotProd += dot(xValues, wValues);
              }

              if (${m===1}) {
                dotProd +=
                  getX(batch, xF, xR, xC, ${p}) *
                  getW(wF, wR, wC, ${p}, d2);
              } else if (${m===2}) {
                vec2 xValues = vec2(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1)
                );
                vec2 wValues = vec2(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2)
                );
                dotProd += dot(xValues, wValues);
              } else if (${m===3}) {
                vec3 xValues = vec3(
                  getX(batch, xF, xR, xC, ${p}),
                  getX(batch, xF, xR, xC, ${p} + 1),
                  getX(batch, xF, xR, xC, ${p} + 2)
                );
                vec3 wValues = vec3(
                  getW(wF, wR, wC, ${p}, d2),
                  getW(wF, wR, wC, ${p} + 1, d2),
                  getW(wF, wR, wC, ${p} + 2, d2)
                );
                dotProd += dot(xValues, wValues);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class t8{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=os(this.outputShape.length);const o=e.padInfo.left,a=e.strideWidth,l=e.dilationWidth,c=e.filterHeight,u=e.filterWidth,d=u;let h=`
       int xR; int xC; int xCOffset;
       vec4 wTexel; vec4 previous; vec4 final;`;for(let g=0;g<u;g++)h+=`
           vec4 xTexelC${g*2};
           int xTexelC${g*2}Ready;
           vec4 xTexelC${g*2+1};
           int xTexelC${g*2+1}Ready;
           vec4 xC${g};`;h+=`
     for (int r = 0; r < ${c}; r++) {
      for (int d1 = 0; d1 < ${e.inChannels}; d1 += 2) {
       `;for(let g=0;g<u;g++)h+=`
           xTexelC${g*2} = vec4(0.0);
           xTexelC${g*2}Ready = 0;
           xTexelC${g*2+1} = vec4(0.0);
           xTexelC${g*2+1}Ready = 0;
           xC${g} = vec4(0.0);`;h+=`
         xR = xRCorner + r * dilations[0];
         if (xR >=0 && xR < inDims[0]) {
       `;for(let g=0;g<(d+1)/2;g++){const y=g*2;if(h+=`
           xC = xCCorner + ${y*l};
           `,a===1){if(y<u&&(o%2===1?(h+=`
                 xCOffset = xC + 1;
                 if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);

                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }
               `,l===1&&y>0?h+=`
                 xC${y} = vec4(xTexelC${y-2}.zw, xTexelC${y}.xy);
                 `:h+=`
                   xCOffset = xC + 1 - 2;

                   if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       previous.zw = vec2(0.0);
                     }

                     xC${y} = vec4(previous.zw, xTexelC${y}.xy);
                   } else {
                     xC${y} = vec4(0.0, 0.0, xTexelC${y}.xy);
                   }
                   `):h+=`
                 if (xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xC${y} = xTexelC${y};
                 `,y+1<u)){const b=o%2===0?AC(l):l;l%2===0&&o%2===1||l%2!==0&&o%2!==1?(h+=`
                   xCOffset = xC + imod(pads[1], 2) + ${b};

                   if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                     xTexelC${y+1} = getX(batch, xR, xCOffset, d1);

                     // Need to manually clear unused channels in case
                     // we're reading from recycled texture.
                     if (xCOffset + 1 >= inDims[1]) {
                       xTexelC${y+1}.zw = vec2(0.0);
                     }
                     xTexelC${y+1}Ready = 1;
                   }
                   `,l>1?h+=`
                     xCOffset -= 2;
                     if (xCOffset >= 0 && xCOffset < inDims[1]) {
                      previous = getX(batch, xR, xCOffset, d1);
                      xC${y+1} = vec4(previous.zw, xTexelC${y+1}.xy);
                     } else {
                      xC${y+1} = vec4(0.0, 0.0, xTexelC${y+1}.xy);
                     }
                     `:h+=`
                     xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.xy);
                     `):b===1?h+=`
                     xC${y+1} = xTexelC${y};
                     `:h+=`
                     xCOffset = xC + ${b};

                     if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                       xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                       if (xCOffset + 1 >= inDims[1]) {
                         xTexelC${y+1}.zw = vec2(0.0);
                       }
                       xTexelC${y+1}Ready = 1;
                     }

                     xC${y+1} = xTexelC${y+1};
                     `}}else y<u&&(o%2===1?(h+=`
                 xCOffset = xC + 1 - strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xCOffset, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xC + 1, d1);
                   // Need to manually clear unused channels in case
                   // we're reading from recycled texture.
                   if (xC + 2 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.0);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
               `,y+1<u&&(h+=`
                   final = vec4(0.0);
                   xCOffset = xC + 1 + strides[1];
                   if(xCOffset >= 0 && xCOffset < inDims[1]) {
                     final = getX(batch, xR, xCOffset, d1);
                   }
                   xC${y+1} = vec4(xTexelC${y+1}.xy, final.xy);
                 `)):(h+=`
                 if(xC >= 0 && xC < inDims[1] && xTexelC${y}Ready == 0) {
                   xTexelC${y} = getX(batch, xR, xC, d1);
                   if (xC + 1 >= inDims[1]) {
                     xTexelC${y}.zw = vec2(0.0);
                   }
                   xTexelC${y}Ready = 1;
                 }

                 xCOffset = xC + strides[1];
                 if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${y+1}Ready == 0) {
                   xTexelC${y+1} = getX(batch, xR, xCOffset, d1);
                   if (xCOffset + 1 >= inDims[1]) {
                     xTexelC${y+1}.zw = vec2(0.);
                   }
                   xTexelC${y+1}Ready = 1;
                 }

                 xC${y} = vec4(
                   xTexelC${y}.xy, xTexelC${y+1}.xy);
               `,y+1<u&&(h+=`
                   xC${y+1} = vec4(xTexelC${y}.zw, xTexelC${y+1}.zw);
                 `)));y<u&&(h+=`
             wTexel = getW(r, ${y}, d1, d2);
             dotProd += xC${y}.xxzz * vec4(wTexel.xy, wTexel.xy);
             if(d1 + 1 < ${e.inChannels}) {
               dotProd += xC${y}.yyww * vec4(wTexel.zw, wTexel.zw);
             }
           `,y+1<u&&(h+=`
               wTexel = getW(r, ${y+1}, d1, d2);
               dotProd += xC${y+1}.xxzz * vec4(wTexel.xy, wTexel.xy);
               if(d1 + 1 < ${e.inChannels}) {
                 dotProd += xC${y+1}.yyww * vec4(wTexel.zw, wTexel.zw);
               }
             `))}h+=`
     }
   `,h+=`
     }
   `,h+=`
     }
   `;let f="",p="";r&&(s?f=`vec4 activation(vec4 a) {
           vec4 b = getPreluActivationWeightsAtOutCoords();
           ${r}
         }`:i?f=`vec4 activation(vec4 a) {
           vec4 b = getLeakyreluAlphaAtOutCoords();
           ${r}
         }`:f=`vec4 activation(vec4 x) {
           ${r}
         }`,p="result = activation(result);");const m=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
       ${f}

       void main() {
         ivec4 coords = getOutputCoords();
         int batch = coords.x;
         ivec2 xRCCorner = coords.yz * strides - pads;
         int d2 = coords.w;
         int xRCorner = xRCCorner.x;
         int xCCorner = xRCCorner.y;

         //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
         vec4 dotProd = vec4(0.000000000000001);

         ${h}

         vec4 result = dotProd - vec4(0.000000000000001);
         ${m}
         ${p}
         setOutput(result);
       }
     `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class KTe{constructor(e,n){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"inputShape",type:"ivec4"},{name:"pad",type:"ivec2"},{name:"stride",type:"ivec2"},{name:"dilation",type:"ivec2"},{name:"inChannels",type:"int"},{name:"itemsPerBlockRow",type:"int"},{name:"outWidth",type:"int"}],this.outputShape=e,this.enableShapeUniforms=os(this.outputShape.length);const{dataFormat:r}=n,s=Cs(),i=r==="channelsLast",o=i?1:2,a=i?2:3,l=this.enableShapeUniforms?"if(blockIndex < outShape[2] && pos < outShape[1]) {":`if(blockIndex < ${e[2]} && pos < ${e[1]}) {`;let c="";for(let u=0;u<=1;u++)for(let d=0;d<=1;d++)c+=`
          blockIndex = rc.z + ${d};
          pos = rc.y + ${u};

          ${l}
            offsetY = int(blockIndex / outWidth) * stride[0] - pad[0];
            d0 = offsetY + dilation[0] * (pos / itemsPerBlockRow);

            if(d0 < inputShape[${o}] && d0 >= 0) {
              // Use custom imod instead mod. On Intel GPU, mod may generate
              // unexpected value.
              // https://github.com/tensorflow/tfjs/issues/5447
              offsetX = imod(blockIndex, outWidth) * stride[1] - pad[1];
              d1 = offsetX + dilation[1] * (imod(pos, itemsPerBlockRow) /
                  inChannels);

              if(d1 < inputShape[${a}] && d1 >= 0) {

                ch = imod(pos, inChannels);

                if (${i}) {
                  innerDims = vec2(d1, ch);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, d0, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                } else {
                  innerDims = vec2(d0, d1);
                  result[${u*2+d}] = getChannel(
                    getA(rc.x, ch, int(innerDims.x),
                    int(innerDims.y)), innerDims);
                }
              }
            }
          }
        `;this.userCode=`
      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0);

        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
        vec2 innerDims;

        ${c}

        ${s.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jS(t,e){const n=t.length;return n>=3?e?[...t.slice(0,-3),t[n-3]*t[n-2],t[n-1]]:[...t.slice(0,-3),t[n-3],t[n-2]*t[n-1]]:!e&&n===1&&t[0]>1?[t[0],1]:null}function n8({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const l=t.shape,c=r.texData.get(t.dataId),u=n.inChannels,d=l[0]*l[1]*l[2],h=n.outChannels,f=n.dataFormat==="channelsLast",p=!1,m=!1;let g;const y=[];if(i!=null){const w=jS(i.shape,f);w!=null&&(i=Oe({inputs:{x:i},backend:r,attrs:{shape:w}}),y.push(i))}if(s!=null){const w=jS(s.shape,f);w!=null&&(s=Oe({inputs:{x:s},backend:r,attrs:{shape:w}}),y.push(s))}if(!((d===1||h===1)&&u>qq)&&c.isPacked&&f&&c.texture!=null&&l[2]%2!==0&&Nt(c.shape.slice(-3),l.slice(-3))){const w=l[0]*l[1]*(l[2]+1),C={dataId:t.dataId,shape:[1,w,n.inChannels],dtype:t.dtype},_=c.shape;c.shape=c.shape.slice(),c.shape[c.shape.length-2]++,P(zS(c.shape,C.shape),()=>`packed reshape ${c.shape} to ${C.shape} isn't free`);const E=Oe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}});y.push(E);const I=BS({a:C,b:E,backend:r,transposeA:p,transposeB:m,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o}),O=r.texData.get(I.dataId);P(O.isPacked,()=>"batchMatMul result is expected to be packed"),c.shape=_,O.shape=n.outShape,g=bi({inputs:{x:I},backend:r}),g.shape=n.outShape,y.push(I)}else{const w=n.outHeight*n.outWidth,C=Oe({inputs:{x:t},backend:r,attrs:{shape:f?[n.batchSize,w,n.inChannels]:[n.batchSize,n.inChannels,w]}}),_=Oe({inputs:{x:e},backend:r,attrs:{shape:[1,n.inChannels,n.outChannels]}}),E=BS({a:f?C:_,b:f?_:C,transposeA:!f,transposeB:m,backend:r,bias:s,activation:a,preluActivationWeights:i,leakyreluAlpha:o});g=Oe({inputs:{x:E},backend:r,attrs:{shape:n.outShape}}),y.push(C),y.push(_),y.push(E)}for(const w of y)r.disposeIntermediateTensorInfo(w);return g}function r8({x:t,filter:e,convInfo:n,backend:r,bias:s=null,preluActivationWeights:i=null,leakyreluAlpha:o=0,activation:a=null}){const{filterWidth:l,filterHeight:c,inChannels:u,outWidth:d,outHeight:h,dataFormat:f}=n,p=f==="channelsLast",m=l*c*u,g=h*d,y=[n.batchSize,m,g],b=!0,v=!1,w=[];if(i!=null){const V=jS(i.shape,p);V!=null&&(i=Oe({inputs:{x:i},backend:r,attrs:{shape:V}}),w.push(i))}if(s!=null){const V=jS(s.shape,p);V!=null&&(s=Oe({inputs:{x:s},backend:r,attrs:{shape:V}}),w.push(s))}const C=Oe({inputs:{x:e},backend:r,attrs:{shape:[1,m,fe(e.shape)/m]}});w.push(C);const _=new KTe(y,n),E=[t.shape,[n.padInfo.top,n.padInfo.left],[n.strideHeight,n.strideWidth],[n.dilationHeight,n.dilationWidth],[n.inChannels],[n.filterWidth*n.inChannels],[n.outWidth]],I=r.runWebGLProgram(_,[t],"float32",E),O=Oe({inputs:{x:I},backend:r,attrs:{shape:y}});w.push(I),w.push(O);const R=s!=null,z=i!=null,B=a==="leakyrelu",j=a?$b(a,!0):null,G=new Kq(p?O.shape:C.shape,p?C.shape:O.shape,p?[n.batchSize,g,n.outChannels]:[n.batchSize,n.outChannels,g],b,v,R,j,z,B),U=p?[O,C]:[C,O];if(s&&U.push(s),z&&U.push(i),B){const V=r.makeTensorInfo([],"float32",cc(o,"float32"));U.push(V),w.push(V)}const Q=r.runWebGLProgram(G,U,"float32"),se=Oe({inputs:{x:Q},backend:r,attrs:{shape:n.outShape}});w.push(Q);for(const V of w)r.disposeIntermediateTensorInfo(V);return se}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function qTe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dataFormat:l,dilations:c,dimRoundingMode:u}=r,d=dc(l),h=Fr(s.shape,i.shape,o,c,a,u,!1,d);let f;if(h.filterHeight===1&&h.filterWidth===1&&h.dilationHeight===1&&h.dilationWidth===1&&h.strideHeight===1&&h.strideWidth===1&&(h.padInfo.type==="SAME"||h.padInfo.type==="VALID"))f=n8({x:s,filter:i,convInfo:h,backend:n});else if(h.strideWidth<=2&&d==="channelsLast"&&ce().getBool("WEBGL_EXP_CONV")){const m=new t8(h),g=[[h.padInfo.top,h.padInfo.left],[h.strideHeight,h.strideWidth],[h.dilationHeight,h.dilationWidth],[h.inHeight,h.inWidth]];f=n.runWebGLProgram(m,[s,i],"float32",g)}else if(ce().getBool("WEBGL_CONV_IM2COL"))f=r8({x:s,filter:i,convInfo:h,backend:n});else{const m=new e8(h);f=n.runWebGLProgram(m,[s,i],"float32")}const p=Oe({inputs:{x:f},backend:n,attrs:{shape:h.outShape}});return n.disposeIntermediateTensorInfo(f),p}const XTe={kernelName:uv,backendName:"webgl",kernelFunc:qTe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class YTe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.dataFormat==="channelsLast";this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int d2 = coords.w;

        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              ${o?`float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);`:`float dyValue = getDy(b, d2, yR, yC);
              float xValue = getX(b, d1, xR, xC);
              dotProd += (xValue * dyValue);`}
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class QTe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=e.dataFormat==="channelsLast",a=n-1-e.padInfo.top,l=r-1-e.padInfo.left,c=o?1:2,u=o?2:3,d=o?3:1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[${d}];

        ivec2 dyCorner = ivec2(coords[${c}], coords[${u}]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            for (int d2 = 0; d2 < ${e.outChannels}; d2++) {

              if (${o}) {
                float xValue = getDy(batch, idyR, idyC, d2);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              } else {
                float xValue = getDy(batch, d2, idyR, idyC);
                float wValue = getW(wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }

            }
          }
        }
        setOutput(dotProd);
      }
    `}}class JTe{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode=`
      void main() {
        ivec5 coords = getOutputCoords();
        int wF = coords.x;
        int wR = coords.y;
        int wC = coords.z;
        int d1 = coords.w;
        int d2 = coords.u;

        float dotProd = 0.0;

        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yF = 0; yF < ${e.outDepth}; yF++) {
            int xF = wF + yF * ${n} - ${i};

            if (xF < 0 || xF >= ${e.inDepth}) {
              continue;
            }

            for (int yR = 0; yR < ${e.outHeight}; yR++) {
              int xR = wR + yR * ${r} - ${o};

              if (xR < 0 || xR >= ${e.inHeight}) {
                continue;
              }

              for (int yC = 0; yC < ${e.outWidth}; yC++) {
                int xC = wC + yC * ${s} - ${a};

                if (xC < 0 || xC >= ${e.inWidth}) {
                  continue;
                }

                float dyValue = getDy(b, yF, yR, yC, d2);
                float xValue = getX(b, xF, xR, xC, d1);
                dotProd += (xValue * dyValue);
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class ZTe{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterDepth,r=e.filterHeight,s=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,l=n-1-e.padInfo.front,c=r-1-e.padInfo.top,u=s-1-e.padInfo.left;this.userCode=`
      const ivec3 pads = ivec3(${l}, ${c}, ${u});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.u;


        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyFCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        float dotProd = 0.0;
        for (int wF = 0; wF < ${n}; wF++) {
          float dyF = float(dyFCorner + wF) / ${i}.0;

          if (dyF < 0.0 || dyF >= ${e.outDepth}.0 || fract(dyF) > 0.0) {
            continue;
          }
          int idyF = int(dyF);

          int wFPerm = ${n} - 1 - wF;

          for (int wR = 0; wR < ${r}; wR++) {
            float dyR = float(dyRCorner + wR) / ${o}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
              fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            int wRPerm = ${r} - 1 - wR;

            for (int wC = 0; wC < ${s}; wC++) {
              float dyC = float(dyCCorner + wC) / ${a}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              int wCPerm = ${s} - 1 - wC;

              for (int d2 = 0; d2 < ${e.outChannels}; d2++) {
                float xValue = getDy(batch, idyF, idyR, idyC, d2);
                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);
                dotProd += xValue * wValue;
              }
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,dataFormat:l,dimRoundingMode:c,filterShape:u}=r,d=dc(l),h=Fr(s.shape,u,o,1,a,c,!1,d),f=new YTe(h);return n.runWebGLProgram(f,[s,i],"float32")}const tke={kernelName:BC,backendName:"webgl",kernelFunc:eke};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class nke{constructor(e){this.variableNames=["dy","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"strides",type:"vec2"}],this.outputShape=e.inShape,this.enableShapeUniforms=os(this.outputShape.length);const n=e.filterHeight,r=e.filterWidth,s=n-1-e.padInfo.top,i=r-1-e.padInfo.left;this.userCode=`
      const ivec2 pads = ivec2(${s}, ${i});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];

        ivec2 dyCorner = ivec2(coords[1], coords[2]) - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        vec4 result = vec4(0.);
        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / strides[0];
          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);
          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            int wCPerm = ${r} - 1 - wC;

            float dyC = float(dyCCorner + wC) / strides[1];
            bool idyCVal = (dyC >= 0.0) && (dyC < ${e.outWidth}.0)
              && (fract(dyC) == 0.0);
            int idyC = int(dyC);

            float dyC2 = float(dyCCorner + wC + 1) / strides[1];
            bool idyCVal2 = (dyC2 >= 0.0) && (dyC2 < ${e.outWidth}.0)
              && (fract(dyC2) == 0.0);
            int idyC2 = int(dyC2);

            if (idyCVal && idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec4 dySample2 = (idyC / 2 == idyC2 / 2) ?
                  dySample : getDy(batch, idyR, idyC2, d2);

                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));

                dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample2.xy : dySample2.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC, d2);
                vec2 dyValue = mod(float(idyC), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.xy += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            } else if (idyCVal2) {
              for (int d2 = 0; d2 < ${e.outChannels}; d2 += 2) {
                vec4 wValue = getW(wRPerm, wCPerm, d1, d2);
                vec4 dySample = getDy(batch, idyR, idyC2, d2);
                vec2 dyValue = mod(float(idyC2), 2.) == 0. ?
                  dySample.xy : dySample.zw;
                result.zw += vec2(dot(dyValue, wValue.xy),
                  dot(dyValue, wValue.zw));
              }
            }
          }
        }
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function rke(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{inputShape:o,strides:a,pad:l,dataFormat:c,dimRoundingMode:u}=r,d=dc(c),h=Fr(o,i.shape,a,1,l,u,!1,d);if(ce().getBool("WEBGL_PACK_CONV2DTRANSPOSE")&&d==="channelsLast"){const f=[[h.strideHeight,h.strideWidth]],p=new nke(h);return n.runWebGLProgram(p,[s,i],"float32",f)}else{const f=new QTe(h);return n.runWebGLProgram(f,[s,i],"float32")}}const ske={kernelName:dv,backendName:"webgl",kernelFunc:rke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ike(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,c=Fu(s.shape,i.shape,o,l,a),u=new GTe(c);return n.runWebGLProgram(u,[s,i],"float32")}const oke={kernelName:hv,backendName:"webgl",kernelFunc:ike};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ake(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,pad:a,filterShape:l}=r,c=Fu(s.shape,l,o,1,a),u=new JTe(c);return n.runWebGLProgram(u,[s,i],"float32")}const lke={kernelName:jC,backendName:"webgl",kernelFunc:ake};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function cke(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{pad:o,strides:a,inputShape:l}=r,c=Fu(l,i.shape,a,1,o),u=new ZTe(c);return n.runWebGLProgram(u,[s,i],"float32")}const uke={kernelName:VC,backendName:"webgl",kernelFunc:cke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const dke=mg+`
  return cos(x);
`,hke=`
  vec4 result = cos(x);
  bvec4 isNaN = isnan(x);
  ${Kh}
  return result;
`,fke=Lt({opSnippet:dke,packedOpSnippet:hke}),pke={kernelName:hm,backendName:"webgl",kernelFunc:fke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const mke=`
  float e2x = exp(-x);
  return (e2x + 1.0 / e2x) / 2.0;
`,gke=Lt({opSnippet:mke}),yke={kernelName:fm,backendName:"webgl",kernelFunc:gke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class bke{constructor(e,n,r,s,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];const[o,a,l,c]=e,[u]=n,[d,h]=r;this.outputShape=[u,d,h,c];const f=s==="bilinear"?1:0,[p,m]=[`${a-1}.0`,`${l-1}.0`],[g,y,b]=d>1?[`${(a-1)/(d-1)}`,"(y2-y1) * height_ratio",`y1*${p} + float(y)*(height_scale)`]:["0.0","0.0",`0.5 * (y1+y2) * ${p}`],[v,w,C]=h>1?[`${(l-1)/(h-1)}`,"(x2-x1) * width_ratio",`x1*${m} + float(x)*(width_scale)`]:["0.0","0.0",`0.5 * (x1+x2) * ${m}`];this.userCode=`
      const float height_ratio = float(${g});
      const float width_ratio = float(${v});
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int y = coords[1];
        int x = coords[2];
        int d = coords[3];

        // get box vals
        float y1 = getBoxes(b,0);
        float x1 = getBoxes(b,1);
        float y2 = getBoxes(b,2);
        float x2 = getBoxes(b,3);

        // get image in batch index
        int bInd = round(getBoxInd(b));
        if(bInd < 0 || bInd >= ${o}) {
          return;
        }

        float height_scale = ${y};
        float width_scale = ${w};

        float in_y = ${b};
        if( in_y < 0.0 || in_y > ${p} ) {
          setOutput(float(${i}));
          return;
        }
        float in_x = ${C};
        if( in_x < 0.0 || in_x > ${m} ) {
          setOutput(float(${i}));
          return;
        }

        vec2 sourceFracIndexCR = vec2(in_x,in_y);
        if(${f} == 1) {
          // Compute the four integer indices.
          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);
          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));

          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);
          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);
          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);
          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);

          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);

          float top = topLeft + (topRight - topLeft) * fracCR.x;
          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;
          float newValue = top + (bottom - top) * fracCR.y;
          setOutput(newValue);
        } else {
          // Compute the coordinators of nearest neighbor point.
          ivec2 sourceNearestCR = ivec2(floor(
            sourceFracIndexCR + vec2(0.5,0.5)));
          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);
          setOutput(newValue);
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const vke=t=>{const{inputs:e,backend:n,attrs:r}=t,{image:s,boxes:i,boxInd:o}=e,{cropSize:a,method:l,extrapolationValue:c}=r,u=new bke(s.shape,i.shape,a,l,c);return n.runWebGLProgram(u,[s,i,o],"float32")},wke={kernelName:WC,backendName:"webgl",kernelFunc:vke};var Rb;(function(t){t.Prod="*",t.Sum="+"})(Rb||(Rb={}));class $z{constructor(e,n,r,s){this.op=e,this.outputShape=n,this.variableNames=["x"],this.customUniforms=[{name:"index",type:"float"}];const i=this.outputShape.length,o=this.op===Rb.Prod?"1.0":"0.0",a=r?o:`getX(${Az(i,"coords",this.op)})`,l=this.outputShape[this.outputShape.length-1];let c="",u="";r?(c=s?`end != ${l-1}`:"end != 0",u=s?"end + 1":"end - 1"):(c=s?`end + pow2 < ${l}`:"end >= pow2",u=s?"end + pow2":"end - pow2"),this.userCode=`
      void main() {
        ${on(i)} coords = getOutputCoords();
        int end = ${Rz(i,"coords",this.op)};
        float val = ${a};
        int pow2 = int(pow(2.0, index));
        if (${c}) {
          int idx = ${u};
          ${Rz(i,"coords",this.op)} = idx;
          val ${this.op}= getX(${Az(i,"coords",this.op)});
        }
        setOutput(val);
      }
    `}}function Az(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.x, ${e}.y`;if(t===3)return`${e}.x, ${e}.y, ${e}.z`;if(t===4)return`${e}.x, ${e}.y, ${e}.z, ${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}function Rz(t,e,n){if(t===1)return`${e}`;if(t===2)return`${e}.y`;if(t===3)return`${e}.z`;if(t===4)return`${e}.w`;throw new Error(`Cumulative ${n} for rank ${t} is not yet supported`)}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function s8(t,e,n,r,s,i){const o=e.shape.length,a=Gn([r],o);let l=e;a!=null&&(l=ws({inputs:{x:e},backend:n,attrs:{perm:a}}));const c=ir(1,o)[0];if(c!==o-1)throw new Error(`WebGL cumprod shader expects an inner-most axis=${e.shape.length-1} but got axis=${r}`);const u=l.shape[c];let d=bi({inputs:{x:l},backend:n});for(let h=0;h<=Math.ceil(Math.log2(u))-1;h++){const f=new $z(t,l.shape,!1,i),p=[[h]],m=d;d=n.runWebGLProgram(f,[d],d.dtype,p),n.disposeIntermediateTensorInfo(m)}if(s){const h=new $z(t,l.shape,s,i),f=d;d=n.runWebGLProgram(h,[d],d.dtype),n.disposeIntermediateTensorInfo(f)}if(a!=null){const h=Mu(a),f=ws({inputs:{x:d},backend:n,attrs:{perm:h}});return n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(l),f}return d}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return s8(Rb.Prod,s,n,i,o,a)}const Ske={kernelName:UC,backendName:"webgl",kernelFunc:xke};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Cke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,exclusive:o,reverse:a}=r;return s8(Rb.Sum,s,n,i,o,a)}const Eke={kernelName:fv,backendName:"webgl",kernelFunc:Cke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _ke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,weights:i}=e,{size:o,binaryOutput:a}=r;if(s.shape.length===1){const l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=Mq(l,c,i.dtype,i.shape,o);return n.makeTensorInfo([o],i.dtype,u)}else if(s.shape.length===2){const l=n.bufferSync(s),c=n.bufferSync(i),u=NCe(l,c,o,a);return n.makeTensorInfo(u.shape,i.dtype,u.values)}throw new Error(`Error in denseBincount: input must be at most rank 2, but got rank${s.shape.length}.`)}const Tke={kernelName:HC,backendName:"webgl",kernelFunc:_ke};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kke{constructor(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode=`
    void main() {
      ivec4 coords = getOutputCoords();
      int b = coords[0];
      int h = ${this.getHeightCoordString()};
      int w = ${this.getWidthCoordString()};
      int d = ${this.getDepthCoordString()};

      int in_h = h / ${n};
      int offset_h = imod(h, ${n});
      int in_w = w / ${n};
      int offset_w = imod(w, ${n});
      int offset_d = (offset_h * ${n} + offset_w) *
        ${this.getOutputDepthSize()};
      int in_d = d + offset_d;

      float result = ${this.getInputSamplingString()};
      setOutput(result);
    }
  `}getHeightCoordString(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"}getWidthCoordString(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"}getDepthCoordString(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"}getOutputDepthSize(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]}getInputSamplingString(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Ike(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockSize:i,dataFormat:o}=r,a=s.shape[0],l=o==="NHWC"?s.shape[1]:s.shape[2],c=o==="NHWC"?s.shape[2]:s.shape[3],u=o==="NHWC"?s.shape[3]:s.shape[1],d=l*i,h=c*i,f=u/(i*i),p=o==="NHWC"?[a,d,h,f]:[a,f,d,h],m=new kke(p,i,o);return n.runWebGLProgram(m,[s],s.dtype)}const Nke={kernelName:GC,backendName:"webgl",kernelFunc:Ike};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class i8{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=os(this.outputShape.length);const o=e.filterHeight,a=e.filterWidth,l=e.outChannels/e.inChannels;let c="",u="";r&&(s?c=`float activation(float a) {
          float b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?c=`float activation(float a) {
          float b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:c=`
          float activation(float x) {
            ${r}
          }
        `,u="result = activation(result);");const d=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${c}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${l};
        int q = d2 - d1 * ${l};

        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.
        for (int wR = 0; wR < ${o}; wR++) {
          int xR = xRCorner + wR * dilations[0];

          if (xR < 0 || xR >= inDims[0]) {
            continue;
          }

          for (int wC = 0; wC < ${a}; wC++) {
            int xC = xCCorner + wC * dilations[1];

            if (xC < 0 || xC >= inDims[1]) {
              continue;
            }

            float xVal = getX(batch, xR, xC, d1);
            float wVal = getW(wR, wC, d1, q);
            dotProd += xVal * wVal;
          }
        }

        float result = dotProd;
        ${d}
        ${u}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class o8{constructor(e,n=!1,r=null,s=!1,i=!1){this.variableNames=["x","W"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"pads",type:"ivec2"},{name:"strides",type:"ivec2"},{name:"dilations",type:"ivec2"},{name:"inDims",type:"ivec2"}],this.outputShape=e.outShape,this.enableShapeUniforms=os(this.outputShape.length);const o=e.outChannels/e.inChannels,a=e.padInfo.left,l=e.strideWidth,c=e.dilationWidth,u=e.filterHeight,d=e.filterWidth,h=d;let f=`
      int xR; int xC; int xCOffset;
      vec4 wTexel; vec4 previous; vec4 final;`;for(let y=0;y<d;y++)f+=`
          vec4 xTexelC${y*2};
          int xTexelC${y*2}Ready;
          vec4 xTexelC${y*2+1};
          int xTexelC${y*2+1}Ready;
          vec4 xC${y};`;f+=`
    for (int r = 0; r < ${u}; r++) {
      `;for(let y=0;y<d;y++)f+=`
          xTexelC${y*2} = vec4(0.0);
          xTexelC${y*2}Ready = 0;
          xTexelC${y*2+1} = vec4(0.0);
          xTexelC${y*2+1}Ready = 0;
          xC${y} = vec4(0.0);`;f+=`
        xR = xRCorner + r * dilations[0];
        if (xR >=0 && xR < inDims[0]) {
      `;for(let y=0;y<(h+1)/2;y++){const b=y*2;if(f+=`
          xC = xCCorner + ${b*c};
          `,l===1){if(b<d&&(a%2===1?(f+=`
                xCOffset = xC + 1;
                if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);

                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }
              `,c===1&&b>0?f+=`
                xC${b} = vec4(xTexelC${b-2}.zw, xTexelC${b}.xy);
                `:f+=`
                  xCOffset = xC + 1 - 2;

                  if (xCOffset >= 0 && xCOffset < inDims[1]) {
                    previous = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      previous.zw = vec2(0.0);
                    }

                    xC${b} = vec4(previous.zw, xTexelC${b}.xy);
                  } else {
                    xC${b} = vec4(0.0, 0.0, xTexelC${b}.xy);
                  }
                  `):f+=`
                if (xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xC${b} = xTexelC${b};
                `,b+1<d)){const v=a%2===0?AC(c):c;c%2===0&&a%2===1||c%2!==0&&a%2!==1?(f+=`
                  xCOffset = xC + imod(pads[1], 2) + ${v};

                  if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                    xTexelC${b+1} = getX(batch, xR, xCOffset, d1);

                    // Need to manually clear unused channels in case
                    // we're reading from recycled texture.
                    if (xCOffset + 1 >= inDims[1]) {
                      xTexelC${b+1}.zw = vec2(0.0);
                    }
                    xTexelC${b+1}Ready = 1;
                  }
                  `,c>1?f+=`
                    xCOffset -= 2;
                    if (xCOffset >= 0 && xCOffset < inDims[1]) {
                     previous = getX(batch, xR, xCOffset, d1);
                     xC${b+1} = vec4(previous.zw, xTexelC${b+1}.xy);
                    } else {
                     xC${b+1} = vec4(0.0, 0.0, xTexelC${b+1}.xy);
                    }
                    `:f+=`
                    xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.xy);
                    `):v===1?f+=`
                    xC${b+1} = xTexelC${b};
                    `:f+=`
                    xCOffset = xC + ${v};

                    if (xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                      xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                      if (xCOffset + 1 >= inDims[1]) {
                        xTexelC${b+1}.zw = vec2(0.0);
                      }
                      xTexelC${b+1}Ready = 1;
                    }

                    xC${b+1} = xTexelC${b+1};
                    `}}else b<d&&(a%2===1?(f+=`
                xCOffset = xC + 1 - strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xCOffset, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                if(xC + 1 >= 0 && xC + 1 < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xC + 1, d1);
                  // Need to manually clear unused channels in case
                  // we're reading from recycled texture.
                  if (xC + 2 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.0);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
              `,b+1<d&&(f+=`
                  final = vec4(0.0);
                  xCOffset = xC + 1 + strides[1];
                  if(xCOffset >= 0 && xCOffset < inDims[1]) {
                    final = getX(batch, xR, xCOffset, d1);
                  }
                  xC${b+1} = vec4(xTexelC${b+1}.xy, final.xy);
                `)):(f+=`
                if(xC >= 0 && xC < inDims[1] && xTexelC${b}Ready == 0) {
                  xTexelC${b} = getX(batch, xR, xC, d1);
                  if (xC + 1 >= inDims[1]) {
                    xTexelC${b}.zw = vec2(0.0);
                  }
                  xTexelC${b}Ready = 1;
                }

                xCOffset = xC + strides[1];
                if(xCOffset >= 0 && xCOffset < inDims[1] && xTexelC${b+1}Ready == 0) {
                  xTexelC${b+1} = getX(batch, xR, xCOffset, d1);
                  if (xCOffset + 1 >= inDims[1]) {
                    xTexelC${b+1}.zw = vec2(0.);
                  }
                  xTexelC${b+1}Ready = 1;
                }

                xC${b} = vec4(
                  xTexelC${b}.xy, xTexelC${b+1}.xy);
              `,b+1<d&&(f+=`
                  xC${b+1} = vec4(xTexelC${b}.zw, xTexelC${b+1}.zw);
                `)));b<d&&(f+=`
            wTexel = getW(r, ${b}, d1, q);
            dotProd += xC${b} * vec4(wTexel.xz, wTexel.xz);
          `,b+1<d&&(f+=`
              wTexel = getW(r, ${b+1}, d1, q);
              dotProd += xC${b+1} * vec4(wTexel.xz, wTexel.xz);
            `))}f+=`
    }
  `,f+=`
      }
    `;let p="",m="";r&&(s?p=`vec4 activation(vec4 a) {
          vec4 b = getPreluActivationWeightsAtOutCoords();
          ${r}
        }`:i?p=`vec4 activation(vec4 a) {
          vec4 b = getLeakyreluAlphaAtOutCoords();
          ${r}
        }`:p=`vec4 activation(vec4 x) {
          ${r}
        }`,m="result = activation(result);");const g=n?"result += getBiasAtOutCoords();":"";n&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),i&&this.variableNames.push("leakyreluAlpha"),this.userCode=`
      ${p}

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        ivec2 xRCCorner = coords.yz * strides - pads;
        int d2 = coords.w;
        int d1 = d2 / ${o};
        int q = d2 - d1 * ${o};
        int xRCorner = xRCCorner.x;
        int xCCorner = xRCCorner.y;

        //intialize dotProd with a small epsilon seems to reduce GPU accuracy loss.
        vec4 dotProd = vec4(0.000000000000001);

        ${f}

        vec4 result = dotProd - vec4(0.000000000000001);
        ${g}
        ${m}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function $ke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l,dimRoundingMode:c}=r;let u=l;u==null&&(u=[1,1]),P(Kr(o,u),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${o} and dilations '${u}'`);const d=Fr(s.shape,i.shape,o,u,a,c,!0);let h;ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&d.strideWidth<=2&&d.outChannels/d.inChannels===1?h=new o8(d):h=new i8(d);const f=[[d.padInfo.top,d.padInfo.left],[d.strideHeight,d.strideWidth],[d.dilationHeight,d.dilationWidth],[d.inHeight,d.inWidth]];return n.runWebGLProgram(h,[s,i],"float32",f)}const Ake={kernelName:pv,backendName:"webgl",kernelFunc:$ke};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Rke{constructor(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;const n=e.strideHeight,r=e.strideWidth,s=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int wR = coords.x;
        int wC = coords.y;
        int d1 = coords.z;
        int dm = coords.w;
        int d2 = d1 * ${o} + dm;

        float dotProd = 0.0;

        // TO DO: Vec4 over the batch size
        for (int b = 0; b < ${e.batchSize}; b++) {
          for (int yR = 0; yR < ${e.outHeight}; yR++) {
            int xR = wR + yR * ${n} - ${s};

            if (xR < 0 || xR >= ${e.inHeight}) {
              continue;
            }

            for (int yC = 0; yC < ${e.outWidth}; yC++) {
              int xC = wC + yC * ${r} - ${i};

              if (xC < 0 || xC >= ${e.inWidth}) {
                continue;
              }

              float dyValue = getDy(b, yR, yC, d2);
              float xValue = getX(b, xR, xC, d1);
              dotProd += (xValue * dyValue);
            }
          }
        }
        setOutput(dotProd);
      }
    `}}class Oke{constructor(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;const n=e.filterHeight,r=e.filterWidth,s=e.strideHeight,i=e.strideWidth,o=n-1-e.padInfo.top,a=r-1-e.padInfo.left,l=e.outChannels/e.inChannels;this.userCode=`
      const ivec2 pads = ivec2(${o}, ${a});

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords[0];
        int d1 = coords[3];
        ivec2 dyCorner = coords.yz - pads;
        int dyRCorner = dyCorner.x;
        int dyCCorner = dyCorner.y;

        float dotProd = 0.0;

        for (int wR = 0; wR < ${n}; wR++) {
          float dyR = float(dyRCorner + wR) / ${s}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          int wRPerm = ${n} - 1 - wR;

          for (int wC = 0; wC < ${r}; wC++) {
            float dyC = float(dyCCorner + wC) / ${i}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            int wCPerm = ${r} - 1 - wC;

            // TO DO: Vec4 over the channelMul
            for (int dm = 0; dm < ${l}; dm++) {
              int d2 = d1 * ${l} + dm;
              float xValue = getDy(batch, idyR, idyC, d2);
              float wValue = getW(wRPerm, wCPerm, d1, dm);
              dotProd += xValue * wValue;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Dke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,dy:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,filterShape:u}=r,d=Fr(s.shape,u,o,a,l,c,!0),h=new Rke(d);return n.runWebGLProgram(h,[s,i],"float32")}const Pke={kernelName:KC,backendName:"webgl",kernelFunc:Dke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Lke(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,filter:i}=e,{strides:o,dilations:a,pad:l,dimRoundingMode:c,inputShape:u}=r,d=Fr(u,i.shape,o,a,l,c,!0),h=new Oke(d);return n.runWebGLProgram(h,[s,i],"float32")}const Fke={kernelName:qC,backendName:"webgl",kernelFunc:Lke};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Mke{constructor(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode=`
      void main() {
          ivec2 coords = getOutputCoords();
          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;
          setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zke(t){const{inputs:e,backend:n}=t,{x:r}=e,s=[...r.shape,...r.shape],i=fe(r.shape),o=Oe({inputs:{x:r},backend:n,attrs:{shape:[i]}}),a=new Mke(i),l=n.runWebGLProgram(a,[o],o.dtype),c=Oe({inputs:{x:l},backend:n,attrs:{shape:s}});return n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(l),c}const Bke={kernelName:XC,backendName:"webgl",kernelFunc:zke};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class jke{constructor(e){this.variableNames=["x","W"],this.outputShape=e.outShape;const{inHeight:n,inWidth:r,padInfo:s,strideHeight:i,strideWidth:o,filterHeight:a,filterWidth:l,dilationHeight:c,dilationWidth:u}=e,{top:d,left:h}=s;this.userCode=`
      const ivec2 strides = ivec2(${i}, ${o});
      const ivec2 pads = ivec2(${d}, ${h});
      const float neg_infinity = -3.4e38;

      void main() {
        ivec4 coords = getOutputCoords();
        int batch = coords.x;
        int d1 = coords.w;
        ivec2 outTopLeftCorner =
            coords.yz * strides - pads;
        int hBeg = outTopLeftCorner.x;
        int wBeg = outTopLeftCorner.y;

        float curVal = neg_infinity;
        for (int h = 0; h < ${a}; h++) {
          int hIn = hBeg + h * ${c};

          if (hIn >= 0 && hIn < ${n}) {
            for (int w = 0; w < ${l}; w++) {
              int wIn = wBeg + w * ${u};

              if (wIn >= 0 && wIn < ${r}) {
                float xVal = getX(batch, hIn, wIn, d1);
                float wVal = getW(h, w, d1);

                float val = xVal + wVal;
                if (val > curVal) {
                  curVal = val;
                }
              }
            }
          }
        }

        float result = curVal;
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Vke(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i}=e,{strides:o,pad:a,dilations:l}=r,c=s0(s.shape,i.shape,o,a,"NHWC",l);let u;const d=new jke(c);u=n.runWebGLProgram(d,[s,i],"float32");const h=Oe({inputs:{x:u},backend:n,attrs:{shape:c.outShape}});return n.disposeIntermediateTensorInfo(u),h}const Uke={kernelName:mv,backendName:"webgl",kernelFunc:Vke};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Wke(t){const{inputs:e,backend:n,attrs:r}=t,{equation:s}=r,i=e,{allDims:o,summedDims:a,idDims:l}=_D(s,i.length);kD(o.length,l,i);const{path:c,steps:u}=ID(a,l),d=u.length;let h=null,f=o.length;const p=[];for(let m=0;m<d;++m){for(const g of u[m]){const{permutationIndices:y,expandDims:b}=TD(f,l[g]);let v;ND(y)?v=i[g]:(v=ws({inputs:{x:i[g]},backend:n,attrs:{perm:y}}),p.push(v));const w=v.shape.slice();for(let C=0;C<b.length;++C)w.splice(b[C],0,1);Nt(v.shape,w)||(v=Oe({inputs:{x:v},backend:n,attrs:{shape:w}}),p.push(v)),h===null?h=v:(h=EP({inputs:{a:v,b:h},backend:n}),p.push(h))}m<d-1&&(c[m]>=0&&(h=q_({inputs:{x:h},backend:n,attrs:{axis:c[m]-(o.length-f),keepDims:!1}}),p.push(h)),f--)}for(const m of p)m!==h&&n.disposeIntermediateTensorInfo(m);return h}const Hke={kernelName:QC,backendName:"webgl",kernelFunc:Wke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Gke="return (x >= 0.0) ? x : (exp(x) - 1.0);",Kke=`
  vec4 result;

  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);
  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);
  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);
  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);

  return result;
`,qke=Lt({opSnippet:Gke,packedOpSnippet:Kke}),Xke={kernelName:mm,backendName:"webgl",kernelFunc:qke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Yke="return (b >= 0.0) ? a : a * (b + 1.0);",Qke=`
  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));
  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));
`,Jke=t=>{const{inputs:e,backend:n}=t,{dy:r,y:s}=e,i=ce().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new pg(Qke,r.shape,s.shape):new Sh(Yke,r.shape,s.shape);return n.runWebGLProgram(i,[r,s],r.dtype)},Zke={kernelName:JC,backendName:"webgl",kernelFunc:Jke};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const eIe=`
  return vec4(equal(a, b));
`,tIe="return float(a == b);",nIe=Yr({opSnippet:tIe,packedOpSnippet:eIe,dtype:"bool",cpuKernelImpl:DCe}),rIe={kernelName:gv,backendName:"webgl",kernelFunc:nIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sIe=`
  // Error function is calculated approximately with elementary function.
  // See "Handbook of Mathematical Functions with Formulas,
  // Graphs, and Mathematical Tables", Abramowitz and Stegun.
  float p = ${bD};
  float a1 = ${vD};
  float a2 = ${wD};
  float a3 = ${xD};
  float a4 = ${SD};
  float a5 = ${CD};

  float sign = sign(x);
  x = abs(x);
  float t = 1.0 / (1.0 + p * x);
  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));
`,iIe=Lt({opSnippet:sIe}),oIe={kernelName:gm,backendName:"webgl",kernelFunc:iIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const aIe=mg+`
  return exp(x);
`,lIe=`
  vec4 result = exp(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,a8=Lt({opSnippet:aIe,packedOpSnippet:lIe,cpuKernelImpl:PCe,dtype:"float32"}),cIe={kernelName:ym,backendName:"webgl",kernelFunc:a8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function jA(t){const{inputs:e,attrs:n,backend:r}=t,{dim:s}=n,{input:i}=e,o=i.shape.length,a=i.shape.slice();let l=s;return s<0&&(P(-(o+1)<=s,()=>`Axis must be in the interval [${-(o+1)}, ${o}]`),l=o+s+1),a.splice(l,0,1),Oe({inputs:{x:i},backend:r,attrs:{shape:a}})}const uIe={kernelName:yv,backendName:"webgl",kernelFunc:jA};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Oz="return exp(x) - 1.0;",dIe=Lt({opSnippet:Oz,packedOpSnippet:Oz,cpuKernelImpl:LCe}),hIe={kernelName:bm,backendName:"webgl",kernelFunc:dIe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class Dz{constructor(e,n,r){this.variableNames=["real","imag"];const s=n[1];this.outputShape=n;const i=r?`2.0 * ${Math.PI}`:`-2.0 * ${Math.PI}`,o=r?`${s}.0`:"1.0";let a;if(e==="real")a="return real * expR - imag * expI;";else if(e==="imag")a="return real * expI + imag * expR;";else throw new Error(`FFT component must be either "real" or "imag", got ${e}.`);this.userCode=`
      const float exponentMultiplier = ${i};

      float unaryOpComplex(float real, float expR, float imag, float expI) {
        ${a}
      }

      float mulMatDFT(int batch, int index) {
        float indexRatio = float(index) / float(${s});
        float exponentMultiplierTimesIndexRatio =
            exponentMultiplier * indexRatio;

        float result = 0.0;

        for (int i = 0; i < ${s}; i++) {
          // x = (-2|2 * PI / N) * index * i;
          float x = exponentMultiplierTimesIndexRatio * float(i);
          float expR = cos(x);
          float expI = sin(x);
          float real = getReal(batch, i);
          float imag = getImag(batch, i);

          result +=
              unaryOpComplex(real, expR, imag, expI) / ${o};
        }

        return result;
      }

      void main() {
        ivec2 coords = getOutputCoords();
        setOutput(mulMatDFT(coords[0], coords[1]));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function l8(t,e,n){const r=n.texData.get(t.dataId),s=fe(t.shape),i=t.shape[t.shape.length-1],o=s/i,a=Oe({inputs:{x:t},backend:n,attrs:{shape:[o,i]}}),l=a.shape,c=new Dz("real",l,e),u=new Dz("imag",l,e),d=[{dataId:r.complexTensorInfos.real.dataId,dtype:r.complexTensorInfos.real.dtype,shape:l},{dataId:r.complexTensorInfos.imag.dataId,dtype:r.complexTensorInfos.imag.dtype,shape:l}],h=n.runWebGLProgram(c,d,"float32"),f=n.runWebGLProgram(u,d,"float32"),p=Gu({inputs:{real:h,imag:f},backend:n});n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f);const m=Oe({inputs:{x:p},backend:n,attrs:{shape:t.shape}});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(p),m}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function fIe(t){const{inputs:e,backend:n}=t,{input:r}=e;return l8(r,!1,n)}const pIe={kernelName:ZC,backendName:"webgl",kernelFunc:fIe};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class mIe{constructor(e,n){this.outputShape=[],this.customUniforms=[{name:"value",type:"float"}],this.variableNames=["x"],this.outputShape=e,this.userCode=`
      void main() {
        // Input can be obtained from uniform value.
        setOutput(value);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V0(t){const{backend:e,attrs:n}=t,{shape:r,value:s}=n;let{dtype:i}=n;if(i=i||Dh(s),i==="string"){const o=Yn(i,fe(r));return o.fill(s),e.makeTensorInfo(r,i,o)}else{const o=new mIe(r,s),a=[[s]];return e.runWebGLProgram(o,[],i,a)}}const gIe={kernelName:eE,backendName:"webgl",kernelFunc:V0};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class yIe{constructor(e){this.variableNames=["Image"],this.outputShape=[];const n=e[2];this.outputShape=e,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];

          int coordX = ${n} - x - 1;
          float outputValue;
          if(coordX >= 0 && coordX < ${n}) {
            outputValue = getImage(coords[0], coords[1], coordX, coords[3]);
          } else {
            outputValue = getImage(coords[0], coords[1], coords[2], coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bIe={kernelName:tE,backendName:"webgl",kernelFunc:({inputs:t,backend:e})=>{const{image:n}=t,r=e,s=new yIe(n.shape);return r.runWebGLProgram(s,[n],n.dtype)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Pz="return floor(x);",vIe=Lt({opSnippet:Pz,packedOpSnippet:Pz,cpuKernelImpl:FCe}),wIe={kernelName:vm,backendName:"webgl",kernelFunc:vIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xIe=`
  float s = sign(a) * sign(b);
  int ia = round(a);
  int ib = round(b);
  if (ib != 0) {
    // Windows (D3D) wants guaranteed non-zero int division at compile-time.
    return float(idiv(ia, ib, s));
  } else {
    return NAN;
  }
`,SIe=`
  ivec4 ia = round(a);
  ivec4 ib = round(b);
  bvec4 cond = notEqual(ib, ivec4(0));
  ivec4 result = ivec4(0);
  vec4 s = sign(a) * sign(b);

  // Windows (D3D) wants guaranteed non-zero int division at compile-time.
  if (cond[0]) {
    result[0] = idiv(ia[0], ib[0], s[0]);
  }
  if (cond[1]) {
    result[1] = idiv(ia[1], ib[1], s[1]);
  }
  if (cond[2]) {
    result[2] = idiv(ia[2], ib[2], s[2]);
  }
  if (cond[3]) {
    result[3] = idiv(ia[3], ib[3], s[3]);
  }
  return vec4(result);
`,CIe=Yr({opSnippet:xIe,packedOpSnippet:SIe,dtype:"int32"}),EIe={kernelName:wm,backendName:"webgl",kernelFunc:CIe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class _Ie{constructor(e){this.variableNames=["A"];const n=Cs(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];
        vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${s}.0, ${r}.0);

        vec4 values = ${n.texture2D}(A, uv);
        float value;
        if (depth == 0) {
          value = values.r;
        } else if (depth == 1) {
          value = values.g;
        } else if (depth == 2) {
          value = values.b;
        } else if (depth == 3) {
          value = values.a;
        }

        setOutput(floor(value * 255.0 + 0.5));
      }
    `}}/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TIe{constructor(e){this.variableNames=["A"],this.packedInputs=!1,this.packedOutput=!0;const n=Cs(),[r,s]=e;this.outputShape=e,this.userCode=`
      void main() {
        ivec3 coords = getOutputCoords();
        int texR = coords[0];
        int texC = coords[1];
        int depth = coords[2];

        vec4 result = vec4(0.);

        for(int row=0; row<=1; row++) {
          for(int col=0; col<=1; col++) {
            texC = coords[1] + row;
            depth = coords[2] + col;

            vec2 uv = (vec2(texC, texR) + halfCR) /
                       vec2(${s}.0, ${r}.0);
            vec4 values = ${n.texture2D}(A, uv);
            float value;
            if (depth == 0) {
              value = values.r;
            } else if (depth == 1) {
              value = values.g;
            } else if (depth == 2) {
              value = values.b;
            } else if (depth == 3) {
              value = values.a;
            }

            result[row * 2 + col] = floor(value * 255.0 + 0.5);
          }
        }

        ${n.output} = result;
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const kIe={kernelName:mS,backendName:"webgl",kernelFunc:IIe};let Ef,iN=ce().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");function IIe(t){const{inputs:e,backend:n,attrs:r}=t;let{pixels:s}=e;const{numChannels:i}=r,o=typeof HTMLVideoElement<"u"&&s instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,[l,c]=o?[s.videoWidth,s.videoHeight]:[s.width,s.height],u=[c,l],d=[c,l,i];if(a||o){const m=ce().getBool("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU");(Ef==null||m!==iN)&&(iN=m,Ef=document.createElement("canvas").getContext("2d",{willReadFrequently:iN})),Ef.canvas.width=l,Ef.canvas.height=c,Ef.drawImage(s,0,0,l,c),s=Ef.canvas}const h=n.makeTensorInfo(u,"int32");n.texData.get(h.dataId).usage=Mi.PIXELS,n.gpgpu.uploadPixelDataToTexture(n.getTexture(h.dataId),s);const f=ce().getBool("WEBGL_PACK")?new TIe(d):new _Ie(d),p=n.runWebGLProgram(f,[h],"int32");return n.disposeData(h.dataId),p}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dataFormat:u,dilations:d,dimRoundingMode:h,activation:f,leakyreluAlpha:p}=r,m=dc(u),g=Fr(s.shape,i.shape,l,d,c,h,!1,m);let y;const b=[],v=o!=null,w=a!=null,C=f==="leakyrelu",_=()=>{const I=[s,i],O=(R,z)=>{if(z==="NCHW"&&R.shape.length===1&&R.shape[0]!==1){const B=Oe({inputs:{x:R},backend:n,attrs:{shape:[R.shape[0],1,1]}});return b.push(B),B}return R};if(v&&I.push(O(o,u)),w&&I.push(O(a,u)),C){const R=n.makeTensorInfo([],"float32",cc(p,"float32"));I.push(R),b.push(R)}return I};if(g.filterHeight===1&&g.filterWidth===1&&g.dilationHeight===1&&g.dilationWidth===1&&g.strideHeight===1&&g.strideWidth===1&&(g.padInfo.type==="SAME"||g.padInfo.type==="VALID"))y=n8({x:s,filter:i,convInfo:g,backend:n,bias:o,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else if(g.strideWidth<=2&&m==="channelsLast"&&ce().getBool("WEBGL_EXP_CONV")){const I=f?$b(f,!0):null,O=new t8(g,v,I,w,C),R=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],z=_();y=n.runWebGLProgram(O,z,"float32",R)}else if(ce().getBool("WEBGL_CONV_IM2COL"))y=r8({x:s,filter:i,convInfo:g,backend:n,bias:o,activation:f,preluActivationWeights:a,leakyreluAlpha:p});else{const I=f?$b(f,!1):null,O=new e8(g,v,I,w,C),R=_();y=n.runWebGLProgram(O,R,"float32")}const E=Oe({inputs:{x:y},backend:n,attrs:{shape:g.outShape}});return b.push(y),b.forEach(I=>n.disposeIntermediateTensorInfo(I)),E}const $Ie={kernelName:fb,backendName:"webgl",kernelFunc:NIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function AIe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,filter:i,bias:o,preluActivationWeights:a}=e,{strides:l,pad:c,dilations:u,dimRoundingMode:d,activation:h,leakyreluAlpha:f}=r,p=[];let m=u;m==null&&(m=[1,1]),P(Kr(l,m),()=>`Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides ${l} and dilations '${m}'`);const g=Fr(s.shape,i.shape,l,m,c,d,!0),y=ce().getBool("WEBGL_PACK_DEPTHWISECONV")&&g.strideWidth<=2&&g.outChannels/g.inChannels===1,b=h?$b(h,y):null,v=[s,i],w=o!=null,C=a!=null,_=h==="leakyrelu";if(w&&v.push(o),C&&v.push(a),_){const R=n.makeTensorInfo([],"float32",cc(f,"float32"));v.push(R),p.push(R)}let E;y?E=new o8(g,w,b,C,_):E=new i8(g,w,b,C,_);const I=[[g.padInfo.top,g.padInfo.left],[g.strideHeight,g.strideWidth],[g.dilationHeight,g.dilationWidth],[g.inHeight,g.inWidth]],O=n.runWebGLProgram(E,v,"float32",I);return p.forEach(R=>n.disposeIntermediateTensorInfo(R)),O}const RIe={kernelName:pb,backendName:"webgl",kernelFunc:AIe};class OIe{constructor(e,n,r,s){this.sliceDim=e,this.strides=n,this.paramsShape=s,this.variableNames=["x","indices"],this.outputShape=r;const i=on(r.length);let o=`
    int index;`;for(let a=0;a<this.sliceDim;a++)o+=`
          index = round(getIndices(coords[0], ${a}));
          out_of_bounds = out_of_bounds || index < 0;
          out_of_bounds = out_of_bounds || index >= ${this.paramsShape[a]};
          flattenIndex += index * ${this.strides[a]};`;this.userCode=`
         void main() {
          ${i} coords = getOutputCoords();
          int flattenIndex = 0;
          bool out_of_bounds = false;

          ${o}

          setOutput(out_of_bounds ? 0.0 : getX(flattenIndex, coords[1]));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function DIe(t){const{inputs:e,backend:n}=t,{params:r,indices:s}=e,i=s.shape,o=i[i.length-1],a=fe(r.shape),[l,c,u,d]=C_(r,s),h=Oe({inputs:{x:s},backend:n,attrs:{shape:[c,o]}}),f=Oe({inputs:{x:r},backend:n,attrs:{shape:[fe(r.shape)/u,u]}});if(n.shouldExecuteOnCPU([r,s])||r.dtype==="string"){const y=n.readSync(s.dataId),b=n.bufferSync(r),v=MCe(y,b,r.dtype,c,o,u,d,r.shape,a);return n.makeTensorInfo(l,r.dtype,v.values)}const p=new OIe(o,d,[c,u],r.shape),m=n.runWebGLProgram(p,[f,h],f.dtype),g=Oe({inputs:{x:m},backend:n,attrs:{shape:l}});return n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(m),g}const PIe={kernelName:nE,backendName:"webgl",kernelFunc:DIe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LIe{constructor(e,n){this.variableNames=["A","indices"],this.outputShape=n,this.rank=n.length;const r=on(this.rank),s=FIe(e);this.userCode=`
      void main() {
        ${r} resRC = getOutputCoords();
        int index = int(getIndices(resRC.x, resRC.z));
        float inBounds = (index >= 0) && (index < ${e[2]}) ? 1.0 : 0.0;
        setOutput(inBounds * getA(${s}));
      }
    `}}function FIe(t,e){const n=["resRC.x","resRC.y","resRC.z","resRC.w"],r=[];for(let s=0;s<t.length;s++)s===2?r.push("index"):r.push(`${n[s]}`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function c8(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,indices:i}=e,{axis:o,batchDims:a}=r,l=Tt(o,s.shape)[0];if(ce().get("DEBUG")){const b=n.readSync(i.dataId),v=s.shape[l];for(let w=0;w<b.length;++w){const C=b[w];P(C<=v-1&&C>=0,()=>`GatherV2: the index value ${C} is not in [0, ${v-1}]`)}}const c=AD(s,i,l,a),u=fe(i.shape),d=[],h=Oe({inputs:{x:s},backend:n,attrs:{shape:[c.batchSize,c.outerSize,c.dimSize,c.sliceSize]}}),f=Oe({inputs:{x:i},backend:n,attrs:{shape:[c.batchSize,u/c.batchSize]}});d.push(h),d.push(f);const p=[c.batchSize,c.outerSize,u/c.batchSize,c.sliceSize];if(n.shouldExecuteOnCPU([s,i])||s.dtype==="string"){const b=n.bufferSync(f),v=n.bufferSync(h),w=zCe(v,b,p);return d.forEach(C=>n.disposeIntermediateTensorInfo(C)),n.makeTensorInfo(c.outputShape,w.dtype,w.values)}const m=new LIe(h.shape,p),g=n.runWebGLProgram(m,[h,f],h.dtype);d.push(g);const y=Oe({inputs:{x:g},backend:n,attrs:{shape:c.outputShape}});return d.forEach(b=>n.disposeIntermediateTensorInfo(b)),y}const MIe={kernelName:vv,backendName:"webgl",kernelFunc:c8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zIe="return float(a > b);",BIe=`
  return vec4(greaterThan(a, b));
`,jIe=Yr({opSnippet:zIe,packedOpSnippet:BIe,cpuKernelImpl:BCe,dtype:"bool"}),VIe={kernelName:wv,backendName:"webgl",kernelFunc:jIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UIe="return float(a >= b);",WIe=`
  return vec4(greaterThanEqual(a, b));
`,HIe=Yr({opSnippet:UIe,packedOpSnippet:WIe,dtype:"bool",cpuKernelImpl:jCe}),GIe={kernelName:xm,backendName:"webgl",kernelFunc:HIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KIe(t){const{inputs:e,backend:n}=t,{input:r}=e;return l8(r,!0,n)}const qIe={kernelName:rE,backendName:"webgl",kernelFunc:KIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const XIe="return float(!isnan(x) && !isinf(x));",YIe=Lt({opSnippet:XIe,dtype:"bool"}),QIe={kernelName:Cm,backendName:"webgl",kernelFunc:YIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const JIe="return float(isinf(x));",ZIe=Lt({opSnippet:JIe,dtype:"bool"}),eNe={kernelName:Em,backendName:"webgl",kernelFunc:ZIe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tNe="return float(isnan(x));",nNe=Lt({opSnippet:tNe,dtype:"bool"}),rNe={kernelName:_m,backendName:"webgl",kernelFunc:nNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sNe="return float(a < b);",iNe=`
  return vec4(lessThan(a, b));
`,oNe=Yr({opSnippet:sNe,packedOpSnippet:iNe,cpuKernelImpl:VCe,dtype:"bool"}),aNe={kernelName:Sv,backendName:"webgl",kernelFunc:oNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const lNe="return float(a <= b);",cNe=`
  return vec4(lessThanEqual(a, b));
`,uNe=Yr({opSnippet:lNe,packedOpSnippet:cNe,cpuKernelImpl:UCe,dtype:"bool"}),dNe={kernelName:Cv,backendName:"webgl",kernelFunc:uNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function hNe(t){const{backend:e,attrs:n}=t,{start:r,stop:s,num:i}=n,o=WCe(r,s,i);return e.makeTensorInfo([o.length],"float32",o)}const fNe={kernelName:iE,backendName:"webgl",kernelFunc:hNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const pNe=mg+`
  return x < 0.0 ? 0./0. : log(x);
`,mNe=`
  vec4 result = log(x);
  bvec4 isNaN = isnan(x);
  result.r = isNaN.r ? x.r : (x.r < 0.0 ? 0./0. : result.r);
  result.g = isNaN.g ? x.g : (x.g < 0.0 ? 0./0. : result.g);
  result.b = isNaN.b ? x.b : (x.b < 0.0 ? 0./0. : result.b);
  result.a = isNaN.a ? x.a : (x.a < 0.0 ? 0./0. : result.a);
  return result;
`,gNe=Lt({opSnippet:pNe,packedOpSnippet:mNe,cpuKernelImpl:HCe}),yNe={kernelName:Tm,backendName:"webgl",kernelFunc:gNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const bNe=mg+`
  return log(1.0 + x);
`,vNe=Lt({opSnippet:bNe}),wNe={kernelName:km,backendName:"webgl",kernelFunc:vNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const xNe="return float(a >= 1.0 && b >= 1.0);",SNe=`
  return vec4(
    vec4(greaterThanEqual(a, vec4(1.0))) *
    vec4(greaterThanEqual(b, vec4(1.0))));
`,CNe=Yr({opSnippet:xNe,packedOpSnippet:SNe,dtype:"bool"}),ENe={kernelName:Ev,backendName:"webgl",kernelFunc:CNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const _Ne="return float(!(x >= 1.0));",TNe=Lt({opSnippet:_Ne}),kNe={kernelName:_v,backendName:"webgl",kernelFunc:TNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const INe="return float(a >= 1.0 || b >= 1.0);",NNe=`
  return min(
    vec4(greaterThanEqual(a, vec4(1.0))) +
    vec4(greaterThanEqual(b, vec4(1.0))),
    vec4(1.0));
`,$Ne=Yr({opSnippet:INe,packedOpSnippet:NNe,dtype:"bool"}),ANe={kernelName:Tv,backendName:"webgl",kernelFunc:$Ne};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class RNe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[];const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];
        int d = coords[3];
        float x = getX(b, r, c, d);
        float sum = 0.0;
        for (int j = -${o}; j <= ${o}; j++) {
          int idx = d + j;
          if (idx >= 0 && idx <=  ${a}) {
            float z = getX(b, r, c, idx);
            sum += z * z;
          }
        }
        float val = x * ${l};
        setOutput(val);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class ONe{constructor(e,n,r,s,i){this.variableNames=["x"],this.outputShape=[],this.packedInputs=!0,this.packedOutput=!0;const o=n,a=e[3]-1;this.outputShape=e;let l;const c=`float(${r}) + float(${s}) * sum`;i===.5?l=`inversesqrt(${c})`:i===1?l=`1.0/(${c})`:l=`exp(log(${c}) * float(-${i}));`,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords.x;
        int r = coords.y;
        int c = coords.z;
        int d = coords.w;

        bool hasNextCol = d < ${this.outputShape[3]};
        bool hasNextRow = c < ${this.outputShape[2]};

        vec4 sum = vec4(0.);
        vec4 xFragAtOutputCoords = getX(b, r, c, d);

        vec4 xAtOutputCoords = vec4(
          getChannel(xFragAtOutputCoords, vec2(c, d)),
          hasNextCol ?
            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,
          hasNextRow ?
            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,
          (hasNextRow && hasNextCol) ?
            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0
        );

        int firstChannel = d - ${o};
        vec2 cache = vec2(0.);
        if(firstChannel >= 0){
          vec4 firstChannelFrag = getX(b, r, c, firstChannel);
          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));
            if(hasNextRow){
              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));
            }
        }

        ivec2 depth = ivec2(d, d + 1);
        for (int j = - ${o}; j <= ${o}; j++) {
          ivec2 idx = depth + j;
          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));
          bvec2 belowUpperBound = lessThanEqual(idx, ivec2(${a}));

          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;
          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;

          if(depthInRange || depthPlusOneInRange){
            vec4 z = vec4(0.);
            vec4 xFragAtCurrentDepth;
            z.xz = cache.xy;
            if(depthPlusOneInRange && hasNextCol){
              xFragAtCurrentDepth = idx.y != d ?
                getX(b, r, c, idx.y) : xFragAtOutputCoords;
              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));
              if(hasNextRow){
                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));
              }
            }
            cache.xy = z.yw;
            sum += z * z;
          }
        }
        vec4 result = xAtOutputCoords * ${l};
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const DNe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{depthRadius:i,bias:o,alpha:a,beta:l}=r,c=ce().getBool("WEBGL_PACK_NORMALIZATION")?new ONe(s.shape,i,o,a,l):new RNe(s.shape,i,o,a,l);return n.runWebGLProgram(c,[s],s.dtype)},PNe={kernelName:kv,backendName:"webgl",kernelFunc:DNe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class LNe{constructor(e,n,r,s,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=n,this.bias=r,this.alpha=s,this.beta=i,this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int r = coords[1];
        int c = coords[2];

        float result = 0.0;
        for (int d = 0; d < ${this.depth}; ++d) {
          int depthBegin = int(max(0.0, float(d - ${n})));
          int depthEnd = int(min(float(${this.depth}),
              float(d + ${n} + 1)));

          const int MIN_DEPTH_BEGIN = 0;
          const int MAX_DEPTH_END = ${this.depth};

          float norm = 0.0;
          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd) {
              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);
            }
            else {
              break;
            }
          }

          norm = float(${s}) * norm + float(${r});

          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){
            if (k < depthBegin){
              continue;
            }
            else if (k >= depthBegin && k < depthEnd){
              float dyi = -2.0 * float(${s})
                * float(${i})
                * getInputImage(b, r, c, k) * getOutputImage(b, r, c, d)
                / norm;
              if (k == d) {
                dyi += pow(norm, -1.0 * ${i});
              }
              if (k == coords[3]) {
                dyi *= getDy(b, r, c, d);
                result += dyi;
              }
            }
            else {
              break;
            }
          }
      }
      setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const FNe=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s,y:i,dy:o}=e,{depthRadius:a,bias:l,alpha:c,beta:u}=r,d=new LNe(s.shape,a,l,c,u);return n.runWebGLProgram(d,[s,i,o],s.dtype)},MNe={kernelName:oE,backendName:"webgl",kernelFunc:FNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function zNe(t,e,n,r){const s=fe(e),o=fe(t.shape)/s,a=Oe({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=qh(a,t.dtype,"max",r),c=Oe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function u8(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reductionIndices:i,keepDims:o}=r,a=s.shape.length,l=Tt(i,s.shape);let c=l;const u=Gn(c,a),d=u!=null,h=n.shouldExecuteOnCPU([s]);let f=s;if(d){if(h){const v=n.texData.get(f.dataId).values,w=new Array(a);for(let E=0;E<w.length;E++)w[E]=s.shape[u[E]];const C=SP(v,s.shape,s.dtype,u,w);f=n.makeTensorInfo(w,s.dtype);const _=n.texData.get(f.dataId);_.values=C}else f=K_(s,u,n);c=ir(c.length,a)}qr("max",c,a);const[p,m]=Mr(f.shape,c);let g=p;o&&(g=sr(p,l));let y;if(h){const v=n.texData.get(f.dataId).values,w=GCe(v,fe(m),g,s.dtype);y=n.makeTensorInfo(g,s.dtype);const C=n.texData.get(y.dataId);C.values=w}else y=zNe(f,m,g,n);return d&&n.disposeIntermediateTensorInfo(f),y}const BNe={kernelName:Iv,backendName:"webgl",kernelFunc:u8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const jNe=CP+`
  return max(a, b);
`,VNe=`
  vec4 result = vec4(max(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Kh+`
  return result;
`,UNe=Yr({opSnippet:jNe,packedOpSnippet:VNe,cpuKernelImpl:KCe}),WNe={kernelName:Im,backendName:"webgl",kernelFunc:UNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function HNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;z0(s,"maxPool");const{filterSize:i,strides:o,pad:a,dimRoundingMode:l}=r,c=1;P(Kr(o,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${o} and dilations '${c}'`);const u=zo(s.shape,i,o,c,a,l);if(u.filterWidth===1&&u.filterHeight===1&&Nt(u.inShape,u.outShape))return bi({inputs:{x:s},backend:n});const d=new Ab(u,"max",!1);return n.runWebGLProgram(d,[s],s.dtype)}const GNe={kernelName:Nv,backendName:"webgl",kernelFunc:HNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KNe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{filterSize:i,strides:o,pad:a,dataFormat:l,dimRoundingMode:c}=r,u=[1,1,1],d=uc(s.shape,i,o,u,a,c,l),h=new _P(d,"max",!1);return n.runWebGLProgram(h,[s],s.dtype)}const qNe={kernelName:$v,backendName:"webgl",kernelFunc:KNe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XNe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideHeight,r=e.strideWidth,s=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,l=o-1-e.padInfo.left,c=i*o-1;this.userCode=`
      const ivec2 pads = ivec2(${a}, ${l});

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];

        ivec2 dyRCCorner = coords.yz - pads;
        int dyRCorner = dyRCCorner.x;
        int dyCCorner = dyRCCorner.y;

        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;
        for (int wR = 0; wR < ${i};
          wR += ${s}) {
          float dyR = float(dyRCorner + wR) / ${n}.0;

          if (dyR < 0.0 || dyR >= ${e.outHeight}.0 || fract(dyR) > 0.0) {
            continue;
          }
          int idyR = int(dyR);

          for (int wC = 0; wC < ${o}; wC++) {
            float dyC = float(dyCCorner + wC) / ${r}.0;

            if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                fract(dyC) > 0.0) {
              continue;
            }
            int idyC = int(dyC);

            float dyValue = getDy(b, idyR, idyC, d);
            int maxPosValue = ${c} - int(getMaxPos(b, idyR, idyC, d));

            // Get the current value, check it against the value from the
            // position matrix.
            int curPosValue = wR * ${o} + wC;
            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

            dotProd += dyValue * mask;
          }
        }
        setOutput(dotProd);
      }
    `}}class YNe{constructor(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;const n=e.strideDepth,r=e.strideHeight,s=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,l=e.effectiveFilterDepth,c=e.effectiveFilterHeight,u=e.effectiveFilterWidth,d=l-1-e.padInfo.front,h=c-1-e.padInfo.top,f=u-1-e.padInfo.left,p=l*c*u-1;this.userCode=`
      const ivec3 pads = ivec3(${d}, ${h}, ${f});

      void main() {
        ivec5 coords = getOutputCoords();
        int batch = coords.x;
        int ch = coords.u;

        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;
        int dyDCorner = dyCorner.x;
        int dyRCorner = dyCorner.y;
        int dyCCorner = dyCorner.z;

        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get
        // dx(xD, xR, xC, ch).
        // ? = to be determined. : = across all values in that axis.
        float dotProd = 0.0;

        for (int wD = 0; wD < ${l};
           wD += ${i}) {
          float dyD = float(dyDCorner + wD) / ${n}.0;

          if (dyD < 0.0 || dyD >= ${e.outDepth}.0 || fract(dyD) > 0.0) {
            continue;
          }
          int idyD = int(dyD);

          for (int wR = 0; wR < ${c};
              wR += ${o}) {
            float dyR = float(dyRCorner + wR) / ${r}.0;

            if (dyR < 0.0 || dyR >= ${e.outHeight}.0 ||
                fract(dyR) > 0.0) {
              continue;
            }
            int idyR = int(dyR);

            for (int wC = 0; wC < ${u};
                wC += ${a}) {
              float dyC = float(dyCCorner + wC) / ${s}.0;

              if (dyC < 0.0 || dyC >= ${e.outWidth}.0 ||
                  fract(dyC) > 0.0) {
                continue;
              }
              int idyC = int(dyC);

              float dyValue = getDy(batch, idyD, idyR, idyC, ch);
              int maxPosValue = ${p} -
                  int(getMaxPos(batch, idyD, idyR, idyC, ch));

              // Get the current value, check it against the value from the
              // position matrix.
              int curPosValue =
                  wD * ${c} * ${u} +
                  wR * ${u} + wC;
              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);

              dotProd += dyValue * mask;
            }
          }
        }
        setOutput(dotProd);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function QNe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i}=e,o=i,{filterSize:a,strides:l,pad:c,dimRoundingMode:u}=r,d=[1,1,1],h=uc(o.shape,a,l,d,c,u),f=new _P(h,"max",!0),p=n.runWebGLProgram(f,[o],o.dtype),m=new YNe(h),g=n.runWebGLProgram(m,[s,p],o.dtype);return n.disposeIntermediateTensorInfo(p),g}const JNe={kernelName:lE,backendName:"webgl",kernelFunc:QNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZNe(t){const{inputs:e,backend:n,attrs:r}=t,{dy:s,input:i,output:o}=e,a=i;z0([i,o],"maxPoolGrad");const{filterSize:l,strides:c,pad:u,dimRoundingMode:d}=r,h=zo(a.shape,l,c,1,u,d),f=!0,p=new Ab(h,"max",f),m=n.runWebGLProgram(p,[a],a.dtype),g=new XNe(h),y=n.runWebGLProgram(g,[s,m],a.dtype);return n.disposeIntermediateTensorInfo(m),y}const e$e={kernelName:aE,backendName:"webgl",kernelFunc:ZNe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function t$e(t,e,n,r){let s=new Ab(n,"max",!1);const i=r.runWebGLProgram(s,[t],"float32");s=new Ab(n,"max",!0,!0,e);const o=r.runWebGLProgram(s,[t],"float32");return[i,o]}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const n$e={kernelName:cE,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{filterSize:s,strides:i,pad:o,includeBatchInIndex:a}=e,l=n;P(r.shape.length===4,()=>`Error in maxPool: input must be rank 4 but got rank ${r.shape.length}.`);const c=[1,1];P(Kr(i,c),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${i} and dilations '${c}'`);const u=zo(r.shape,s,i,c,o),[d,h]=t$e(r,a,u,l);return[d,h]}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function r$e(t,e,n,r){const s=fe(e),o=fe(t.shape)/s,a=Oe({inputs:{x:t},attrs:{shape:[o,s]},backend:r}),l=qh(a,"float32","mean",r),c=Oe({inputs:{x:l},attrs:{shape:n},backend:r});return r.disposeIntermediateTensorInfo(a),r.disposeIntermediateTensorInfo(l),c}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s$e={kernelName:Av,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{x:r}=t,{keepDims:s,axis:i}=e,o=n,a=r.shape.length,l=Tt(i,r.shape);let c=l;const u=Gn(c,a),d=u!=null,h=o.shouldExecuteOnCPU([r]),f=[];let p=r;if(d){if(h){const w=o.texData.get(p.dataId).values,C=new Array(a);for(let I=0;I<C.length;I++)C[I]=r.shape[u[I]];const _=SP(w,r.shape,r.dtype,u,C);p=o.makeTensorInfo(C,r.dtype);const E=o.texData.get(p.dataId);E.values=_}else p=K_(r,u,o);f.push(p),c=ir(c.length,a)}qr("sum",c,a);const[m,g]=Mr(p.shape,c);let y=m;s&&(y=sr(m,l));const b=r$e(p,g,y,o);for(const v of f)o.disposeIntermediateTensorInfo(v);return b}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function i$e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=Tt(i,s.shape);let c=l;const u=Gn(c,a);let d=s;u!=null&&(d=ws({inputs:{x:s},backend:n,attrs:{perm:u}}),c=ir(c.length,s.shape.length)),qr("min",c,a);const[h,f]=Mr(d.shape,c),p=fe(f),m=Oe({inputs:{x:d},backend:n,attrs:{shape:[-1,p]}}),g=qh(m,m.dtype,"min",n);let y;if(o){const b=sr(h,l);y=Oe({inputs:{x:g},backend:n,attrs:{shape:b}})}else y=Oe({inputs:{x:g},backend:n,attrs:{shape:h}});return n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(g),u!=null&&n.disposeIntermediateTensorInfo(d),y}const o$e={kernelName:Rv,backendName:"webgl",kernelFunc:i$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const a$e=CP+`
  return min(a, b);
`,l$e=`
  vec4 result = vec4(min(a, b));
  bvec4 isNaNA = isnan(a);
  bvec4 isNaNB = isnan(b);
  bvec4 isNaN = bvec4(isNaNA.x || isNaNB.x, isNaNA.y || isNaNB.y, isNaNA.z || isNaNB.z, isNaNA.w || isNaNB.w);
  `+Kh+`
  return result;
`,c$e=Yr({opSnippet:a$e,packedOpSnippet:l$e,cpuKernelImpl:qCe}),u$e={kernelName:Nm,backendName:"webgl",kernelFunc:c$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class d$e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=n.map((u,d)=>u[0]+e[d]+u[1]);const s=e.length,i=on(s),o=n.map(u=>u[0]).join(","),a=n.map((u,d)=>u[0]+e[d]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s),c=r==="reflect"?0:1;if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start) {
            outC = start * 2 - outC - ${c};
          } else if(outC >= end) {
            outC = (end - 1) * 2 - outC + ${c};
          }
          setOutput(getX(outC - start));
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        for (int i = 0; i < ${s}; i++) {
          if (outC[i] < start[i]) {
            outC[i] = start[i] * 2 - outC[i] - ${c};
          } else if(outC[i] >= end[i]) {
            outC[i] = (end[i] - 1) * 2 - outC[i] + ${c};
          }
        }
        ${i} coords = outC - start;
        setOutput(getX(${l}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class h$e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=n.map((p,m)=>p[0]+e[m]+p[1]);const s=e.length,i=on(s),o=n.map(p=>p[0]).join(","),a=n.map((p,m)=>p[0]+e[m]).join(","),l=bs("rc",s),c=bs("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${c.slice(-2).join()})`,h=r==="reflect"?0:1;let f="";if(s===1){const p=`
        ${i} source = rc;
        if (source < start) {
          source = start * 2 - source - ${h};
        } else if (source >= end) {
          source = (end - 1) * 2 - source + ${h};
        }
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[s-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
      `}else{const p=`
        ${i} source = rc;
        ${i} lt = ${i}(lessThan(source, start));
        ${i} gte = ${i}(greaterThanEqual(source, end));
        ${i} orig = 1 - (lt + gte);
        source = orig * source +
                lt * (start * 2 - source - ${h}) +
                gte * ((end - 1) * 2 - source + ${h});
        source -= start;
      `;f=`
        ${i} rc = outputLoc;
        ${p}
        result[0] = getChannel(getX(${c.join()}), ${d});
        ${l[s-1]} += 1;
        if(${u}) {
          ${p}
          result[1] = getChannel(getX(${c.join()}), ${d});
        }
        rc = outputLoc;
        ${l[s-2]} += 1;
        if(${l[s-2]} < ${this.outputShape[s-2]}) {
          ${p}
          result[2] = getChannel(getX(${c.join()}), ${d});
          ${l[s-1]} += 1;
          if(${u}) {
            ${p}
            result[3] = getChannel(getX(${c.join()}), ${d});
          }
        }
      `}this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${f}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const f$e=({inputs:t,backend:e,attrs:n})=>{const{x:r}=t,{paddings:s,mode:i}=n,o=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new h$e(r.shape,s,i):new d$e(r.shape,s,i);return e.runWebGLProgram(o,[r],r.dtype)},p$e={kernelName:Ov,backendName:"webgl",kernelFunc:f$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m$e=`if (b == 0.0) return NAN;
  return mod(a, b);`,g$e=`
  vec4 result = mod(a, b);
  bvec4 isNaN = equal(b, vec4(0.0));
  `+Kh+`
  return result;
`,y$e=Yr({opSnippet:m$e,packedOpSnippet:g$e}),b$e={kernelName:$m,backendName:"webgl",kernelFunc:y$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class v$e{constructor(e,n,r){this.variableNames=["probs"],this.customUniforms=[{name:"seed",type:"float"}],this.outputShape=[e,r],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];

        float r = random(seed);
        float cdf = 0.0;

        for (int i = 0; i < ${n-1}; i++) {
          cdf += getProbs(batch, i);

          if (r < cdf) {
            setOutput(float(i));
            return;
          }
        }

        // If no other event happened, last event happened.
        setOutput(float(${n-1}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const w$e=`
if (a == b) {
  return 1.0;
};
return a / b;`,x$e=`
  // vec4 one = vec4(equal(a, b));
  // return one + (vec4(1.0) - one) * a / b;
  vec4 result = a / b;
  if(a.x == b.x) {
    result.x = 1.;
  }
  if(a.y == b.y) {
    result.y = 1.;
  }
  if(a.z == b.z) {
    result.z = 1.;
  }
  if(a.w == b.w) {
    result.w = 1.;
  }

  return result;
`,d8=Yr({opSnippet:w$e,packedOpSnippet:x$e,checkOutOfBounds:!0}),S$e={kernelName:pm,backendName:"webgl",kernelFunc:d8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Lz="return a - b;",h8=Yr({opSnippet:Lz,packedOpSnippet:Lz,supportsComplex:!0,cpuKernelImpl:mEe}),C$e={kernelName:Gm,backendName:"webgl",kernelFunc:h8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function f8(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{dim:i}=r,o=Tt([i],s.shape),a=u8({inputs:{x:s},backend:n,attrs:{reductionIndices:o,keepDims:!1}}),l=sr(a.shape,o),c=Oe({inputs:{x:a},backend:n,attrs:{shape:l}}),u=h8({inputs:{a:s,b:c},backend:n}),d=a8({inputs:{x:u},backend:n}),h=q_({inputs:{x:d},backend:n,attrs:{axis:o,keepDims:!1}}),f=Oe({inputs:{x:h},backend:n,attrs:{shape:l}}),p=d8({inputs:{a:d,b:f},backend:n});return n.disposeIntermediateTensorInfo(a),n.disposeIntermediateTensorInfo(c),n.disposeIntermediateTensorInfo(u),n.disposeIntermediateTensorInfo(d),n.disposeIntermediateTensorInfo(h),n.disposeIntermediateTensorInfo(f),p}const E$e={kernelName:Qv,backendName:"webgl",kernelFunc:f8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _$e(t){const{inputs:e,backend:n,attrs:r}=t,{logits:s}=e,{numSamples:i,seed:o,normalized:a}=r,l=a?s:f8({inputs:{logits:s},backend:n,attrs:{dim:s.shape.length-1}}),c=l.shape[0],u=l.shape[1],d=new v$e(c,u,i),h=[[o]],f=n.runWebGLProgram(d,[l],"int32",h);return a||n.disposeIntermediateTensorInfo(l),f}const T$e={kernelName:uE,backendName:"webgl",kernelFunc:_$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const k$e=Vo+`
  return -x;
`,I$e=`
  vec4 result = -x;
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`;function N$e(t){const{inputs:e,backend:n}=t,{x:r}=e;if(n.shouldExecuteOnCPU([r])){const i=n.texData.get(r.dataId),[o,a]=YCe(i.values,r.shape,r.dtype);return n.makeTensorInfo(a,r.dtype,o)}let s;return ce().getBool("WEBGL_PACK_UNARY_OPERATIONS")?s=new Xc(r.shape,I$e):s=new Wa(r.shape,k$e),n.runWebGLProgram(s,[r],r.dtype)}const $$e={kernelName:Dv,backendName:"webgl",kernelFunc:N$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const A$e=v_;function R$e(t){Ai("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),{selectedIndices:d}=A$e(c,u,o,a,l);return n.makeTensorInfo([d.length],"int32",new Int32Array(d))}const O$e={kernelName:dE,backendName:"webgl",kernelFunc:R$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const D$e=w_;function P$e(t){Ai("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,padToMaxOutputSize:c}=r,u=n.readSync(s.dataId),d=n.readSync(i.dataId),{selectedIndices:h,validOutputs:f}=D$e(u,d,o,a,l,c);return[n.makeTensorInfo([h.length],"int32",new Int32Array(h)),n.makeTensorInfo([],"int32",new Int32Array([f]))]}const L$e={kernelName:hE,backendName:"webgl",kernelFunc:P$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F$e=x_;function M$e(t){Ai("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead");const{inputs:e,backend:n,attrs:r}=t,{boxes:s,scores:i}=e,{maxOutputSize:o,iouThreshold:a,scoreThreshold:l,softNmsSigma:c}=r,u=n.readSync(s.dataId),d=n.readSync(i.dataId),h=o,f=a,p=l,m=c,{selectedIndices:g,selectedScores:y}=F$e(u,d,h,f,p,m);return[n.makeTensorInfo([g.length],"int32",new Int32Array(g)),n.makeTensorInfo([y.length],"float32",new Float32Array(y))]}const z$e={kernelName:fE,backendName:"webgl",kernelFunc:M$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class B$e{constructor(e,n,r,s){this.variableNames=["indices"],this.outputShape=[e,n],this.userCode=`
      void main() {
        ivec2 coords = getOutputCoords();
        int index = round(getIndices(coords.x));
        setOutput(mix(float(${s}), float(${r}),
                      float(index == coords.y)));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const j$e=t=>{const{inputs:e,backend:n,attrs:r}=t,{indices:s}=e,{dtype:i,depth:o,onValue:a,offValue:l}=r,c=fe(s.shape),u=new B$e(c,o,a,l),d=Oe({inputs:{x:s},backend:n,attrs:{shape:[c]}}),h=n.runWebGLProgram(u,[d],i);n.disposeIntermediateTensorInfo(d);const f=[...s.shape,o],p=Oe({inputs:{x:h},backend:n,attrs:{shape:f}});return n.disposeIntermediateTensorInfo(h),p},V$e={kernelName:Fv,backendName:"webgl",kernelFunc:j$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function VS(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="complex64"){const s=j0({inputs:{input:r},backend:n}),i=VS({inputs:{x:s},backend:n}),o=X_({inputs:{input:r},backend:n}),a=VS({inputs:{x:o},backend:n}),l=Gu({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return V0({attrs:{shape:r.shape,dtype:r.dtype,value:r.dtype==="string"?"":0},backend:n})}const U$e={kernelName:t0,backendName:"webgl",kernelFunc:VS};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function p8(t){const{inputs:e,backend:n}=t,{x:r}=e;if(r.dtype==="string")throw new Error("onesLike is not supported under string dtype");if(r.dtype==="complex64"){const s=j0({inputs:{input:r},backend:n}),i=p8({inputs:{x:s},backend:n}),o=X_({inputs:{input:r},backend:n}),a=VS({inputs:{x:o},backend:n}),l=Gu({inputs:{real:i,imag:a},backend:n});return n.disposeIntermediateTensorInfo(s),n.disposeIntermediateTensorInfo(i),n.disposeIntermediateTensorInfo(o),n.disposeIntermediateTensorInfo(a),l}else return V0({attrs:{shape:r.shape,dtype:r.dtype,value:1},backend:n})}const W$e={kernelName:Lv,backendName:"webgl",kernelFunc:p8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function H$e(t){const{inputs:e,backend:n,attrs:r}=t,{axis:s}=r;if(e.length===1)return jA({inputs:{input:e[0]},backend:n,attrs:{dim:s}});const i=e[0].shape,o=e[0].dtype;e.forEach(u=>{Gr(i,u.shape,"All tensors passed to stack must have matching shapes"),P(o===u.dtype,()=>"All tensors passed to stack must have matching dtypes")});const a=[],l=e.map(u=>{const d=jA({inputs:{input:u},backend:n,attrs:{dim:s}});return a.push(d),d}),c=Zq({inputs:l,backend:n,attrs:{axis:s}});return a.forEach(u=>n.disposeIntermediateTensorInfo(u)),c}const G$e={kernelName:Mv,backendName:"webgl",kernelFunc:H$e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class K$e{constructor(e,n,r){this.variableNames=["x"],this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((c,u)=>c[0]+e[u]+c[1]);const s=e.length,i=on(s),o=n.map(c=>c[0]).join(","),a=n.map((c,u)=>c[0]+e[u]).join(","),l=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,s);if(s===1){this.userCode=`
        int start = ${o};
        int end = ${a};

        void main() {
          int outC = getOutputCoords();
          if (outC < start || outC >= end) {
            setOutput(value);
          } else {
            setOutput(getX(outC - start));
          }
        }
      `;return}this.userCode=`
      ${i} start = ${i}(${o});
      ${i} end = ${i}(${a});

      void main() {
        ${i} outC = getOutputCoords();
        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {
          setOutput(value);
        } else {
          ${i} coords = outC - start;
          setOutput(getX(${l}));
        }
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class q$e{constructor(e,n,r){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0,this.customUniforms=[{name:"value",type:"float"}],this.outputShape=n.map((m,g)=>m[0]+e[g]+m[1]);const s=e.length,i=on(s),o=n.map(m=>m[0]).join(","),a=n.map((m,g)=>m[0]+e[g]).join(","),l=bs("rc",s),c=bs("source",s),u=`${l[s-1]} < ${this.outputShape[s-1]}`,d=s===1?"source":`vec2(${c.slice(-2).join()})`,h=[`${i} rc = outputLoc;`,`${l[s-1]} += 1;
       if(${u}) {
      `,s===1?"":`}
       rc = outputLoc;
       ${l[s-2]} += 1;
       if(${l[s-2]} < ${this.outputShape[s-2]}) {`,s===1?"":`  ${l[s-1]} += 1;
         if(${u}) {`],f=s===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))";let p="";for(let m=0,g=s===1?2:4;m<g;m++)p+=`
        ${h[m]}
        if (${f}) {
          result[${m}] = float(value);
        } else {
          ${i} source = rc - start;
          result[${m}] = getChannel(getX(${c.join()}), ${d});
        }
      `;p+=s===1?"} ":"}}",this.userCode=`
      const ${i} start = ${i}(${o});
      const ${i} end = ${i}(${a});

      void main() {
        ${i} outputLoc = getOutputCoords();
        vec4 result = vec4(0.);
        ${p}
        setOutput(result);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m8=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{paddings:i,constantValue:o}=r;if(fe(s.shape)===0){const c=i.map((u,d)=>u[0]+s.shape[d]+u[1]);return V0({backend:n,attrs:{shape:c,value:o,dtype:s.dtype}})}const a=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new q$e(s.shape,i,o):new K$e(s.shape,i,o),l=[[o]];return n.runWebGLProgram(a,[s],s.dtype,l)},X$e={kernelName:zv,backendName:"webgl",kernelFunc:m8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Y$e=`
  if(a < 0.0 && floor(b) < b){
    return NAN;
  }
  if (b == 0.0) {
    return 1.0;
  }
  return (round(mod(b, 2.0)) != 1) ?
      pow(abs(a), b) : sign(a) * pow(abs(a), b);
`,Q$e=`
  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.
  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));
  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);
  vec4 result = multiplier * pow(abs(a), b);

  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS
  bvec4 isExpZero = equal(b, vec4(0.0));
  result.r = isExpZero.r ? 1.0 : result.r;
  result.g = isExpZero.g ? 1.0 : result.g;
  result.b = isExpZero.b ? 1.0 : result.b;
  result.a = isExpZero.a ? 1.0 : result.a;

  bvec4 isNaN1 = lessThan(a, vec4(0.0));
  bvec4 isNaN2 = lessThan(floor(b), b);
  bvec4 isNaN = bvec4(isNaN1.x && isNaN2.x, isNaN1.y && isNaN2.y, isNaN1.z && isNaN2.z, isNaN1.w && isNaN2.w);
  `+Kh+`
  return result;
`,J$e=Yr({opSnippet:Y$e,packedOpSnippet:Q$e}),Z$e={kernelName:Rm,backendName:"webgl",kernelFunc:J$e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function eAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{axis:i,keepDims:o}=r,a=s.shape.length,l=[],c=Tt(i,s.shape);let u=c;const d=Gn(u,a);let h=s;d!=null&&(h=ws({inputs:{x:s},backend:n,attrs:{perm:d}}),u=ir(u.length,a),l.push(h)),qr("prod",u,a);let f;if(n.shouldExecuteOnCPU([h])){const p=n.texData.get(h.dataId).values,{outVals:m,outShape:g,outDtype:y}=JCe(h.shape,h.dtype,p,u);f=n.makeTensorInfo(g,y,m)}else{const[p,m]=Mr(h.shape,u),g=fe(m),y=Oe({inputs:{x:h},backend:n,attrs:{shape:[-1,g]}}),b=zE(s.dtype),v=qh(y,b,"prod",n);f=Oe({inputs:{x:v},backend:n,attrs:{shape:p}}),l.push(y),l.push(v)}if(o){l.push(f);const p=sr(f.shape,c);f=Oe({inputs:{x:f},backend:n,attrs:{shape:p}})}return l.forEach(p=>n.disposeIntermediateTensorInfo(p)),f}const tAe={kernelName:jv,backendName:"webgl",kernelFunc:eAe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function nAe(t){const{inputs:e,backend:n,attrs:r}=t,{paramsNestedSplits:s,paramsDenseValues:i,indices:o}=e,{outputRaggedRank:a}=r,l=s.map(y=>n.readSync(y.dataId)),c=s.map(y=>y.shape),u=n.readSync(i.dataId),d=n.readSync(o.dataId),[h,f,p]=ZCe(l,c,u,i.shape,i.dtype,d,o.shape,a),m=h.map(y=>n.makeTensorInfo([y.length],"int32",y)),g=n.makeTensorInfo(p,i.dtype,f);return m.concat([g])}const rAe={kernelName:pE,backendName:"webgl",kernelFunc:nAe};/**
 * @license
 * Copyright 2022 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function sAe(t){const{inputs:e,backend:n}=t,{starts:r,limits:s,deltas:i}=e,o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=eEe(o,r.shape,r.dtype,a,s.shape,l,i.shape),d=n.makeTensorInfo([c.length],"int32",c),h=n.makeTensorInfo([u.length],r.dtype,u);return[d,h]}const iAe={kernelName:mE,backendName:"webgl",kernelFunc:sAe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function oAe(t){const{inputs:e,backend:n,attrs:r}=t,{shape:s,values:i,defaultValue:o,rowPartitionTensors:a}=e,{rowPartitionTypes:l}=r,c=n.readSync(s.dataId),u=n.readSync(i.dataId),d=n.readSync(o.dataId),h=a.map(g=>n.readSync(g.dataId)),f=a.map(g=>g.shape),[p,m]=tEe(c,s.shape,u,i.shape,i.dtype,d,o.shape,h,f,l);return n.makeTensorInfo(p,i.dtype,m)}const aAe={kernelName:gE,backendName:"webgl",kernelFunc:oAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const g8=t=>{const{backend:e,attrs:n}=t,{start:r,stop:s,step:i,dtype:o}=n,a=nEe(r,s,i,o);return e.makeTensorInfo([a.length],o,a)},lAe={kernelName:yE,backendName:"webgl",kernelFunc:g8};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const cAe="return 1.0 / x;",uAe=Lt({opSnippet:cAe}),dAe={kernelName:Om,backendName:"webgl",kernelFunc:uAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const hAe=Vo+`
  return (x < 0.0) ? 0.0 : x;
`,fAe=`
  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,pAe=Lt({opSnippet:hAe,packedOpSnippet:fAe}),mAe={kernelName:Dm,backendName:"webgl",kernelFunc:pAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const gAe=Vo+`
  return (x < 0.0) ? 0.0 : min(6.0, x);
`,yAe=`
  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,bAe=Lt({opSnippet:gAe,packedOpSnippet:yAe}),vAe={kernelName:Pm,backendName:"webgl",kernelFunc:bAe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class wAe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let h;i?h="(vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC - vec2(0.5)":h="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec2 sourceFloorRC = ivec2(max(sourceFracIndexRC, vec2(0.0)));
        ivec2 sourceCeilRC = ivec2(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);
        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);
        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);
        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);

        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);

        float top = topLeft + (topRight - topLeft) * fracRC.y;
        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;
        float newValue = top + (bottom - top) * fracRC.x;

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class xAe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r];let h;i?h="(vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC - vec3(0.5)":h="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${h};

        // Compute the four integer indices.
        ivec3 sourceFloorRC = ivec3(max(sourceFracIndexRC, vec3(0.0)));
        ivec3 sourceCeilRC = ivec3(
          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        // In parallel, construct four corners for all four components in
        // packed 2x2 cell.
        vec4 topLeft = vec4(
          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 bottomLeft = vec4(
          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);

        vec4 topRight = vec4(
          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec4 bottomRight = vec4(
          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),
          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);

        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);

        vec4 top = mix(topLeft, topRight, fracRC.yyzz);
        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);
        vec4 newValue = mix(top, bottom, fracRC.x);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function SAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,c]=a,u=ce().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new xAe(s.shape,l,c,i,o):new wAe(s.shape,l,c,i,o);return n.runWebGLProgram(u,[s],"float32")}const CAe={kernelName:Wv,backendName:"webgl",kernelFunc:SAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class EAe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(startRLerp - float(winHeight / 2));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(startCLerp - float(winWidth / 2));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float dxR = float(dyR) * heightScale;
            int topDxRIndex = int(floor(dxR));
            int bottomDxRIndex = int(min(ceil(dxR), ${s-1}.0));
            float dxRLerp = dxR - float(topDxRIndex);
            float inverseDxRLerp = 1.0 - dxRLerp;

            float dxC = float(dyC) * widthScale;
            int leftDxCIndex = int(floor(dxC));
            int rightDxCIndex = int(min(ceil(dxC), ${i-1}.0));
            float dxCLerp = dxC - float(leftDxCIndex);
            float inverseDxCLerp = 1.0 - dxCLerp;

            if (r == topDxRIndex && c == leftDxCIndex) {
              // topLeft
              accumulator +=
                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;
            }

            if (r == topDxRIndex && c == rightDxCIndex) {
              // topRight
              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;
            }

            if (r == bottomDxRIndex && c == leftDxCIndex) {
              // bottomLeft
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;
            }

            if (r == bottomDxRIndex && c == rightDxCIndex) {
              // bottomRight
              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _Ae(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new EAe(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const TAe={kernelName:wE,backendName:"webgl",kernelFunc:_Ae};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class kAe{constructor(e,n,r,s,i){this.variableNames=["A"],this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],h=s?"0.5":"0.0";let f;i?f="max((vec2(yRC) + vec2(0.5)) * effectiveInputOverOutputRatioRC, vec2(0.0))":f="vec2(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec2 effectiveInputOverOutputRatioRC = vec2(
          ${u[0]/d[0]},
          ${u[1]/d[1]});
      const vec2 inputShapeRC = vec2(${a}.0, ${l}.0);

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        ivec2 yRC = coords.yz;

        // Fractional source index.
        vec2 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec2 sourceNearestRC = ivec2(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));
        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class IAe{constructor(e,n,r,s,i){this.variableNames=["A"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=[];const[o,a,l,c]=e;this.outputShape=[o,n,r,c];const u=[s&&n>1?a-1:a,s&&r>1?l-1:l],d=[s&&n>1?n-1:n,s&&r>1?r-1:r],h=s?"0.5":"0.0";let f;i?f="max((vec3(yRC) + vec3(0.5)) * effectiveInputOverOutputRatioRC, vec3(0.0))":f="vec3(yRC) * effectiveInputOverOutputRatioRC",this.userCode=`
      const vec3 effectiveInputOverOutputRatioRC = vec3(
          ${u[0]/d[0]},
          ${u[1]/d[1]},
          ${u[1]/d[1]});
      const vec3 inputShapeRC = vec3(${a}.0, ${l}.0,
                                     ${l}.0);

      float getAValue(int b, int r, int c, int d) {
        return getChannel(getA(b, r, c, d), vec2(c, d));
      }

      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        // Calculate values for next column in yRC.z.
        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);

        // Fractional source index.
        vec3 sourceFracIndexRC = ${f};

        // Compute the coordinators of nearest neighbor point.
        ivec3 sourceNearestRC = ivec3(
          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + ${h})));

        // Should we calculate next column and row elements in 2x2 packed cell.
        bool hasNextCol = d < ${c-1};
        bool hasNextRow = coords.z < ${r-1};

        vec4 newValue = vec4(
          getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d),
          hasNextCol ? getAValue(b, sourceNearestRC.x, sourceNearestRC.y, d + 1)
                     : 0.0,
          hasNextRow ? getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d)
                     : 0.0,
          (hasNextRow && hasNextCol) ?
            getAValue(b, sourceNearestRC.x, sourceNearestRC.z, d + 1) : 0.0);

        setOutput(newValue);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function NAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s}=e,{alignCorners:i,halfPixelCenters:o,size:a}=r,[l,c]=a,u=ce().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new IAe(s.shape,l,c,i,o):new kAe(s.shape,l,c,i,o);return n.runWebGLProgram(u,[s],s.dtype)}const $Ae={kernelName:Uv,backendName:"webgl",kernelFunc:NAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class AAe{constructor(e,n,r){this.variableNames=["dy"],this.outputShape=[],this.outputShape=n;const[,s,i]=n,[,o,a]=e,l=[r&&o>1?s-1:s,r&&a>1?i-1:i],c=[r&&o>1?o-1:o,r&&a>1?a-1:a],u=l[0]/c[0],d=l[1]/c[1],h=1/u,f=1/d,p=Math.ceil(h)*2+2,m=Math.ceil(f)*2+2;this.userCode=`
      void main() {
        ivec4 coords = getOutputCoords();
        int b = coords[0];
        int d = coords[3];
        int r = coords[1];
        int c = coords[2];

        float accumulator = 0.0;

        const float heightScale = float(${u});
        const float widthScale = float(${d});

        const float invHeightScale = float(${h});
        const float invWidthScale = float(${f});

        const int winHeight = int(${p});
        const int winWidth = int(${m});

        // Compute bounds for where in dy we will look
        float startRLerp = floor(float(r) * invHeightScale);
        int startDyR = int(floor(startRLerp - float(winHeight / 2)));

        float startCLerp = floor(float(c) * invWidthScale);
        int startDyC = int(floor(startCLerp - float(winWidth / 2)));

        // Loop over dy
        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {
          int dyR = dyROffset + startDyR;

          // Guard against the window exceeding the bounds of dy
          if (dyR < 0 || dyR >= ${o}) {
            continue;
          }

          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {
            int dyC = dyCOffset + startDyC;

            // Guard against the window exceeding the bounds of dy
            if (dyC < 0 || dyC >= ${a}) {
              continue;
            }

            float sourceFracRow =
              float(${l[0]}) *
                (float(dyR) / float(${c[0]}));

            float sourceFracCol =
                float(${l[1]}) *
                  (float(dyC) / float(${c[1]}));

            int sourceNearestRow = int(min(
                float(int(${s}) - 1),
                ${r} ? float(round(sourceFracRow)) :
                                  float(floor(sourceFracRow))));

            int sourceNearestCol = int(min(
                float(int(${i}) - 1),
                ${r} ? float(round(sourceFracCol)) :
                                  float(floor(sourceFracCol))));

            if (r == sourceNearestRow && c == sourceNearestCol) {
              accumulator += getDy(b, dyR, dyC, d);
            }
          }
        }
        // End loop over dy

        setOutput(accumulator);
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function RAe(t){const{inputs:e,backend:n,attrs:r}=t,{images:s,dy:i}=e,{alignCorners:o}=r,a=new AAe(i.shape,s.shape,o);return n.runWebGLProgram(a,[i],i.dtype)}const OAe={kernelName:vE,backendName:"webgl",kernelFunc:RAe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class DAe{constructor(e,n){this.variableNames=["x"];const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);if(this.outputShape=e,r===1){this.userCode=`
        void main() {
          int coord = getOutputCoords();
          setOutput(getX(${e[0]} - coord - 1));
        }
      `;return}const s=a=>n.indexOf(a)!==-1&&e[a]!==1?`${e[a]} - coords[${a}] - 1`:`coords[${a}]`,i=e.map((a,l)=>s(l)).join(","),o=on(r);this.userCode=`
      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${i}));
      }
    `}}/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class PAe{constructor(e,n){this.variableNames=["x"],this.packedInputs=!0,this.packedOutput=!0;const r=e.length;if(r>4)throw new Error(`WebGL backend: Reverse of rank-${r} tensor is not yet supported`);this.outputShape=e;const s=bs("rc",r),i=`${s[r-1]} + 1 < ${this.outputShape[r-1]}`,o=`${s[r-2]} + 1 < ${this.outputShape[r-2]}`,a=on(r);r===1?this.userCode=`
        void main(){
          int rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = getChannel(getX(${e[0]} - rc - 1),
            ${e[0]} - rc - 1);
          if(${i}){
              result.g = getChannel(getX(${e[0]} - (rc  + 1) - 1),
                ${e[0]} - (rc  + 1) - 1);
          }
          setOutput(result);
        }
      `:this.userCode=`
        void main() {
          ${a} rc = getOutputCoords();
          vec4 result = vec4(0.);
          result.r = ${l(s.slice())};
          if(${i}){
            result.g = ${c(s.slice())};
          }
          if(${o}) {
            result.b = ${u(s.slice())};
            if(${i}) {
              result.a = ${d(s.slice())};
            }
          }
          setOutput(result);
        }
    `;function l(p){return h(p)}function c(p){return p[r-1]="("+p[r-1]+" + 1)",h(p)}function u(p){return p[r-2]="("+p[r-2]+" + 1)",h(p)}function d(p){return p[r-1]="("+p[r-1]+" + 1)",p[r-2]="("+p[r-2]+" + 1)",h(p)}function h(p){const m=e.map((b,v)=>f(v,p)),g=m.join(","),y=m.slice(-2).join(",");return`getChannel(getX(${g}), vec2(${y}))`}function f(p,m){return n.indexOf(p)!==-1&&e[p]!==1?`${e[p]} - ${m[p]} - 1`:`${m[p]}`}}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function LAe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{dims:i}=r,o=s.shape.length,a=Tt(i,s.shape);if(o===0)return bi({inputs:{x:s},backend:n});const l=ce().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new PAe(s.shape,a):new DAe(s.shape,a);return n.runWebGLProgram(l,[s],s.dtype)}const FAe={kernelName:Hv,backendName:"webgl",kernelFunc:LAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class MAe{constructor(e,n){this.variableNames=["Image"],this.outputShape=[],this.customUniforms=[{name:"params",type:"vec4"}];const r=e[1],s=e[2];this.outputShape=e;let i="";typeof n=="number"?i=`float outputValue = ${n.toFixed(2)};`:i=`
        vec3 fill = vec3(${n.join(",")});
        float outputValue = fill[coords[3]];`,this.userCode=`
        void main() {
          ivec4 coords = getOutputCoords();
          int x = coords[2];
          int y = coords[1];
          float coordXFloat = (float(x) - params[0]) * params[3] -
            (float(y) - params[1]) * params[2];
          float coordYFloat = (float(x) - params[0]) * params[2] +
            (float(y) - params[1]) * params[3];
          int coordX = int(round(coordXFloat + params[0]));
          int coordY = int(round(coordYFloat + params[1]));
          ${i}
          if(coordX >= 0 && coordX < ${s} && coordY >= 0 && coordY < ${r}) {
            outputValue = getImage(coords[0], coordY, coordX, coords[3]);
          }
          setOutput(outputValue);
        }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const zAe={kernelName:FE,backendName:"webgl",kernelFunc:({inputs:t,attrs:e,backend:n})=>{const{image:r}=t,{radians:s,fillValue:i,center:o}=e,a=n,l=new MAe(r.shape,i),[c,u]=mD(o,r.shape[1],r.shape[2]),d=[[c,u,Math.sin(s),Math.cos(s)]];return a.runWebGLProgram(l,[r],r.dtype,d)}};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const BAe=`
  // OpenGL ES does not support round function.
  // The algorithm is based on banker's rounding.
  float base = floor(x);
  if ((x - base) < 0.5) {
    return floor(x);
  } else if ((x - base) > 0.5) {
    return ceil(x);
  } else {
    if (mod(base, 2.0) == 0.0) {
      return base;
    } else {
      return base + 1.0;
    }
  }
`,jAe=Lt({opSnippet:BAe}),VAe={kernelName:Lm,backendName:"webgl",kernelFunc:jAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const UAe="return inversesqrt(x);",WAe=Lt({opSnippet:UAe,cpuKernelImpl:rEe}),HAe={kernelName:Fm,backendName:"webgl",kernelFunc:WAe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class TP{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;const c=on(i.length),u=on(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          float sum = 0.0;
          bool found = false;
          for (int i = 0; i < ${e}; i++) {
            int flattenedIndex = 0;
            for (int j = 0; j < ${n}; j++) {
              int index = round(${h});
              flattenedIndex += index * ${y};
            }
            if (flattenedIndex == coords[0]) {
              sum += ${p};
              found = true;
            }
          }
          setOutput(mix(${g}, sum, float(found)));
        }
      `}}/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class GAe{constructor(e,n,r,s,i,o,a=!0,l=!1){this.variableNames=["updates","indices","defaultValue"],this.packedInputs=!0,this.packedOutput=!0,this.outputShape=o;const c=on(i.length),u=on(o.length);let d="";r===1?d="i":r===2&&(d="i, j");const h=`getIndices(${d})`;let f="";s===1?f="i":s===2&&(f="i, coords[1]");const p=`getUpdates(${f})`;let m="";l&&(m="coords[0], coords[1]");const g=`getDefaultValue(${m})`,y=n>1?"strides[j]":"strides",b=n>1?"strides[j + 1]":"strides";this.userCode=`
        ${c} strides = ${c}(${i});

        void main() {
          ${u} coords = getOutputCoords();
          vec4 sum = vec4(0.);
          vec4 found = vec4(0.);
          for (int i = 0; i < ${e}; i+=2) {
            ivec2 flattenedIndex = ivec2(0);
            for (int j = 0; j < ${n}; j+=2) {
              ivec4 index = round(${h});
              flattenedIndex += index.xz * ${y};
              if (j + 1 < ${n}) {
                flattenedIndex += index.yw * ${b};
              }
            }
            if (flattenedIndex[0] == coords[0] || flattenedIndex[1] == coords[0] ||
                flattenedIndex[0] == coords[0] + 1 || flattenedIndex[1] == coords[0] + 1) {
              vec4 updVals = ${p};
              if (flattenedIndex[0] == coords[0]) {
                sum.xy += updVals.xy;
                found.xy = vec2(1.);
              } else if (flattenedIndex[0] == coords[0] + 1) {
                sum.zw += updVals.xy;
                found.zw = vec2(1.);
              }
              if (flattenedIndex[1] == coords[0]) {
                sum.xy += updVals.zw;
                found.xy = vec2(1.);
              } else if (flattenedIndex[1] == coords[0] + 1) {
                sum.zw += updVals.zw;
                found.zw = vec2(1.);
              }
            }
          }
          setOutput(mix(${g}, sum, found));
        }
      `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function KAe(t){const{inputs:e,backend:n,attrs:r}=t,{indices:s,updates:i}=e,{shape:o}=r,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=ju(i,s,o),h=[d/c,c];if(d===0)return n.makeTensorInfo(o,s.dtype);const f=Oe({inputs:{x:s},backend:n,attrs:{shape:[l,a]}}),p=Oe({inputs:{x:i},backend:n,attrs:{shape:[l,c]}}),m=n.makeTensorInfo([],"float32",new Float32Array([0]));let g;ce().getBool("WEBGL_PACK")?g=new GAe(l,a,f.shape.length,p.shape.length,u,h):g=new TP(l,a,f.shape.length,p.shape.length,u,h);const y=n.runWebGLProgram(g,[p,f,m],p.dtype),b=Oe({inputs:{x:y},backend:n,attrs:{shape:o}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(y),n.disposeIntermediateTensorInfo(m),b}const qAe={kernelName:xE,backendName:"webgl",kernelFunc:KAe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class XAe{constructor(e,n,r,s){this.variableNames=["sortedSequence","values"],this.customUniforms=[{name:"numInputs",type:"int"}],this.outputShape=[e,r];const i="while (left < right) {",o=`for (int i = 0; i < ${Math.ceil(Math.log2(n+1))}; ++i) { if (left >= right) break;`,a=ce().getNumber("WEBGL_VERSION")===2?i:o,l=s==="left"?"<":"<=";this.userCode=`
       int findBound(int batch, float value) {
         int left = 0;
         int right = numInputs;
         int mid;
         ${a}
           mid = (left + right) / 2;
           if (getSortedSequence(batch, mid) ${l} value) {
             left = mid + 1;
           } else {
             right = mid;
           }
         }
         return right;
       }

       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int valueIndex = coords[1];

         float value = getValues(batch, valueIndex);

         setOutput(float(findBound(batch, value)));
       }
     `}}/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function YAe(t){const{inputs:e,backend:n,attrs:r}=t,{sortedSequence:s,values:i}=e,{side:o}=r,a=new XAe(s.shape[0],s.shape[1],i.shape[1],o),l=[[s.shape[1]]];return n.runWebGLProgram(a,[s,i],"int32",l)}const QAe={kernelName:CE,backendName:"webgl",kernelFunc:YAe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class JAe{constructor(e,n,r){this.variableNames=["c","a","b"],this.outputShape=n;let s,i;if(r>4)throw Error(`Where for rank ${r} is not yet supported`);if(r===1)i="resRC",s="resRC";else{const a=["resRC.x","resRC.y","resRC.z","resRC.w"],l=[],c=[];for(let u=0;u<n.length;u++)c.push(`${a[u]}`),u<e&&l.push(`${a[u]}`);s=l.join(),i=c.join()}const o=on(r);this.userCode=`
      void main() {
        ${o} resRC = getOutputCoords();
        float cVal = getC(${s});
        if (cVal >= 1.0) {
          setOutput(getA(${i}));
        } else {
          setOutput(getB(${i}));
        }
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ZAe(t){const{inputs:e,backend:n}=t,{condition:r,t:s,e:i}=e,o=new JAe(r.shape.length,s.shape,s.shape.length);return n.runWebGLProgram(o,[r,s,i],Ms(s.dtype,i.dtype))}const e2e={kernelName:Gv,backendName:"webgl",kernelFunc:ZAe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const t2e=`
  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.
  // see: https://arxiv.org/abs/1706.02515
  float scaleAlpha = ${T_};
  float scale = ${k_};
  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);
`,n2e=Lt({opSnippet:t2e}),r2e={kernelName:Mm,backendName:"webgl",kernelFunc:n2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const s2e=mg+`
  return 1.0 / (1.0 + exp(-1.0 * x));
`,i2e=`
  vec4 result = 1.0 / (1.0 + exp(-1.0 * x));
  bvec4 isNaN = isnan(x);

  result.r = isNaN.r ? x.r : result.r;
  result.g = isNaN.g ? x.g : result.g;
  result.b = isNaN.b ? x.b : result.b;
  result.a = isNaN.a ? x.a : result.a;

  return result;
`,o2e=Lt({opSnippet:s2e,packedOpSnippet:i2e,cpuKernelImpl:iEe}),a2e={kernelName:Vm,backendName:"webgl",kernelFunc:o2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const l2e=`
  if (isnan(x)) { return 0.0; }
  return sign(x);
`,c2e=Lt({opSnippet:l2e}),u2e={kernelName:jm,backendName:"webgl",kernelFunc:c2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const d2e=mg+`
  return sin(x);
`,h2e=`
  vec4 result = sin(x);
  bvec4 isNaN = isnan(x);
  ${Kh}
  return result;
`,f2e=Lt({opSnippet:d2e,packedOpSnippet:h2e}),p2e={kernelName:zm,backendName:"webgl",kernelFunc:f2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const m2e=`
  float e2x = exp(x);
  return (e2x - 1.0 / e2x) / 2.0;
`,g2e=Lt({opSnippet:m2e}),y2e={kernelName:Bm,backendName:"webgl",kernelFunc:g2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const b2e=`
  float epsilon = 1.1920928955078125e-7;
  float threshold = log(epsilon) + 2.0;

  bool too_large = x > -threshold;
  bool too_small = x < threshold;

  float result;
  float exp_x = exp(x);

  if (too_large){
    result = x;
  }
  else if (too_small){
    result = exp_x;
  }
  else{
    result = log(exp_x + 1.0);
  }
  return result;
`,v2e=Lt({opSnippet:b2e}),w2e={kernelName:Um,backendName:"webgl",kernelFunc:v2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const x2e=t=>{const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{blockShape:i,paddings:o}=r;P(s.shape.length<=4,()=>"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet");const a=i.reduce((y,b)=>y*b),l=[[0,0]];l.push(...o);for(let y=1+i.length;y<s.shape.length;++y)l.push([0,0]);const c=[],u=m8({inputs:{x:s},backend:n,attrs:{paddings:l,constantValue:0}}),d=C0(u.shape,i,a,!1),h=E0(d.length,i.length,!1),f=_0(u.shape,i,a,!1),p=Oe({inputs:{x:u},backend:n,attrs:{shape:d}}),m=ws({inputs:{x:p},backend:n,attrs:{perm:h}}),g=Oe({inputs:{x:m},backend:n,attrs:{shape:f}});return c.push(u),c.push(p),c.push(m),c.forEach(y=>n.disposeIntermediateTensorInfo(y)),g},S2e={kernelName:Xv,backendName:"webgl",kernelFunc:x2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function C2e(t){const{inputs:e,backend:n}=t,{indices:r,values:s,denseShape:i,defaultValue:o}=e;if(i.shape.length!==1)throw new Error(`Dense shape must be a vector, saw:
         ${i.shape}`);if(r.shape.length!==2)throw new Error(`Indices must be a matrix, saw:
         ${r.shape}`);if(s.shape.length!==1)throw new Error(`Values must be a vector, saw:
         ${s.shape}`);if(o.shape.length!==0)throw new Error(`Default value must be a scalar, saw:
        ${o.shape}`);const a=n.readSync(r.dataId),l=n.readSync(s.dataId),c=n.readSync(i.dataId),u=n.readSync(o.dataId)[0],[d,h,f,p,m]=aEe(a,r.shape,r.dtype,l,s.dtype,c,u);return[n.makeTensorInfo(h,r.dtype,d),n.makeTensorInfo([h[0]],s.dtype,f),n.makeTensorInfo([p.length],"bool",new Uint8Array(p.map(g=>Number(g)))),n.makeTensorInfo([m.length],r.dtype,new Int32Array(m))]}const E2e={kernelName:EE,backendName:"webgl",kernelFunc:C2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function _2e(t){const{inputs:e,backend:n}=t,{inputIndices:r,inputShape:s,newShape:i}=e;if(r.shape.length!==2)throw new Error(`Input indices should be a matrix but received shape ${r.shape}`);if(s.shape.length!==1)throw new Error(`Input shape should be a vector but received shape ${s.shape}`);if(i.shape.length!==1)throw new Error(`Target shape should be a vector but received shape ${i.shape}`);const o=Array.from(n.readSync(s.dataId)),a=n.readSync(r.dataId),l=Array.from(n.readSync(i.dataId)),[c,u,d]=lEe(a,r.shape,r.dtype,o,l);return[n.makeTensorInfo(u,r.dtype,c),n.makeTensorInfo([d.length],i.dtype,new Int32Array(d))]}const T2e={kernelName:_E,backendName:"webgl",kernelFunc:_2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function k2e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
              ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
              ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=Bq(o,r.shape,r.dtype,a,l,!0);return n.makeTensorInfo(u,r.dtype,c)}const I2e={kernelName:TE,backendName:"webgl",kernelFunc:k2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function N2e(t){const{inputs:e,backend:n}=t,{data:r,indices:s,segmentIds:i}=e;if(r.shape.length<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(s.shape.length!==1)throw new Error(`Indices should be a vector but received shape
             ${s.shape}`);if(i.shape.length!==1)throw new Error(`Segment ids should be a vector but received shape
             ${i.shape}`);const o=n.readSync(r.dataId),a=n.readSync(s.dataId),l=n.readSync(i.dataId),[c,u]=Bq(o,r.shape,r.dtype,a,l);return n.makeTensorInfo(u,r.dtype,c)}const $2e={kernelName:kE,backendName:"webgl",kernelFunc:N2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function A2e(t){const{inputs:e,backend:n,attrs:r}=t,{sparseIndices:s,sparseValues:i,defaultValue:o}=e,{outputShape:a}=r,{sliceRank:l,numUpdates:c,sliceSize:u,strides:d,outputSize:h}=ju(i,s,a),f=!1;if(i.dtype==="string"){const y=n.bufferSync(s),b=n.bufferSync(i),v=Ql(n.readSync(o.dataId)[0]),w=sEe(y,b,a,h,u,c,l,d,v,f);return n.makeTensorInfo(a,w.dtype,w.values)}const p=new TP(c,l,s.shape.length,i.shape.length,d,[h,1],f),m=n.runWebGLProgram(p,[i,s,o],i.dtype),g=Oe({inputs:{x:m},backend:n,attrs:{shape:a}});return n.disposeIntermediateTensorInfo(m),g}const R2e={kernelName:IE,backendName:"webgl",kernelFunc:A2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function O2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{numOrSizeSplits:i,axis:o}=r,a=Tt(o,s.shape)[0],l=$D(s,i,a),c=s.shape.length,u=new Array(c).fill(0),d=s.shape.slice();return l.map(h=>{const f=[...d];f[a]=h;const p=gg({inputs:{x:s},backend:n,attrs:{begin:u,size:f}});return u[a]+=h,p})}const D2e={kernelName:Yv,backendName:"webgl",kernelFunc:O2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Fz="return sqrt(x);",P2e=Lt({opSnippet:Fz,packedOpSnippet:Fz,cpuKernelImpl:cEe}),L2e={kernelName:Wm,backendName:"webgl",kernelFunc:P2e};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const F2e="return x * x;",M2e=Lt({opSnippet:F2e}),z2e={kernelName:NE,backendName:"webgl",kernelFunc:M2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const Mz="return (a - b) * (a - b);",B2e=Yr({opSnippet:Mz,packedOpSnippet:Mz}),j2e={kernelName:Hm,backendName:"webgl",kernelFunc:B2e};/**
 * @license
 * Copyright 2023 Google LLC.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function V2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e;if(s.dtype!=="string")throw new Error("Input must be of datatype string");const i=n.readSync(s.dataId),o=tc(i),a=uEe(o,"string",r);return n.makeTensorInfo(s.shape,"string",a)}const U2e={kernelName:Jv,backendName:"webgl",kernelFunc:V2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function W2e({inputs:t,attrs:e,backend:n}){const{x:r}=t,s=Vo+`
    return x > 0.0 ? 1.0 : float(${e.alpha});
  `,i=new Wa(r.shape,s);return n.runWebGLProgram(i,[r],r.dtype)}const H2e={kernelName:Ym,backendName:"webgl",kernelFunc:W2e};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class G2e{constructor(e,n,r){this.variableNames=["x"],this.outputShape=r;const s=r.length,i=on(r.length),o=on(r.length);let a="";if(s===1)a="coords * strides + begin";else{let l=0;a=r.map((c,u)=>(l++,r.length===1?`coords * strides[${u}] + begin[${u}]`:`coords[${l-1}] * strides[${u}] + begin[${u}]`)).join(",")}this.userCode=`
      ${i} begin = ${i}(${e});
      ${i} strides = ${i}(${n});

      void main() {
        ${o} coords = getOutputCoords();
        setOutput(getX(${a}));
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function K2e(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{begin:i,end:o,strides:a,beginMask:l,endMask:c,ellipsisMask:u,newAxisMask:d,shrinkAxisMask:h}=r,{finalShapeSparse:f,finalShape:p,isIdentity:m,sliceDim0:g,isSimpleSlice:y,begin:b,end:v,strides:w}=dD(s.shape,i,o,a,l,c,u,d,h);let C;if(m)C=Oe({inputs:{x:s},backend:n,attrs:{shape:p}});else if(g||y){P(s.shape.length>=1,()=>`Input must have rank at least 1, got: ${s.shape.length}`);const E=lD(b,v,w),I=gg({inputs:{x:s},backend:n,attrs:{begin:b,size:E}});C=Oe({inputs:{x:I},backend:n,attrs:{shape:p}}),n.disposeIntermediateTensorInfo(I)}else if(n.shouldExecuteOnCPU([s])){const I=n.readSync(s.dataId),O=xt(s.shape,s.dtype,I),R=dEe(f,O,w,b);C=n.makeTensorInfo(p,s.dtype,R.values)}else{const I=new G2e(b,w,f);C=n.runWebGLProgram(I,[s],s.dtype)}const _=Oe({inputs:{x:C},backend:n,attrs:{shape:p}});return n.disposeIntermediateTensorInfo(C),_}const q2e={kernelName:$E,backendName:"webgl",kernelFunc:K2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function X2e(t){const{inputs:e,backend:n,attrs:r}=t,{separator:s,nGramWidths:i,leftPad:o,rightPad:a,padWidth:l,preserveShortSequences:c}=r,{data:u,dataSplits:d}=e,h=n.readSync(u.dataId),f=n.readSync(d.dataId),[p,m]=hEe(h,f,s,i,o,a,l,c);return[n.makeTensorInfo([p.length],"string",p),n.makeTensorInfo(d.shape,"int32",m)]}const Y2e={kernelName:AE,backendName:"webgl",kernelFunc:X2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Q2e(t){const{inputs:e,backend:n,attrs:r}=t,{skipEmpty:s}=r,{input:i,delimiter:o}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(i.shape.length!==1)throw new Error(`Input must be a vector, got shape: ${i.shape}`);if(o.shape.length!==0)throw new Error(`Delimiter must be a scalar, got shape: ${o.shape}`);const a=n.readSync(i.dataId),l=n.readSync(o.dataId)[0],[c,u,d]=fEe(a,l,s),h=u.length;return[n.makeTensorInfo([h,2],"int32",c),n.makeTensorInfo([h],"string",u),n.makeTensorInfo([2],"int32",new Int32Array(d))]}const J2e={kernelName:RE,backendName:"webgl",kernelFunc:Q2e};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function Z2e(t){const{inputs:e,backend:n,attrs:r}=t,{numBuckets:s}=r,{input:i}=e;if(i.dtype!=="string")throw new Error("Input must be of datatype string");if(s<=0)throw new Error("Number of buckets must be at least 1");const o=n.readSync(i.dataId),a=pEe(o,s);return n.makeTensorInfo(i.shape,"int32",a)}const eRe={kernelName:OE,backendName:"webgl",kernelFunc:Z2e};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const tRe="return tan(x);",nRe=Lt({opSnippet:tRe}),rRe={kernelName:Km,backendName:"webgl",kernelFunc:nRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const sRe=`
  float e2x = exp(-2.0 * abs(x));
  return sign(x) * (1.0 - e2x) / (1.0 + e2x);
`,iRe=Lt({opSnippet:sRe}),oRe={kernelName:qm,backendName:"webgl",kernelFunc:iRe};/**
 * @license
 * Copyright 2022 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function aRe(t){const{inputs:e,backend:n,attrs:r}=t,{tensor:s,indices:i,updates:o}=e,{sliceRank:a,numUpdates:l,sliceSize:c,strides:u,outputSize:d}=ju(o,i,s.shape),h=[d/c,c];if(d===0)return n.makeTensorInfo(s.shape,i.dtype);const f=Oe({inputs:{x:i},backend:n,attrs:{shape:[l,a]}}),p=Oe({inputs:{x:o},backend:n,attrs:{shape:[l,c]}}),m=Oe({inputs:{x:s},backend:n,attrs:{shape:h}}),g=new TP(l,a,f.shape.length,p.shape.length,u,h,!1,!0),y=n.runWebGLProgram(g,[p,f,m],m.dtype),b=Oe({inputs:{x:y},backend:n,attrs:{shape:s.shape}});return n.disposeIntermediateTensorInfo(f),n.disposeIntermediateTensorInfo(p),n.disposeIntermediateTensorInfo(m),n.disposeIntermediateTensorInfo(y),b}const lRe={kernelName:SE,backendName:"webgl",kernelFunc:aRe};/**
 * @license
 * Copyright 2017 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class cRe{constructor(e,n){this.variableNames=["A"];const r=new Array(e.length);for(let o=0;o<r.length;o++)r[o]=e[o]*n[o];this.outputShape=r,this.rank=r.length;const s=on(this.rank),i=uRe(e);this.userCode=`
      void main() {
        ${s} resRC = getOutputCoords();
        setOutput(getA(${i}));
      }
    `}}function uRe(t){const e=t.length;if(e>5)throw Error(`Tile for rank ${e} is not yet supported`);if(e===1)return`imod(resRC, ${t[0]})`;const n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[];for(let s=0;s<t.length;s++)r.push(`imod(${n[s]}, ${t[s]})`);return r.join()}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function y8(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{reps:i}=r;if(s.dtype==="string"||s.shape.length>5){const l=n.readSync(s.dataId),c=s.dtype==="string"?l.map(h=>Ql(h)):l,u=xt(s.shape,s.dtype,c),d=gEe(u,i);return n.makeTensorInfo(d.shape,d.dtype,d.values)}const o=new cRe(s.shape,i);return n.runWebGLProgram(o,[s],s.dtype)}const dRe={kernelName:Xm,backendName:"webgl",kernelFunc:y8};class hRe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"negativeInf",type:"float"},{name:"dir",type:"int"},{name:"inc",type:"int"}],this.outputShape=e,this.userCode=`
       void main() {
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // We compare elements pair-wise within a group of size 2 * inc.
         // The comparing rule for each group alternates between ascending
         // and descending. Within each group, we compare each pair at
         // positions i and i+inc. To decide whether an element at position i
         // is x0 or x1, we mod it by 2 * inc, if the result is smaller than
         // inc, it is in the first half of the group, we denote it as x0,
         // otherwise we denote it as x1.
         // For example, as shown in the Bitonic top K paper referenced above,
         // Figure5(a) shows that element[1] is in the
         // second half of the group when group size is 2, but it is in the
         // first half of the group when group size is 4.

         bool isFirstInPair = imod(elemIdx, 2 * inc) < inc;
         int i = isFirstInPair ? elemIdx : elemIdx - inc;

         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + inc : int(getIndices(batch, i + inc));
         float x0 = i0 < n ? getX(batch, i0) : negativeInf;
         float x1 = i1 < n ? getX(batch, i1) : negativeInf;

         // Denotes which direction indices are in (ascending or descending).
         bool reverse = imod(elemIdx, 2 * dir) >= dir;
         bool isGreater = x0 > x1 || (x0 == x1 && i1 > i0);
         if (reverse == isGreater) { // Elements in opposite order of direction
           int iTemp = i0;
           i0 = i1;
           i1 = iTemp;
         }
         if (isFirstInPair) {
            setOutput(float(i0));
         } else {
            setOutput(float(i1));
         }
       }
     `}}class fRe{constructor(e){this.variableNames=["x","indices"],this.customUniforms=[{name:"n",type:"int"},{name:"firstPass",type:"int"},{name:"k",type:"int"}],this.outputShape=e,this.userCode=`
    void main() {
         // Takes max of indices (0, k), (1, k + 1), (2, k + 2) ...
         ivec2 coords = getOutputCoords();
         int batch = coords[0];
         int elemIdx = coords[1];

         // The output size is half of the previous size.
         // If the previous sequence is | | | | _ _ _ _  | | | |  _ _ _ _ (k=4),
         // we only need to output the indices at positions |, the indices at
         // positions _ can be thrown away, see Figure5(b) After Phase 2
         // (Merge phase) in the Bitonic Top K paper referenced above.
         // For example, the paper shows we only need to output the orange bars.
         // The output sequence should look like this | | | | | | | |.
         // Because the sequence is halved, to map the output index back
         // to the previous sequence to find the corresponding value,
         // we need to double the index. When we double the index,
         // we basically interpolate a position, so 2i looks like
         // | _ | _ | _ | _ | _ | _ | _. We move the | to the first k position
         // of each 2k positions by - elemIdx % k. E.g. for output at
         // index 4,5,6,7, we want to get the corresponding element at
         // original index 8,9,10,11, for output at index 8,9,10,11,
         // we want to get the corresponding element at original index
         // 16,17,18,19, so on and so forth.

         int i = elemIdx < k ? elemIdx : (elemIdx * 2 - imod(elemIdx, k));
         int i0 = firstPass == 1 ? i : int(getIndices(batch, i));
         int i1 = firstPass == 1 ? i + k : int(getIndices(batch, i + k));

         float x0 = getX(batch, i0);
         float x1 = i1 < n ? getX(batch, i1) : x0;

         setOutput(x0 >= x1 ? float(i0) : float(i1));
       }
     `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yd(t,e){e!==null&&t.disposeIntermediateTensorInfo(e)}function zz(t){let e=1;for(;e<t;)e*=2;return e}function pRe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s}=e,{k:i,sorted:o}=r,a=ce().getNumber("TOPK_LAST_DIM_CPU_HANDOFF_SIZE_THRESHOLD"),l=ce().getNumber("TOPK_K_CPU_HANDOFF_THRESHOLD"),c=s.shape,u=c[c.length-1];if(n.shouldExecuteOnCPU([s])||u<a||i>l){const R=n.readSync(s.dataId),[z,B]=yEe(R,c,s.dtype,i,o);return[n.makeTensorInfo(z.shape,z.dtype,z.values),n.makeTensorInfo(B.shape,B.dtype,B.values)]}if(i===0)return c[c.length-1]=0,[n.makeTensorInfo(c,s.dtype,[]),n.makeTensorInfo(c,"int32",[])];if(u===1)return[s,V0({attrs:{shape:c,dtype:"int32",value:0},backend:n})];const d=n.texData.get(s.dataId),h=d!==null&&d.isPacked,f=h?n.unpackTensor(s):s,m=fe(c)/u,g=Oe({inputs:{x:f},attrs:{shape:[m,u]},backend:n});h&&yd(n,f);const y=zz(i),b=zz(u);let v=null;const w=()=>v===null?[g,g]:[g,v],C=(R,z,B)=>{const j=w(),G=new hRe(B),Q=[[u],[v===null?1:0],[Number.NEGATIVE_INFINITY],[R],[z]],se=v;v=n.runWebGLProgram(G,j,"int32",Q),yd(n,se)};for(let R=1;R<y;R*=2){const z=R*2;for(let B=R;B>=1;B/=2)C(z,B,[m,b])}for(let R=b;R>y;R/=2){const z=w(),B=new fRe([m,R/2]),G=[[u],[v===null?1:0],[y]],U=v;v=n.runWebGLProgram(B,z,"int32",G),yd(n,U);const Q=y/2,se=Q*2;for(let V=Q;V>=1;V/=2)C(se,V,v.shape)}let _=v;v=gg({inputs:{x:v},backend:n,attrs:{begin:0,size:[m,i]}}),yd(n,_);let E=c8({inputs:{x:g,indices:v},backend:n,attrs:{axis:1,batchDims:1}});yd(n,g);const I=c.slice(0,-1);I.push(i),_=v,v=Oe({inputs:{x:v},attrs:{shape:I},backend:n}),yd(n,_);const O=E;return E=Oe({inputs:{x:E},attrs:{shape:I},backend:n}),yd(n,O),[E,v]}const mRe={kernelName:DE,backendName:"webgl",kernelFunc:pRe};/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class gRe{constructor(e,n,r,s,i,o){this.variableNames=["Image","Transforms"],this.outputShape=o;const a=r==="nearest"?1:2;let l;switch(s){case"constant":l=1;break;case"reflect":l=2;break;case"wrap":l=3;break;case"nearest":l=4;break;default:l=1;break}this.userCode=`
            float mapCoord(float outCoord, float len) {
              float inCoord = outCoord;
              if(${l} == 2) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    if (inCoord < sz2) {
                      inCoord = sz2 * float(int(float(-inCoord / sz2))) +
                      inCoord;
                    }
                    inCoord = inCoord < -len ? inCoord + sz2 : -inCoord - 1.0;
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz2 = 2.0 * len;
                    inCoord -= sz2 * float(int(float(inCoord / sz2)));
                    if (inCoord >= len) {
                      inCoord = sz2 - inCoord - 1.0;
                    }
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 3) {
                if (inCoord < 0.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord += len * (float(int(float(-inCoord / sz))) + 1.0);
                  }
                } else if (inCoord > len - 1.0) {
                  if (len <= 1.0) {
                    inCoord = 0.0;
                  } else {
                    float sz = len - 1.0;
                    inCoord -= len * float(int(float(inCoord / sz)));
                  }
                }
                return clamp(inCoord, 0.0, len - 1.0);
              } else if (${l} == 4) {
                return clamp(outCoord, 0.0, len - 1.0);
              } else {
                return outCoord;
              }
            }

            float readWithFillValue(int batch, int coordY, int coordX,
              int channel) {
              float outputValue;
              if (0 <= coordY && coordY < ${e} && 0 <= coordX && coordX < ${n}) {
                  outputValue = getImage(batch, coordY, coordX, channel);
              } else {
                outputValue = float(${i});
              }
              return outputValue;
            }

            void main() {
              ivec4 coords = getOutputCoords();
              float outputValue;
              int batch = coords[0];
              int x = coords[2];
              int y = coords[1];
              int channel = coords[3];
              float xf = float(x);
              float yf = float(y);
              float a1 = getTransforms(batch, 0);
              float a2 = getTransforms(batch, 1);
              float a3 = getTransforms(batch, 2);
              float b1 = getTransforms(batch, 3);
              float b2 = getTransforms(batch, 4);
              float b3 = getTransforms(batch, 5);
              float c1 = getTransforms(batch, 6);
              float c2 = getTransforms(batch, 7);
              float projection = c1 * xf + c2 * yf + 1.0;
              if (projection == 0.0) {
                outputValue = float(${i});
              } else {
                float inX = (a1 * xf + a2 * yf + a3) / projection;
                float inY = (b1 * xf + b2 * yf + b3) / projection;
                float mapX = mapCoord(inX, float(${n}));
                float mapY = mapCoord(inY, float(${e}));

                if (${a} == 1) {
                  int coordY = int(round(mapY));
                  int coordX = int(round(mapX));
                  outputValue = readWithFillValue(batch, coordY, coordX,
                    channel);
                } else {
                  float yFloor = floor(mapY);
                  float xFloor = floor(mapX);
                  float yCeil = yFloor + 1.0;
                  float xCeil = xFloor + 1.0;
                  float valueYFloor = (xCeil - mapX) *
                  readWithFillValue(batch, int(yFloor), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yFloor), int(xCeil), channel);
                  float valueYCeil = (xCeil - mapX) *
                  readWithFillValue(batch, int(yCeil), int(xFloor), channel) +
                  (mapX - xFloor) *
                  readWithFillValue(batch, int(yCeil), int(xCeil), channel);
                  outputValue = (yCeil - mapY) * valueYFloor +
                  (mapY - yFloor) * valueYCeil;
                }
              }
              setOutput(outputValue);
            }
        `}}/**
 * @license
 * Copyright 2021 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function yRe(t){const{inputs:e,backend:n,attrs:r}=t,{image:s,transforms:i}=e,{interpolation:o,fillMode:a,fillValue:l,outputShape:c}=r,[u,d,h,f]=s.shape,[p,m]=c??[d,h],g=[u,p,m,f],y=new gRe(d,h,o,a,l,g);return n.runWebGLProgram(y,[s,i],"float32")}const bRe={kernelName:PE,backendName:"webgl",kernelFunc:yRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function vRe(t){const{inputs:e,attrs:n,backend:r}=t,{axis:s}=n,{x:i}=e;z0(i,"unique"),console.warn("WARNING: ","UI might be locked temporarily as data is being downloaded");const o=r.readSync(i.dataId),{outputValues:a,outputShape:l,indices:c}=bEe(o,s,i.shape,i.dtype);return[r.makeTensorInfo(l,i.dtype,a),r.makeTensorInfo([c.length],"int32",c)]}const wRe={kernelName:LE,backendName:"webgl",kernelFunc:vRe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function xRe(t){const{inputs:e,backend:n,attrs:r}=t,{value:s}=e;let{axis:i}=r;i<0&&(i+=s.shape.length);const o=s,a=o.shape.length,l=s.shape[i],c=new Array(a-1);let u=0;for(let m=0;m<a;m++)m!==i&&(c[u++]=o.shape[m]);const d=[],h=new Array(a).fill(0),f=o.shape.slice();f[i]=1;const p=new Array(l);for(let m=0;m<p.length;m++){h[i]=m;const g=gg({inputs:{x:o},backend:n,attrs:{begin:h,size:f}}),y=Oe({inputs:{x:g},backend:n,attrs:{shape:c}});p[m]=y,d.push(g)}return d.forEach(m=>n.disposeIntermediateTensorInfo(m)),p}const SRe={kernelName:Zv,backendName:"webgl",kernelFunc:xRe};/**
 * @license
 * Copyright 2018 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */class CRe{constructor(e,n){this.variableNames=["x","segmentIds"];const r=e.windowSize,s=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/r);this.outputShape=[s,a];const l="0.0",c="sumValue",u=Math.floor(r/4)*4,d=r%4,h=`
        sumValue += dot(values, segFilter);
    `;let f="";i%r>0&&(f=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return initializationValue;
        }
      `);let p="";i%r>0&&(p=`
        if (inIdx < 0 || inIdx >= ${i}) {
          return -1.0;
        }
      `),this.userCode=`
      const float initializationValue = ${l};

      float getValue(int batch, int inIdx) {
        ${f}
        return getX(batch, inIdx);
      }

      float getSegmentIdAtIndex(int inIdx) {
        ${p}
        return getSegmentIds(inIdx);
      }

      void main() {
        ivec2 coords = getOutputCoords();
        int batch = coords[0];
        int outIdx = coords[1];
        int inOffset = int(floor(float(outIdx) / float(
          ${o})) * float(${r}));
        int currentSeg = int(mod(float(outIdx), float(${o})));

        float sumValue = 0.0;

        for (int i = 0; i < ${u}; i += 4) {
          int inIdx = inOffset + i;
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            getValue(batch, inIdx + 3)
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0
          );

          ${h}
        }

        int inIdx = inOffset + ${u};
        if (${d===1}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            initializationValue,
            initializationValue,
            initializationValue
          );

          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            0,
            0,
            0
          );

          ${h}
        } else if (${d===2}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            initializationValue,
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
              0,
              0
          );

          ${h}
        } else if (${d===3}) {
          vec4 values = vec4(
            getValue(batch, inIdx),
            getValue(batch, inIdx + 1),
            getValue(batch, inIdx + 2),
            initializationValue
          );

          vec4 segFilter = vec4(
            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,
            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,
            0
          );

          ${h}
        }
        setOutput(${c});
      }
    `}}/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */function ERe(t){const{inputs:e,backend:n,attrs:r}=t,{x:s,segmentIds:i}=e,{numSegments:o}=r,a=s.shape.length,l=[];let c=0;const u=Gn([c],a);let d=s;u!=null&&(d=ws({inputs:{x:s},backend:n,attrs:{perm:u}}),l.push(d),c=ir(1,a)[0]);const h=gG(d.shape,c,o),f=fe([d.shape[c]]),p=Oe({inputs:{x:d},backend:n,attrs:{shape:[-1,f]}});l.push(p);const m=zE(s.dtype),g=(w,C,_,E,I)=>{const O=w.shape[0],R=w.shape[1],z=mG(R,I),B={windowSize:z,inSize:R,batchSize:O,numSegments:I},j=new CRe(B,C),G=n.compileAndRun(j,[w,_],E);if(l.push(G),G.shape[1]===I)return G;const U=g8({backend:n,attrs:{start:0,stop:I,step:1,dtype:"float32"}}),Q=y8({inputs:{x:U},backend:n,attrs:{reps:[R/z]}});return l.push(U),l.push(Q),g(G,C,Q,E,I)},y=g(p,"unsortedSegmentSum",i,m,o),b=Oe({inputs:{x:y},backend:n,attrs:{shape:h}});let v=b;if(u!=null){l.push(b);const w=Mu(u);v=ws({inputs:{x:v},backend:n,attrs:{perm:w}})}return l.forEach(w=>n.disposeIntermediateTensorInfo(w)),v}const _Re={kernelName:e0,backendName:"webgl",kernelFunc:ERe};/**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const TRe=[c_e,d_e,p_e,y_e,v_e,S_e,E_e,T_e,$_e,R_e,P_e,M_e,j_e,H_e,q_e,Y_e,J_e,nTe,sTe,oTe,uTe,yTe,vTe,CTe,_Te,ATe,OTe,FTe,GEe,BTe,HTe,XTe,tke,ske,oke,lke,uke,pke,yke,wke,Ske,Eke,Tke,Nke,Ake,Pke,Fke,Bke,Uke,Hke,Xke,Zke,rIe,oIe,cIe,uIe,hIe,pIe,gIe,bIe,wIe,EIe,kIe,$Ie,RIe,PIe,MIe,VIe,GIe,HEe,qIe,UTe,QIe,eNe,rNe,qEe,aNe,dNe,fNe,yNe,wNe,ENe,kNe,ANe,PNe,MNe,BNe,WNe,GNe,qNe,JNe,e$e,n$e,s$e,o$e,u$e,p$e,b$e,T$e,QEe,$$e,O$e,L$e,z$e,kTe,V$e,W$e,G$e,X$e,Z$e,YEe,tAe,rAe,iAe,aAe,lAe,ITe,S$e,dAe,mAe,vAe,ZEe,CAe,TAe,$Ae,OAe,FAe,zAe,VAe,HAe,qAe,QAe,e2e,r2e,a2e,u2e,p2e,y2e,mTe,E$e,w2e,S2e,E2e,T2e,I2e,$2e,R2e,D2e,L2e,z2e,j2e,U2e,H2e,q2e,Y2e,J2e,eRe,C$e,o_e,rRe,oRe,lRe,dRe,mRe,bRe,a_e,wRe,SRe,_Re,U$e];for(const t of TRe)ME(t);let kP=()=>{const[t,e]=N.useState([""]);return N.useEffect(()=>{bn.get("/api/assessments").then(n=>(console.log(n.data),n.data)).then(n=>(console.log(n),e(n)))},[]),t};/**
 * React Router DOM v6.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function di(){return di=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},di.apply(this,arguments)}function IP(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}const C1="get",oN="application/x-www-form-urlencoded";function Y_(t){return t!=null&&typeof t.tagName=="string"}function kRe(t){return Y_(t)&&t.tagName.toLowerCase()==="button"}function IRe(t){return Y_(t)&&t.tagName.toLowerCase()==="form"}function NRe(t){return Y_(t)&&t.tagName.toLowerCase()==="input"}function $Re(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ARe(t,e){return t.button===0&&(!e||e==="_self")&&!$Re(t)}function US(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function RRe(t,e){let n=US(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}let qx=null;function ORe(){if(qx===null)try{new FormData(document.createElement("form"),0),qx=!1}catch{qx=!0}return qx}const DRe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function aN(t){return t!=null&&!DRe.has(t)?null:t}function PRe(t,e){let n,r,s,i,o;if(IRe(t)){let a=t.getAttribute("action");r=a?mi(a,e):null,n=t.getAttribute("method")||C1,s=aN(t.getAttribute("enctype"))||oN,i=new FormData(t)}else if(kRe(t)||NRe(t)&&(t.type==="submit"||t.type==="image")){let a=t.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=t.getAttribute("formaction")||a.getAttribute("action");if(r=l?mi(l,e):null,n=t.getAttribute("formmethod")||a.getAttribute("method")||C1,s=aN(t.getAttribute("formenctype"))||aN(a.getAttribute("enctype"))||oN,i=new FormData(a,t),!ORe()){let{name:c,type:u,value:d}=t;if(u==="image"){let h=c?c+".":"";i.append(h+"x","0"),i.append(h+"y","0")}else c&&i.append(c,d)}}else{if(Y_(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=C1,r=null,s=oN,o=t}return i&&s==="text/plain"&&(o=i,i=void 0),{action:r,method:n.toLowerCase(),encType:s,formData:i,body:o}}const LRe=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],FRe=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"],MRe=["fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","unstable_viewTransition"],zRe="6";try{window.__reactRouterVersion=zRe}catch{}function b8(t,e){return LD({basename:e==null?void 0:e.basename,future:di({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:CG({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||v8(),routes:t,mapRouteProperties:BD,unstable_dataStrategy:e==null?void 0:e.unstable_dataStrategy,window:e==null?void 0:e.window}).initialize()}function BRe(t,e){return LD({basename:e==null?void 0:e.basename,future:di({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:EG({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||v8(),routes:t,mapRouteProperties:BD,unstable_dataStrategy:e==null?void 0:e.unstable_dataStrategy,window:e==null?void 0:e.window}).initialize()}function v8(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=di({},e,{errors:jRe(e.errors)})),e}function jRe(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,s]of e)if(s&&s.__type==="RouteErrorResponse")n[r]=new $_(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let i=window[s.__subType];if(typeof i=="function")try{let o=new i(s.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let i=new Error(s.message);i.stack="",n[r]=i}}else n[r]=s;return n}const NP=N.createContext({isTransitioning:!1}),$P=N.createContext(new Map),VRe="startTransition",$u=hu[VRe],URe="flushSync",Bz=LJ[URe],WRe="useId",jz=hu[WRe];function HRe(t){$u?$u(t):t()}function ly(t){Bz?Bz(t):t()}let GRe=class{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}};function w8(t){let{fallbackElement:e,router:n,future:r}=t,[s,i]=N.useState(n.state),[o,a]=N.useState(),[l,c]=N.useState({isTransitioning:!1}),[u,d]=N.useState(),[h,f]=N.useState(),[p,m]=N.useState(),g=N.useRef(new Map),{v7_startTransition:y}=r||{},b=N.useCallback(E=>{y?HRe(E):E()},[y]),v=N.useCallback((E,I)=>{let{deletedFetchers:O,unstable_flushSync:R,unstable_viewTransitionOpts:z}=I;O.forEach(j=>g.current.delete(j)),E.fetchers.forEach((j,G)=>{j.data!==void 0&&g.current.set(G,j.data)});let B=n.window==null||typeof n.window.document.startViewTransition!="function";if(!z||B){R?ly(()=>i(E)):b(()=>i(E));return}if(R){ly(()=>{h&&(u&&u.resolve(),h.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:z.currentLocation,nextLocation:z.nextLocation})});let j=n.window.document.startViewTransition(()=>{ly(()=>i(E))});j.finished.finally(()=>{ly(()=>{d(void 0),f(void 0),a(void 0),c({isTransitioning:!1})})}),ly(()=>f(j));return}h?(u&&u.resolve(),h.skipTransition(),m({state:E,currentLocation:z.currentLocation,nextLocation:z.nextLocation})):(a(E),c({isTransitioning:!0,flushSync:!1,currentLocation:z.currentLocation,nextLocation:z.nextLocation}))},[n.window,h,u,g,b]);N.useLayoutEffect(()=>n.subscribe(v),[n,v]),N.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new GRe)},[l]),N.useEffect(()=>{if(u&&o&&n.window){let E=o,I=u.promise,O=n.window.document.startViewTransition(async()=>{b(()=>i(E)),await I});O.finished.finally(()=>{d(void 0),f(void 0),a(void 0),c({isTransitioning:!1})}),f(O)}},[b,o,u,n.window]),N.useEffect(()=>{u&&o&&s.location.key===o.location.key&&u.resolve()},[u,h,s.location,o]),N.useEffect(()=>{!l.isTransitioning&&p&&(a(p.state),c({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),m(void 0))},[l.isTransitioning,p]),N.useEffect(()=>{},[]);let w=N.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:E=>n.navigate(E),push:(E,I,O)=>n.navigate(E,{state:I,preventScrollReset:O==null?void 0:O.preventScrollReset}),replace:(E,I,O)=>n.navigate(E,{replace:!0,state:I,preventScrollReset:O==null?void 0:O.preventScrollReset})}),[n]),C=n.basename||"/",_=N.useMemo(()=>({router:n,navigator:w,static:!1,basename:C}),[n,w,C]);return N.createElement(N.Fragment,null,N.createElement(sg.Provider,{value:_},N.createElement(T0.Provider,{value:s},N.createElement($P.Provider,{value:g.current},N.createElement(NP.Provider,{value:l},N.createElement(ag,{basename:C,location:s.location,navigationType:s.historyAction,navigator:w,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},s.initialized||n.future.v7_partialHydration?N.createElement(KRe,{routes:n.routes,future:n.future,state:s}):e))))),null)}function KRe(t){let{routes:e,future:n,state:r}=t;return HG(e,void 0,r,n)}function qRe(t){let{basename:e,children:n,future:r,window:s}=t,i=N.useRef();i.current==null&&(i.current=CG({window:s,v5Compat:!0}));let o=i.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=N.useCallback(d=>{c&&$u?$u(()=>l(d)):l(d)},[l,c]);return N.useLayoutEffect(()=>o.listen(u),[o,u]),N.createElement(ag,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function XRe(t){let{basename:e,children:n,future:r,window:s}=t,i=N.useRef();i.current==null&&(i.current=EG({window:s,v5Compat:!0}));let o=i.current,[a,l]=N.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},u=N.useCallback(d=>{c&&$u?$u(()=>l(d)):l(d)},[l,c]);return N.useLayoutEffect(()=>o.listen(u),[o,u]),N.createElement(ag,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}function YRe(t){let{basename:e,children:n,future:r,history:s}=t,[i,o]=N.useState({action:s.action,location:s.location}),{v7_startTransition:a}=r||{},l=N.useCallback(c=>{a&&$u?$u(()=>o(c)):o(c)},[o,a]);return N.useLayoutEffect(()=>s.listen(l),[s,l]),N.createElement(ag,{basename:e,children:n,location:i.location,navigationType:i.action,navigator:s,future:r})}const QRe=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JRe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Q_=N.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=e,h=IP(e,LRe),{basename:f}=N.useContext(Zi),p,m=!1;if(typeof c=="string"&&JRe.test(c)&&(p=c,QRe))try{let v=new URL(window.location.href),w=c.startsWith("//")?new URL(v.protocol+c):new URL(c),C=mi(w.pathname,f);w.origin===v.origin&&C!=null?c=C+w.search+w.hash:m=!0}catch{}let g=BG(c,{relative:s}),y=S8(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:s,unstable_viewTransition:d});function b(v){r&&r(v),v.defaultPrevented||y(v)}return N.createElement("a",di({},h,{href:p||g,onClick:m||i?r:b,ref:n,target:l}))}),E1=N.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:s=!1,className:i="",end:o=!1,style:a,to:l,unstable_viewTransition:c,children:u}=e,d=IP(e,FRe),h=og(l,{relative:d.relative}),f=Sa(),p=N.useContext(T0),{navigator:m,basename:g}=N.useContext(Zi),y=p!=null&&T8(h)&&c===!0,b=m.encodeLocation?m.encodeLocation(h).pathname:h.pathname,v=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;s||(v=v.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&g&&(w=mi(w,g)||w);const C=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let _=v===b||!o&&v.startsWith(b)&&v.charAt(C)==="/",E=w!=null&&(w===b||!o&&w.startsWith(b)&&w.charAt(b.length)==="/"),I={isActive:_,isPending:E,isTransitioning:y},O=_?r:void 0,R;typeof i=="function"?R=i(I):R=[i,_?"active":null,E?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let z=typeof a=="function"?a(I):a;return N.createElement(Q_,di({},d,{"aria-current":O,className:R,ref:n,style:z,to:l,unstable_viewTransition:c}),typeof u=="function"?u(I):u)}),x8=N.forwardRef((t,e)=>{let{fetcherKey:n,navigate:r,reloadDocument:s,replace:i,state:o,method:a=C1,action:l,onSubmit:c,relative:u,preventScrollReset:d,unstable_viewTransition:h}=t,f=IP(t,MRe),p=RP(),m=E8(l,{relative:u}),g=a.toLowerCase()==="get"?"get":"post",y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let v=b.nativeEvent.submitter,w=(v==null?void 0:v.getAttribute("formmethod"))||a;p(v||b.currentTarget,{fetcherKey:n,method:w,navigate:r,replace:i,state:o,relative:u,preventScrollReset:d,unstable_viewTransition:h})};return N.createElement("form",di({ref:e,method:g,action:m,onSubmit:s?c:y},f))});function ZRe(t){let{getKey:e,storageKey:n}=t;return _8({getKey:e,storageKey:n}),null}var Up;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Up||(Up={}));var Ob;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ob||(Ob={}));function J_(t){let e=N.useContext(sg);return e||st(!1),e}function AP(t){let e=N.useContext(T0);return e||st(!1),e}function S8(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=Ks(),c=Sa(),u=og(t,{relative:o});return N.useCallback(d=>{if(ARe(d,n)){d.preventDefault();let h=r!==void 0?r:pa(c)===pa(u);l(t,{replace:h,state:s,preventScrollReset:i,relative:o,unstable_viewTransition:a})}},[c,l,u,r,s,n,t,i,o,a])}function eOe(t){let e=N.useRef(US(t)),n=N.useRef(!1),r=Sa(),s=N.useMemo(()=>RRe(r.search,n.current?null:e.current),[r.search]),i=Ks(),o=N.useCallback((a,l)=>{const c=US(typeof a=="function"?a(s):a);n.current=!0,i("?"+c,l)},[i,s]);return[s,o]}function tOe(){if(typeof document>"u")throw new Error("You are calling submit during the server render. Try calling submit within a `useEffect` or callback instead.")}let nOe=0,C8=()=>"__"+String(++nOe)+"__";function RP(){let{router:t}=J_(Up.UseSubmit),{basename:e}=N.useContext(Zi),n=KG();return N.useCallback(function(r,s){s===void 0&&(s={}),tOe();let{action:i,method:o,encType:a,formData:l,body:c}=PRe(r,e);if(s.navigate===!1){let u=s.fetcherKey||C8();t.fetch(u,n,s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,unstable_flushSync:s.unstable_flushSync})}else t.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:l,body:c,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:n,unstable_flushSync:s.unstable_flushSync,unstable_viewTransition:s.unstable_viewTransition})},[t,e,n])}function E8(t,e){let{relative:n}=e===void 0?{}:e,{basename:r}=N.useContext(Zi),s=N.useContext(eo);s||st(!1);let[i]=s.matches.slice(-1),o=di({},og(t||".",{relative:n})),a=Sa();if(t==null){o.search=a.search;let l=new URLSearchParams(o.search);l.has("index")&&l.get("index")===""&&(l.delete("index"),o.search=l.toString()?"?"+l.toString():"")}return(!t||t===".")&&i.route.index&&(o.search=o.search?o.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(o.pathname=o.pathname==="/"?r:Qa([r,o.pathname])),pa(o)}function rOe(t){var e;let{key:n}=t===void 0?{}:t,{router:r}=J_(Up.UseFetcher),s=AP(Ob.UseFetcher),i=N.useContext($P),o=N.useContext(eo),a=(e=o.matches[o.matches.length-1])==null?void 0:e.route.id;i||st(!1),o||st(!1),a==null&&st(!1);let l=jz?jz():"",[c,u]=N.useState(n||l);n&&n!==c?u(n):c||u(C8()),N.useEffect(()=>(r.getFetcher(c),()=>{r.deleteFetcher(c)}),[r,c]);let d=N.useCallback((b,v)=>{a||st(!1),r.fetch(c,a,b,v)},[c,a,r]),h=RP(),f=N.useCallback((b,v)=>{h(b,di({},v,{navigate:!1,fetcherKey:c}))},[c,h]),p=N.useMemo(()=>N.forwardRef((v,w)=>N.createElement(x8,di({},v,{navigate:!1,fetcherKey:c,ref:w}))),[c]),m=s.fetchers.get(c)||OG,g=i.get(c);return N.useMemo(()=>di({Form:p,submit:f,load:d},m,{data:g}),[p,f,d,m,g])}function sOe(){let t=AP(Ob.UseFetchers);return Array.from(t.fetchers.entries()).map(e=>{let[n,r]=e;return di({},r,{key:n})})}const Vz="react-router-scroll-positions";let Xx={};function _8(t){let{getKey:e,storageKey:n}=t===void 0?{}:t,{router:r}=J_(Up.UseScrollRestoration),{restoreScrollPosition:s,preventScrollReset:i}=AP(Ob.UseScrollRestoration),{basename:o}=N.useContext(Zi),a=Sa(),l=XG(),c=qG();N.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),oOe(N.useCallback(()=>{if(c.state==="idle"){let u=(e?e(a,l):null)||a.key;Xx[u]=window.scrollY}try{sessionStorage.setItem(n||Vz,JSON.stringify(Xx))}catch{}window.history.scrollRestoration="auto"},[n,e,c.state,a,l])),typeof document<"u"&&(N.useLayoutEffect(()=>{try{let u=sessionStorage.getItem(n||Vz);u&&(Xx=JSON.parse(u))}catch{}},[n]),N.useLayoutEffect(()=>{let u=e&&o!=="/"?(h,f)=>e(di({},h,{pathname:mi(h.pathname,o)||h.pathname}),f):e,d=r==null?void 0:r.enableScrollRestoration(Xx,()=>window.scrollY,u);return()=>d&&d()},[r,o,e]),N.useLayoutEffect(()=>{if(s!==!1){if(typeof s=="number"){window.scrollTo(0,s);return}if(a.hash){let u=document.getElementById(decodeURIComponent(a.hash.slice(1)));if(u){u.scrollIntoView();return}}i!==!0&&window.scrollTo(0,0)}},[a,s,i]))}function iOe(t,e){let{capture:n}=e||{};N.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("beforeunload",t,r),()=>{window.removeEventListener("beforeunload",t,r)}},[t,n])}function oOe(t,e){let{capture:n}={};N.useEffect(()=>{let r=n!=null?{capture:n}:void 0;return window.addEventListener("pagehide",t,r),()=>{window.removeEventListener("pagehide",t,r)}},[t,n])}function aOe(t){let{when:e,message:n}=t,r=JG(e);N.useEffect(()=>{r.state==="blocked"&&(window.confirm(n)?setTimeout(r.proceed,0):r.reset())},[r,n]),N.useEffect(()=>{r.state==="blocked"&&!e&&r.reset()},[r,e])}function T8(t,e){e===void 0&&(e={});let n=N.useContext(NP);n==null&&st(!1);let{basename:r}=J_(Up.useViewTransitionState),s=og(t,{relative:e.relative});if(!n.isTransitioning)return!1;let i=mi(n.currentLocation.pathname,r)||n.currentLocation.pathname,o=mi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Cb(s.pathname,o)!=null||Cb(s.pathname,i)!=null}const lOe=Object.freeze(Object.defineProperty({__proto__:null,AbortedDeferredError:CS,Await:rfe,BrowserRouter:qRe,Form:x8,HashRouter:XRe,Link:Q_,MemoryRouter:efe,NavLink:E1,Navigate:tfe,get NavigationType(){return _n},Outlet:zD,Route:ZG,Router:ag,RouterProvider:w8,Routes:nfe,ScrollRestoration:ZRe,UNSAFE_DataRouterContext:sg,UNSAFE_DataRouterStateContext:T0,UNSAFE_ErrorResponseImpl:$_,UNSAFE_FetchersContext:$P,UNSAFE_LocationContext:ig,UNSAFE_NavigationContext:Zi,UNSAFE_RouteContext:eo,UNSAFE_ViewTransitionContext:NP,UNSAFE_useRouteId:KG,UNSAFE_useScrollRestoration:_8,createBrowserRouter:b8,createHashRouter:BRe,createMemoryRouter:lfe,createPath:pa,createRoutesFromChildren:Eb,createRoutesFromElements:Eb,createSearchParams:US,defer:dhe,generatePath:ehe,isRouteErrorResponse:A_,json:ahe,matchPath:Cb,matchRoutes:Md,parsePath:Bo,redirect:AG,redirectDocument:hhe,renderMatches:afe,resolvePath:NG,unstable_HistoryRouter:YRe,unstable_usePrompt:aOe,unstable_useViewTransitionState:T8,useActionData:qhe,useAsyncError:Xhe,useAsyncValue:QG,useBeforeUnload:iOe,useBlocker:JG,useFetcher:rOe,useFetchers:sOe,useFormAction:E8,useHref:BG,useInRouterContext:Vu,useLinkClickHandler:S8,useLoaderData:Ghe,useLocation:Sa,useMatch:Fhe,useMatches:XG,useNavigate:Ks,useNavigation:qG,useNavigationType:Lhe,useOutlet:UG,useOutletContext:zhe,useParams:k0,useResolvedPath:og,useRevalidator:Hhe,useRouteError:YG,useRouteLoaderData:Khe,useRoutes:WG,useSearchParams:eOe,useSubmit:RP},Symbol.toStringTag,{value:"Module"})),cOe=({minutes:t,seconds:e})=>{const[n,r]=N.useState({minutes:parseInt(t),seconds:parseInt(e)}),s=Ks();return N.useEffect(()=>{const i=setInterval(()=>{n.seconds>0?r(o=>({...o,seconds:o.seconds-1})):n.minutes>0?r(o=>({minutes:o.minutes-1,seconds:59})):n.minutes==0&&n.minutes==0&&s("/userid/assessments")},1e3);return()=>clearInterval(i)},[n]),$.jsxs("div",{children:[n.minutes,":",n.seconds<10?`0${n.seconds}`:n.seconds]})};function uOe(){const t=Ks(),e=()=>{alert("Do you want to submit the exam?"),t("/:assessmentid/result")},n=pR(l=>l.getAssessment),r=xC(),[s,i]=N.useState(n.questionBank[0].sectionName);N.useState(0),N.useState();const{assessmentid:o}=k0(),a=kP();return N.useEffect(()=>{cW("webgl").then(()=>console.log("Using WebGL backend")).catch(l=>{console.error("Error setting backend:",l)}),uW().then(()=>{console.log("TensorFlow.js is ready")})},[]),$.jsxs("div",{className:"assessment-navbar",children:[$.jsx("div",{className:"camera-monitoring",children:$.jsx(cfe,{})}),$.jsxs("div",{className:"assessment-navbar-two-section",children:[$.jsxs("div",{className:"camera-title-timer-submit",children:[$.jsx("div",{children:$.jsx("h3",{children:"Candidate Assesment Test"})}),$.jsxs("div",{className:"timer-submit",children:[a.map(l=>o===l._id?$.jsx("div",{children:$.jsx(cOe,{minutes:l.AssessmentDuration,seconds:"00"})}):""),$.jsx("button",{className:"btn btn-primary",onClick:e,children:"Submit Test"})]})]}),$.jsx("div",{className:"camera-questions",children:$.jsx("div",{className:"questions-pagination",children:$.jsx("div",{children:$.jsx("select",{name:"Choose Section",id:"id",value:s,onChange:l=>{i(l.target.value),console.log(l.target.value),n.questionBank.map(c=>{l.target.value===c.sectionName&&r(Ste([c.sectionName,c.sectionType]))})},children:n.questionBank.map(l=>$.jsx("option",{value:`${l.sectionName}`,children:l.sectionName},`${l.sectionName}`))})})})})]})]})}function dOe(){const t=A4(),[e,n]=N.useState(0),[r,s]=N.useState(),[i,o]=N.useState();N.useState("");const a=xC(),l=Ks(),{assessmentid:c}=k0();return N.useEffect(()=>{t&&(console.log("Fetched data:",t),s(t.length),console.log(e),o(t[e]),console.log(i))},[a,t]),$.jsxs($.Fragment,{children:[$.jsxs("div",{className:"assessment-body",children:[$.jsx("div",{className:"assessment-body-first-half assessment-grid",children:$.jsx(hOe,{codingQuestion:i,questionIndex:e})}),$.jsx("div",{className:"assessment-body-second-half assessment-grid",children:$.jsx(wDe,{})})]}),$.jsx("div",{className:"question-navigation-btn",children:$.jsxs("div",{className:"question-navigation",style:{paddingBottom:"1%"},children:[$.jsx("button",{onClick:()=>{n(e-1),o(t[e])},disabled:e===0,className:"btn btn-outline-primary",children:"Previous"}),$.jsx("button",{onClick:()=>{n(e+1),o(t[e+1])},disabled:e===r-1,className:"btn btn-outline-primary",children:"Next"}),$.jsx("button",{className:"btn btn-success",onClick:()=>{l(`/${c}/result`)},children:"Submit"})]})})]})}function hOe({codingQuestion:t,questionIndex:e}){return console.log(t),$.jsxs("div",{className:"assessment-coding-question",children:[$.jsx(k8,{number:e}),$.jsxs("div",{className:"coding-question-description",children:[$.jsx(pOe,{question:t}),$.jsx("div",{})]})]})}function k8({number:t}){return $.jsx("div",{className:"assessment-question-heading",children:$.jsxs("h6",{children:["Question ",t+1]})})}function fOe({examples:t}){return $.jsx("div",{className:"AssementInputExample",children:t.map((e,n)=>$.jsxs("div",{children:[$.jsxs("h5",{children:["Example ",n+1,":"]}),$.jsxs("h6",{children:["Input: ",e.input]}),$.jsxs("h6",{children:["Output: ",e.output]})]},n))})}function pOe({question:t}){const[e,n]=N.useState();return N.useState(1),console.log(t),N.useEffect(()=>{n(t),console.log(e)},[t]),$.jsxs($.Fragment,{children:[$.jsx("div",{className:"problem-statement-div",children:e&&$.jsxs("div",{children:[$.jsx("h5",{children:e.question}),$.jsx("br",{}),$.jsxs("p",{children:["Problem: ",e.problem]})]})}),$.jsx("div",{children:e&&e.examples&&$.jsx("div",{children:$.jsx(fOe,{examples:e.examples})})})]})}function mOe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Uz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Wz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Uz(Object(n),!0).forEach(function(r){mOe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Uz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function gOe(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function yOe(t,e){if(t==null)return{};var n=gOe(t,e),r,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}function bOe(t,e){return vOe(t)||wOe(t,e)||xOe(t,e)||SOe()}function vOe(t){if(Array.isArray(t))return t}function wOe(t,e){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(t)))){var n=[],r=!0,s=!1,i=void 0;try{for(var o=t[Symbol.iterator](),a;!(r=(a=o.next()).done)&&(n.push(a.value),!(e&&n.length===e));r=!0);}catch(l){s=!0,i=l}finally{try{!r&&o.return!=null&&o.return()}finally{if(s)throw i}}return n}}function xOe(t,e){if(t){if(typeof t=="string")return Hz(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hz(t,e)}}function Hz(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function SOe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function COe(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Kz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Gz(Object(n),!0).forEach(function(r){COe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function EOe(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return e.reduceRight(function(s,i){return i(s)},r)}}function Cy(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length>=t.length?t.apply(this,s):function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.apply(n,[].concat(s,a))}}}function WS(t){return{}.toString.call(t).includes("Object")}function _Oe(t){return!Object.keys(t).length}function Db(t){return typeof t=="function"}function TOe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function kOe(t,e){return WS(e)||cu("changeType"),Object.keys(e).some(function(n){return!TOe(t,n)})&&cu("changeField"),e}function IOe(t){Db(t)||cu("selectorType")}function NOe(t){Db(t)||WS(t)||cu("handlerType"),WS(t)&&Object.values(t).some(function(e){return!Db(e)})&&cu("handlersType")}function $Oe(t){t||cu("initialIsRequired"),WS(t)||cu("initialType"),_Oe(t)&&cu("initialContent")}function AOe(t,e){throw new Error(t[e]||t.default)}var ROe={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},cu=Cy(AOe)(ROe),Yx={changes:kOe,selector:IOe,handler:NOe,initial:$Oe};function OOe(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Yx.initial(t),Yx.handler(e);var n={current:t},r=Cy(LOe)(n,e),s=Cy(POe)(n),i=Cy(Yx.changes)(t),o=Cy(DOe)(n);function a(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(u){return u};return Yx.selector(c),c(n.current)}function l(c){EOe(r,s,i,o)(c)}return[a,l]}function DOe(t,e){return Db(e)?e(t.current):e}function POe(t,e){return t.current=Kz(Kz({},t.current),e),e}function LOe(t,e,n){return Db(e)?e(t.current):Object.keys(n).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,t.current[r])}),n}var FOe={create:OOe},MOe={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function zOe(t){return function e(){for(var n=this,r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];return s.length>=t.length?t.apply(this,s):function(){for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return e.apply(n,[].concat(s,a))}}}function BOe(t){return{}.toString.call(t).includes("Object")}function jOe(t){return t||qz("configIsRequired"),BOe(t)||qz("configType"),t.urls?(VOe(),{paths:{vs:t.urls.monacoBase}}):t}function VOe(){console.warn(I8.deprecation)}function UOe(t,e){throw new Error(t[e]||t.default)}var I8={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},qz=zOe(UOe)(I8),WOe={config:jOe},HOe=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(s){return n.reduceRight(function(i,o){return o(i)},s)}};function N8(t,e){return Object.keys(e).forEach(function(n){e[n]instanceof Object&&t[n]&&Object.assign(e[n],N8(t[n],e[n]))}),Wz(Wz({},t),e)}var GOe={type:"cancelation",msg:"operation is manually canceled"};function lN(t){var e=!1,n=new Promise(function(r,s){t.then(function(i){return e?s(GOe):r(i)}),t.catch(s)});return n.cancel=function(){return e=!0},n}var KOe=FOe.create({config:MOe,isInitialized:!1,resolve:null,reject:null,monaco:null}),$8=bOe(KOe,2),U0=$8[0],Z_=$8[1];function qOe(t){var e=WOe.config(t),n=e.monaco,r=yOe(e,["monaco"]);Z_(function(s){return{config:N8(s.config,r),monaco:n}})}function XOe(){var t=U0(function(e){var n=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:n,isInitialized:r,resolve:s}});if(!t.isInitialized){if(Z_({isInitialized:!0}),t.monaco)return t.resolve(t.monaco),lN(cN);if(window.monaco&&window.monaco.editor)return A8(window.monaco),t.resolve(window.monaco),lN(cN);HOe(YOe,JOe)(ZOe)}return lN(cN)}function YOe(t){return document.body.appendChild(t)}function QOe(t){var e=document.createElement("script");return t&&(e.src=t),e}function JOe(t){var e=U0(function(r){var s=r.config,i=r.reject;return{config:s,reject:i}}),n=QOe("".concat(e.config.paths.vs,"/loader.js"));return n.onload=function(){return t()},n.onerror=e.reject,n}function ZOe(){var t=U0(function(n){var r=n.config,s=n.resolve,i=n.reject;return{config:r,resolve:s,reject:i}}),e=window.require;e.config(t.config),e(["vs/editor/editor.main"],function(n){A8(n),t.resolve(n)},function(n){t.reject(n)})}function A8(t){U0().monaco||Z_({monaco:t})}function eDe(){return U0(function(t){var e=t.monaco;return e})}var cN=new Promise(function(t,e){return Z_({resolve:t,reject:e})}),R8={config:qOe,init:XOe,__getMonacoInstance:eDe},tDe={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},uN=tDe,nDe={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},rDe=nDe;function sDe({children:t}){return kn.createElement("div",{style:rDe.container},t)}var iDe=sDe,oDe=iDe;function aDe({width:t,height:e,isEditorReady:n,loading:r,_ref:s,className:i,wrapperProps:o}){return kn.createElement("section",{style:{...uN.wrapper,width:t,height:e},...o},!n&&kn.createElement(oDe,null,r),kn.createElement("div",{ref:s,style:{...uN.fullWidth,...!n&&uN.hide},className:i}))}var lDe=aDe,O8=N.memo(lDe);function cDe(t){N.useEffect(t,[])}var D8=cDe;function uDe(t,e,n=!0){let r=N.useRef(!0);N.useEffect(r.current||!n?()=>{r.current=!1}:t,e)}var $i=uDe;function My(){}function Zf(t,e,n,r){return dDe(t,r)||hDe(t,e,n,r)}function dDe(t,e){return t.editor.getModel(P8(t,e))}function hDe(t,e,n,r){return t.editor.createModel(e,n,r?P8(t,r):void 0)}function P8(t,e){return t.Uri.parse(e)}function fDe({original:t,modified:e,language:n,originalLanguage:r,modifiedLanguage:s,originalModelPath:i,modifiedModelPath:o,keepCurrentOriginalModel:a=!1,keepCurrentModifiedModel:l=!1,theme:c="light",loading:u="Loading...",options:d={},height:h="100%",width:f="100%",className:p,wrapperProps:m={},beforeMount:g=My,onMount:y=My}){let[b,v]=N.useState(!1),[w,C]=N.useState(!0),_=N.useRef(null),E=N.useRef(null),I=N.useRef(null),O=N.useRef(y),R=N.useRef(g),z=N.useRef(!1);D8(()=>{let U=R8.init();return U.then(Q=>(E.current=Q)&&C(!1)).catch(Q=>(Q==null?void 0:Q.type)!=="cancelation"&&console.error("Monaco initialization: error:",Q)),()=>_.current?G():U.cancel()}),$i(()=>{if(_.current&&E.current){let U=_.current.getOriginalEditor(),Q=Zf(E.current,t||"",r||n||"text",i||"");Q!==U.getModel()&&U.setModel(Q)}},[i],b),$i(()=>{if(_.current&&E.current){let U=_.current.getModifiedEditor(),Q=Zf(E.current,e||"",s||n||"text",o||"");Q!==U.getModel()&&U.setModel(Q)}},[o],b),$i(()=>{let U=_.current.getModifiedEditor();U.getOption(E.current.editor.EditorOption.readOnly)?U.setValue(e||""):e!==U.getValue()&&(U.executeEdits("",[{range:U.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),U.pushUndoStop())},[e],b),$i(()=>{var U,Q;(Q=(U=_.current)==null?void 0:U.getModel())==null||Q.original.setValue(t||"")},[t],b),$i(()=>{let{original:U,modified:Q}=_.current.getModel();E.current.editor.setModelLanguage(U,r||n||"text"),E.current.editor.setModelLanguage(Q,s||n||"text")},[n,r,s],b),$i(()=>{var U;(U=E.current)==null||U.editor.setTheme(c)},[c],b),$i(()=>{var U;(U=_.current)==null||U.updateOptions(d)},[d],b);let B=N.useCallback(()=>{var se;if(!E.current)return;R.current(E.current);let U=Zf(E.current,t||"",r||n||"text",i||""),Q=Zf(E.current,e||"",s||n||"text",o||"");(se=_.current)==null||se.setModel({original:U,modified:Q})},[n,e,s,t,r,i,o]),j=N.useCallback(()=>{var U;!z.current&&I.current&&(_.current=E.current.editor.createDiffEditor(I.current,{automaticLayout:!0,...d}),B(),(U=E.current)==null||U.editor.setTheme(c),v(!0),z.current=!0)},[d,c,B]);N.useEffect(()=>{b&&O.current(_.current,E.current)},[b]),N.useEffect(()=>{!w&&!b&&j()},[w,b,j]);function G(){var Q,se,V,W;let U=(Q=_.current)==null?void 0:Q.getModel();a||((se=U==null?void 0:U.original)==null||se.dispose()),l||((V=U==null?void 0:U.modified)==null||V.dispose()),(W=_.current)==null||W.dispose()}return kn.createElement(O8,{width:f,height:h,isEditorReady:b,loading:u,_ref:I,className:p,wrapperProps:m})}var pDe=fDe;N.memo(pDe);function mDe(t){let e=N.useRef();return N.useEffect(()=>{e.current=t},[t]),e.current}var gDe=mDe,Qx=new Map;function yDe({defaultValue:t,defaultLanguage:e,defaultPath:n,value:r,language:s,path:i,theme:o="light",line:a,loading:l="Loading...",options:c={},overrideServices:u={},saveViewState:d=!0,keepCurrentModel:h=!1,width:f="100%",height:p="100%",className:m,wrapperProps:g={},beforeMount:y=My,onMount:b=My,onChange:v,onValidate:w=My}){let[C,_]=N.useState(!1),[E,I]=N.useState(!0),O=N.useRef(null),R=N.useRef(null),z=N.useRef(null),B=N.useRef(b),j=N.useRef(y),G=N.useRef(),U=N.useRef(r),Q=gDe(i),se=N.useRef(!1),V=N.useRef(!1);D8(()=>{let J=R8.init();return J.then(Z=>(O.current=Z)&&I(!1)).catch(Z=>(Z==null?void 0:Z.type)!=="cancelation"&&console.error("Monaco initialization: error:",Z)),()=>R.current?L():J.cancel()}),$i(()=>{var Z,ie,ue,de;let J=Zf(O.current,t||r||"",e||s||"",i||n||"");J!==((Z=R.current)==null?void 0:Z.getModel())&&(d&&Qx.set(Q,(ie=R.current)==null?void 0:ie.saveViewState()),(ue=R.current)==null||ue.setModel(J),d&&((de=R.current)==null||de.restoreViewState(Qx.get(i))))},[i],C),$i(()=>{var J;(J=R.current)==null||J.updateOptions(c)},[c],C),$i(()=>{!R.current||r===void 0||(R.current.getOption(O.current.editor.EditorOption.readOnly)?R.current.setValue(r):r!==R.current.getValue()&&(V.current=!0,R.current.executeEdits("",[{range:R.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),R.current.pushUndoStop(),V.current=!1))},[r],C),$i(()=>{var Z,ie;let J=(Z=R.current)==null?void 0:Z.getModel();J&&s&&((ie=O.current)==null||ie.editor.setModelLanguage(J,s))},[s],C),$i(()=>{var J;a!==void 0&&((J=R.current)==null||J.revealLine(a))},[a],C),$i(()=>{var J;(J=O.current)==null||J.editor.setTheme(o)},[o],C);let W=N.useCallback(()=>{var J;if(!(!z.current||!O.current)&&!se.current){j.current(O.current);let Z=i||n,ie=Zf(O.current,r||t||"",e||s||"",Z||"");R.current=(J=O.current)==null?void 0:J.editor.create(z.current,{model:ie,automaticLayout:!0,...c},u),d&&R.current.restoreViewState(Qx.get(Z)),O.current.editor.setTheme(o),a!==void 0&&R.current.revealLine(a),_(!0),se.current=!0}},[t,e,n,r,s,i,c,u,d,o,a]);N.useEffect(()=>{C&&B.current(R.current,O.current)},[C]),N.useEffect(()=>{!E&&!C&&W()},[E,C,W]),U.current=r,N.useEffect(()=>{var J,Z;C&&v&&((J=G.current)==null||J.dispose(),G.current=(Z=R.current)==null?void 0:Z.onDidChangeModelContent(ie=>{V.current||v(R.current.getValue(),ie)}))},[C,v]),N.useEffect(()=>{if(C){let J=O.current.editor.onDidChangeMarkers(Z=>{var ue;let ie=(ue=R.current.getModel())==null?void 0:ue.uri;if(ie&&Z.find(de=>de.path===ie.path)){let de=O.current.editor.getModelMarkers({resource:ie});w==null||w(de)}});return()=>{J==null||J.dispose()}}return()=>{}},[C,w]);function L(){var J,Z;(J=G.current)==null||J.dispose(),h?d&&Qx.set(i,R.current.saveViewState()):(Z=R.current.getModel())==null||Z.dispose(),R.current.dispose()}return kn.createElement(O8,{width:f,height:p,isEditorReady:C,loading:l,_ref:z,className:m,wrapperProps:g})}var bDe=yDe,vDe=N.memo(bDe);function wDe(){const[t,e]=N.useState(""),n=N.useRef(null);function r(i,o){n.current=i}async function s(){var i;try{const o=(i=n.current)==null?void 0:i.getValue(),a=document.getElementById("language-selector").value,l=await bn.post("http://localhost:3000/compilex",{code:o,input:"",lang:a});console.log(l.data);const c=l.data.output.replace(/[\r\n]+/g,"");e(c)}catch(o){console.error("Error:",o)}}return $.jsxs("div",{children:[$.jsxs("div",{className:"code-editor-header",children:[$.jsx("h5",{children:"Code Editor"}),$.jsxs("select",{name:"language",id:"language-selector",children:[$.jsx("option",{value:"python",children:"Python"}),$.jsx("option",{value:"java",children:"Java"}),$.jsx("option",{value:"cpp",children:"CPP"}),$.jsx("option",{value:"c",children:"C"})]})]}),$.jsx("div",{className:"code-editor-div",children:$.jsx(vDe,{height:"50vh",defaultLanguage:"python",defaultValue:"// Write your code here",onMount:r})}),$.jsx("div",{className:"run-btn-container",children:$.jsx("button",{type:"button",className:"btn btn-success code-run",onClick:s,children:"Run"})}),$.jsx("div",{className:"output-container",children:$.jsx("h3",{children:"Output:"})}),$.jsx("div",{className:"compiler-div",children:$.jsxs("div",{className:"compiler",children:["   ",$.jsx("pre",{children:t})," "]})})]})}function xDe(){const[t,e]=N.useState([]),[n,r]=N.useState(0),[s,i]=N.useState({}),[o,a]=N.useState(""),[l,c]=N.useState(0),[u,d]=N.useState(14),[h,f]=N.useState(0);N.useEffect(()=>{bn.get("/api/mcqquestions").then(b=>{console.log(b.data.myData),e(b.data.myData)}).catch(b=>{console.error("Error fetching MCQ questions:",b)})},[]);const p=b=>{s[n]!==void 0?i(w=>({...w,[n]:b})):(i(w=>({...w,[n]:b})),c(l+1),t[n].correctAnswer===b&&f(h+1),d(u-1))},m=()=>{bn.post(`/api/mcqquestions/${userId}`,{score:h}).then(b=>{a(b.data.message)}).catch(b=>{console.error("Error submitting MCQ answer:",b),a("Error submitting MCQ answer")})},g=()=>{r(b=>{const v=b+1;return v<t.length?v:b})},y=()=>{r(b=>{const v=b-1;return v>=0?v:b})};return $.jsxs("div",{className:"assessment-mcq",children:[$.jsx(k8,{number:n}),t.length>0&&$.jsxs("div",{children:[$.jsx("h4",{className:"mcq-question-heading",children:t[n].question}),$.jsx(SDe,{mcqOptions:t[n].options,handleOptionSelect:p,userAnswers:s,currentQuestionIndex:n}),$.jsxs("div",{className:"question-navigation-btn",children:[$.jsxs("div",{className:"question-navigation",children:[$.jsx("button",{onClick:y,disabled:n===0,className:"btn btn-outline-primary",children:"Previous"}),$.jsx("button",{onClick:g,disabled:n===t.length-1,className:"btn btn-outline-primary",children:"Next"}),$.jsx("button",{onClick:m,className:"btn btn-success",children:"Submit"})]}),$.jsxs("div",{className:"questions-staticstics",children:[$.jsxs("div",{children:[$.jsx("h5",{style:{color:"green"},className:"questions-count",children:l}),$.jsx("h5",{style:{color:"green"},children:"Answered"})]}),$.jsxs("div",{className:"questions-count",children:[$.jsx("h5",{style:{color:"red"},children:u}),$.jsx("h5",{style:{color:"red"},children:"Unanswered"})]})]})]})]}),o&&$.jsx("p",{children:o})]})}function SDe({mcqOptions:t,handleOptionSelect:e,currentQuestionIndex:n,userAnswers:r}){return $.jsx("div",{className:"mcq-options",children:t.map((s,i)=>$.jsx("button",{className:"mcq-option-btn btn btn-outline-dark",onClick:()=>{e(s)},style:{backgroundColor:r[n]===s?"green":"",color:r[n]===s?"white":""},children:s},i))})}const CDe="/assets/RedCross-DYTquiug.jpg",EDe=()=>{const t=Ks();return $.jsxs("div",{className:"violation-page",children:[$.jsx("div",{className:"cross-div",children:$.jsx("img",{src:CDe,alt:"",className:"red-cross-image"})}),$.jsx("h1",{children:"Assessment Ended"}),$.jsx("h3",{children:"The assessment has been ended because you have exceeded the warning limit."}),$.jsx("p",{children:"Please review the guidelines and ensure compliance in the future assessments."}),$.jsx("button",{onClick:()=>t("/userid/assessments"),children:"Back to Dashboard"})]})};function _De(){const t=pR(e=>e.getAssessment);return console.log(t),$.jsxs("div",{className:"assessment-page",children:[$.jsx(uOe,{}),t.currentPageType==="coding"?$.jsx("div",{children:$.jsx(dOe,{})}):"",t.currentPageType==="MCQ"?$.jsx("div",{children:$.jsx(xDe,{})}):""]})}function TDe(){const[t,e]=N.useState(!1),n=Ks(),{assessmentid:r}=k0(),s=o=>{e(o.target.checked)},i=()=>{t?(console.log("Terms and Conditions accepted"),n(`/${r}/scanfaceid`)):console.log("You must agree to the terms and conditions")};return $.jsxs("div",{className:"terms",children:[$.jsx("h2",{children:"Guidelines to Online Examination for Students"}),$.jsxs("ul",{children:[$.jsx("li",{children:"Arrange for stable Internet connectivity."}),$.jsx("li",{children:"Giving examination on a laptop or desktop is highly recommended."}),$.jsx("li",{children:"Make sure mobile/laptop is fully charged. Power bank for mobile or UPS/Inverter for laptop/desktop should be arranged for uninterrupted power supply."}),$.jsx("li",{children:"Students should have sufficient data in the Fair Usage Policy (FUP) / Internet plan with a sufficient data pack from their internet service provider."}),$.jsx("li",{children:"Login to the portal 10 minutes before the online examination start time."}),$.jsx("li",{children:"Close all browsers/tabs before starting the online examination."}),$.jsx("li",{children:"Once the exam starts, do not switch to any other window/tab. Doing so may be considered malpractice and your exam could be terminated."}),$.jsx("li",{children:"Do not pick up/receive calls during the exam if you are giving the exam on a mobile device. This will also be treated as changing the window."}),$.jsx("li",{children:"To avoid unwanted pop-ups, use of an Ad Blocker is recommended."}),$.jsx("li",{children:"Clear browser cache memory on mobile and laptops. Clear browsing history and delete temp files."}),$.jsx("li",{children:"It is recommended to use web browsers like Mozilla Firefox or Google Chrome on a desktop/laptop/tablet/smartphone."}),$.jsx("li",{children:"Do not use the back button on your keyboard or close button/icon to go back to the previous page or to close the screen."}),$.jsx("li",{children:"Students are not allowed to login after 30 minutes from the start of the examination."})]}),$.jsx("h3",{children:"Helpline Numbers"}),$.jsxs("ul",{children:[$.jsx("li",{children:"For technical queries/difficulties, email with proper screenshots and student details to test@geca.ac.in."}),$.jsx("li",{children:"Contact the CAW Incharge Miss abc at 8275235489, or CEO xyz at 9404357432."})]}),$.jsxs("div",{className:"agreement-section",children:[$.jsxs("label",{children:[$.jsx("input",{type:"checkbox",checked:t,onChange:s,className:"me-2"}),"I agree to the terms and conditions"]}),$.jsx("button",{className:"submit-button",onClick:i,disabled:!t,children:"Submit"})]})]})}var L8={exports:{}};(function(t,e){(function(r,s){t.exports=s(N)})(Mo,function(n){return function(r){var s={};function i(o){if(s[o])return s[o].exports;var a=s[o]={i:o,l:!1,exports:{}};return r[o].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=r,i.c=s,i.d=function(o,a,l){i.o(o,a)||Object.defineProperty(o,a,{enumerable:!0,get:l})},i.r=function(o){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})},i.t=function(o,a){if(a&1&&(o=i(o)),a&8||a&4&&typeof o=="object"&&o&&o.__esModule)return o;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:o}),a&2&&typeof o!="string")for(var c in o)i.d(l,c,(function(u){return o[u]}).bind(null,c));return l},i.n=function(o){var a=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(a,"a",a),a},i.o=function(o,a){return Object.prototype.hasOwnProperty.call(o,a)},i.p="",i(i.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(r,s,i){i.r(s);var o=i("react"),a=function(){var h=function(f,p){return h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,g){m.__proto__=g}||function(m,g){for(var y in g)g.hasOwnProperty(y)&&(m[y]=g[y])},h(f,p)};return function(f,p){h(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}(),l=function(){return l=Object.assign||function(h){for(var f,p=1,m=arguments.length;p<m;p++){f=arguments[p];for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&(h[g]=f[g])}return h},l.apply(this,arguments)},c=function(h,f){var p={};for(var m in h)Object.prototype.hasOwnProperty.call(h,m)&&f.indexOf(m)<0&&(p[m]=h[m]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function")for(var g=0,m=Object.getOwnPropertySymbols(h);g<m.length;g++)f.indexOf(m[g])<0&&Object.prototype.propertyIsEnumerable.call(h,m[g])&&(p[m[g]]=h[m[g]]);return p};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(f){var p=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return p?new Promise(function(m,g){p.call(navigator,f,m,g)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function u(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var d=function(h){a(f,h);function f(p){var m=h.call(this,p)||this;return m.canvas=null,m.ctx=null,m.requestUserMediaId=0,m.unmounted=!1,m.state={hasUserMedia:!1},m}return f.prototype.componentDidMount=function(){var p=this,m=p.state,g=p.props;if(this.unmounted=!1,!u()){g.onUserMediaError("getUserMedia not supported");return}m.hasUserMedia||this.requestUserMedia(),g.children&&typeof g.children!="function"&&console.warn("children must be a function")},f.prototype.componentDidUpdate=function(p){var m=this.props;if(!u()){m.onUserMediaError("getUserMedia not supported");return}var g=JSON.stringify(p.audioConstraints)!==JSON.stringify(m.audioConstraints),y=JSON.stringify(p.videoConstraints)!==JSON.stringify(m.videoConstraints),b=p.minScreenshotWidth!==m.minScreenshotWidth,v=p.minScreenshotHeight!==m.minScreenshotHeight;(y||b||v)&&(this.canvas=null,this.ctx=null),(g||y)&&(this.stopAndCleanup(),this.requestUserMedia())},f.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},f.stopMediaStream=function(p){p&&(p.getVideoTracks&&p.getAudioTracks?(p.getVideoTracks().map(function(m){p.removeTrack(m),m.stop()}),p.getAudioTracks().map(function(m){p.removeTrack(m),m.stop()})):p.stop())},f.prototype.stopAndCleanup=function(){var p=this.state;p.hasUserMedia&&(f.stopMediaStream(this.stream),p.src&&window.URL.revokeObjectURL(p.src))},f.prototype.getScreenshot=function(p){var m=this,g=m.state,y=m.props;if(!g.hasUserMedia)return null;var b=this.getCanvas(p);return b&&b.toDataURL(y.screenshotFormat,y.screenshotQuality)},f.prototype.getCanvas=function(p){var m=this,g=m.state,y=m.props;if(!this.video||!g.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var b=this.video.videoWidth,v=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var w=b/v;b=y.minScreenshotWidth||this.video.clientWidth,v=b/w,y.minScreenshotHeight&&v<y.minScreenshotHeight&&(v=y.minScreenshotHeight,b=v*w)}this.canvas=document.createElement("canvas"),this.canvas.width=(p==null?void 0:p.width)||b,this.canvas.height=(p==null?void 0:p.height)||v,this.ctx=this.canvas.getContext("2d")}var C=this,_=C.ctx,E=C.canvas;return _&&E&&(E.width=(p==null?void 0:p.width)||E.width,E.height=(p==null?void 0:p.height)||E.height,y.mirrored&&(_.translate(E.width,0),_.scale(-1,1)),_.imageSmoothingEnabled=y.imageSmoothing,_.drawImage(this.video,0,0,(p==null?void 0:p.width)||E.width,(p==null?void 0:p.height)||E.height),y.mirrored&&(_.scale(-1,1),_.translate(-E.width,0))),E},f.prototype.requestUserMedia=function(){var p=this,m=this.props,g=function(v,w){var C={video:typeof w<"u"?w:!0};m.audio&&(C.audio=typeof v<"u"?v:!0),p.requestUserMediaId++;var _=p.requestUserMediaId;navigator.mediaDevices.getUserMedia(C).then(function(E){p.unmounted||_!==p.requestUserMediaId?f.stopMediaStream(E):p.handleUserMedia(null,E)}).catch(function(E){p.handleUserMedia(E)})};if("mediaDevices"in navigator)g(m.audioConstraints,m.videoConstraints);else{var y=function(v){return{optional:[{sourceId:v}]}},b=function(v){var w=v.deviceId;return typeof w=="string"?w:Array.isArray(w)&&w.length>0?w[0]:typeof w=="object"&&w.ideal?w.ideal:null};MediaStreamTrack.getSources(function(v){var w=null,C=null;v.forEach(function(I){I.kind==="audio"?w=I.id:I.kind==="video"&&(C=I.id)});var _=b(m.audioConstraints);_&&(w=_);var E=b(m.videoConstraints);E&&(C=E),g(y(w),y(C))})}},f.prototype.handleUserMedia=function(p,m){var g=this.props;if(p||!m){this.setState({hasUserMedia:!1}),g.onUserMediaError(p);return}this.stream=m;try{this.video&&(this.video.srcObject=m),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(m)})}g.onUserMedia(m)},f.prototype.render=function(){var p=this,m=this,g=m.state,y=m.props,b=y.audio;y.forceScreenshotSourceSize;var v=y.disablePictureInPicture;y.onUserMedia,y.onUserMediaError,y.screenshotFormat,y.screenshotQuality,y.minScreenshotWidth,y.minScreenshotHeight,y.audioConstraints,y.videoConstraints,y.imageSmoothing;var w=y.mirrored,C=y.style,_=C===void 0?{}:C,E=y.children,I=c(y,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),O=w?l(l({},_),{transform:(_.transform||"")+" scaleX(-1)"}):_,R={getScreenshot:this.getScreenshot.bind(this)};return o.createElement(o.Fragment,null,o.createElement("video",l({autoPlay:!0,disablePictureInPicture:v,src:g.src,muted:!b,playsInline:!0,ref:function(z){p.video=z},style:O},I)),E&&E(R))},f.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},f}(o.Component);s.default=d},react:function(r,s){r.exports=n}}).default})})(L8);var kDe=L8.exports;const IDe=$h(kDe);let Jx;const NDe=new Uint8Array(16);function $De(){if(!Jx&&(Jx=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Jx))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Jx(NDe)}const Zr=[];for(let t=0;t<256;++t)Zr.push((t+256).toString(16).slice(1));function ADe(t,e=0){return Zr[t[e+0]]+Zr[t[e+1]]+Zr[t[e+2]]+Zr[t[e+3]]+"-"+Zr[t[e+4]]+Zr[t[e+5]]+"-"+Zr[t[e+6]]+Zr[t[e+7]]+"-"+Zr[t[e+8]]+Zr[t[e+9]]+"-"+Zr[t[e+10]]+Zr[t[e+11]]+Zr[t[e+12]]+Zr[t[e+13]]+Zr[t[e+14]]+Zr[t[e+15]]}const RDe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Xz={randomUUID:RDe};function ODe(t,e,n){if(Xz.randomUUID&&!e&&!t)return Xz.randomUUID();t=t||{};const r=t.random||(t.rng||$De)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,ADe(r)}const DDe=()=>{const t=N.useRef(null),[e,n]=N.useState("face"),[r,s]=N.useState(null),[i,o]=N.useState(null),[a,l]=N.useState(""),[c,u]=N.useState("none"),d=Ks(),{assessmentid:h}=k0(),f=()=>{const m=t.current.getScreenshot();m&&(e==="face"?(s(m),n("id")):(o(m),n("face")))},p=()=>{if(r&&i){const m=ODe();fetch("http://localhost:3002/webcam/saveImage",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({uniqueID:m,faceImage:r,idImage:i})}).then(g=>{if(!g.ok)throw new Error(`Server error: ${g.status}`);return g.json()}).then(g=>{console.log("Server response:",g),d(`/${h}/assessment`),l("Images Submitted Successfully! Now Start the Test"),u("block")}).catch(g=>{console.error("Error submitting data:",g)})}else console.error("Face and/or ID not captured.")};return $.jsxs("div",{style:{textAlign:"center",display:"flex",justifyContent:"center",gap:"3rem",paddingBlock:"2rem"},children:[$.jsxs("div",{children:[e==="face"?$.jsx("h3",{children:"Capture a clear, well-lit image of your face."}):$.jsx("h3",{children:"Ensure your ID is clear and free of glare."}),$.jsx("div",{className:"webcam-div",children:$.jsx(IDe,{ref:t,screenshotFormat:"image/jpeg"})}),$.jsxs("button",{onClick:f,className:"capture-btn",children:[e==="face"?"Capture Face":"Capture ID"," "]})]}),$.jsxs("div",{style:{display:"flex",flexDirection:"column",marginTop:"10px",gap:"1rem"},children:[$.jsxs("div",{className:"img-container",children:[$.jsxs("div",{className:"img-captured-container",children:[$.jsx("h3",{children:"Face Capture"}),r&&$.jsxs("div",{style:{height:"100%"},children:[$.jsx("img",{src:r,alt:"Captured Face",width:"250",height:"100%"})," "]})]}),$.jsxs("div",{className:"img-captured-container",children:[$.jsx("h3",{children:"ID Capture"}),i&&$.jsxs("div",{style:{height:"100%"},children:[$.jsx("img",{src:i,alt:"Captured ID",width:"250",height:"100%"})," "]})]})]}),$.jsx("div",{className:"submit-btn",children:$.jsx("button",{onClick:p,className:"button",children:"Submit & Start"})}),$.jsx("div",{children:a})]})]})},PDe="/assets/andrew-neel-ute2XAFQU2I-unsplash-BDraelAK.jpg";var Yz={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},LDe=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},M8={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,c=l?t[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|c>>6,f=c&63;l||(f=64,o||(h=64)),r.push(n[u],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(F8(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):LDe(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new FDe;const h=i<<2|a>>4;if(r.push(h),c!==64){const f=a<<4&240|c>>2;if(r.push(f),d!==64){const p=c<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class FDe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MDe=function(t){const e=F8(t);return M8.encodeByteArray(e,!0)},z8=function(t){return MDe(t).replace(/\./g,"")},B8=function(t){try{return M8.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zDe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BDe=()=>zDe().__FIREBASE_DEFAULTS__,jDe=()=>{if(typeof process>"u"||typeof Yz>"u")return;const t=Yz.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},VDe=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&B8(t[1]);return e&&JSON.parse(e)},OP=()=>{try{return BDe()||jDe()||VDe()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UDe=t=>{var e,n;return(n=(e=OP())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},j8=()=>{var t;return(t=OP())===null||t===void 0?void 0:t.config},V8=t=>{var e;return(e=OP())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WDe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function HDe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xs())}function U8(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function GDe(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KDe(){const t=xs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function W8(){try{return typeof indexedDB=="object"}catch{return!1}}function H8(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function qDe(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XDe="FirebaseError";class yl extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=XDe,Object.setPrototypeOf(this,yl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Xh.prototype.create)}}class Xh{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?YDe(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new yl(s,a,r)}}function YDe(t,e){return t.replace(QDe,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const QDe=/\{\$([^}]+)}/g;function JDe(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function HS(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Qz(i)&&Qz(o)){if(!HS(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Qz(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Ey(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function _y(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function ZDe(t,e){const n=new ePe(t,e);return n.subscribe.bind(n)}class ePe{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");tPe(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dN),s.error===void 0&&(s.error=dN),s.complete===void 0&&(s.complete=dN);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tPe(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dN(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nPe=1e3,rPe=2,sPe=4*60*60*1e3,iPe=.5;function Jz(t,e=nPe,n=rPe){const r=e*Math.pow(n,t),s=Math.round(iPe*r*(Math.random()-.5)*2);return Math.min(sPe,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bl(t){return t&&t._delegate?t._delegate:t}class hl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cd="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oPe{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new WDe;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lPe(e))try{this.getOrInitializeService({instanceIdentifier:Cd})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Cd){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Cd){return this.instances.has(e)}getOptions(e=Cd){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aPe(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Cd){return this.component?this.component.multipleInstances?e:Cd:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aPe(t){return t===Cd?void 0:t}function lPe(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cPe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oPe(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(mn||(mn={}));const uPe={debug:mn.DEBUG,verbose:mn.VERBOSE,info:mn.INFO,warn:mn.WARN,error:mn.ERROR,silent:mn.SILENT},dPe=mn.INFO,hPe={[mn.DEBUG]:"log",[mn.VERBOSE]:"log",[mn.INFO]:"info",[mn.WARN]:"warn",[mn.ERROR]:"error"},fPe=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=hPe[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class DP{constructor(e){this.name=e,this._logLevel=dPe,this._logHandler=fPe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uPe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mn.DEBUG,...e),this._logHandler(this,mn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mn.VERBOSE,...e),this._logHandler(this,mn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mn.INFO,...e),this._logHandler(this,mn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mn.WARN,...e),this._logHandler(this,mn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mn.ERROR,...e),this._logHandler(this,mn.ERROR,...e)}}const pPe=(t,e)=>e.some(n=>t instanceof n);let Zz,eB;function mPe(){return Zz||(Zz=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gPe(){return eB||(eB=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const G8=new WeakMap,VA=new WeakMap,K8=new WeakMap,hN=new WeakMap,PP=new WeakMap;function yPe(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(uu(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&G8.set(n,t)}).catch(()=>{}),PP.set(e,t),e}function bPe(t){if(VA.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});VA.set(t,e)}let UA={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return VA.get(t);if(e==="objectStoreNames")return t.objectStoreNames||K8.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return uu(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function vPe(t){UA=t(UA)}function wPe(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fN(this),e,...n);return K8.set(r,e.sort?e.sort():[e]),uu(r)}:gPe().includes(t)?function(...e){return t.apply(fN(this),e),uu(G8.get(this))}:function(...e){return uu(t.apply(fN(this),e))}}function xPe(t){return typeof t=="function"?wPe(t):(t instanceof IDBTransaction&&bPe(t),pPe(t,mPe())?new Proxy(t,UA):t)}function uu(t){if(t instanceof IDBRequest)return yPe(t);if(hN.has(t))return hN.get(t);const e=xPe(t);return e!==t&&(hN.set(t,e),PP.set(e,t)),e}const fN=t=>PP.get(t);function q8(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=uu(o);return r&&o.addEventListener("upgradeneeded",l=>{r(uu(o.result),l.oldVersion,l.newVersion,uu(o.transaction),l)}),n&&o.addEventListener("blocked",l=>n(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const SPe=["get","getKey","getAll","getAllKeys","count"],CPe=["put","add","delete","clear"],pN=new Map;function tB(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(pN.get(e))return pN.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=CPe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||SPe.includes(n)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&l.done]))[0]};return pN.set(e,i),i}vPe(t=>({...t,get:(e,n,r)=>tB(e,n)||t.get(e,n,r),has:(e,n)=>!!tB(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EPe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(_Pe(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function _Pe(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const WA="@firebase/app",nB="0.10.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ch=new DP("@firebase/app"),TPe="@firebase/app-compat",kPe="@firebase/analytics-compat",IPe="@firebase/analytics",NPe="@firebase/app-check-compat",$Pe="@firebase/app-check",APe="@firebase/auth",RPe="@firebase/auth-compat",OPe="@firebase/database",DPe="@firebase/database-compat",PPe="@firebase/functions",LPe="@firebase/functions-compat",FPe="@firebase/installations",MPe="@firebase/installations-compat",zPe="@firebase/messaging",BPe="@firebase/messaging-compat",jPe="@firebase/performance",VPe="@firebase/performance-compat",UPe="@firebase/remote-config",WPe="@firebase/remote-config-compat",HPe="@firebase/storage",GPe="@firebase/storage-compat",KPe="@firebase/firestore",qPe="@firebase/firestore-compat",XPe="firebase",YPe="10.11.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HA="[DEFAULT]",QPe={[WA]:"fire-core",[TPe]:"fire-core-compat",[IPe]:"fire-analytics",[kPe]:"fire-analytics-compat",[$Pe]:"fire-app-check",[NPe]:"fire-app-check-compat",[APe]:"fire-auth",[RPe]:"fire-auth-compat",[OPe]:"fire-rtdb",[DPe]:"fire-rtdb-compat",[PPe]:"fire-fn",[LPe]:"fire-fn-compat",[FPe]:"fire-iid",[MPe]:"fire-iid-compat",[zPe]:"fire-fcm",[BPe]:"fire-fcm-compat",[jPe]:"fire-perf",[VPe]:"fire-perf-compat",[UPe]:"fire-rc",[WPe]:"fire-rc-compat",[HPe]:"fire-gcs",[GPe]:"fire-gcs-compat",[KPe]:"fire-fst",[qPe]:"fire-fst-compat","fire-js":"fire-js",[XPe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=new Map,JPe=new Map,GA=new Map;function rB(t,e){try{t.container.addComponent(e)}catch(n){Ch.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function rc(t){const e=t.name;if(GA.has(e))return Ch.debug(`There were multiple attempts to register component ${e}.`),!1;GA.set(e,t);for(const n of GS.values())rB(n,t);for(const n of JPe.values())rB(n,t);return!0}function eT(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ha(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZPe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},du=new Xh("app","Firebase",ZPe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eLe{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new hl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw du.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H0=YPe;function X8(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:HA,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw du.create("bad-app-name",{appName:String(s)});if(n||(n=j8()),!n)throw du.create("no-options");const i=GS.get(s);if(i){if(HS(n,i.options)&&HS(r,i.config))return i;throw du.create("duplicate-app",{appName:s})}const o=new cPe(s);for(const l of GA.values())o.addComponent(l);const a=new eLe(n,r,o);return GS.set(s,a),a}function tLe(t=HA){const e=GS.get(t);if(!e&&t===HA&&j8())return X8();if(!e)throw du.create("no-app",{appName:t});return e}function el(t,e,n){var r;let s=(r=QPe[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ch.warn(a.join(" "));return}rc(new hl(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nLe="firebase-heartbeat-database",rLe=1,Pb="firebase-heartbeat-store";let mN=null;function Y8(){return mN||(mN=q8(nLe,rLe,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Pb)}catch(n){console.warn(n)}}}}).catch(t=>{throw du.create("idb-open",{originalErrorMessage:t.message})})),mN}async function sLe(t){try{const n=(await Y8()).transaction(Pb),r=await n.objectStore(Pb).get(Q8(t));return await n.done,r}catch(e){if(e instanceof yl)Ch.warn(e.message);else{const n=du.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ch.warn(n.message)}}}async function sB(t,e){try{const r=(await Y8()).transaction(Pb,"readwrite");await r.objectStore(Pb).put(e,Q8(t)),await r.done}catch(n){if(n instanceof yl)Ch.warn(n.message);else{const r=du.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ch.warn(r.message)}}}function Q8(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iLe=1024,oLe=30*24*60*60*1e3;class aLe{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new cLe(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=iB();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)))return this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=oLe}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=iB(),{heartbeatsToSend:r,unsentEntries:s}=lLe(this._heartbeatsCache.heartbeats),i=z8(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function iB(){return new Date().toISOString().substring(0,10)}function lLe(t,e=iLe){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),oB(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),oB(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class cLe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return W8()?H8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sLe(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return sB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return sB(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function oB(t){return z8(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uLe(t){rc(new hl("platform-logger",e=>new EPe(e),"PRIVATE")),rc(new hl("heartbeat",e=>new aLe(e),"PRIVATE")),el(WA,nB,t),el(WA,nB,"esm2017"),el("fire-js","")}uLe("");function LP(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function J8(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const dLe=J8,Z8=new Xh("auth","Firebase",J8());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new DP("@firebase/auth");function hLe(t,...e){KS.logLevel<=mn.WARN&&KS.warn(`Auth (${H0}): ${t}`,...e)}function _1(t,...e){KS.logLevel<=mn.ERROR&&KS.error(`Auth (${H0}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ba(t,...e){throw FP(t,...e)}function tl(t,...e){return FP(t,...e)}function eX(t,e,n){const r=Object.assign(Object.assign({},dLe()),{[e]:n});return new Xh("auth","Firebase",r).create(e,{appName:t.name})}function Hl(t){return eX(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function FP(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Z8.create(t,...e)}function pt(t,e,...n){if(!t)throw FP(e,...n)}function Bl(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _1(e),new Error(e)}function sc(t,e){t||Bl(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KA(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function fLe(){return aB()==="http:"||aB()==="https:"}function aB(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pLe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fLe()||U8()||"connection"in navigator)?navigator.onLine:!0}function mLe(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(e,n){this.shortDelay=e,this.longDelay=n,sc(n>e,"Short delay should be less than long delay!"),this.isMobile=HDe()||GDe()}get(){return pLe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MP(t,e){sc(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tX{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bl("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bl("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bl("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gLe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yLe=new G0(3e4,6e4);function Ku(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function yc(t,e,n,r,s={}){return nX(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=W0(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),tX.fetch()(rX(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},i))})}async function nX(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},gLe),e);try{const s=new vLe(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Zx(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Zx(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Zx(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw Zx(t,"user-disabled",o);const u=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw eX(t,u,c);ba(t,u)}}catch(s){if(s instanceof yl)throw s;ba(t,"network-request-failed",{message:String(s)})}}async function K0(t,e,n,r,s={}){const i=await yc(t,e,n,r,s);return"mfaPendingCredential"in i&&ba(t,"multi-factor-auth-required",{_serverResponse:i}),i}function rX(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?MP(t.config,s):`${t.config.apiScheme}://${s}`}function bLe(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class vLe{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(tl(this.auth,"network-request-failed")),yLe.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zx(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=tl(t,e,r);return s.customData._tokenResponse=n,s}function lB(t){return t!==void 0&&t.enterprise!==void 0}class wLe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return bLe(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function xLe(t,e){return yc(t,"GET","/v2/recaptchaConfig",Ku(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SLe(t,e){return yc(t,"POST","/v1/accounts:delete",e)}async function sX(t,e){return yc(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CLe(t,e=!1){const n=bl(t),r=await n.getIdToken(e),s=zP(r);pt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:zy(gN(s.auth_time)),issuedAtTime:zy(gN(s.iat)),expirationTime:zy(gN(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function gN(t){return Number(t)*1e3}function zP(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return _1("JWT malformed, contained fewer than 3 sections"),null;try{const s=B8(n);return s?JSON.parse(s):(_1("Failed to decode base64 JWT payload"),null)}catch(s){return _1("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function cB(t){const e=zP(t);return pt(e,"internal-error"),pt(typeof e.exp<"u","internal-error"),pt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wp(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yl&&ELe(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ELe({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Le{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qA{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zy(this.lastLoginAt),this.creationTime=zy(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Wp(t,sX(n,{idToken:r}));pt(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?iX(i.providerUserInfo):[],a=kLe(t.providerData,o),l=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new qA(i.createdAt,i.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function TLe(t){const e=bl(t);await qS(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function kLe(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function iX(t){return t.map(e=>{var{providerId:n}=e,r=LP(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ILe(t,e){const n=await nX(t,{},async()=>{const r=W0({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=rX(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",tX.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function NLe(t,e){return yc(t,"POST","/v2/accounts:revokeToken",Ku(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pt(e.idToken,"internal-error"),pt(typeof e.idToken<"u","internal-error"),pt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):cB(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){pt(e.length!==0,"internal-error");const n=cB(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(pt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await ILe(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new dp;return r&&(pt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(pt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(pt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new dp,this.toJSON())}_performRefresh(){return Bl("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rc(t,e){pt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jl{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=LP(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new _Le(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new qA(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Wp(this,this.stsTokenManager.getToken(this.auth,e));return pt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CLe(this,e)}reload(){return TLe(this)}_assign(e){this!==e&&(pt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jl(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){pt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await qS(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ha(this.auth.app))return Promise.reject(Hl(this.auth));const e=await this.getIdToken();return await Wp(this,SLe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,l,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(s=n.email)!==null&&s!==void 0?s:void 0,f=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(l=n._redirectEventId)!==null&&l!==void 0?l:void 0,y=(c=n.createdAt)!==null&&c!==void 0?c:void 0,b=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:v,emailVerified:w,isAnonymous:C,providerData:_,stsTokenManager:E}=n;pt(v&&E,e,"internal-error");const I=dp.fromJSON(this.name,E);pt(typeof v=="string",e,"internal-error"),Rc(d,e.name),Rc(h,e.name),pt(typeof w=="boolean",e,"internal-error"),pt(typeof C=="boolean",e,"internal-error"),Rc(f,e.name),Rc(p,e.name),Rc(m,e.name),Rc(g,e.name),Rc(y,e.name),Rc(b,e.name);const O=new jl({uid:v,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:C,photoURL:p,phoneNumber:f,tenantId:m,stsTokenManager:I,createdAt:y,lastLoginAt:b});return _&&Array.isArray(_)&&(O.providerData=_.map(R=>Object.assign({},R))),g&&(O._redirectEventId=g),O}static async _fromIdTokenResponse(e,n,r=!1){const s=new dp;s.updateFromServerResponse(n);const i=new jl({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await qS(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];pt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?iX(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new dp;a.updateFromIdToken(r);const l=new jl({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new qA(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uB=new Map;function Vl(t){sc(t instanceof Function,"Expected a class definition");let e=uB.get(t);return e?(sc(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,uB.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oX{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oX.type="NONE";const dB=oX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(t,e,n){return`firebase:${t}:${e}:${n}`}class hp{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=T1(this.userKey,s.apiKey,i),this.fullPersistenceKey=T1("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?jl._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new hp(Vl(dB),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Vl(dB);const o=T1(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const u=await c._get(o);if(u){const d=jl._fromJSON(e,u);c!==i&&(a=d),i=c;break}}catch{}const l=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new hp(i,e,r):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new hp(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hB(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(cX(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(aX(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dX(e))return"Blackberry";if(hX(e))return"Webos";if(BP(e))return"Safari";if((e.includes("chrome/")||lX(e))&&!e.includes("edge/"))return"Chrome";if(uX(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function aX(t=xs()){return/firefox\//i.test(t)}function BP(t=xs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lX(t=xs()){return/crios\//i.test(t)}function cX(t=xs()){return/iemobile/i.test(t)}function uX(t=xs()){return/android/i.test(t)}function dX(t=xs()){return/blackberry/i.test(t)}function hX(t=xs()){return/webos/i.test(t)}function tT(t=xs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function $Le(t=xs()){var e;return tT(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function ALe(){return KDe()&&document.documentMode===10}function fX(t=xs()){return tT(t)||uX(t)||hX(t)||dX(t)||/windows phone/i.test(t)||cX(t)}function RLe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pX(t,e=[]){let n;switch(t){case"Browser":n=hB(xs());break;case"Worker":n=`${hB(xs())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${H0}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OLe{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DLe(t,e={}){return yc(t,"GET","/v2/passwordPolicy",Ku(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PLe=6;class LLe{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PLe,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(n=l.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FLe{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new fB(this),this.idTokenSubscription=new fB(this),this.beforeStateQueue=new OLe(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Z8,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vl(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await hp.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await sX(this,{idToken:e}),r=await jl._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Ha(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return pt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await qS(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mLe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ha(this.app))return Promise.reject(Hl(this));const n=e?bl(e):null;return n&&pt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&pt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ha(this.app)?Promise.reject(Hl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ha(this.app)?Promise.reject(Hl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vl(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await DLe(this),n=new LLe(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Xh("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await NLe(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vl(e)||this._popupRedirectResolver;pt(n,this,"argument-error"),this.redirectPersistenceManager=await hp.create(this,[Vl(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const l=e.addObserver(n,r,s);return()=>{o=!0,l()}}else{const l=e.addObserver(n);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pX(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&hLe(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Yh(t){return bl(t)}class fB{constructor(e){this.auth=e,this.observer=null,this.addObserver=ZDe(n=>this.observer=n)}get next(){return pt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nT={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function MLe(t){nT=t}function mX(t){return nT.loadJS(t)}function zLe(){return nT.recaptchaEnterpriseScript}function BLe(){return nT.gapiScript}function jLe(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const VLe="recaptcha-enterprise",ULe="NO_RECAPTCHA";class WLe{constructor(e){this.type=VLe,this.auth=Yh(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{xLe(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new wLe(l);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;lB(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(ULe)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&lB(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=zLe();l.length!==0&&(l+=a),mX(l).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function pB(t,e,n,r=!1){const s=new WLe(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function XA(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await pB(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await pB(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HLe(t,e){const n=eT(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(HS(i,e??{}))return s;ba(s,"already-initialized")}return n.initialize({options:e})}function GLe(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vl);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KLe(t,e,n){const r=Yh(t);pt(r._canInitEmulator,r,"emulator-config-failed"),pt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=gX(e),{host:o,port:a}=qLe(e),l=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),XLe()}function gX(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function qLe(t){const e=gX(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:mB(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:mB(o)}}}function mB(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function XLe(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jP{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bl("not implemented")}_getIdTokenResponse(e){return Bl("not implemented")}_linkToIdToken(e,n){return Bl("not implemented")}_getReauthenticationResolver(e){return Bl("not implemented")}}async function YLe(t,e){return yc(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QLe(t,e){return K0(t,"POST","/v1/accounts:signInWithPassword",Ku(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JLe(t,e){return K0(t,"POST","/v1/accounts:signInWithEmailLink",Ku(t,e))}async function ZLe(t,e){return K0(t,"POST","/v1/accounts:signInWithEmailLink",Ku(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb extends jP{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Lb(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Lb(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return XA(e,n,"signInWithPassword",QLe);case"emailLink":return JLe(e,{email:this._email,oobCode:this._password});default:ba(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return XA(e,r,"signUpPassword",YLe);case"emailLink":return ZLe(e,{idToken:n,email:this._email,oobCode:this._password});default:ba(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fp(t,e){return K0(t,"POST","/v1/accounts:signInWithIdp",Ku(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eFe="http://localhost";class Eh extends jP{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Eh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ba("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=LP(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Eh(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return fp(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,fp(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,fp(e,n)}buildRequest(){const e={requestUri:eFe,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=W0(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tFe(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function nFe(t){const e=Ey(_y(t)).link,n=e?Ey(_y(e)).deep_link_id:null,r=Ey(_y(t)).deep_link_id;return(r?Ey(_y(r)).link:null)||r||n||e||t}class VP{constructor(e){var n,r,s,i,o,a;const l=Ey(_y(e)),c=(n=l.apiKey)!==null&&n!==void 0?n:null,u=(r=l.oobCode)!==null&&r!==void 0?r:null,d=tFe((s=l.mode)!==null&&s!==void 0?s:null);pt(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=nFe(e);try{return new VP(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yg{constructor(){this.providerId=yg.PROVIDER_ID}static credential(e,n){return Lb._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=VP.parseLink(n);return pt(r,"argument-error"),Lb._fromEmailAndCode(e,r.code,r.tenantId)}}yg.PROVIDER_ID="password";yg.EMAIL_PASSWORD_SIGN_IN_METHOD="password";yg.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yX{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0 extends yX{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc extends q0{constructor(){super("facebook.com")}static credential(e){return Eh._fromParams({providerId:Bc.PROVIDER_ID,signInMethod:Bc.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bc.credentialFromTaggedObject(e)}static credentialFromError(e){return Bc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bc.credential(e.oauthAccessToken)}catch{return null}}}Bc.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bc.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc extends q0{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Eh._fromParams({providerId:jc.PROVIDER_ID,signInMethod:jc.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jc.credentialFromTaggedObject(e)}static credentialFromError(e){return jc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return jc.credential(n,r)}catch{return null}}}jc.GOOGLE_SIGN_IN_METHOD="google.com";jc.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc extends q0{constructor(){super("github.com")}static credential(e){return Eh._fromParams({providerId:Vc.PROVIDER_ID,signInMethod:Vc.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Vc.credentialFromTaggedObject(e)}static credentialFromError(e){return Vc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Vc.credential(e.oauthAccessToken)}catch{return null}}}Vc.GITHUB_SIGN_IN_METHOD="github.com";Vc.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc extends q0{constructor(){super("twitter.com")}static credential(e,n){return Eh._fromParams({providerId:Uc.PROVIDER_ID,signInMethod:Uc.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Uc.credentialFromTaggedObject(e)}static credentialFromError(e){return Uc.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Uc.credential(n,r)}catch{return null}}}Uc.TWITTER_SIGN_IN_METHOD="twitter.com";Uc.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rFe(t,e){return K0(t,"POST","/v1/accounts:signUp",Ku(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await jl._fromIdTokenResponse(e,r,s),o=gB(r);return new _h({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=gB(r);return new _h({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function gB(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XS extends yl{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,XS.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new XS(e,n,r,s)}}function bX(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?XS._fromErrorAndOperation(t,i,e,r):i})}async function sFe(t,e,n=!1){const r=await Wp(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return _h._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iFe(t,e,n=!1){const{auth:r}=t;if(Ha(r.app))return Promise.reject(Hl(r));const s="reauthenticate";try{const i=await Wp(t,bX(r,s,e,t),n);pt(i.idToken,r,"internal-error");const o=zP(i.idToken);pt(o,r,"internal-error");const{sub:a}=o;return pt(t.uid===a,r,"user-mismatch"),_h._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ba(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vX(t,e,n=!1){if(Ha(t.app))return Promise.reject(Hl(t));const r="signIn",s=await bX(t,r,e),i=await _h._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function oFe(t,e){return vX(Yh(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wX(t){const e=Yh(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function aFe(t,e,n){if(Ha(t.app))return Promise.reject(Hl(t));const r=Yh(t),o=await XA(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",rFe).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&wX(t),l}),a=await _h._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function lFe(t,e,n){return Ha(t.app)?Promise.reject(Hl(t)):oFe(bl(t),yg.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&wX(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cFe(t,e){return yc(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uFe(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=bl(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Wp(r,cFe(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function dFe(t,e,n,r){return bl(t).onIdTokenChanged(e,n,r)}function hFe(t,e,n){return bl(t).beforeAuthStateChanged(e,n)}function fFe(t,e,n,r){return bl(t).onAuthStateChanged(e,n,r)}const YS="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xX{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(YS,"1"),this.storage.removeItem(YS),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pFe(){const t=xs();return BP(t)||tT(t)}const mFe=1e3,gFe=10;class SX extends xX{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=pFe()&&RLe(),this.fallbackToPolling=fX(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);ALe()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,gFe):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},mFe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}SX.type="LOCAL";const yFe=SX;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CX extends xX{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}CX.type="SESSION";const EX=CX;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bFe(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new rT(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),l=await bFe(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}rT.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UP(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vFe{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const c=UP("",20);s.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const h=d;if(h.data.eventId===c)switch(h.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(h.data.response);break;default:clearTimeout(u),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(){return window}function wFe(t){nl().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _X(){return typeof nl().WorkerGlobalScope<"u"&&typeof nl().importScripts=="function"}async function xFe(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function SFe(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function CFe(){return _X()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TX="firebaseLocalStorageDb",EFe=1,QS="firebaseLocalStorage",kX="fbase_key";class X0{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function sT(t,e){return t.transaction([QS],e?"readwrite":"readonly").objectStore(QS)}function _Fe(){const t=indexedDB.deleteDatabase(TX);return new X0(t).toPromise()}function YA(){const t=indexedDB.open(TX,EFe);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(QS,{keyPath:kX})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(QS)?e(r):(r.close(),await _Fe(),e(await YA()))})})}async function yB(t,e,n){const r=sT(t,!0).put({[kX]:e,value:n});return new X0(r).toPromise()}async function TFe(t,e){const n=sT(t,!1).get(e),r=await new X0(n).toPromise();return r===void 0?null:r.value}function bB(t,e){const n=sT(t,!0).delete(e);return new X0(n).toPromise()}const kFe=800,IFe=3;class IX{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await YA(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>IFe)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _X()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=rT._getInstance(CFe()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await xFe(),!this.activeServiceWorker)return;this.sender=new vFe(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||SFe()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await YA();return await yB(e,YS,"1"),await bB(e,YS),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>yB(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>TFe(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>bB(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=sT(s,!1).getAll();return new X0(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),kFe)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IX.type="LOCAL";const NFe=IX;new G0(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $Fe(t,e){return e?Vl(e):(pt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP extends jP{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return fp(e,this._buildIdpRequest())}_linkToIdToken(e,n){return fp(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return fp(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function AFe(t){return vX(t.auth,new WP(t),t.bypassAuthState)}function RFe(t){const{auth:e,user:n}=t;return pt(n,e,"internal-error"),iFe(n,new WP(t),t.bypassAuthState)}async function OFe(t){const{auth:e,user:n}=t;return pt(n,e,"internal-error"),sFe(n,new WP(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NX{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AFe;case"linkViaPopup":case"linkViaRedirect":return OFe;case"reauthViaPopup":case"reauthViaRedirect":return RFe;default:ba(this.auth,"internal-error")}}resolve(e){sc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sc(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DFe=new G0(2e3,1e4);class ep extends NX{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ep.currentPopupAction&&ep.currentPopupAction.cancel(),ep.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pt(e,this.auth,"internal-error"),e}async onExecution(){sc(this.filter.length===1,"Popup operations only handle one event");const e=UP();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(tl(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(tl(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ep.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(tl(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,DFe.get())};e()}}ep.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PFe="pendingRedirect",k1=new Map;class LFe extends NX{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=k1.get(this.auth._key());if(!e){try{const r=await FFe(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}k1.set(this.auth._key(),e)}return this.bypassAuthState||k1.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function FFe(t,e){const n=BFe(e),r=zFe(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function MFe(t,e){k1.set(t._key(),e)}function zFe(t){return Vl(t._redirectPersistence)}function BFe(t){return T1(PFe,t.config.apiKey,t.name)}async function jFe(t,e,n=!1){if(Ha(t.app))return Promise.reject(Hl(t));const r=Yh(t),s=$Fe(r,e),o=await new LFe(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VFe=10*60*1e3;class UFe{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!WFe(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$X(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(tl(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=VFe&&this.cachedEventUids.clear(),this.cachedEventUids.has(vB(e))}saveEventToCache(e){this.cachedEventUids.add(vB(e)),this.lastProcessedEventTime=Date.now()}}function vB(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $X({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function WFe(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $X(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HFe(t,e={}){return yc(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GFe=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,KFe=/^https?/;async function qFe(t){if(t.config.emulator)return;const{authorizedDomains:e}=await HFe(t);for(const n of e)try{if(XFe(n))return}catch{}ba(t,"unauthorized-domain")}function XFe(t){const e=KA(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!KFe.test(n))return!1;if(GFe.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YFe=new G0(3e4,6e4);function wB(){const t=nl().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function QFe(t){return new Promise((e,n)=>{var r,s,i;function o(){wB(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wB(),n(tl(t,"network-request-failed"))},timeout:YFe.get()})}if(!((s=(r=nl().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=nl().gapi)===null||i===void 0)&&i.load)o();else{const a=jLe("iframefcb");return nl()[a]=()=>{gapi.load?o():n(tl(t,"network-request-failed"))},mX(`${BLe()}?onload=${a}`).catch(l=>n(l))}}).catch(e=>{throw I1=null,e})}let I1=null;function JFe(t){return I1=I1||QFe(t),I1}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZFe=new G0(5e3,15e3),eMe="__/auth/iframe",tMe="emulator/auth/iframe",nMe={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},rMe=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function sMe(t){const e=t.config;pt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?MP(e,tMe):`https://${t.config.authDomain}/${eMe}`,r={apiKey:e.apiKey,appName:t.name,v:H0},s=rMe.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${W0(r).slice(1)}`}async function iMe(t){const e=await JFe(t),n=nl().gapi;return pt(n,t,"internal-error"),e.open({where:document.body,url:sMe(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:nMe,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=tl(t,"network-request-failed"),a=nl().setTimeout(()=>{i(o)},ZFe.get());function l(){nl().clearTimeout(a),s(r)}r.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oMe={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aMe=500,lMe=600,cMe="_blank",uMe="http://localhost";class xB{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function dMe(t,e,n,r=aMe,s=lMe){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},oMe),{width:r.toString(),height:s.toString(),top:i,left:o}),c=xs().toLowerCase();n&&(a=lX(c)?cMe:n),aX(c)&&(e=e||uMe,l.scrollbars="yes");const u=Object.entries(l).reduce((h,[f,p])=>`${h}${f}=${p},`,"");if($Le(c)&&a!=="_self")return hMe(e||"",a),new xB(null);const d=window.open(e||"",a,u);pt(d,t,"popup-blocked");try{d.focus()}catch{}return new xB(d)}function hMe(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fMe="__/auth/handler",pMe="emulator/auth/handler",mMe=encodeURIComponent("fac");async function SB(t,e,n,r,s,i){pt(t.config.authDomain,t,"auth-domain-config-required"),pt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:H0,eventId:s};if(e instanceof yX){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",JDe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries({}))o[u]=d}if(e instanceof q0){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await t._getAppCheckToken(),c=l?`#${mMe}=${encodeURIComponent(l)}`:"";return`${gMe(t)}?${W0(a).slice(1)}${c}`}function gMe({config:t}){return t.emulator?MP(t,pMe):`https://${t.authDomain}/${fMe}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN="webStorageSupport";class yMe{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EX,this._completeRedirectFn=jFe,this._overrideRedirectResult=MFe}async _openPopup(e,n,r,s){var i;sc((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await SB(e,n,r,KA(),s);return dMe(e,o,UP())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await SB(e,n,r,KA(),s);return wFe(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(sc(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await iMe(e),r=new UFe(e);return n.register("authEvent",s=>(pt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(yN,{type:yN},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[yN];o!==void 0&&n(!!o),ba(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=qFe(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fX()||BP()||tT()}}const bMe=yMe;var CB="@firebase/auth",EB="1.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vMe{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){pt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wMe(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xMe(t){rc(new hl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;pt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pX(t)},c=new FLe(r,s,i,l);return GLe(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),rc(new hl("auth-internal",e=>{const n=Yh(e.getProvider("auth").getImmediate());return(r=>new vMe(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),el(CB,EB,wMe(t)),el(CB,EB,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SMe=5*60,CMe=V8("authIdTokenMaxAge")||SMe;let _B=null;const EMe=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>CMe)return;const s=n==null?void 0:n.token;_B!==s&&(_B=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function iT(t=tLe()){const e=eT(t,"auth");if(e.isInitialized())return e.getImmediate();const n=HLe(t,{popupRedirectResolver:bMe,persistence:[NFe,yFe,EX]}),r=V8("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=EMe(i.toString());hFe(n,o,()=>o(n.currentUser)),dFe(n,a=>o(a))}}const s=UDe("auth");return s&&KLe(n,`http://${s}`),n}function _Me(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}MLe({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=tl("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",_Me().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xMe("Browser");const HP="/assets/AveryBit-Full-114-CQIvionj.webp";var AX={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function n(){for(var i="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(i=s(i,r(a)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var a in i)e.call(i,a)&&i[a]&&(o=s(o,a));return o}function s(i,o){return o?i?i+" "+o:i+o:i}t.exports?(n.default=n,t.exports=n):window.classNames=n})()})(AX);var TMe=AX.exports;const wn=$h(TMe);function Zt(){return Zt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Zt.apply(this,arguments)}function vl(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function TB(t){return"default"+t.charAt(0).toUpperCase()+t.substr(1)}function kMe(t){var e=IMe(t,"string");return typeof e=="symbol"?e:String(e)}function IMe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function NMe(t,e,n){var r=N.useRef(t!==void 0),s=N.useState(e),i=s[0],o=s[1],a=t!==void 0,l=r.current;return r.current=a,!a&&l&&i!==e&&o(e),[a?t:i,N.useCallback(function(c){for(var u=arguments.length,d=new Array(u>1?u-1:0),h=1;h<u;h++)d[h-1]=arguments[h];n&&n.apply(void 0,[c].concat(d)),o(c)},[n])]}function RX(t,e){return Object.keys(e).reduce(function(n,r){var s,i=n,o=i[TB(r)],a=i[r],l=vl(i,[TB(r),r].map(kMe)),c=e[r],u=NMe(a,o,t[c]),d=u[0],h=u[1];return Zt({},l,(s={},s[r]=d,s[c]=h,s))},t)}function QA(t,e){return QA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},QA(t,e)}function $Me(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,QA(t,e)}const AMe=["xxl","xl","lg","md","sm","xs"],RMe="xs",oT=N.createContext({prefixes:{},breakpoints:AMe,minBreakpoint:RMe});function fr(t,e){const{prefixes:n}=N.useContext(oT);return t||n[e]||e}function OX(){const{breakpoints:t}=N.useContext(oT);return t}function DX(){const{minBreakpoint:t}=N.useContext(oT);return t}function PX(){const{dir:t}=N.useContext(oT);return t==="rtl"}function Y0(t){return t&&t.ownerDocument||document}function OMe(t){var e=Y0(t);return e&&e.defaultView||window}function DMe(t,e){return OMe(t).getComputedStyle(t,e)}var PMe=/([A-Z])/g;function LMe(t){return t.replace(PMe,"-$1").toLowerCase()}var FMe=/^ms-/;function e1(t){return LMe(t).replace(FMe,"-ms-")}var MMe=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function zMe(t){return!!(t&&MMe.test(t))}function Jd(t,e){var n="",r="";if(typeof e=="string")return t.style.getPropertyValue(e1(e))||DMe(t).getPropertyValue(e1(e));Object.keys(e).forEach(function(s){var i=e[s];!i&&i!==0?t.style.removeProperty(e1(s)):zMe(s)?r+=s+"("+i+") ":n+=e1(s)+": "+i+";"}),r&&(n+="transform: "+r+";"),t.style.cssText+=";"+n}var LX={exports:{}},BMe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",jMe=BMe,VMe=jMe;function FX(){}function MX(){}MX.resetWarningCache=FX;var UMe=function(){function t(r,s,i,o,a,l){if(l!==VMe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:MX,resetWarningCache:FX};return n.PropTypes=n,n};LX.exports=UMe();var zX=LX.exports;const bN=$h(zX),kB={disabled:!1},BX=kn.createContext(null);var WMe=function(e){return e.scrollTop},Ty="unmounted",Ed="exited",Fc="entering",$d="entered",JA="exiting",bc=function(t){$Me(e,t);function e(r,s){var i;i=t.call(this,r,s)||this;var o=s,a=o&&!o.isMounting?r.enter:r.appear,l;return i.appearStatus=null,r.in?a?(l=Ed,i.appearStatus=Fc):l=$d:r.unmountOnExit||r.mountOnEnter?l=Ty:l=Ed,i.state={status:l},i.nextCallback=null,i}e.getDerivedStateFromProps=function(s,i){var o=s.in;return o&&i.status===Ty?{status:Ed}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var i=null;if(s!==this.props){var o=this.state.status;this.props.in?o!==Fc&&o!==$d&&(i=Fc):(o===Fc||o===$d)&&(i=JA)}this.updateStatus(!1,i)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,i,o,a;return i=o=a=s,s!=null&&typeof s!="number"&&(i=s.exit,o=s.enter,a=s.appear!==void 0?s.appear:o),{exit:i,enter:o,appear:a}},n.updateStatus=function(s,i){if(s===void 0&&(s=!1),i!==null)if(this.cancelNextCallback(),i===Fc){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Dd.findDOMNode(this);o&&WMe(o)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ed&&this.setState({status:Ty})},n.performEnter=function(s){var i=this,o=this.props.enter,a=this.context?this.context.isMounting:s,l=this.props.nodeRef?[a]:[Dd.findDOMNode(this),a],c=l[0],u=l[1],d=this.getTimeouts(),h=a?d.appear:d.enter;if(!s&&!o||kB.disabled){this.safeSetState({status:$d},function(){i.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:Fc},function(){i.props.onEntering(c,u),i.onTransitionEnd(h,function(){i.safeSetState({status:$d},function(){i.props.onEntered(c,u)})})})},n.performExit=function(){var s=this,i=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Dd.findDOMNode(this);if(!i||kB.disabled){this.safeSetState({status:Ed},function(){s.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:JA},function(){s.props.onExiting(a),s.onTransitionEnd(o.exit,function(){s.safeSetState({status:Ed},function(){s.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,i){i=this.setNextCallback(i),this.setState(s,i)},n.setNextCallback=function(s){var i=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,i.nextCallback=null,s(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(s,i){this.setNextCallback(i);var o=this.props.nodeRef?this.props.nodeRef.current:Dd.findDOMNode(this),a=s==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Ty)return null;var i=this.props,o=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var a=vl(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return kn.createElement(BX.Provider,{value:null},typeof o=="function"?o(s,a):kn.cloneElement(kn.Children.only(o),a))},e}(kn.Component);bc.contextType=BX;bc.propTypes={};function _f(){}bc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:_f,onEntering:_f,onEntered:_f,onExit:_f,onExiting:_f,onExited:_f};bc.UNMOUNTED=Ty;bc.EXITED=Ed;bc.ENTERING=Fc;bc.ENTERED=$d;bc.EXITING=JA;const bg=!!(typeof window<"u"&&window.document&&window.document.createElement);var ZA=!1,e2=!1;try{var vN={get passive(){return ZA=!0},get once(){return e2=ZA=!0}};bg&&(window.addEventListener("test",vN,vN),window.removeEventListener("test",vN,!0))}catch{}function GP(t,e,n,r){if(r&&typeof r!="boolean"&&!e2){var s=r.once,i=r.capture,o=n;!e2&&s&&(o=n.__once||function a(l){this.removeEventListener(e,a,i),n.call(this,l)},n.__once=o),t.addEventListener(e,o,ZA?r:i)}t.addEventListener(e,n,r)}function t2(t,e,n,r){var s=r&&typeof r!="boolean"?r.capture:r;t.removeEventListener(e,n,s),n.__once&&t.removeEventListener(e,n.__once,s)}function Yc(t,e,n,r){return GP(t,e,n,r),function(){t2(t,e,n,r)}}function HMe(t,e,n,r){if(r===void 0&&(r=!0),t){var s=document.createEvent("HTMLEvents");s.initEvent(e,n,r),t.dispatchEvent(s)}}function GMe(t){var e=Jd(t,"transitionDuration")||"",n=e.indexOf("ms")===-1?1e3:1;return parseFloat(e)*n}function KMe(t,e,n){n===void 0&&(n=5);var r=!1,s=setTimeout(function(){r||HMe(t,"transitionend",!0)},e+n),i=Yc(t,"transitionend",function(){r=!0},{once:!0});return function(){clearTimeout(s),i()}}function jX(t,e,n,r){n==null&&(n=GMe(t)||0);var s=KMe(t,n,r),i=Yc(t,"transitionend",e);return function(){s(),i()}}function IB(t,e){const n=Jd(t,e)||"",r=n.indexOf("ms")===-1?1e3:1;return parseFloat(n)*r}function qMe(t,e){const n=IB(t,"transitionDuration"),r=IB(t,"transitionDelay"),s=jX(t,i=>{i.target===t&&(s(),e(i))},n+r)}function XMe(t){t.offsetHeight}const NB=t=>!t||typeof t=="function"?t:e=>{t.current=e};function YMe(t,e){const n=NB(t),r=NB(e);return s=>{n&&n(s),r&&r(s)}}function qu(t,e){return N.useMemo(()=>YMe(t,e),[t,e])}function QMe(t){return t&&"setState"in t?Dd.findDOMNode(t):t??null}const JMe=kn.forwardRef(({onEnter:t,onEntering:e,onEntered:n,onExit:r,onExiting:s,onExited:i,addEndListener:o,children:a,childRef:l,...c},u)=>{const d=N.useRef(null),h=qu(d,l),f=_=>{h(QMe(_))},p=_=>E=>{_&&d.current&&_(d.current,E)},m=N.useCallback(p(t),[t]),g=N.useCallback(p(e),[e]),y=N.useCallback(p(n),[n]),b=N.useCallback(p(r),[r]),v=N.useCallback(p(s),[s]),w=N.useCallback(p(i),[i]),C=N.useCallback(p(o),[o]);return $.jsx(bc,{ref:u,...c,onEnter:m,onEntered:y,onEntering:g,onExit:b,onExited:w,onExiting:v,addEndListener:C,nodeRef:d,children:typeof a=="function"?(_,E)=>a(_,{...E,ref:f}):kn.cloneElement(a,{ref:f})})});function ZMe(t){const e=N.useRef(t);return N.useEffect(()=>{e.current=t},[t]),e}function wr(t){const e=ZMe(t);return N.useCallback(function(...n){return e.current&&e.current(...n)},[e])}const e3e=t=>N.forwardRef((e,n)=>$.jsx("div",{...e,ref:n,className:wn(e.className,t)}));function VX(){return N.useState(null)}function t3e(t,e,n,r=!1){const s=wr(n);N.useEffect(()=>{const i=typeof t=="function"?t():t;return i.addEventListener(e,s,r),()=>i.removeEventListener(e,s,r)},[t])}function UX(){const t=N.useRef(!0),e=N.useRef(()=>t.current);return N.useEffect(()=>(t.current=!0,()=>{t.current=!1}),[]),e.current}function WX(t){const e=N.useRef(null);return N.useEffect(()=>{e.current=t}),e.current}const n3e=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",r3e=typeof document<"u",n2=r3e||n3e?N.useLayoutEffect:N.useEffect,s3e=["as","disabled"];function i3e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function o3e(t){return!t||t.trim()==="#"}function KP({tagName:t,disabled:e,href:n,target:r,rel:s,role:i,onClick:o,tabIndex:a=0,type:l}){t||(n!=null||r!=null||s!=null?t="a":t="button");const c={tagName:t};if(t==="button")return[{type:l||"button",disabled:e},c];const u=h=>{if((e||t==="a"&&o3e(n))&&h.preventDefault(),e){h.stopPropagation();return}o==null||o(h)},d=h=>{h.key===" "&&(h.preventDefault(),u(h))};return t==="a"&&(n||(n="#"),e&&(n=void 0)),[{role:i??"button",disabled:void 0,tabIndex:e?void 0:a,href:n,target:t==="a"?r:void 0,"aria-disabled":e||void 0,rel:t==="a"?s:void 0,onClick:u,onKeyDown:d},c]}const qP=N.forwardRef((t,e)=>{let{as:n,disabled:r}=t,s=i3e(t,s3e);const[i,{tagName:o}]=KP(Object.assign({tagName:n,disabled:r},s));return $.jsx(o,Object.assign({},s,i,{ref:e}))});qP.displayName="Button";const a3e=["onKeyDown"];function l3e(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function c3e(t){return!t||t.trim()==="#"}const XP=N.forwardRef((t,e)=>{let{onKeyDown:n}=t,r=l3e(t,a3e);const[s]=KP(Object.assign({tagName:"a"},r)),i=wr(o=>{s.onKeyDown(o),n==null||n(o)});return c3e(r.href)||r.role==="button"?$.jsx("a",Object.assign({ref:e},r,s,{onKeyDown:i})):$.jsx("a",Object.assign({ref:e},r,{onKeyDown:n}))});XP.displayName="Anchor";const u3e={[Fc]:"show",[$d]:"show"},YP=N.forwardRef(({className:t,children:e,transitionClasses:n={},onEnter:r,...s},i)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},a=N.useCallback((l,c)=>{XMe(l),r==null||r(l,c)},[r]);return $.jsx(JMe,{ref:i,addEndListener:qMe,...o,onEnter:a,childRef:e.ref,children:(l,c)=>N.cloneElement(e,{...c,className:wn("fade",t,e.props.className,u3e[l],n[l])})})});YP.displayName="Fade";const d3e={"aria-label":bN.string,onClick:bN.func,variant:bN.oneOf(["white"])},QP=N.forwardRef(({className:t,variant:e,"aria-label":n="Close",...r},s)=>$.jsx("button",{ref:s,type:"button",className:wn("btn-close",e&&`btn-close-${e}`,t),"aria-label":n,...r}));QP.displayName="CloseButton";QP.propTypes=d3e;const Fb=N.forwardRef(({as:t,bsPrefix:e,variant:n="primary",size:r,active:s=!1,disabled:i=!1,className:o,...a},l)=>{const c=fr(e,"btn"),[u,{tagName:d}]=KP({tagName:t,disabled:i,...a}),h=d;return $.jsx(h,{...u,...a,ref:l,disabled:i,className:wn(o,c,s&&"active",n&&`${c}-${n}`,r&&`${c}-${r}`,a.href&&i&&"disabled")})});Fb.displayName="Button";const HX=N.createContext(null);HX.displayName="CardHeaderContext";function h3e(t){const e=N.useRef(t);return e.current=t,e}function GX(t){const e=h3e(t);N.useEffect(()=>()=>e.current(),[])}function f3e({as:t,bsPrefix:e,className:n,...r}){e=fr(e,"col");const s=OX(),i=DX(),o=[],a=[];return s.forEach(l=>{const c=r[l];delete r[l];let u,d,h;typeof c=="object"&&c!=null?{span:u,offset:d,order:h}=c:u=c;const f=l!==i?`-${l}`:"";u&&o.push(u===!0?`${e}${f}`:`${e}${f}-${u}`),h!=null&&a.push(`order${f}-${h}`),d!=null&&a.push(`offset${f}-${d}`)}),[{...r,className:wn(n,...o,...a)},{as:t,bsPrefix:e,spans:o}]}const Zd=N.forwardRef((t,e)=>{const[{className:n,...r},{as:s="div",bsPrefix:i,spans:o}]=f3e(t);return $.jsx(s,{...r,ref:e,className:wn(n,!o.length&&i)})});Zd.displayName="Col";const pp=N.forwardRef(({bsPrefix:t,fluid:e=!1,as:n="div",className:r,...s},i)=>{const o=fr(t,"container"),a=typeof e=="string"?`-${e}`:"-fluid";return $.jsx(n,{ref:i,...s,className:wn(r,e?`${o}${a}`:o)})});pp.displayName="Container";var p3e=Function.prototype.bind.call(Function.prototype.call,[].slice);function Pl(t,e){return p3e(t.querySelectorAll(e))}function m3e(t,e,n){const r=N.useRef(t!==void 0),[s,i]=N.useState(e),o=t!==void 0,a=r.current;return r.current=o,!o&&a&&s!==e&&i(e),[o?t:s,N.useCallback((...l)=>{const[c,...u]=l;let d=n==null?void 0:n(c,...u);return i(c),d},[n])]}function KX(){const[,t]=N.useReducer(e=>!e,!1);return t}const aT=N.createContext(null);var $B=Object.prototype.hasOwnProperty;function AB(t,e,n){for(n of t.keys())if(By(n,e))return n}function By(t,e){var n,r,s;if(t===e)return!0;if(t&&e&&(n=t.constructor)===e.constructor){if(n===Date)return t.getTime()===e.getTime();if(n===RegExp)return t.toString()===e.toString();if(n===Array){if((r=t.length)===e.length)for(;r--&&By(t[r],e[r]););return r===-1}if(n===Set){if(t.size!==e.size)return!1;for(r of t)if(s=r,s&&typeof s=="object"&&(s=AB(e,s),!s)||!e.has(s))return!1;return!0}if(n===Map){if(t.size!==e.size)return!1;for(r of t)if(s=r[0],s&&typeof s=="object"&&(s=AB(e,s),!s)||!By(r[1],e.get(s)))return!1;return!0}if(n===ArrayBuffer)t=new Uint8Array(t),e=new Uint8Array(e);else if(n===DataView){if((r=t.byteLength)===e.byteLength)for(;r--&&t.getInt8(r)===e.getInt8(r););return r===-1}if(ArrayBuffer.isView(t)){if((r=t.byteLength)===e.byteLength)for(;r--&&t[r]===e[r];);return r===-1}if(!n||typeof t=="object"){r=0;for(n in t)if($B.call(t,n)&&++r&&!$B.call(e,n)||!(n in e)||!By(t[n],e[n]))return!1;return Object.keys(e).length===r}}return t!==t&&e!==e}function g3e(t){const e=UX();return[t[0],N.useCallback(n=>{if(e())return t[1](n)},[e,t[1]])]}var Ls="top",qi="bottom",Xi="right",Fs="left",lT="auto",vg=[Ls,qi,Xi,Fs],Th="start",Hp="end",qX="clippingParents",JP="viewport",zf="popper",XX="reference",r2=vg.reduce(function(t,e){return t.concat([e+"-"+Th,e+"-"+Hp])},[]),ZP=[].concat(vg,[lT]).reduce(function(t,e){return t.concat([e,e+"-"+Th,e+"-"+Hp])},[]),YX="beforeRead",QX="read",JX="afterRead",ZX="beforeMain",e7="main",t7="afterMain",n7="beforeWrite",r7="write",s7="afterWrite",i7=[YX,QX,JX,ZX,e7,t7,n7,r7,s7];function rl(t){return t.split("-")[0]}function Yi(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function kh(t){var e=Yi(t).Element;return t instanceof e||t instanceof Element}function Ro(t){var e=Yi(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function eL(t){if(typeof ShadowRoot>"u")return!1;var e=Yi(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}var eh=Math.max,JS=Math.min,Gp=Math.round;function s2(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function o7(){return!/^((?!chrome|android).)*safari/i.test(s2())}function Kp(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),s=1,i=1;e&&Ro(t)&&(s=t.offsetWidth>0&&Gp(r.width)/t.offsetWidth||1,i=t.offsetHeight>0&&Gp(r.height)/t.offsetHeight||1);var o=kh(t)?Yi(t):window,a=o.visualViewport,l=!o7()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/s,u=(r.top+(l&&a?a.offsetTop:0))/i,d=r.width/s,h=r.height/i;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function tL(t){var e=Kp(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function a7(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&eL(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function fl(t){return t?(t.nodeName||"").toLowerCase():null}function ic(t){return Yi(t).getComputedStyle(t)}function y3e(t){return["table","td","th"].indexOf(fl(t))>=0}function Xu(t){return((kh(t)?t.ownerDocument:t.document)||window.document).documentElement}function cT(t){return fl(t)==="html"?t:t.assignedSlot||t.parentNode||(eL(t)?t.host:null)||Xu(t)}function RB(t){return!Ro(t)||ic(t).position==="fixed"?null:t.offsetParent}function b3e(t){var e=/firefox/i.test(s2()),n=/Trident/i.test(s2());if(n&&Ro(t)){var r=ic(t);if(r.position==="fixed")return null}var s=cT(t);for(eL(s)&&(s=s.host);Ro(s)&&["html","body"].indexOf(fl(s))<0;){var i=ic(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function Q0(t){for(var e=Yi(t),n=RB(t);n&&y3e(n)&&ic(n).position==="static";)n=RB(n);return n&&(fl(n)==="html"||fl(n)==="body"&&ic(n).position==="static")?e:n||b3e(t)||e}function nL(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function jy(t,e,n){return eh(t,JS(e,n))}function v3e(t,e,n){var r=jy(t,e,n);return r>n?n:r}function l7(){return{top:0,right:0,bottom:0,left:0}}function c7(t){return Object.assign({},l7(),t)}function u7(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var w3e=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,c7(typeof e!="number"?e:u7(e,vg))};function x3e(t){var e,n=t.state,r=t.name,s=t.options,i=n.elements.arrow,o=n.modifiersData.popperOffsets,a=rl(n.placement),l=nL(a),c=[Fs,Xi].indexOf(a)>=0,u=c?"height":"width";if(!(!i||!o)){var d=w3e(s.padding,n),h=tL(i),f=l==="y"?Ls:Fs,p=l==="y"?qi:Xi,m=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],g=o[l]-n.rects.reference[l],y=Q0(i),b=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,v=m/2-g/2,w=d[f],C=b-h[u]-d[p],_=b/2-h[u]/2+v,E=jy(w,_,C),I=l;n.modifiersData[r]=(e={},e[I]=E,e.centerOffset=E-_,e)}}function S3e(t){var e=t.state,n=t.options,r=n.element,s=r===void 0?"[data-popper-arrow]":r;s!=null&&(typeof s=="string"&&(s=e.elements.popper.querySelector(s),!s)||a7(e.elements.popper,s)&&(e.elements.arrow=s))}const rL={name:"arrow",enabled:!0,phase:"main",fn:x3e,effect:S3e,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function qp(t){return t.split("-")[1]}var C3e={top:"auto",right:"auto",bottom:"auto",left:"auto"};function E3e(t,e){var n=t.x,r=t.y,s=e.devicePixelRatio||1;return{x:Gp(n*s)/s||0,y:Gp(r*s)/s||0}}function OB(t){var e,n=t.popper,r=t.popperRect,s=t.placement,i=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=o.x,f=h===void 0?0:h,p=o.y,m=p===void 0?0:p,g=typeof u=="function"?u({x:f,y:m}):{x:f,y:m};f=g.x,m=g.y;var y=o.hasOwnProperty("x"),b=o.hasOwnProperty("y"),v=Fs,w=Ls,C=window;if(c){var _=Q0(n),E="clientHeight",I="clientWidth";if(_===Yi(n)&&(_=Xu(n),ic(_).position!=="static"&&a==="absolute"&&(E="scrollHeight",I="scrollWidth")),_=_,s===Ls||(s===Fs||s===Xi)&&i===Hp){w=qi;var O=d&&_===C&&C.visualViewport?C.visualViewport.height:_[E];m-=O-r.height,m*=l?1:-1}if(s===Fs||(s===Ls||s===qi)&&i===Hp){v=Xi;var R=d&&_===C&&C.visualViewport?C.visualViewport.width:_[I];f-=R-r.width,f*=l?1:-1}}var z=Object.assign({position:a},c&&C3e),B=u===!0?E3e({x:f,y:m},Yi(n)):{x:f,y:m};if(f=B.x,m=B.y,l){var j;return Object.assign({},z,(j={},j[w]=b?"0":"",j[v]=y?"0":"",j.transform=(C.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",j))}return Object.assign({},z,(e={},e[w]=b?m+"px":"",e[v]=y?f+"px":"",e.transform="",e))}function _3e(t){var e=t.state,n=t.options,r=n.gpuAcceleration,s=r===void 0?!0:r,i=n.adaptive,o=i===void 0?!0:i,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:rl(e.placement),variation:qp(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,OB(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,OB(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const uT={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:_3e,data:{}};var t1={passive:!0};function T3e(t){var e=t.state,n=t.instance,r=t.options,s=r.scroll,i=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=Yi(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&c.forEach(function(u){u.addEventListener("scroll",n.update,t1)}),a&&l.addEventListener("resize",n.update,t1),function(){i&&c.forEach(function(u){u.removeEventListener("scroll",n.update,t1)}),a&&l.removeEventListener("resize",n.update,t1)}}const dT={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:T3e,data:{}};var k3e={left:"right",right:"left",bottom:"top",top:"bottom"};function N1(t){return t.replace(/left|right|bottom|top/g,function(e){return k3e[e]})}var I3e={start:"end",end:"start"};function DB(t){return t.replace(/start|end/g,function(e){return I3e[e]})}function sL(t){var e=Yi(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function iL(t){return Kp(Xu(t)).left+sL(t).scrollLeft}function N3e(t,e){var n=Yi(t),r=Xu(t),s=n.visualViewport,i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;var c=o7();(c||!c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a+iL(t),y:l}}function $3e(t){var e,n=Xu(t),r=sL(t),s=(e=t.ownerDocument)==null?void 0:e.body,i=eh(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=eh(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+iL(t),l=-r.scrollTop;return ic(s||n).direction==="rtl"&&(a+=eh(n.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:a,y:l}}function oL(t){var e=ic(t),n=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function d7(t){return["html","body","#document"].indexOf(fl(t))>=0?t.ownerDocument.body:Ro(t)&&oL(t)?t:d7(cT(t))}function Vy(t,e){var n;e===void 0&&(e=[]);var r=d7(t),s=r===((n=t.ownerDocument)==null?void 0:n.body),i=Yi(r),o=s?[i].concat(i.visualViewport||[],oL(r)?r:[]):r,a=e.concat(o);return s?a:a.concat(Vy(cT(o)))}function i2(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function A3e(t,e){var n=Kp(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function PB(t,e,n){return e===JP?i2(N3e(t,n)):kh(e)?A3e(e,n):i2($3e(Xu(t)))}function R3e(t){var e=Vy(cT(t)),n=["absolute","fixed"].indexOf(ic(t).position)>=0,r=n&&Ro(t)?Q0(t):t;return kh(r)?e.filter(function(s){return kh(s)&&a7(s,r)&&fl(s)!=="body"}):[]}function O3e(t,e,n,r){var s=e==="clippingParents"?R3e(t):[].concat(e),i=[].concat(s,[n]),o=i[0],a=i.reduce(function(l,c){var u=PB(t,c,r);return l.top=eh(u.top,l.top),l.right=JS(u.right,l.right),l.bottom=JS(u.bottom,l.bottom),l.left=eh(u.left,l.left),l},PB(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function h7(t){var e=t.reference,n=t.element,r=t.placement,s=r?rl(r):null,i=r?qp(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(s){case Ls:l={x:o,y:e.y-n.height};break;case qi:l={x:o,y:e.y+e.height};break;case Xi:l={x:e.x+e.width,y:a};break;case Fs:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=s?nL(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(i){case Th:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Hp:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Xp(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=r===void 0?t.placement:r,i=n.strategy,o=i===void 0?t.strategy:i,a=n.boundary,l=a===void 0?qX:a,c=n.rootBoundary,u=c===void 0?JP:c,d=n.elementContext,h=d===void 0?zf:d,f=n.altBoundary,p=f===void 0?!1:f,m=n.padding,g=m===void 0?0:m,y=c7(typeof g!="number"?g:u7(g,vg)),b=h===zf?XX:zf,v=t.rects.popper,w=t.elements[p?b:h],C=O3e(kh(w)?w:w.contextElement||Xu(t.elements.popper),l,u,o),_=Kp(t.elements.reference),E=h7({reference:_,element:v,strategy:"absolute",placement:s}),I=i2(Object.assign({},v,E)),O=h===zf?I:_,R={top:C.top-O.top+y.top,bottom:O.bottom-C.bottom+y.bottom,left:C.left-O.left+y.left,right:O.right-C.right+y.right},z=t.modifiersData.offset;if(h===zf&&z){var B=z[s];Object.keys(R).forEach(function(j){var G=[Xi,qi].indexOf(j)>=0?1:-1,U=[Ls,qi].indexOf(j)>=0?"y":"x";R[j]+=B[U]*G})}return R}function D3e(t,e){e===void 0&&(e={});var n=e,r=n.placement,s=n.boundary,i=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?ZP:l,u=qp(r),d=u?a?r2:r2.filter(function(p){return qp(p)===u}):vg,h=d.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=d);var f=h.reduce(function(p,m){return p[m]=Xp(t,{placement:m,boundary:s,rootBoundary:i,padding:o})[rl(m)],p},{});return Object.keys(f).sort(function(p,m){return f[p]-f[m]})}function P3e(t){if(rl(t)===lT)return[];var e=N1(t);return[DB(t),e,DB(e)]}function L3e(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,m=n.allowedAutoPlacements,g=e.options.placement,y=rl(g),b=y===g,v=l||(b||!p?[N1(g)]:P3e(g)),w=[g].concat(v).reduce(function(ue,de){return ue.concat(rl(de)===lT?D3e(e,{placement:de,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):de)},[]),C=e.rects.reference,_=e.rects.popper,E=new Map,I=!0,O=w[0],R=0;R<w.length;R++){var z=w[R],B=rl(z),j=qp(z)===Th,G=[Ls,qi].indexOf(B)>=0,U=G?"width":"height",Q=Xp(e,{placement:z,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),se=G?j?Xi:Fs:j?qi:Ls;C[U]>_[U]&&(se=N1(se));var V=N1(se),W=[];if(i&&W.push(Q[B]<=0),a&&W.push(Q[se]<=0,Q[V]<=0),W.every(function(ue){return ue})){O=z,I=!1;break}E.set(z,W)}if(I)for(var L=p?3:1,J=function(de){var ye=w.find(function(Ee){var ge=E.get(Ee);if(ge)return ge.slice(0,de).every(function(Pe){return Pe})});if(ye)return O=ye,"break"},Z=L;Z>0;Z--){var ie=J(Z);if(ie==="break")break}e.placement!==O&&(e.modifiersData[r]._skip=!0,e.placement=O,e.reset=!0)}}const aL={name:"flip",enabled:!0,phase:"main",fn:L3e,requiresIfExists:["offset"],data:{_skip:!1}};function LB(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function FB(t){return[Ls,Xi,qi,Fs].some(function(e){return t[e]>=0})}function F3e(t){var e=t.state,n=t.name,r=e.rects.reference,s=e.rects.popper,i=e.modifiersData.preventOverflow,o=Xp(e,{elementContext:"reference"}),a=Xp(e,{altBoundary:!0}),l=LB(o,r),c=LB(a,s,i),u=FB(l),d=FB(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const lL={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:F3e};function M3e(t,e,n){var r=rl(t),s=[Fs,Ls].indexOf(r)>=0?-1:1,i=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=i[0],a=i[1];return o=o||0,a=(a||0)*s,[Fs,Xi].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function z3e(t){var e=t.state,n=t.options,r=t.name,s=n.offset,i=s===void 0?[0,0]:s,o=ZP.reduce(function(u,d){return u[d]=M3e(d,e.rects,i),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const cL={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:z3e};function B3e(t){var e=t.state,n=t.name;e.modifiersData[n]=h7({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const hT={name:"popperOffsets",enabled:!0,phase:"read",fn:B3e,data:{}};function j3e(t){return t==="x"?"y":"x"}function V3e(t){var e=t.state,n=t.options,r=t.name,s=n.mainAxis,i=s===void 0?!0:s,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,m=p===void 0?0:p,g=Xp(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=rl(e.placement),b=qp(e.placement),v=!b,w=nL(y),C=j3e(w),_=e.modifiersData.popperOffsets,E=e.rects.reference,I=e.rects.popper,O=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,R=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),z=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,B={x:0,y:0};if(_){if(i){var j,G=w==="y"?Ls:Fs,U=w==="y"?qi:Xi,Q=w==="y"?"height":"width",se=_[w],V=se+g[G],W=se-g[U],L=f?-I[Q]/2:0,J=b===Th?E[Q]:I[Q],Z=b===Th?-I[Q]:-E[Q],ie=e.elements.arrow,ue=f&&ie?tL(ie):{width:0,height:0},de=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:l7(),ye=de[G],Ee=de[U],ge=jy(0,E[Q],ue[Q]),Pe=v?E[Q]/2-L-ge-ye-R.mainAxis:J-ge-ye-R.mainAxis,We=v?-E[Q]/2+L+ge+Ee+R.mainAxis:Z+ge+Ee+R.mainAxis,le=e.elements.arrow&&Q0(e.elements.arrow),Ve=le?w==="y"?le.clientTop||0:le.clientLeft||0:0,Je=(j=z==null?void 0:z[w])!=null?j:0,at=se+Pe-Je-Ve,_e=se+We-Je,ze=jy(f?JS(V,at):V,se,f?eh(W,_e):W);_[w]=ze,B[w]=ze-se}if(a){var it,Xe=w==="x"?Ls:Fs,xn=w==="x"?qi:Xi,Ne=_[C],Bt=C==="y"?"height":"width",At=Ne+g[Xe],Sn=Ne-g[xn],Wt=[Ls,Fs].indexOf(y)!==-1,tn=(it=z==null?void 0:z[C])!=null?it:0,rt=Wt?At:Ne-E[Bt]-I[Bt]-tn+R.altAxis,Vt=Wt?Ne+E[Bt]+I[Bt]-tn-R.altAxis:Sn,Cn=f&&Wt?v3e(rt,Ne,Vt):jy(f?rt:At,Ne,f?Vt:Sn);_[C]=Cn,B[C]=Cn-Ne}e.modifiersData[r]=B}}const uL={name:"preventOverflow",enabled:!0,phase:"main",fn:V3e,requiresIfExists:["offset"]};function U3e(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function W3e(t){return t===Yi(t)||!Ro(t)?sL(t):U3e(t)}function H3e(t){var e=t.getBoundingClientRect(),n=Gp(e.width)/t.offsetWidth||1,r=Gp(e.height)/t.offsetHeight||1;return n!==1||r!==1}function G3e(t,e,n){n===void 0&&(n=!1);var r=Ro(e),s=Ro(e)&&H3e(e),i=Xu(e),o=Kp(t,s,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((fl(e)!=="body"||oL(i))&&(a=W3e(e)),Ro(e)?(l=Kp(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=iL(i))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function K3e(t){var e=new Map,n=new Set,r=[];t.forEach(function(i){e.set(i.name,i)});function s(i){n.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&s(l)}}),r.push(i)}return t.forEach(function(i){n.has(i.name)||s(i)}),r}function q3e(t){var e=K3e(t);return i7.reduce(function(n,r){return n.concat(e.filter(function(s){return s.phase===r}))},[])}function X3e(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Y3e(t){var e=t.reduce(function(n,r){var s=n[r.name];return n[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var MB={placement:"bottom",modifiers:[],strategy:"absolute"};function zB(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function J0(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,s=e.defaultOptions,i=s===void 0?MB:s;return function(a,l,c){c===void 0&&(c=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},MB,i),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(y){var b=typeof y=="function"?y(u.options):y;m(),u.options=Object.assign({},i,u.options,b),u.scrollParents={reference:kh(a)?Vy(a):a.contextElement?Vy(a.contextElement):[],popper:Vy(l)};var v=q3e(Y3e([].concat(r,u.options.modifiers)));return u.orderedModifiers=v.filter(function(w){return w.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var y=u.elements,b=y.reference,v=y.popper;if(zB(b,v)){u.rects={reference:G3e(b,Q0(v),u.options.strategy==="fixed"),popper:tL(v)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(R){return u.modifiersData[R.name]=Object.assign({},R.data)});for(var w=0;w<u.orderedModifiers.length;w++){if(u.reset===!0){u.reset=!1,w=-1;continue}var C=u.orderedModifiers[w],_=C.fn,E=C.options,I=E===void 0?{}:E,O=C.name;typeof _=="function"&&(u=_({state:u,options:I,name:O,instance:f})||u)}}}},update:X3e(function(){return new Promise(function(g){f.forceUpdate(),g(u)})}),destroy:function(){m(),h=!0}};if(!zB(a,l))return f;f.setOptions(c).then(function(g){!h&&c.onFirstUpdate&&c.onFirstUpdate(g)});function p(){u.orderedModifiers.forEach(function(g){var y=g.name,b=g.options,v=b===void 0?{}:b,w=g.effect;if(typeof w=="function"){var C=w({state:u,name:y,instance:f,options:v}),_=function(){};d.push(C||_)}})}function m(){d.forEach(function(g){return g()}),d=[]}return f}}var Q3e=J0();const J3e=J0({defaultModifiers:[lL,hT,uT,dT,cL,aL,uL,rL]}),Z3e=["enabled","placement","strategy","modifiers"];function eze(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}const tze={name:"applyStyles",enabled:!1,phase:"afterWrite",fn:()=>{}},nze={name:"ariaDescribedBy",enabled:!0,phase:"afterWrite",effect:({state:t})=>()=>{const{reference:e,popper:n}=t.elements;if("removeAttribute"in e){const r=(e.getAttribute("aria-describedby")||"").split(",").filter(s=>s.trim()!==n.id);r.length?e.setAttribute("aria-describedby",r.join(",")):e.removeAttribute("aria-describedby")}},fn:({state:t})=>{var e;const{popper:n,reference:r}=t.elements,s=(e=n.getAttribute("role"))==null?void 0:e.toLowerCase();if(n.id&&s==="tooltip"&&"setAttribute"in r){const i=r.getAttribute("aria-describedby");if(i&&i.split(",").indexOf(n.id)!==-1)return;r.setAttribute("aria-describedby",i?`${i},${n.id}`:n.id)}}},rze=[];function sze(t,e,n={}){let{enabled:r=!0,placement:s="bottom",strategy:i="absolute",modifiers:o=rze}=n,a=eze(n,Z3e);const l=N.useRef(o),c=N.useRef(),u=N.useCallback(()=>{var g;(g=c.current)==null||g.update()},[]),d=N.useCallback(()=>{var g;(g=c.current)==null||g.forceUpdate()},[]),[h,f]=g3e(N.useState({placement:s,update:u,forceUpdate:d,attributes:{},styles:{popper:{},arrow:{}}})),p=N.useMemo(()=>({name:"updateStateModifier",enabled:!0,phase:"write",requires:["computeStyles"],fn:({state:g})=>{const y={},b={};Object.keys(g.elements).forEach(v=>{y[v]=g.styles[v],b[v]=g.attributes[v]}),f({state:g,styles:y,attributes:b,update:u,forceUpdate:d,placement:g.placement})}}),[u,d,f]),m=N.useMemo(()=>(By(l.current,o)||(l.current=o),l.current),[o]);return N.useEffect(()=>{!c.current||!r||c.current.setOptions({placement:s,strategy:i,modifiers:[...m,p,tze]})},[i,s,p,r,m]),N.useEffect(()=>{if(!(!r||t==null||e==null))return c.current=J3e(t,e,Object.assign({},a,{placement:s,strategy:i,modifiers:[...m,nze,p]})),()=>{c.current!=null&&(c.current.destroy(),c.current=void 0,f(g=>Object.assign({},g,{attributes:{},styles:{popper:{}}})))}},[r,t,e]),h}function ZS(t,e){if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return t===e||!!(t.compareDocumentPosition(e)&16)}var ize=function(){},oze=ize;const aze=$h(oze),BB=()=>{};function lze(t){return t.button===0}function cze(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}const wN=t=>t&&("current"in t?t.current:t),jB={click:"mousedown",mouseup:"mousedown",pointerup:"pointerdown"};function uze(t,e=BB,{disabled:n,clickTrigger:r="click"}={}){const s=N.useRef(!1),i=N.useRef(!1),o=N.useCallback(c=>{const u=wN(t);aze(!!u,"ClickOutside captured a close event but does not have a ref to compare it to. useClickOutside(), should be passed a ref that resolves to a DOM node"),s.current=!u||cze(c)||!lze(c)||!!ZS(u,c.target)||i.current,i.current=!1},[t]),a=wr(c=>{const u=wN(t);u&&ZS(u,c.target)&&(i.current=!0)}),l=wr(c=>{s.current||e(c)});N.useEffect(()=>{var c,u;if(n||t==null)return;const d=Y0(wN(t)),h=d.defaultView||window;let f=(c=h.event)!=null?c:(u=h.parent)==null?void 0:u.event,p=null;jB[r]&&(p=Yc(d,jB[r],a,!0));const m=Yc(d,r,o,!0),g=Yc(d,r,b=>{if(b===f){f=void 0;return}l(b)});let y=[];return"ontouchstart"in d.documentElement&&(y=[].slice.call(d.body.children).map(b=>Yc(b,"mousemove",BB))),()=>{p==null||p(),m(),g(),y.forEach(b=>b())}},[t,n,r,o,a,l])}function dze(t){const e={};return Array.isArray(t)?(t==null||t.forEach(n=>{e[n.name]=n}),e):t||e}function hze(t={}){return Array.isArray(t)?t:Object.keys(t).map(e=>(t[e].name=e,t[e]))}function fze({enabled:t,enableEvents:e,placement:n,flip:r,offset:s,fixed:i,containerPadding:o,arrowElement:a,popperConfig:l={}}){var c,u,d,h,f;const p=dze(l.modifiers);return Object.assign({},l,{placement:n,enabled:t,strategy:i?"fixed":l.strategy,modifiers:hze(Object.assign({},p,{eventListeners:{enabled:e,options:(c=p.eventListeners)==null?void 0:c.options},preventOverflow:Object.assign({},p.preventOverflow,{options:o?Object.assign({padding:o},(u=p.preventOverflow)==null?void 0:u.options):(d=p.preventOverflow)==null?void 0:d.options}),offset:{options:Object.assign({offset:s},(h=p.offset)==null?void 0:h.options)},arrow:Object.assign({},p.arrow,{enabled:!!a,options:Object.assign({},(f=p.arrow)==null?void 0:f.options,{element:a})}),flip:Object.assign({enabled:!!r},p.flip)}))})}const pze=["children"];function mze(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}const gze=()=>{};function f7(t={}){const e=N.useContext(aT),[n,r]=VX(),s=N.useRef(!1),{flip:i,offset:o,rootCloseEvent:a,fixed:l=!1,placement:c,popperConfig:u={},enableEventListeners:d=!0,usePopper:h=!!e}=t,f=(e==null?void 0:e.show)==null?!!t.show:e.show;f&&!s.current&&(s.current=!0);const p=_=>{e==null||e.toggle(!1,_)},{placement:m,setMenu:g,menuElement:y,toggleElement:b}=e||{},v=sze(b,y,fze({placement:c||m||"bottom-start",enabled:h,enableEvents:d??f,offset:o,flip:i,fixed:l,arrowElement:n,popperConfig:u})),w=Object.assign({ref:g||gze,"aria-labelledby":b==null?void 0:b.id},v.attributes.popper,{style:v.styles.popper}),C={show:f,placement:m,hasShown:s.current,toggle:e==null?void 0:e.toggle,popper:h?v:null,arrowProps:h?Object.assign({ref:r},v.attributes.arrow,{style:v.styles.arrow}):{}};return uze(y,p,{clickTrigger:a,disabled:!f}),[w,C]}const yze={usePopper:!0};function dL(t){let{children:e}=t,n=mze(t,pze);const[r,s]=f7(n);return $.jsx($.Fragment,{children:e(r,s)})}dL.displayName="DropdownMenu";dL.defaultProps=yze;const eC={prefix:String(Math.round(Math.random()*1e10)),current:0},p7=kn.createContext(eC),bze=kn.createContext(!1);let vze=!!(typeof window<"u"&&window.document&&window.document.createElement),xN=new WeakMap;function wze(t=!1){let e=N.useContext(p7),n=N.useRef(null);if(n.current===null&&!t){var r,s;let i=(s=kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED)===null||s===void 0||(r=s.ReactCurrentOwner)===null||r===void 0?void 0:r.current;if(i){let o=xN.get(i);o==null?xN.set(i,{id:e.current,state:i.memoizedState}):i.memoizedState!==o.state&&(e.current=o.id,xN.delete(i))}n.current=++e.current}return n.current}function xze(t){let e=N.useContext(p7);e===eC&&!vze&&console.warn("When server rendering, you must wrap your application in an <SSRProvider> to ensure consistent ids are generated between the client and server.");let n=wze(!!t),r=`react-aria${e.prefix}`;return t||`${r}-${n}`}function Sze(t){let e=kn.useId(),[n]=N.useState(kze()),r=n?"react-aria":`react-aria${eC.prefix}`;return t||`${r}-${e}`}const Cze=typeof kn.useId=="function"?Sze:xze;function Eze(){return!1}function _ze(){return!0}function Tze(t){return()=>{}}function kze(){return typeof kn.useSyncExternalStore=="function"?kn.useSyncExternalStore(Tze,Eze,_ze):N.useContext(bze)}const m7=t=>{var e;return((e=t.getAttribute("role"))==null?void 0:e.toLowerCase())==="menu"},VB=()=>{};function g7(){const t=Cze(),{show:e=!1,toggle:n=VB,setToggle:r,menuElement:s}=N.useContext(aT)||{},i=N.useCallback(a=>{n(!e,a)},[e,n]),o={id:t,ref:r||VB,onClick:i,"aria-expanded":!!e};return s&&m7(s)&&(o["aria-haspopup"]=!0),[o,{show:e,toggle:n}]}function y7({children:t}){const[e,n]=g7();return $.jsx($.Fragment,{children:t(e,n)})}y7.displayName="DropdownToggle";const Yp=N.createContext(null),Mb=(t,e=null)=>t!=null?String(t):e||null,fT=N.createContext(null);fT.displayName="NavContext";const Ize="data-rr-ui-",Nze="rrUi";function wg(t){return`${Ize}${t}`}function $ze(t){return`${Nze}${t}`}const Aze=["eventKey","disabled","onClick","active","as"];function Rze(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function b7({key:t,href:e,active:n,disabled:r,onClick:s}){const i=N.useContext(Yp),o=N.useContext(fT),{activeKey:a}=o||{},l=Mb(t,e),c=n==null&&t!=null?Mb(a)===l:n;return[{onClick:wr(d=>{r||(s==null||s(d),i&&!d.isPropagationStopped()&&i(l,d))}),"aria-disabled":r||void 0,"aria-selected":c,[wg("dropdown-item")]:""},{isActive:c}]}const v7=N.forwardRef((t,e)=>{let{eventKey:n,disabled:r,onClick:s,active:i,as:o=qP}=t,a=Rze(t,Aze);const[l]=b7({key:n,href:a.href,disabled:r,onClick:s,active:i});return $.jsx(o,Object.assign({},a,{ref:e},l))});v7.displayName="DropdownItem";const w7=N.createContext(bg?window:void 0);w7.Provider;function pT(){return N.useContext(w7)}function UB(){const t=KX(),e=N.useRef(null),n=N.useCallback(r=>{e.current=r,t()},[t]);return[e,n]}function Z0({defaultShow:t,show:e,onSelect:n,onToggle:r,itemSelector:s=`* [${wg("dropdown-item")}]`,focusFirstItemOnShow:i,placement:o="bottom-start",children:a}){const l=pT(),[c,u]=m3e(e,t,r),[d,h]=UB(),f=d.current,[p,m]=UB(),g=p.current,y=WX(c),b=N.useRef(null),v=N.useRef(!1),w=N.useContext(Yp),C=N.useCallback((z,B,j=B==null?void 0:B.type)=>{u(z,{originalEvent:B,source:j})},[u]),_=wr((z,B)=>{n==null||n(z,B),C(!1,B,"select"),B.isPropagationStopped()||w==null||w(z,B)}),E=N.useMemo(()=>({toggle:C,placement:o,show:c,menuElement:f,toggleElement:g,setMenu:h,setToggle:m}),[C,o,c,f,g,h,m]);f&&y&&!c&&(v.current=f.contains(f.ownerDocument.activeElement));const I=wr(()=>{g&&g.focus&&g.focus()}),O=wr(()=>{const z=b.current;let B=i;if(B==null&&(B=d.current&&m7(d.current)?"keyboard":!1),B===!1||B==="keyboard"&&!/^key.+$/.test(z))return;const j=Pl(d.current,s)[0];j&&j.focus&&j.focus()});N.useEffect(()=>{c?O():v.current&&(v.current=!1,I())},[c,v,I,O]),N.useEffect(()=>{b.current=null});const R=(z,B)=>{if(!d.current)return null;const j=Pl(d.current,s);let G=j.indexOf(z)+B;return G=Math.max(0,Math.min(G,j.length)),j[G]};return t3e(N.useCallback(()=>l.document,[l]),"keydown",z=>{var B,j;const{key:G}=z,U=z.target,Q=(B=d.current)==null?void 0:B.contains(U),se=(j=p.current)==null?void 0:j.contains(U);if(/input|textarea/i.test(U.tagName)&&(G===" "||G!=="Escape"&&Q||G==="Escape"&&U.type==="search")||!Q&&!se||G==="Tab"&&(!d.current||!c))return;b.current=z.type;const W={originalEvent:z,source:z.type};switch(G){case"ArrowUp":{const L=R(U,-1);L&&L.focus&&L.focus(),z.preventDefault();return}case"ArrowDown":if(z.preventDefault(),!c)u(!0,W);else{const L=R(U,1);L&&L.focus&&L.focus()}return;case"Tab":GP(U.ownerDocument,"keyup",L=>{var J;(L.key==="Tab"&&!L.target||!((J=d.current)!=null&&J.contains(L.target)))&&u(!1,W)},{once:!0});break;case"Escape":G==="Escape"&&(z.preventDefault(),z.stopPropagation()),u(!1,W);break}}),$.jsx(Yp.Provider,{value:_,children:$.jsx(aT.Provider,{value:E,children:a})})}Z0.displayName="Dropdown";Z0.Menu=dL;Z0.Toggle=y7;Z0.Item=v7;const hL=N.createContext({});hL.displayName="DropdownContext";const x7=N.forwardRef(({className:t,bsPrefix:e,as:n="hr",role:r="separator",...s},i)=>(e=fr(e,"dropdown-divider"),$.jsx(n,{ref:i,className:wn(t,e),role:r,...s})));x7.displayName="DropdownDivider";const S7=N.forwardRef(({className:t,bsPrefix:e,as:n="div",role:r="heading",...s},i)=>(e=fr(e,"dropdown-header"),$.jsx(n,{ref:i,className:wn(t,e),role:r,...s})));S7.displayName="DropdownHeader";const C7=N.forwardRef(({bsPrefix:t,className:e,eventKey:n,disabled:r=!1,onClick:s,active:i,as:o=XP,...a},l)=>{const c=fr(t,"dropdown-item"),[u,d]=b7({key:n,href:a.href,disabled:r,onClick:s,active:i});return $.jsx(o,{...a,...u,ref:l,className:wn(e,c,d.isActive&&"active",r&&"disabled")})});C7.displayName="DropdownItem";const E7=N.forwardRef(({className:t,bsPrefix:e,as:n="span",...r},s)=>(e=fr(e,"dropdown-item-text"),$.jsx(n,{ref:s,className:wn(t,e),...r})));E7.displayName="DropdownItemText";const fL=N.createContext(null);fL.displayName="InputGroupContext";const pL=N.createContext(null);pL.displayName="NavbarContext";function _7(t,e){return t}function T7(t,e,n){const r=n?"top-end":"top-start",s=n?"top-start":"top-end",i=n?"bottom-end":"bottom-start",o=n?"bottom-start":"bottom-end",a=n?"right-start":"left-start",l=n?"right-end":"left-end",c=n?"left-start":"right-start",u=n?"left-end":"right-end";let d=t?o:i;return e==="up"?d=t?s:r:e==="end"?d=t?u:c:e==="start"?d=t?l:a:e==="down-centered"?d="bottom":e==="up-centered"&&(d="top"),d}const k7=N.forwardRef(({bsPrefix:t,className:e,align:n,rootCloseEvent:r,flip:s=!0,show:i,renderOnMount:o,as:a="div",popperConfig:l,variant:c,...u},d)=>{let h=!1;const f=N.useContext(pL),p=fr(t,"dropdown-menu"),{align:m,drop:g,isRTL:y}=N.useContext(hL);n=n||m;const b=N.useContext(fL),v=[];if(n)if(typeof n=="object"){const z=Object.keys(n);if(z.length){const B=z[0],j=n[B];h=j==="start",v.push(`${p}-${B}-${j}`)}}else n==="end"&&(h=!0);const w=T7(h,g,y),[C,{hasShown:_,popper:E,show:I,toggle:O}]=f7({flip:s,rootCloseEvent:r,show:i,usePopper:!f&&v.length===0,offset:[0,2],popperConfig:l,placement:w});if(C.ref=qu(_7(d),C.ref),n2(()=>{I&&(E==null||E.update())},[I]),!_&&!o&&!b)return null;typeof a!="string"&&(C.show=I,C.close=()=>O==null?void 0:O(!1),C.align=n);let R=u.style;return E!=null&&E.placement&&(R={...u.style,...C.style},u["x-placement"]=E.placement),$.jsx(a,{...u,...C,style:R,...(v.length||f)&&{"data-bs-popper":"static"},className:wn(e,p,I&&"show",h&&`${p}-end`,c&&`${p}-${c}`,...v)})});k7.displayName="DropdownMenu";const I7=N.forwardRef(({bsPrefix:t,split:e,className:n,childBsPrefix:r,as:s=Fb,...i},o)=>{const a=fr(t,"dropdown-toggle"),l=N.useContext(aT);r!==void 0&&(i.bsPrefix=r);const[c]=g7();return c.ref=qu(c.ref,_7(o)),$.jsx(s,{className:wn(n,a,e&&`${a}-split`,(l==null?void 0:l.show)&&"show"),...c,...i})});I7.displayName="DropdownToggle";const N7=N.forwardRef((t,e)=>{const{bsPrefix:n,drop:r="down",show:s,className:i,align:o="start",onSelect:a,onToggle:l,focusFirstItemOnShow:c,as:u="div",navbar:d,autoClose:h=!0,...f}=RX(t,{show:"onToggle"}),p=N.useContext(fL),m=fr(n,"dropdown"),g=PX(),y=E=>h===!1?E==="click":h==="inside"?E!=="rootClose":h==="outside"?E!=="select":!0,b=wr((E,I)=>{var O,R;!((O=I.originalEvent)==null||(R=O.target)==null)&&R.classList.contains("dropdown-toggle")&&I.source==="mousedown"||(I.originalEvent.currentTarget===document&&(I.source!=="keydown"||I.originalEvent.key==="Escape")&&(I.source="rootClose"),y(I.source)&&(l==null||l(E,I)))}),w=T7(o==="end",r,g),C=N.useMemo(()=>({align:o,drop:r,isRTL:g}),[o,r,g]),_={down:m,"down-centered":`${m}-center`,up:"dropup","up-centered":"dropup-center dropup",end:"dropend",start:"dropstart"};return $.jsx(hL.Provider,{value:C,children:$.jsx(Z0,{placement:w,show:s,onSelect:a,onToggle:b,focusFirstItemOnShow:c,itemSelector:`.${m}-item:not(.disabled):not(:disabled)`,children:p?f.children:$.jsx(u,{...f,ref:e,className:wn(i,s&&"show",_[r])})})})});N7.displayName="Dropdown";const Vd=Object.assign(N7,{Toggle:I7,Menu:k7,Item:C7,ItemText:E7,Divider:x7,Header:S7}),$7=N.createContext(null),Oze=["as","active","eventKey"];function Dze(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function A7({key:t,onClick:e,active:n,id:r,role:s,disabled:i}){const o=N.useContext(Yp),a=N.useContext(fT),l=N.useContext($7);let c=n;const u={role:s};if(a){!s&&a.role==="tablist"&&(u.role="tab");const d=a.getControllerId(t??null),h=a.getControlledId(t??null);u[wg("event-key")]=t,u.id=d||r,c=n==null&&t!=null?a.activeKey===t:n,(c||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(u["aria-controls"]=h)}return u.role==="tab"&&(u["aria-selected"]=c,c||(u.tabIndex=-1),i&&(u.tabIndex=-1,u["aria-disabled"]=!0)),u.onClick=wr(d=>{i||(e==null||e(d),t!=null&&o&&!d.isPropagationStopped()&&o(t,d))}),[u,{isActive:c}]}const R7=N.forwardRef((t,e)=>{let{as:n=qP,active:r,eventKey:s}=t,i=Dze(t,Oze);const[o,a]=A7(Object.assign({key:Mb(s,i.href),active:r},i));return o[wg("active")]=a.isActive,$.jsx(n,Object.assign({},i,o,{ref:e}))});R7.displayName="NavItem";const Pze=R7,Lze=["as","onSelect","activeKey","role","onKeyDown"];function Fze(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}const WB=()=>{},HB=wg("event-key"),O7=N.forwardRef((t,e)=>{let{as:n="div",onSelect:r,activeKey:s,role:i,onKeyDown:o}=t,a=Fze(t,Lze);const l=KX(),c=N.useRef(!1),u=N.useContext(Yp),d=N.useContext($7);let h,f;d&&(i=i||"tablist",s=d.activeKey,h=d.getControlledId,f=d.getControllerId);const p=N.useRef(null),m=v=>{const w=p.current;if(!w)return null;const C=Pl(w,`[${HB}]:not([aria-disabled=true])`),_=w.querySelector("[aria-selected=true]");if(!_||_!==document.activeElement)return null;const E=C.indexOf(_);if(E===-1)return null;let I=E+v;return I>=C.length&&(I=0),I<0&&(I=C.length-1),C[I]},g=(v,w)=>{v!=null&&(r==null||r(v,w),u==null||u(v,w))},y=v=>{if(o==null||o(v),!d)return;let w;switch(v.key){case"ArrowLeft":case"ArrowUp":w=m(-1);break;case"ArrowRight":case"ArrowDown":w=m(1);break;default:return}w&&(v.preventDefault(),g(w.dataset[$ze("EventKey")]||null,v),c.current=!0,l())};N.useEffect(()=>{if(p.current&&c.current){const v=p.current.querySelector(`[${HB}][aria-selected=true]`);v==null||v.focus()}c.current=!1});const b=qu(e,p);return $.jsx(Yp.Provider,{value:g,children:$.jsx(fT.Provider,{value:{role:i,activeKey:Mb(s),getControlledId:h||WB,getControllerId:f||WB},children:$.jsx(n,Object.assign({},a,{onKeyDown:y,ref:b,role:i}))})})});O7.displayName="Nav";const Mze=Object.assign(O7,{Item:Pze});var n1;function GB(t){if((!n1&&n1!==0||t)&&bg){var e=document.createElement("div");e.style.position="absolute",e.style.top="-9999px",e.style.width="50px",e.style.height="50px",e.style.overflow="scroll",document.body.appendChild(e),n1=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return n1}function SN(t){t===void 0&&(t=Y0());try{var e=t.activeElement;return!e||!e.nodeName?null:e}catch{return t.body}}function zze(t=document){const e=t.defaultView;return Math.abs(e.innerWidth-t.documentElement.clientWidth)}const KB=wg("modal-open");class mL{constructor({ownerDocument:e,handleContainerOverflow:n=!0,isRTL:r=!1}={}){this.handleContainerOverflow=n,this.isRTL=r,this.modals=[],this.ownerDocument=e}getScrollbarWidth(){return zze(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(e){}removeModalAttributes(e){}setContainerStyle(e){const n={overflow:"hidden"},r=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();e.style={overflow:s.style.overflow,[r]:s.style[r]},e.scrollBarWidth&&(n[r]=`${parseInt(Jd(s,r)||"0",10)+e.scrollBarWidth}px`),s.setAttribute(KB,""),Jd(s,n)}reset(){[...this.modals].forEach(e=>this.remove(e))}removeContainerStyle(e){const n=this.getElement();n.removeAttribute(KB),Object.assign(n.style,e.style)}add(e){let n=this.modals.indexOf(e);return n!==-1||(n=this.modals.length,this.modals.push(e),this.setModalAttributes(e),n!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),n}remove(e){const n=this.modals.indexOf(e);n!==-1&&(this.modals.splice(n,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(e))}isTopModal(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}const CN=(t,e)=>bg?t==null?(e||Y0()).body:(typeof t=="function"&&(t=t()),t&&"current"in t&&(t=t.current),t&&("nodeType"in t||t.getBoundingClientRect)?t:null):null;function Bze(t,e){const n=pT(),[r,s]=N.useState(()=>CN(t,n==null?void 0:n.document));if(!r){const i=CN(t);i&&s(i)}return N.useEffect(()=>{},[e,r]),N.useEffect(()=>{const i=CN(t);i!==r&&s(i)},[t,r]),r}function jze({children:t,in:e,onExited:n,mountOnEnter:r,unmountOnExit:s}){const i=N.useRef(null),o=N.useRef(e),a=wr(n);N.useEffect(()=>{e?o.current=!0:a(i.current)},[e,a]);const l=qu(i,t.ref),c=N.cloneElement(t,{ref:l});return e?c:s||!o.current&&r?null:c}const Vze=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function Uze(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Wze(t){let{onEnter:e,onEntering:n,onEntered:r,onExit:s,onExiting:i,onExited:o,addEndListener:a,children:l}=t,c=Uze(t,Vze);const u=N.useRef(null),d=qu(u,typeof l=="function"?null:l.ref),h=w=>C=>{w&&u.current&&w(u.current,C)},f=N.useCallback(h(e),[e]),p=N.useCallback(h(n),[n]),m=N.useCallback(h(r),[r]),g=N.useCallback(h(s),[s]),y=N.useCallback(h(i),[i]),b=N.useCallback(h(o),[o]),v=N.useCallback(h(a),[a]);return Object.assign({},c,{nodeRef:u},e&&{onEnter:f},n&&{onEntering:p},r&&{onEntered:m},s&&{onExit:g},i&&{onExiting:y},o&&{onExited:b},a&&{addEndListener:v},{children:typeof l=="function"?(w,C)=>l(w,Object.assign({},C,{ref:d})):N.cloneElement(l,{ref:d})})}const Hze=["component"];function Gze(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}const Kze=N.forwardRef((t,e)=>{let{component:n}=t,r=Gze(t,Hze);const s=Wze(r);return $.jsx(n,Object.assign({ref:e},s))});function qze({in:t,onTransition:e}){const n=N.useRef(null),r=N.useRef(!0),s=wr(e);return n2(()=>{if(!n.current)return;let i=!1;return s({in:t,element:n.current,initial:r.current,isStale:()=>i}),()=>{i=!0}},[t,s]),n2(()=>(r.current=!1,()=>{r.current=!0}),[]),n}function Xze({children:t,in:e,onExited:n,onEntered:r,transition:s}){const[i,o]=N.useState(!e);e&&i&&o(!1);const a=qze({in:!!e,onTransition:c=>{const u=()=>{c.isStale()||(c.in?r==null||r(c.element,c.initial):(o(!0),n==null||n(c.element)))};Promise.resolve(s(c)).then(u,d=>{throw c.in||o(!0),d})}}),l=qu(a,t.ref);return i&&!e?null:N.cloneElement(t,{ref:l})}function qB(t,e,n){return t?$.jsx(Kze,Object.assign({},n,{component:t})):e?$.jsx(Xze,Object.assign({},n,{transition:e})):$.jsx(jze,Object.assign({},n))}function Yze(t){return t.code==="Escape"||t.keyCode===27}const Qze=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Jze(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}let EN;function Zze(t){return EN||(EN=new mL({ownerDocument:t==null?void 0:t.document})),EN}function eBe(t){const e=pT(),n=t||Zze(e),r=N.useRef({dialog:null,backdrop:null});return Object.assign(r.current,{add:()=>n.add(r.current),remove:()=>n.remove(r.current),isTopModal:()=>n.isTopModal(r.current),setDialogRef:N.useCallback(s=>{r.current.dialog=s},[]),setBackdropRef:N.useCallback(s=>{r.current.backdrop=s},[])})}const D7=N.forwardRef((t,e)=>{let{show:n=!1,role:r="dialog",className:s,style:i,children:o,backdrop:a=!0,keyboard:l=!0,onBackdropClick:c,onEscapeKeyDown:u,transition:d,runTransition:h,backdropTransition:f,runBackdropTransition:p,autoFocus:m=!0,enforceFocus:g=!0,restoreFocus:y=!0,restoreFocusOptions:b,renderDialog:v,renderBackdrop:w=_e=>$.jsx("div",Object.assign({},_e)),manager:C,container:_,onShow:E,onHide:I=()=>{},onExit:O,onExited:R,onExiting:z,onEnter:B,onEntering:j,onEntered:G}=t,U=Jze(t,Qze);const Q=pT(),se=Bze(_),V=eBe(C),W=UX(),L=WX(n),[J,Z]=N.useState(!n),ie=N.useRef(null);N.useImperativeHandle(e,()=>V,[V]),bg&&!L&&n&&(ie.current=SN(Q==null?void 0:Q.document)),n&&J&&Z(!1);const ue=wr(()=>{if(V.add(),We.current=Yc(document,"keydown",ge),Pe.current=Yc(document,"focus",()=>setTimeout(ye),!0),E&&E(),m){var _e,ze;const it=SN((_e=(ze=V.dialog)==null?void 0:ze.ownerDocument)!=null?_e:Q==null?void 0:Q.document);V.dialog&&it&&!ZS(V.dialog,it)&&(ie.current=it,V.dialog.focus())}}),de=wr(()=>{if(V.remove(),We.current==null||We.current(),Pe.current==null||Pe.current(),y){var _e;(_e=ie.current)==null||_e.focus==null||_e.focus(b),ie.current=null}});N.useEffect(()=>{!n||!se||ue()},[n,se,ue]),N.useEffect(()=>{J&&de()},[J,de]),GX(()=>{de()});const ye=wr(()=>{if(!g||!W()||!V.isTopModal())return;const _e=SN(Q==null?void 0:Q.document);V.dialog&&_e&&!ZS(V.dialog,_e)&&V.dialog.focus()}),Ee=wr(_e=>{_e.target===_e.currentTarget&&(c==null||c(_e),a===!0&&I())}),ge=wr(_e=>{l&&Yze(_e)&&V.isTopModal()&&(u==null||u(_e),_e.defaultPrevented||I())}),Pe=N.useRef(),We=N.useRef(),le=(..._e)=>{Z(!0),R==null||R(..._e)};if(!se)return null;const Ve=Object.assign({role:r,ref:V.setDialogRef,"aria-modal":r==="dialog"?!0:void 0},U,{style:i,className:s,tabIndex:-1});let Je=v?v(Ve):$.jsx("div",Object.assign({},Ve,{children:N.cloneElement(o,{role:"document"})}));Je=qB(d,h,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!n,onExit:O,onExiting:z,onExited:le,onEnter:B,onEntering:j,onEntered:G,children:Je});let at=null;return a&&(at=w({ref:V.setBackdropRef,onClick:Ee}),at=qB(f,p,{in:!!n,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:at})),$.jsx($.Fragment,{children:Dd.createPortal($.jsxs($.Fragment,{children:[at,Je]}),se)})});D7.displayName="Modal";const tBe=Object.assign(D7,{Manager:mL});function nBe(t,e){return t.classList?t.classList.contains(e):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+e+" ")!==-1}function rBe(t,e){t.classList?t.classList.add(e):nBe(t,e)||(typeof t.className=="string"?t.className=t.className+" "+e:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+e))}function XB(t,e){return t.replace(new RegExp("(^|\\s)"+e+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function sBe(t,e){t.classList?t.classList.remove(e):typeof t.className=="string"?t.className=XB(t.className,e):t.setAttribute("class",XB(t.className&&t.className.baseVal||"",e))}const Tf={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class iBe extends mL{adjustAndStore(e,n,r){const s=n.style[e];n.dataset[e]=s,Jd(n,{[e]:`${parseFloat(Jd(n,e))+r}px`})}restore(e,n){const r=n.dataset[e];r!==void 0&&(delete n.dataset[e],Jd(n,{[e]:r}))}setContainerStyle(e){super.setContainerStyle(e);const n=this.getElement();if(rBe(n,"modal-open"),!e.scrollBarWidth)return;const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Pl(n,Tf.FIXED_CONTENT).forEach(i=>this.adjustAndStore(r,i,e.scrollBarWidth)),Pl(n,Tf.STICKY_CONTENT).forEach(i=>this.adjustAndStore(s,i,-e.scrollBarWidth)),Pl(n,Tf.NAVBAR_TOGGLER).forEach(i=>this.adjustAndStore(s,i,e.scrollBarWidth))}removeContainerStyle(e){super.removeContainerStyle(e);const n=this.getElement();sBe(n,"modal-open");const r=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Pl(n,Tf.FIXED_CONTENT).forEach(i=>this.restore(r,i)),Pl(n,Tf.STICKY_CONTENT).forEach(i=>this.restore(s,i)),Pl(n,Tf.NAVBAR_TOGGLER).forEach(i=>this.restore(s,i))}}let _N;function oBe(t){return _N||(_N=new iBe(t)),_N}const P7=N.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},s)=>(e=fr(e,"modal-body"),$.jsx(n,{ref:s,className:wn(t,e),...r})));P7.displayName="ModalBody";const L7=N.createContext({onHide(){}}),gL=N.forwardRef(({bsPrefix:t,className:e,contentClassName:n,centered:r,size:s,fullscreen:i,children:o,scrollable:a,...l},c)=>{t=fr(t,"modal");const u=`${t}-dialog`,d=typeof i=="string"?`${t}-fullscreen-${i}`:`${t}-fullscreen`;return $.jsx("div",{...l,ref:c,className:wn(u,e,s&&`${t}-${s}`,r&&`${u}-centered`,a&&`${u}-scrollable`,i&&d),children:$.jsx("div",{className:wn(`${t}-content`,n),children:o})})});gL.displayName="ModalDialog";const F7=N.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},s)=>(e=fr(e,"modal-footer"),$.jsx(n,{ref:s,className:wn(t,e),...r})));F7.displayName="ModalFooter";const aBe=N.forwardRef(({closeLabel:t="Close",closeVariant:e,closeButton:n=!1,onHide:r,children:s,...i},o)=>{const a=N.useContext(L7),l=wr(()=>{a==null||a.onHide(),r==null||r()});return $.jsxs("div",{ref:o,...i,children:[s,n&&$.jsx(QP,{"aria-label":t,variant:e,onClick:l})]})}),M7=N.forwardRef(({bsPrefix:t,className:e,closeLabel:n="Close",closeButton:r=!1,...s},i)=>(t=fr(t,"modal-header"),$.jsx(aBe,{ref:i,...s,className:wn(e,t),closeLabel:n,closeButton:r})));M7.displayName="ModalHeader";const lBe=e3e("h4"),z7=N.forwardRef(({className:t,bsPrefix:e,as:n=lBe,...r},s)=>(e=fr(e,"modal-title"),$.jsx(n,{ref:s,className:wn(t,e),...r})));z7.displayName="ModalTitle";function cBe(t){return $.jsx(YP,{...t,timeout:null})}function uBe(t){return $.jsx(YP,{...t,timeout:null})}const B7=N.forwardRef(({bsPrefix:t,className:e,style:n,dialogClassName:r,contentClassName:s,children:i,dialogAs:o=gL,"data-bs-theme":a,"aria-labelledby":l,"aria-describedby":c,"aria-label":u,show:d=!1,animation:h=!0,backdrop:f=!0,keyboard:p=!0,onEscapeKeyDown:m,onShow:g,onHide:y,container:b,autoFocus:v=!0,enforceFocus:w=!0,restoreFocus:C=!0,restoreFocusOptions:_,onEntered:E,onExit:I,onExiting:O,onEnter:R,onEntering:z,onExited:B,backdropClassName:j,manager:G,...U},Q)=>{const[se,V]=N.useState({}),[W,L]=N.useState(!1),J=N.useRef(!1),Z=N.useRef(!1),ie=N.useRef(null),[ue,de]=VX(),ye=qu(Q,de),Ee=wr(y),ge=PX();t=fr(t,"modal");const Pe=N.useMemo(()=>({onHide:Ee}),[Ee]);function We(){return G||oBe({isRTL:ge})}function le(rt){if(!bg)return;const Vt=We().getScrollbarWidth()>0,Cn=rt.scrollHeight>Y0(rt).documentElement.clientHeight;V({paddingRight:Vt&&!Cn?GB():void 0,paddingLeft:!Vt&&Cn?GB():void 0})}const Ve=wr(()=>{ue&&le(ue.dialog)});GX(()=>{t2(window,"resize",Ve),ie.current==null||ie.current()});const Je=()=>{J.current=!0},at=rt=>{J.current&&ue&&rt.target===ue.dialog&&(Z.current=!0),J.current=!1},_e=()=>{L(!0),ie.current=jX(ue.dialog,()=>{L(!1)})},ze=rt=>{rt.target===rt.currentTarget&&_e()},it=rt=>{if(f==="static"){ze(rt);return}if(Z.current||rt.target!==rt.currentTarget){Z.current=!1;return}y==null||y()},Xe=rt=>{p?m==null||m(rt):(rt.preventDefault(),f==="static"&&_e())},xn=(rt,Vt)=>{rt&&le(rt),R==null||R(rt,Vt)},Ne=rt=>{ie.current==null||ie.current(),I==null||I(rt)},Bt=(rt,Vt)=>{z==null||z(rt,Vt),GP(window,"resize",Ve)},At=rt=>{rt&&(rt.style.display=""),B==null||B(rt),t2(window,"resize",Ve)},Sn=N.useCallback(rt=>$.jsx("div",{...rt,className:wn(`${t}-backdrop`,j,!h&&"show")}),[h,j,t]),Wt={...n,...se};Wt.display="block";const tn=rt=>$.jsx("div",{role:"dialog",...rt,style:Wt,className:wn(e,t,W&&`${t}-static`,!h&&"show"),onClick:f?it:void 0,onMouseUp:at,"data-bs-theme":a,"aria-label":u,"aria-labelledby":l,"aria-describedby":c,children:$.jsx(o,{...U,onMouseDown:Je,className:r,contentClassName:s,children:i})});return $.jsx(L7.Provider,{value:Pe,children:$.jsx(tBe,{show:d,ref:ye,backdrop:f,container:b,keyboard:!0,autoFocus:v,enforceFocus:w,restoreFocus:C,restoreFocusOptions:_,onEscapeKeyDown:Xe,onShow:g,onHide:y,onEnter:xn,onEntering:Bt,onEntered:E,onExit:Ne,onExiting:O,onExited:At,manager:We(),transition:h?cBe:void 0,backdropTransition:h?uBe:void 0,renderBackdrop:Sn,renderDialog:tn})})});B7.displayName="Modal";const cy=Object.assign(B7,{Body:P7,Header:M7,Title:z7,Footer:F7,Dialog:gL,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});var YB={exports:{}},o2={exports:{}};(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=n;function n(r){function s(o,a,l,c,u,d){var h=c||"<<anonymous>>",f=d||l;if(a[l]==null)return o?new Error("Required "+u+" `"+f+"` was not specified "+("in `"+h+"`.")):null;for(var p=arguments.length,m=Array(p>6?p-6:0),g=6;g<p;g++)m[g-6]=arguments[g];return r.apply(void 0,[a,l,h,u,f].concat(m))}var i=s.bind(null,!1);return i.isRequired=s.bind(null,!0),i}t.exports=e.default})(o2,o2.exports);var dBe=o2.exports;(function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=i;var n=dBe,r=s(n);function s(o){return o&&o.__esModule?o:{default:o}}function i(){for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];function c(){for(var u=arguments.length,d=Array(u),h=0;h<u;h++)d[h]=arguments[h];var f=null;return a.forEach(function(p){if(f==null){var m=p.apply(void 0,d);m!=null&&(f=m)}}),f}return(0,r.default)(c)}t.exports=e.default})(YB,YB.exports);const j7=N.forwardRef(({className:t,bsPrefix:e,as:n="div",...r},s)=>(e=fr(e,"nav-item"),$.jsx(n,{ref:s,className:wn(t,e),...r})));j7.displayName="NavItem";const yL=N.forwardRef(({bsPrefix:t,className:e,as:n=XP,active:r,eventKey:s,disabled:i=!1,...o},a)=>{t=fr(t,"nav-link");const[l,c]=A7({key:Mb(s,o.href),active:r,disabled:i,...o});return $.jsx(n,{...o,...l,ref:a,disabled:i,className:wn(e,t,i&&"disabled",c.isActive&&"active")})});yL.displayName="NavLink";const V7=N.forwardRef((t,e)=>{const{as:n="div",bsPrefix:r,variant:s,fill:i=!1,justify:o=!1,navbar:a,navbarScroll:l,className:c,activeKey:u,...d}=RX(t,{activeKey:"onSelect"}),h=fr(r,"nav");let f,p,m=!1;const g=N.useContext(pL),y=N.useContext(HX);return g?(f=g.bsPrefix,m=a??!0):y&&({cardHeaderBsPrefix:p}=y),$.jsx(Mze,{as:n,ref:e,activeKey:u,className:wn(c,{[h]:!m,[`${f}-nav`]:m,[`${f}-nav-scroll`]:m&&l,[`${p}-${s}`]:!!p,[`${h}-${s}`]:!!s,[`${h}-fill`]:i,[`${h}-justified`]:o}),...d})});V7.displayName="Nav";const hBe=Object.assign(V7,{Item:j7,Link:yL}),U7=N.forwardRef(({id:t,title:e,children:n,bsPrefix:r,className:s,rootCloseEvent:i,menuRole:o,disabled:a,active:l,renderMenuOnMount:c,menuVariant:u,...d},h)=>{const f=fr(void 0,"nav-item");return $.jsxs(Vd,{ref:h,...d,className:wn(s,f),children:[$.jsx(Vd.Toggle,{id:t,eventKey:null,active:l,disabled:a,childBsPrefix:r,as:yL,children:e}),$.jsx(Vd.Menu,{role:o,renderOnMount:c,rootCloseEvent:i,variant:u,children:n})]})});U7.displayName="NavDropdown";const TN=Object.assign(U7,{Item:Vd.Item,ItemText:Vd.ItemText,Divider:Vd.Divider,Header:Vd.Header}),mp=N.forwardRef(({bsPrefix:t,className:e,as:n="div",...r},s)=>{const i=fr(t,"row"),o=OX(),a=DX(),l=`${i}-cols`,c=[];return o.forEach(u=>{const d=r[u];delete r[u];let h;d!=null&&typeof d=="object"?{cols:h}=d:h=d;const f=u!==a?`-${u}`:"";h!=null&&c.push(`${l}${f}-${h}`)}),$.jsx(n,{ref:s,...r,className:wn(e,i,...c)})});mp.displayName="Row";const W7="@firebase/installations",bL="0.6.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H7=1e4,G7=`w:${bL}`,K7="FIS_v2",fBe="https://firebaseinstallations.googleapis.com/v1",pBe=60*60*1e3,mBe="installations",gBe="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yBe={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ih=new Xh(mBe,gBe,yBe);function q7(t){return t instanceof yl&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X7({projectId:t}){return`${fBe}/projects/${t}/installations`}function Y7(t){return{token:t.token,requestStatus:2,expiresIn:vBe(t.expiresIn),creationTime:Date.now()}}async function Q7(t,e){const r=(await e.json()).error;return Ih.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function J7({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function bBe(t,{refreshToken:e}){const n=J7(t);return n.append("Authorization",wBe(e)),n}async function Z7(t){const e=await t();return e.status>=500&&e.status<600?t():e}function vBe(t){return Number(t.replace("s","000"))}function wBe(t){return`${K7} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xBe({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=X7(t),s=J7(t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:n,authVersion:K7,appId:t.appId,sdkVersion:G7},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Z7(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||n,registrationStatus:2,refreshToken:c.refreshToken,authToken:Y7(c.authToken)}}else throw await Q7("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e9(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SBe(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CBe=/^[cdef][\w-]{21}$/,a2="";function EBe(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=_Be(t);return CBe.test(n)?n:a2}catch{return a2}}function _Be(t){return SBe(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t9=new Map;function n9(t,e){const n=mT(t);r9(n,e),TBe(n,e)}function r9(t,e){const n=t9.get(t);if(n)for(const r of n)r(e)}function TBe(t,e){const n=kBe();n&&n.postMessage({key:t,fid:e}),IBe()}let Ud=null;function kBe(){return!Ud&&"BroadcastChannel"in self&&(Ud=new BroadcastChannel("[Firebase] FID Change"),Ud.onmessage=t=>{r9(t.data.key,t.data.fid)}),Ud}function IBe(){t9.size===0&&Ud&&(Ud.close(),Ud=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NBe="firebase-installations-database",$Be=1,Nh="firebase-installations-store";let kN=null;function vL(){return kN||(kN=q8(NBe,$Be,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Nh)}}})),kN}async function tC(t,e){const n=mT(t),s=(await vL()).transaction(Nh,"readwrite"),i=s.objectStore(Nh),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&n9(t,e.fid),e}async function s9(t){const e=mT(t),r=(await vL()).transaction(Nh,"readwrite");await r.objectStore(Nh).delete(e),await r.done}async function gT(t,e){const n=mT(t),s=(await vL()).transaction(Nh,"readwrite"),i=s.objectStore(Nh),o=await i.get(n),a=e(o);return a===void 0?await i.delete(n):await i.put(a,n),await s.done,a&&(!o||o.fid!==a.fid)&&n9(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wL(t){let e;const n=await gT(t.appConfig,r=>{const s=ABe(r),i=RBe(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===a2?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function ABe(t){const e=t||{fid:EBe(),registrationStatus:0};return i9(e)}function RBe(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ih.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=OBe(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:DBe(t)}:{installationEntry:e}}async function OBe(t,e){try{const n=await xBe(t,e);return tC(t.appConfig,n)}catch(n){throw q7(n)&&n.customData.serverCode===409?await s9(t.appConfig):await tC(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function DBe(t){let e=await QB(t.appConfig);for(;e.registrationStatus===1;)await e9(100),e=await QB(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await wL(t);return r||n}return e}function QB(t){return gT(t,e=>{if(!e)throw Ih.create("installation-not-found");return i9(e)})}function i9(t){return PBe(t)?{fid:t.fid,registrationStatus:0}:t}function PBe(t){return t.registrationStatus===1&&t.registrationTime+H7<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LBe({appConfig:t,heartbeatServiceProvider:e},n){const r=FBe(t,n),s=bBe(t,n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:G7,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await Z7(()=>fetch(r,a));if(l.ok){const c=await l.json();return Y7(c)}else throw await Q7("Generate Auth Token",l)}function FBe(t,{fid:e}){return`${X7(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(t,e=!1){let n;const r=await gT(t.appConfig,i=>{if(!o9(i))throw Ih.create("not-registered");const o=i.authToken;if(!e&&BBe(o))return i;if(o.requestStatus===1)return n=MBe(t,e),i;{if(!navigator.onLine)throw Ih.create("app-offline");const a=VBe(i);return n=zBe(t,a),a}});return n?await n:r.authToken}async function MBe(t,e){let n=await JB(t.appConfig);for(;n.authToken.requestStatus===1;)await e9(100),n=await JB(t.appConfig);const r=n.authToken;return r.requestStatus===0?xL(t,e):r}function JB(t){return gT(t,e=>{if(!o9(e))throw Ih.create("not-registered");const n=e.authToken;return UBe(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function zBe(t,e){try{const n=await LBe(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await tC(t.appConfig,r),n}catch(n){if(q7(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await s9(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await tC(t.appConfig,r)}throw n}}function o9(t){return t!==void 0&&t.registrationStatus===2}function BBe(t){return t.requestStatus===2&&!jBe(t)}function jBe(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+pBe}function VBe(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function UBe(t){return t.requestStatus===1&&t.requestTime+H7<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WBe(t){const e=t,{installationEntry:n,registrationPromise:r}=await wL(e);return r?r.catch(console.error):xL(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HBe(t,e=!1){const n=t;return await GBe(n),(await xL(n,e)).token}async function GBe(t){const{registrationPromise:e}=await wL(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KBe(t){if(!t||!t.options)throw IN("App Configuration");if(!t.name)throw IN("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw IN(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function IN(t){return Ih.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a9="installations",qBe="installations-internal",XBe=t=>{const e=t.getProvider("app").getImmediate(),n=KBe(e),r=eT(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},YBe=t=>{const e=t.getProvider("app").getImmediate(),n=eT(e,a9).getImmediate();return{getId:()=>WBe(n),getToken:s=>HBe(n,s)}};function QBe(){rc(new hl(a9,XBe,"PUBLIC")),rc(new hl(qBe,YBe,"PRIVATE"))}QBe();el(W7,bL);el(W7,bL,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZB="analytics",JBe="firebase_id",ZBe="origin",eje=60*1e3,tje="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",SL="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hi=new DP("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nje={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Oo=new Xh("analytics","Analytics",nje);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rje(t){if(!t.startsWith(SL)){const e=Oo.create("invalid-gtag-resource",{gtagURL:t});return hi.warn(e.message),""}return t}function l9(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function sje(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function ije(t,e){const n=sje("firebase-js-sdk-policy",{createScriptURL:rje}),r=document.createElement("script"),s=`${SL}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function oje(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function aje(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await l9(n)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){hi.error(a)}t("config",s,i)}async function lje(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await l9(n);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)i.push(u);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){hi.error(i)}}function cje(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await lje(t,e,n,a,l)}else if(i==="config"){const[a,l]=o;await aje(t,e,n,r,a,l)}else if(i==="consent"){const[a]=o;t("consent","update",a)}else if(i==="get"){const[a,l,c]=o;t("get",a,l,c)}else if(i==="set"){const[a]=o;t("set",a)}else t(i,...o)}catch(a){hi.error(a)}}return s}function uje(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=cje(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function dje(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(SL)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hje=30,fje=1e3;class pje{constructor(e={},n=fje){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const c9=new pje;function mje(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function gje(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:mje(r)},i=tje.replace("{app-id}",n),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Oo.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function yje(t,e=c9,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw Oo.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Oo.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new wje;return setTimeout(async()=>{a.abort()},eje),u9({appId:r,apiKey:s,measurementId:i},o,a,e)}async function u9(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=c9){var i;const{appId:o,measurementId:a}=t;try{await bje(r,e)}catch(l){if(a)return hi.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await gje(t);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!vje(c)){if(s.deleteThrottleMetadata(o),a)return hi.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?Jz(n,s.intervalMillis,hje):Jz(n,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:n+1};return s.setThrottleMetadata(o,d),hi.debug(`Calling attemptFetch again in ${u} millis`),u9(t,d,r,s)}}function bje(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(Oo.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function vje(t){if(!(t instanceof yl)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class wje{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function xje(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sje(){if(W8())try{await H8()}catch(t){return hi.warn(Oo.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return hi.warn(Oo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function Cje(t,e,n,r,s,i,o){var a;const l=yje(t);l.then(f=>{n[f.measurementId]=f.appId,t.options.measurementId&&f.measurementId!==t.options.measurementId&&hi.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>hi.error(f)),e.push(l);const c=Sje().then(f=>{if(f)return r.getId()}),[u,d]=await Promise.all([l,c]);dje(i)||ije(i,u.measurementId),s("js",new Date);const h=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return h[ZBe]="firebase",h.update=!0,d!=null&&(h[JBe]=d),s("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eje{constructor(e){this.app=e}_delete(){return delete Uy[this.app.options.appId],Promise.resolve()}}let Uy={},ej=[];const tj={};let NN="dataLayer",_je="gtag",nj,d9,rj=!1;function Tje(){const t=[];if(U8()&&t.push("This is a browser extension environment."),qDe()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=Oo.create("invalid-analytics-context",{errorInfo:e});hi.warn(n.message)}}function kje(t,e,n){Tje();const r=t.options.appId;if(!r)throw Oo.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)hi.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Oo.create("no-api-key");if(Uy[r]!=null)throw Oo.create("already-exists",{id:r});if(!rj){oje(NN);const{wrappedGtag:i,gtagCore:o}=uje(Uy,ej,tj,NN,_je);d9=i,nj=o,rj=!0}return Uy[r]=Cje(t,ej,tj,e,nj,NN,n),new Eje(t)}function Ije(t,e,n,r){t=bl(t),xje(d9,Uy[t.app.options.appId],e,n,r).catch(s=>hi.error(s))}const sj="@firebase/analytics",ij="0.10.2";function Nje(){rc(new hl(ZB,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return kje(r,s,n)},"PUBLIC")),rc(new hl("analytics-internal",t,"PRIVATE")),el(sj,ij),el(sj,ij,"esm2017");function t(e){try{const n=e.getProvider(ZB).getImmediate();return{logEvent:(r,s,i)=>Ije(n,r,s,i)}}catch(n){throw Oo.create("interop-component-reg-failed",{reason:n})}}}Nje();function $je(){const t=Ks(),e=xC(),[n,r]=N.useState({email:"",password:"",rememberMe:!1}),s=pR(a=>a.getAssessment);console.log(s);const i=a=>{const{name:l,value:c,type:u,checked:d}=a.target,h=u==="checkbox"?d:c;r({...n,[l]:h})},o=async a=>{a.preventDefault();const l=iT();try{const u=(await lFe(l,n.email,n.password)).user;console.log("User signed in:",u),console.log(u.uid),uFe(u,{displayName:u.email}),bn.get(`/api/users/${u.uid}`).then(d=>d.data).then(d=>{e(Cte(d))}),alert("Login successfully"),t("/userid/assessments")}catch(c){alert("Invalid Email and password"),console.error("Login error:",c.message)}};return $.jsx("div",{className:"container login-container",children:$.jsxs("div",{className:"login-row",children:[$.jsxs("div",{className:"login-col",children:[$.jsx("img",{className:"login-logo",src:HP,alt:"logo"}),$.jsxs("div",{className:"Login-container",children:[$.jsxs("form",{onSubmit:o,children:[$.jsxs("div",{className:"form-group",children:[$.jsx("label",{htmlFor:"email",children:"Email Address"}),$.jsx("input",{type:"email",id:"email",name:"email",value:n.email,onChange:i,placeholder:"Enter your email",required:!0})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{htmlFor:"password",children:"Password"}),$.jsx("input",{type:"password",id:"password",name:"password",value:n.password,onChange:i,placeholder:"Enter your password",required:!0})]}),$.jsx("div",{className:"box1"}),$.jsx("button",{type:"submit",children:"Login"})]}),$.jsxs("p",{children:["Don't have an account? ",$.jsx(Q_,{to:"/register",children:"Register"})]}),$.jsx("h1",{})]})]}),$.jsx("div",{className:"login-col",children:$.jsx("div",{className:"login-image",children:$.jsx("img",{src:PDe,alt:"Login"})})})]})})}const Aje="/assets/rj-gA5N5psB.webp";function Rje(){const t=Ks(),[e,n]=N.useState({name:"",email:"",password:"",phone:""}),[r,s]=N.useState(null),i=a=>{const{name:l,value:c}=a.target;n({...e,[l]:c})},o=async a=>{a.preventDefault();const l=iT();try{const h={userId:(await aFe(l,e.email,e.password)).user.uid,name:e.name,email:e.email,password:e.password,phone:e.phone};if(!(await fetch("http://localhost:3000/api/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)})).ok)throw new Error("Failed to save user data in the database");alert("User registered successfully"),console.log("User registered successfully"),t("/")}catch(c){console.error("Error registering user:",c.message),alert("user not register")}};return $.jsx($.Fragment,{children:$.jsx(pp,{className:"reg-container",children:$.jsxs(mp,{children:[$.jsxs(Zd,{children:[$.jsx("img",{className:"login-logo",src:HP,alt:"logo"}),$.jsx("h1",{className:"register-col-heading",children:"Create an Account"}),$.jsxs("div",{className:"Register-container",children:[$.jsxs("form",{onSubmit:o,children:[$.jsxs("div",{className:"form-group",children:[$.jsx("label",{htmlFor:"name",children:"Full Name"}),$.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:i,placeholder:"Enter your full name",required:!0})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{htmlFor:"email",children:"Email Address"}),$.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:i,placeholder:"Enter your email",required:!0})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{htmlFor:"password",children:"Password"}),$.jsx("input",{type:"password",id:"password",name:"password",value:e.password,onChange:i,placeholder:"Enter your password",required:!0})]}),$.jsxs("div",{className:"form-group",children:[$.jsx("label",{htmlFor:"phone",children:"Phone Number"}),$.jsx("input",{type:"tel",id:"phone",name:"phone",value:e.phone,onChange:i,placeholder:"Enter your phone number",required:!0,style:{padding:"10px",border:"1px solid #ccc",borderRadius:"3px"}})]}),$.jsx("button",{type:"submit",children:"Register"}),r&&$.jsx("p",{className:"error-message",children:r})]}),$.jsxs("p",{children:["Already have an account? ",$.jsx(Q_,{to:"/",children:"Login"})]})]})]}),$.jsx(Zd,{children:$.jsx("div",{className:"register-image",children:$.jsx("img",{src:Aje})})})]})})})}var Oje={exports:{}};function Dje(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},s=e.attributes[n]||{},i=e.elements[n];!Ro(i)||!fl(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?i.removeAttribute(o):i.setAttribute(o,a===!0?"":a)}))})}function Pje(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!Ro(s)||!fl(s)||(Object.assign(s.style,a),Object.keys(i).forEach(function(l){s.removeAttribute(l)}))})}}const CL={name:"applyStyles",enabled:!0,phase:"write",fn:Dje,effect:Pje,requires:["computeStyles"]};var Lje=[dT,hT,uT,CL],Fje=J0({defaultModifiers:Lje}),Mje=[dT,hT,uT,CL,cL,aL,uL,rL,lL],zje=J0({defaultModifiers:Mje});const Bje=Object.freeze(Object.defineProperty({__proto__:null,afterMain:t7,afterRead:JX,afterWrite:s7,applyStyles:CL,arrow:rL,auto:lT,basePlacements:vg,beforeMain:ZX,beforeRead:YX,beforeWrite:n7,bottom:qi,clippingParents:qX,computeStyles:uT,createPopper:zje,createPopperBase:Q3e,createPopperLite:Fje,detectOverflow:Xp,end:Hp,eventListeners:dT,flip:aL,hide:lL,left:Fs,main:e7,modifierPhases:i7,offset:cL,placements:ZP,popper:zf,popperGenerator:J0,popperOffsets:hT,preventOverflow:uL,read:QX,reference:XX,right:Xi,start:Th,top:Ls,variationPlacements:r2,viewport:JP,write:r7},Symbol.toStringTag,{value:"Module"})),jje=wi(Bje);/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r(jje)})(Mo,function(n){function r(H){const S=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(H){for(const A in H)if(A!=="default"){const X=Object.getOwnPropertyDescriptor(H,A);Object.defineProperty(S,A,X.get?X:{enumerable:!0,get:()=>H[A]})}}return S.default=H,Object.freeze(S)}const s=r(n),i=new Map,o={set(H,S,A){i.has(H)||i.set(H,new Map);const X=i.get(H);if(!X.has(S)&&X.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(X.keys())[0]}.`);return}X.set(S,A)},get(H,S){return i.has(H)&&i.get(H).get(S)||null},remove(H,S){if(!i.has(H))return;const A=i.get(H);A.delete(S),A.size===0&&i.delete(H)}},a=1e6,l=1e3,c="transitionend",u=H=>(H&&window.CSS&&window.CSS.escape&&(H=H.replace(/#([^\s"#']+)/g,(S,A)=>`#${CSS.escape(A)}`)),H),d=H=>H==null?`${H}`:Object.prototype.toString.call(H).match(/\s([a-z]+)/i)[1].toLowerCase(),h=H=>{do H+=Math.floor(Math.random()*a);while(document.getElementById(H));return H},f=H=>{if(!H)return 0;let{transitionDuration:S,transitionDelay:A}=window.getComputedStyle(H);const X=Number.parseFloat(S),ve=Number.parseFloat(A);return!X&&!ve?0:(S=S.split(",")[0],A=A.split(",")[0],(Number.parseFloat(S)+Number.parseFloat(A))*l)},p=H=>{H.dispatchEvent(new Event(c))},m=H=>!H||typeof H!="object"?!1:(typeof H.jquery<"u"&&(H=H[0]),typeof H.nodeType<"u"),g=H=>m(H)?H.jquery?H[0]:H:typeof H=="string"&&H.length>0?document.querySelector(u(H)):null,y=H=>{if(!m(H)||H.getClientRects().length===0)return!1;const S=getComputedStyle(H).getPropertyValue("visibility")==="visible",A=H.closest("details:not([open])");if(!A)return S;if(A!==H){const X=H.closest("summary");if(X&&X.parentNode!==A||X===null)return!1}return S},b=H=>!H||H.nodeType!==Node.ELEMENT_NODE||H.classList.contains("disabled")?!0:typeof H.disabled<"u"?H.disabled:H.hasAttribute("disabled")&&H.getAttribute("disabled")!=="false",v=H=>{if(!document.documentElement.attachShadow)return null;if(typeof H.getRootNode=="function"){const S=H.getRootNode();return S instanceof ShadowRoot?S:null}return H instanceof ShadowRoot?H:H.parentNode?v(H.parentNode):null},w=()=>{},C=H=>{H.offsetHeight},_=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,E=[],I=H=>{document.readyState==="loading"?(E.length||document.addEventListener("DOMContentLoaded",()=>{for(const S of E)S()}),E.push(H)):H()},O=()=>document.documentElement.dir==="rtl",R=H=>{I(()=>{const S=_();if(S){const A=H.NAME,X=S.fn[A];S.fn[A]=H.jQueryInterface,S.fn[A].Constructor=H,S.fn[A].noConflict=()=>(S.fn[A]=X,H.jQueryInterface)}})},z=(H,S=[],A=H)=>typeof H=="function"?H(...S):A,B=(H,S,A=!0)=>{if(!A){z(H);return}const ve=f(S)+5;let Ae=!1;const Ie=({target:Ct})=>{Ct===S&&(Ae=!0,S.removeEventListener(c,Ie),z(H))};S.addEventListener(c,Ie),setTimeout(()=>{Ae||p(S)},ve)},j=(H,S,A,X)=>{const ve=H.length;let Ae=H.indexOf(S);return Ae===-1?!A&&X?H[ve-1]:H[0]:(Ae+=A?1:-1,X&&(Ae=(Ae+ve)%ve),H[Math.max(0,Math.min(Ae,ve-1))])},G=/[^.]*(?=\..*)\.|.*/,U=/\..*/,Q=/::\d+$/,se={};let V=1;const W={mouseenter:"mouseover",mouseleave:"mouseout"},L=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function J(H,S){return S&&`${S}::${V++}`||H.uidEvent||V++}function Z(H){const S=J(H);return H.uidEvent=S,se[S]=se[S]||{},se[S]}function ie(H,S){return function A(X){return Ve(X,{delegateTarget:H}),A.oneOff&&le.off(H,X.type,S),S.apply(H,[X])}}function ue(H,S,A){return function X(ve){const Ae=H.querySelectorAll(S);for(let{target:Ie}=ve;Ie&&Ie!==this;Ie=Ie.parentNode)for(const Ct of Ae)if(Ct===Ie)return Ve(ve,{delegateTarget:Ie}),X.oneOff&&le.off(H,ve.type,S,A),A.apply(Ie,[ve])}}function de(H,S,A=null){return Object.values(H).find(X=>X.callable===S&&X.delegationSelector===A)}function ye(H,S,A){const X=typeof S=="string",ve=X?A:S||A;let Ae=We(H);return L.has(Ae)||(Ae=H),[X,ve,Ae]}function Ee(H,S,A,X,ve){if(typeof S!="string"||!H)return;let[Ae,Ie,Ct]=ye(S,A,X);S in W&&(Ie=(hx=>function(Nc){if(!Nc.relatedTarget||Nc.relatedTarget!==Nc.delegateTarget&&!Nc.delegateTarget.contains(Nc.relatedTarget))return hx.call(this,Nc)})(Ie));const ls=Z(H),cs=ls[Ct]||(ls[Ct]={}),yr=de(cs,Ie,Ae?A:null);if(yr){yr.oneOff=yr.oneOff&&ve;return}const ki=J(Ie,S.replace(G,"")),Ii=Ae?ue(H,A,Ie):ie(H,Ie);Ii.delegationSelector=Ae?A:null,Ii.callable=Ie,Ii.oneOff=ve,Ii.uidEvent=ki,cs[ki]=Ii,H.addEventListener(Ct,Ii,Ae)}function ge(H,S,A,X,ve){const Ae=de(S[A],X,ve);Ae&&(H.removeEventListener(A,Ae,!!ve),delete S[A][Ae.uidEvent])}function Pe(H,S,A,X){const ve=S[A]||{};for(const[Ae,Ie]of Object.entries(ve))Ae.includes(X)&&ge(H,S,A,Ie.callable,Ie.delegationSelector)}function We(H){return H=H.replace(U,""),W[H]||H}const le={on(H,S,A,X){Ee(H,S,A,X,!1)},one(H,S,A,X){Ee(H,S,A,X,!0)},off(H,S,A,X){if(typeof S!="string"||!H)return;const[ve,Ae,Ie]=ye(S,A,X),Ct=Ie!==S,ls=Z(H),cs=ls[Ie]||{},yr=S.startsWith(".");if(typeof Ae<"u"){if(!Object.keys(cs).length)return;ge(H,ls,Ie,Ae,ve?A:null);return}if(yr)for(const ki of Object.keys(ls))Pe(H,ls,ki,S.slice(1));for(const[ki,Ii]of Object.entries(cs)){const fd=ki.replace(Q,"");(!Ct||S.includes(fd))&&ge(H,ls,Ie,Ii.callable,Ii.delegationSelector)}},trigger(H,S,A){if(typeof S!="string"||!H)return null;const X=_(),ve=We(S),Ae=S!==ve;let Ie=null,Ct=!0,ls=!0,cs=!1;Ae&&X&&(Ie=X.Event(S,A),X(H).trigger(Ie),Ct=!Ie.isPropagationStopped(),ls=!Ie.isImmediatePropagationStopped(),cs=Ie.isDefaultPrevented());const yr=Ve(new Event(S,{bubbles:Ct,cancelable:!0}),A);return cs&&yr.preventDefault(),ls&&H.dispatchEvent(yr),yr.defaultPrevented&&Ie&&Ie.preventDefault(),yr}};function Ve(H,S={}){for(const[A,X]of Object.entries(S))try{H[A]=X}catch{Object.defineProperty(H,A,{configurable:!0,get(){return X}})}return H}function Je(H){if(H==="true")return!0;if(H==="false")return!1;if(H===Number(H).toString())return Number(H);if(H===""||H==="null")return null;if(typeof H!="string")return H;try{return JSON.parse(decodeURIComponent(H))}catch{return H}}function at(H){return H.replace(/[A-Z]/g,S=>`-${S.toLowerCase()}`)}const _e={setDataAttribute(H,S,A){H.setAttribute(`data-bs-${at(S)}`,A)},removeDataAttribute(H,S){H.removeAttribute(`data-bs-${at(S)}`)},getDataAttributes(H){if(!H)return{};const S={},A=Object.keys(H.dataset).filter(X=>X.startsWith("bs")&&!X.startsWith("bsConfig"));for(const X of A){let ve=X.replace(/^bs/,"");ve=ve.charAt(0).toLowerCase()+ve.slice(1,ve.length),S[ve]=Je(H.dataset[X])}return S},getDataAttribute(H,S){return Je(H.getAttribute(`data-bs-${at(S)}`))}};class ze{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(S){return S=this._mergeConfigObj(S),S=this._configAfterMerge(S),this._typeCheckConfig(S),S}_configAfterMerge(S){return S}_mergeConfigObj(S,A){const X=m(A)?_e.getDataAttribute(A,"config"):{};return{...this.constructor.Default,...typeof X=="object"?X:{},...m(A)?_e.getDataAttributes(A):{},...typeof S=="object"?S:{}}}_typeCheckConfig(S,A=this.constructor.DefaultType){for(const[X,ve]of Object.entries(A)){const Ae=S[X],Ie=m(Ae)?"element":d(Ae);if(!new RegExp(ve).test(Ie))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${X}" provided type "${Ie}" but expected type "${ve}".`)}}}const it="5.3.3";class Xe extends ze{constructor(S,A){super(),S=g(S),S&&(this._element=S,this._config=this._getConfig(A),o.set(this._element,this.constructor.DATA_KEY,this))}dispose(){o.remove(this._element,this.constructor.DATA_KEY),le.off(this._element,this.constructor.EVENT_KEY);for(const S of Object.getOwnPropertyNames(this))this[S]=null}_queueCallback(S,A,X=!0){B(S,A,X)}_getConfig(S){return S=this._mergeConfigObj(S,this._element),S=this._configAfterMerge(S),this._typeCheckConfig(S),S}static getInstance(S){return o.get(g(S),this.DATA_KEY)}static getOrCreateInstance(S,A={}){return this.getInstance(S)||new this(S,typeof A=="object"?A:null)}static get VERSION(){return it}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(S){return`${S}${this.EVENT_KEY}`}}const xn=H=>{let S=H.getAttribute("data-bs-target");if(!S||S==="#"){let A=H.getAttribute("href");if(!A||!A.includes("#")&&!A.startsWith("."))return null;A.includes("#")&&!A.startsWith("#")&&(A=`#${A.split("#")[1]}`),S=A&&A!=="#"?A.trim():null}return S?S.split(",").map(A=>u(A)).join(","):null},Ne={find(H,S=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(S,H))},findOne(H,S=document.documentElement){return Element.prototype.querySelector.call(S,H)},children(H,S){return[].concat(...H.children).filter(A=>A.matches(S))},parents(H,S){const A=[];let X=H.parentNode.closest(S);for(;X;)A.push(X),X=X.parentNode.closest(S);return A},prev(H,S){let A=H.previousElementSibling;for(;A;){if(A.matches(S))return[A];A=A.previousElementSibling}return[]},next(H,S){let A=H.nextElementSibling;for(;A;){if(A.matches(S))return[A];A=A.nextElementSibling}return[]},focusableChildren(H){const S=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(A=>`${A}:not([tabindex^="-"])`).join(",");return this.find(S,H).filter(A=>!b(A)&&y(A))},getSelectorFromElement(H){const S=xn(H);return S&&Ne.findOne(S)?S:null},getElementFromSelector(H){const S=xn(H);return S?Ne.findOne(S):null},getMultipleElementsFromSelector(H){const S=xn(H);return S?Ne.find(S):[]}},Bt=(H,S="hide")=>{const A=`click.dismiss${H.EVENT_KEY}`,X=H.NAME;le.on(document,A,`[data-bs-dismiss="${X}"]`,function(ve){if(["A","AREA"].includes(this.tagName)&&ve.preventDefault(),b(this))return;const Ae=Ne.getElementFromSelector(this)||this.closest(`.${X}`);H.getOrCreateInstance(Ae)[S]()})},At="alert",Wt=".bs.alert",tn=`close${Wt}`,rt=`closed${Wt}`,Vt="fade",Cn="show";class Kn extends Xe{static get NAME(){return At}close(){if(le.trigger(this._element,tn).defaultPrevented)return;this._element.classList.remove(Cn);const A=this._element.classList.contains(Vt);this._queueCallback(()=>this._destroyElement(),this._element,A)}_destroyElement(){this._element.remove(),le.trigger(this._element,rt),this.dispose()}static jQueryInterface(S){return this.each(function(){const A=Kn.getOrCreateInstance(this);if(typeof S=="string"){if(A[S]===void 0||S.startsWith("_")||S==="constructor")throw new TypeError(`No method named "${S}"`);A[S](this)}})}}Bt(Kn,"close"),R(Kn);const ro="button",Ea=".bs.button",Ho=".data-api",vc="active",wc='[data-bs-toggle="button"]',Qh=`click${Ea}${Ho}`;class so extends Xe{static get NAME(){return ro}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(vc))}static jQueryInterface(S){return this.each(function(){const A=so.getOrCreateInstance(this);S==="toggle"&&A[S]()})}}le.on(document,Qh,wc,H=>{H.preventDefault();const S=H.target.closest(wc);so.getOrCreateInstance(S).toggle()}),R(so);const Jh="swipe",Ci=".bs.swipe",xc=`touchstart${Ci}`,Yu=`touchmove${Ci}`,Zh=`touchend${Ci}`,ef=`pointerdown${Ci}`,Eg=`pointerup${Ci}`,ae="touch",he="pen",be="pointer-event",Te=40,Be={endCallback:null,leftCallback:null,rightCallback:null},mt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Ze extends ze{constructor(S,A){super(),this._element=S,!(!S||!Ze.isSupported())&&(this._config=this._getConfig(A),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return Be}static get DefaultType(){return mt}static get NAME(){return Jh}dispose(){le.off(this._element,Ci)}_start(S){if(!this._supportPointerEvents){this._deltaX=S.touches[0].clientX;return}this._eventIsPointerPenTouch(S)&&(this._deltaX=S.clientX)}_end(S){this._eventIsPointerPenTouch(S)&&(this._deltaX=S.clientX-this._deltaX),this._handleSwipe(),z(this._config.endCallback)}_move(S){this._deltaX=S.touches&&S.touches.length>1?0:S.touches[0].clientX-this._deltaX}_handleSwipe(){const S=Math.abs(this._deltaX);if(S<=Te)return;const A=S/this._deltaX;this._deltaX=0,A&&z(A>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(le.on(this._element,ef,S=>this._start(S)),le.on(this._element,Eg,S=>this._end(S)),this._element.classList.add(be)):(le.on(this._element,xc,S=>this._start(S)),le.on(this._element,Yu,S=>this._move(S)),le.on(this._element,Zh,S=>this._end(S)))}_eventIsPointerPenTouch(S){return this._supportPointerEvents&&(S.pointerType===he||S.pointerType===ae)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const He="carousel",nt=".bs.carousel",hn=".data-api",Pn="ArrowLeft",ct="ArrowRight",Xt=500,En="next",qs="prev",Zn="left",fn="right",er=`slide${nt}`,Ln=`slid${nt}`,cn=`keydown${nt}`,Go=`mouseenter${nt}`,Ei=`mouseleave${nt}`,Xs=`dragstart${nt}`,vt=`load${nt}${hn}`,gr=`click${nt}${hn}`,Ir="carousel",nn="active",_a="slide",Sc="carousel-item-end",Qu="carousel-item-start",iw="carousel-item-next",ow="carousel-item-prev",_g=".active",Tg=".carousel-item",aw=_g+Tg,lw=".carousel-item img",cw=".carousel-indicators",uw="[data-bs-slide], [data-bs-slide-to]",dw='[data-bs-ride="carousel"]',hw={[Pn]:fn,[ct]:Zn},io={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},_s={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ys extends Xe{constructor(S,A){super(S,A),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Ne.findOne(cw,this._element),this._addEventListeners(),this._config.ride===Ir&&this.cycle()}static get Default(){return io}static get DefaultType(){return _s}static get NAME(){return He}next(){this._slide(En)}nextWhenVisible(){!document.hidden&&y(this._element)&&this.next()}prev(){this._slide(qs)}pause(){this._isSliding&&p(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){le.one(this._element,Ln,()=>this.cycle());return}this.cycle()}}to(S){const A=this._getItems();if(S>A.length-1||S<0)return;if(this._isSliding){le.one(this._element,Ln,()=>this.to(S));return}const X=this._getItemIndex(this._getActive());if(X===S)return;const ve=S>X?En:qs;this._slide(ve,A[S])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(S){return S.defaultInterval=S.interval,S}_addEventListeners(){this._config.keyboard&&le.on(this._element,cn,S=>this._keydown(S)),this._config.pause==="hover"&&(le.on(this._element,Go,()=>this.pause()),le.on(this._element,Ei,()=>this._maybeEnableCycle())),this._config.touch&&Ze.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const X of Ne.find(lw,this._element))le.on(X,Xs,ve=>ve.preventDefault());const A={leftCallback:()=>this._slide(this._directionToOrder(Zn)),rightCallback:()=>this._slide(this._directionToOrder(fn)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),Xt+this._config.interval))}};this._swipeHelper=new Ze(this._element,A)}_keydown(S){if(/input|textarea/i.test(S.target.tagName))return;const A=hw[S.key];A&&(S.preventDefault(),this._slide(this._directionToOrder(A)))}_getItemIndex(S){return this._getItems().indexOf(S)}_setActiveIndicatorElement(S){if(!this._indicatorsElement)return;const A=Ne.findOne(_g,this._indicatorsElement);A.classList.remove(nn),A.removeAttribute("aria-current");const X=Ne.findOne(`[data-bs-slide-to="${S}"]`,this._indicatorsElement);X&&(X.classList.add(nn),X.setAttribute("aria-current","true"))}_updateInterval(){const S=this._activeElement||this._getActive();if(!S)return;const A=Number.parseInt(S.getAttribute("data-bs-interval"),10);this._config.interval=A||this._config.defaultInterval}_slide(S,A=null){if(this._isSliding)return;const X=this._getActive(),ve=S===En,Ae=A||j(this._getItems(),X,ve,this._config.wrap);if(Ae===X)return;const Ie=this._getItemIndex(Ae),Ct=fd=>le.trigger(this._element,fd,{relatedTarget:Ae,direction:this._orderToDirection(S),from:this._getItemIndex(X),to:Ie});if(Ct(er).defaultPrevented||!X||!Ae)return;const cs=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(Ie),this._activeElement=Ae;const yr=ve?Qu:Sc,ki=ve?iw:ow;Ae.classList.add(ki),C(Ae),X.classList.add(yr),Ae.classList.add(yr);const Ii=()=>{Ae.classList.remove(yr,ki),Ae.classList.add(nn),X.classList.remove(nn,ki,yr),this._isSliding=!1,Ct(Ln)};this._queueCallback(Ii,X,this._isAnimated()),cs&&this.cycle()}_isAnimated(){return this._element.classList.contains(_a)}_getActive(){return Ne.findOne(aw,this._element)}_getItems(){return Ne.find(Tg,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(S){return O()?S===Zn?qs:En:S===Zn?En:qs}_orderToDirection(S){return O()?S===qs?Zn:fn:S===qs?fn:Zn}static jQueryInterface(S){return this.each(function(){const A=Ys.getOrCreateInstance(this,S);if(typeof S=="number"){A.to(S);return}if(typeof S=="string"){if(A[S]===void 0||S.startsWith("_")||S==="constructor")throw new TypeError(`No method named "${S}"`);A[S]()}})}}le.on(document,gr,uw,function(H){const S=Ne.getElementFromSelector(this);if(!S||!S.classList.contains(Ir))return;H.preventDefault();const A=Ys.getOrCreateInstance(S),X=this.getAttribute("data-bs-slide-to");if(X){A.to(X),A._maybeEnableCycle();return}if(_e.getDataAttribute(this,"slide")==="next"){A.next(),A._maybeEnableCycle();return}A.prev(),A._maybeEnableCycle()}),le.on(window,vt,()=>{const H=Ne.find(dw);for(const S of H)Ys.getOrCreateInstance(S)}),R(Ys);const Qs="collapse",wl=".bs.collapse",oo=".data-api",xl=`show${wl}`,tf=`shown${wl}`,Cc=`hide${wl}`,kg=`hidden${wl}`,pw=`click${wl}${oo}`,Ta="show",ka="collapse",Ju="collapsing",Ko="collapsed",XT=`:scope .${ka} .${ka}`,Ia="collapse-horizontal",nf="width",mw="height",Zu=".collapse.show, .collapse.collapsing",ed='[data-bs-toggle="collapse"]',td={parent:null,toggle:!0},gw={parent:"(null|element)",toggle:"boolean"};class Sl extends Xe{constructor(S,A){super(S,A),this._isTransitioning=!1,this._triggerArray=[];const X=Ne.find(ed);for(const ve of X){const Ae=Ne.getSelectorFromElement(ve),Ie=Ne.find(Ae).filter(Ct=>Ct===this._element);Ae!==null&&Ie.length&&this._triggerArray.push(ve)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return td}static get DefaultType(){return gw}static get NAME(){return Qs}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let S=[];if(this._config.parent&&(S=this._getFirstLevelChildren(Zu).filter(Ct=>Ct!==this._element).map(Ct=>Sl.getOrCreateInstance(Ct,{toggle:!1}))),S.length&&S[0]._isTransitioning||le.trigger(this._element,xl).defaultPrevented)return;for(const Ct of S)Ct.hide();const X=this._getDimension();this._element.classList.remove(ka),this._element.classList.add(Ju),this._element.style[X]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const ve=()=>{this._isTransitioning=!1,this._element.classList.remove(Ju),this._element.classList.add(ka,Ta),this._element.style[X]="",le.trigger(this._element,tf)},Ie=`scroll${X[0].toUpperCase()+X.slice(1)}`;this._queueCallback(ve,this._element,!0),this._element.style[X]=`${this._element[Ie]}px`}hide(){if(this._isTransitioning||!this._isShown()||le.trigger(this._element,Cc).defaultPrevented)return;const A=this._getDimension();this._element.style[A]=`${this._element.getBoundingClientRect()[A]}px`,C(this._element),this._element.classList.add(Ju),this._element.classList.remove(ka,Ta);for(const ve of this._triggerArray){const Ae=Ne.getElementFromSelector(ve);Ae&&!this._isShown(Ae)&&this._addAriaAndCollapsedClass([ve],!1)}this._isTransitioning=!0;const X=()=>{this._isTransitioning=!1,this._element.classList.remove(Ju),this._element.classList.add(ka),le.trigger(this._element,kg)};this._element.style[A]="",this._queueCallback(X,this._element,!0)}_isShown(S=this._element){return S.classList.contains(Ta)}_configAfterMerge(S){return S.toggle=!!S.toggle,S.parent=g(S.parent),S}_getDimension(){return this._element.classList.contains(Ia)?nf:mw}_initializeChildren(){if(!this._config.parent)return;const S=this._getFirstLevelChildren(ed);for(const A of S){const X=Ne.getElementFromSelector(A);X&&this._addAriaAndCollapsedClass([A],this._isShown(X))}}_getFirstLevelChildren(S){const A=Ne.find(XT,this._config.parent);return Ne.find(S,this._config.parent).filter(X=>!A.includes(X))}_addAriaAndCollapsedClass(S,A){if(S.length)for(const X of S)X.classList.toggle(Ko,!A),X.setAttribute("aria-expanded",A)}static jQueryInterface(S){const A={};return typeof S=="string"&&/show|hide/.test(S)&&(A.toggle=!1),this.each(function(){const X=Sl.getOrCreateInstance(this,A);if(typeof S=="string"){if(typeof X[S]>"u")throw new TypeError(`No method named "${S}"`);X[S]()}})}}le.on(document,pw,ed,function(H){(H.target.tagName==="A"||H.delegateTarget&&H.delegateTarget.tagName==="A")&&H.preventDefault();for(const S of Ne.getMultipleElementsFromSelector(this))Sl.getOrCreateInstance(S,{toggle:!1}).toggle()}),R(Sl);const Ig="dropdown",Cl=".bs.dropdown",rf=".data-api",Ng="Escape",rd="Tab",$g="ArrowUp",yw="ArrowDown",sf=2,YT=`hide${Cl}`,bw=`hidden${Cl}`,Ag=`show${Cl}`,Rg=`shown${Cl}`,of=`click${Cl}${rf}`,Og=`keydown${Cl}${rf}`,sd=`keyup${Cl}${rf}`,Na="show",vw="dropup",ww="dropend",Ec="dropstart",QT="dropup-center",xw="dropdown-center",$a='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Sw=`${$a}.${Na}`,id=".dropdown-menu",Cw=".navbar",Dg=".navbar-nav",Ew=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",JT=O()?"top-end":"top-start",ZT=O()?"top-start":"top-end",_w=O()?"bottom-end":"bottom-start",Tw=O()?"bottom-start":"bottom-end",af=O()?"left-start":"right-start",ek=O()?"right-start":"left-start",tk="top",Pg="bottom",kw={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Iw={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Nr extends Xe{constructor(S,A){super(S,A),this._popper=null,this._parent=this._element.parentNode,this._menu=Ne.next(this._element,id)[0]||Ne.prev(this._element,id)[0]||Ne.findOne(id,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return kw}static get DefaultType(){return Iw}static get NAME(){return Ig}toggle(){return this._isShown()?this.hide():this.show()}show(){if(b(this._element)||this._isShown())return;const S={relatedTarget:this._element};if(!le.trigger(this._element,Ag,S).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Dg))for(const X of[].concat(...document.body.children))le.on(X,"mouseover",w);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Na),this._element.classList.add(Na),le.trigger(this._element,Rg,S)}}hide(){if(b(this._element)||!this._isShown())return;const S={relatedTarget:this._element};this._completeHide(S)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(S){if(!le.trigger(this._element,YT,S).defaultPrevented){if("ontouchstart"in document.documentElement)for(const X of[].concat(...document.body.children))le.off(X,"mouseover",w);this._popper&&this._popper.destroy(),this._menu.classList.remove(Na),this._element.classList.remove(Na),this._element.setAttribute("aria-expanded","false"),_e.removeDataAttribute(this._menu,"popper"),le.trigger(this._element,bw,S)}}_getConfig(S){if(S=super._getConfig(S),typeof S.reference=="object"&&!m(S.reference)&&typeof S.reference.getBoundingClientRect!="function")throw new TypeError(`${Ig.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return S}_createPopper(){if(typeof s>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let S=this._element;this._config.reference==="parent"?S=this._parent:m(this._config.reference)?S=g(this._config.reference):typeof this._config.reference=="object"&&(S=this._config.reference);const A=this._getPopperConfig();this._popper=s.createPopper(S,this._menu,A)}_isShown(){return this._menu.classList.contains(Na)}_getPlacement(){const S=this._parent;if(S.classList.contains(ww))return af;if(S.classList.contains(Ec))return ek;if(S.classList.contains(QT))return tk;if(S.classList.contains(xw))return Pg;const A=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return S.classList.contains(vw)?A?ZT:JT:A?Tw:_w}_detectNavbar(){return this._element.closest(Cw)!==null}_getOffset(){const{offset:S}=this._config;return typeof S=="string"?S.split(",").map(A=>Number.parseInt(A,10)):typeof S=="function"?A=>S(A,this._element):S}_getPopperConfig(){const S={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(_e.setDataAttribute(this._menu,"popper","static"),S.modifiers=[{name:"applyStyles",enabled:!1}]),{...S,...z(this._config.popperConfig,[S])}}_selectMenuItem({key:S,target:A}){const X=Ne.find(Ew,this._menu).filter(ve=>y(ve));X.length&&j(X,A,S===yw,!X.includes(A)).focus()}static jQueryInterface(S){return this.each(function(){const A=Nr.getOrCreateInstance(this,S);if(typeof S=="string"){if(typeof A[S]>"u")throw new TypeError(`No method named "${S}"`);A[S]()}})}static clearMenus(S){if(S.button===sf||S.type==="keyup"&&S.key!==rd)return;const A=Ne.find(Sw);for(const X of A){const ve=Nr.getInstance(X);if(!ve||ve._config.autoClose===!1)continue;const Ae=S.composedPath(),Ie=Ae.includes(ve._menu);if(Ae.includes(ve._element)||ve._config.autoClose==="inside"&&!Ie||ve._config.autoClose==="outside"&&Ie||ve._menu.contains(S.target)&&(S.type==="keyup"&&S.key===rd||/input|select|option|textarea|form/i.test(S.target.tagName)))continue;const Ct={relatedTarget:ve._element};S.type==="click"&&(Ct.clickEvent=S),ve._completeHide(Ct)}}static dataApiKeydownHandler(S){const A=/input|textarea/i.test(S.target.tagName),X=S.key===Ng,ve=[$g,yw].includes(S.key);if(!ve&&!X||A&&!X)return;S.preventDefault();const Ae=this.matches($a)?this:Ne.prev(this,$a)[0]||Ne.next(this,$a)[0]||Ne.findOne($a,S.delegateTarget.parentNode),Ie=Nr.getOrCreateInstance(Ae);if(ve){S.stopPropagation(),Ie.show(),Ie._selectMenuItem(S);return}Ie._isShown()&&(S.stopPropagation(),Ie.hide(),Ae.focus())}}le.on(document,Og,$a,Nr.dataApiKeydownHandler),le.on(document,Og,id,Nr.dataApiKeydownHandler),le.on(document,of,Nr.clearMenus),le.on(document,sd,Nr.clearMenus),le.on(document,of,$a,function(H){H.preventDefault(),Nr.getOrCreateInstance(this).toggle()}),R(Nr);const lf="backdrop",nk="fade",Lg="show",Nw=`mousedown.bs.${lf}`,rk={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},sk={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class $w extends ze{constructor(S){super(),this._config=this._getConfig(S),this._isAppended=!1,this._element=null}static get Default(){return rk}static get DefaultType(){return sk}static get NAME(){return lf}show(S){if(!this._config.isVisible){z(S);return}this._append();const A=this._getElement();this._config.isAnimated&&C(A),A.classList.add(Lg),this._emulateAnimation(()=>{z(S)})}hide(S){if(!this._config.isVisible){z(S);return}this._getElement().classList.remove(Lg),this._emulateAnimation(()=>{this.dispose(),z(S)})}dispose(){this._isAppended&&(le.off(this._element,Nw),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const S=document.createElement("div");S.className=this._config.className,this._config.isAnimated&&S.classList.add(nk),this._element=S}return this._element}_configAfterMerge(S){return S.rootElement=g(S.rootElement),S}_append(){if(this._isAppended)return;const S=this._getElement();this._config.rootElement.append(S),le.on(S,Nw,()=>{z(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(S){B(S,this._getElement(),this._config.isAnimated)}}const Aw="focustrap",cf=".bs.focustrap",_c=`focusin${cf}`,El=`keydown.tab${cf}`,ok="Tab",uf="forward",Rw="backward",ak={autofocus:!0,trapElement:null},lk={autofocus:"boolean",trapElement:"element"};class Ow extends ze{constructor(S){super(),this._config=this._getConfig(S),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ak}static get DefaultType(){return lk}static get NAME(){return Aw}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),le.off(document,cf),le.on(document,_c,S=>this._handleFocusin(S)),le.on(document,El,S=>this._handleKeydown(S)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,le.off(document,cf))}_handleFocusin(S){const{trapElement:A}=this._config;if(S.target===document||S.target===A||A.contains(S.target))return;const X=Ne.focusableChildren(A);X.length===0?A.focus():this._lastTabNavDirection===Rw?X[X.length-1].focus():X[0].focus()}_handleKeydown(S){S.key===ok&&(this._lastTabNavDirection=S.shiftKey?Rw:uf)}}const Dw=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Pw=".sticky-top",df="padding-right",Lw="margin-right";class Ts{constructor(){this._element=document.body}getWidth(){const S=document.documentElement.clientWidth;return Math.abs(window.innerWidth-S)}hide(){const S=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,df,A=>A+S),this._setElementAttributes(Dw,df,A=>A+S),this._setElementAttributes(Pw,Lw,A=>A-S)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,df),this._resetElementAttributes(Dw,df),this._resetElementAttributes(Pw,Lw)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(S,A,X){const ve=this.getWidth(),Ae=Ie=>{if(Ie!==this._element&&window.innerWidth>Ie.clientWidth+ve)return;this._saveInitialAttribute(Ie,A);const Ct=window.getComputedStyle(Ie).getPropertyValue(A);Ie.style.setProperty(A,`${X(Number.parseFloat(Ct))}px`)};this._applyManipulationCallback(S,Ae)}_saveInitialAttribute(S,A){const X=S.style.getPropertyValue(A);X&&_e.setDataAttribute(S,A,X)}_resetElementAttributes(S,A){const X=ve=>{const Ae=_e.getDataAttribute(ve,A);if(Ae===null){ve.style.removeProperty(A);return}_e.removeDataAttribute(ve,A),ve.style.setProperty(A,Ae)};this._applyManipulationCallback(S,X)}_applyManipulationCallback(S,A){if(m(S)){A(S);return}for(const X of Ne.find(S,this._element))A(X)}}const Fw="modal",ks=".bs.modal",uk=".data-api",dk="Escape",Mw=`hide${ks}`,hf=`hidePrevented${ks}`,zw=`hidden${ks}`,Bw=`show${ks}`,jw=`shown${ks}`,hk=`resize${ks}`,fk=`click.dismiss${ks}`,Vw=`mousedown.dismiss${ks}`,Uw=`keydown.dismiss${ks}`,Ww=`click${ks}${uk}`,od="modal-open",Hw="fade",ff="show",as="modal-static",pk=".modal.show",mk=".modal-dialog",Gw=".modal-body",Kw='[data-bs-toggle="modal"]',gk={backdrop:!0,focus:!0,keyboard:!0},yk={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class _l extends Xe{constructor(S,A){super(S,A),this._dialog=Ne.findOne(mk,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ts,this._addEventListeners()}static get Default(){return gk}static get DefaultType(){return yk}static get NAME(){return Fw}toggle(S){return this._isShown?this.hide():this.show(S)}show(S){this._isShown||this._isTransitioning||le.trigger(this._element,Bw,{relatedTarget:S}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(od),this._adjustDialog(),this._backdrop.show(()=>this._showElement(S)))}hide(){!this._isShown||this._isTransitioning||le.trigger(this._element,Mw).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ff),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){le.off(window,ks),le.off(this._dialog,ks),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new $w({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Ow({trapElement:this._element})}_showElement(S){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const A=Ne.findOne(Gw,this._dialog);A&&(A.scrollTop=0),C(this._element),this._element.classList.add(ff);const X=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,le.trigger(this._element,jw,{relatedTarget:S})};this._queueCallback(X,this._dialog,this._isAnimated())}_addEventListeners(){le.on(this._element,Uw,S=>{if(S.key===dk){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),le.on(window,hk,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),le.on(this._element,Vw,S=>{le.one(this._element,fk,A=>{if(!(this._element!==S.target||this._element!==A.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(od),this._resetAdjustments(),this._scrollBar.reset(),le.trigger(this._element,zw)})}_isAnimated(){return this._element.classList.contains(Hw)}_triggerBackdropTransition(){if(le.trigger(this._element,hf).defaultPrevented)return;const A=this._element.scrollHeight>document.documentElement.clientHeight,X=this._element.style.overflowY;X==="hidden"||this._element.classList.contains(as)||(A||(this._element.style.overflowY="hidden"),this._element.classList.add(as),this._queueCallback(()=>{this._element.classList.remove(as),this._queueCallback(()=>{this._element.style.overflowY=X},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const S=this._element.scrollHeight>document.documentElement.clientHeight,A=this._scrollBar.getWidth(),X=A>0;if(X&&!S){const ve=O()?"paddingLeft":"paddingRight";this._element.style[ve]=`${A}px`}if(!X&&S){const ve=O()?"paddingRight":"paddingLeft";this._element.style[ve]=`${A}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(S,A){return this.each(function(){const X=_l.getOrCreateInstance(this,S);if(typeof S=="string"){if(typeof X[S]>"u")throw new TypeError(`No method named "${S}"`);X[S](A)}})}}le.on(document,Ww,Kw,function(H){const S=Ne.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&H.preventDefault(),le.one(S,Bw,ve=>{ve.defaultPrevented||le.one(S,zw,()=>{y(this)&&this.focus()})});const A=Ne.findOne(pk);A&&_l.getInstance(A).hide(),_l.getOrCreateInstance(S).toggle(this)}),Bt(_l),R(_l);const bk="offcanvas",qo=".bs.offcanvas",Fg=".data-api",qw=`load${qo}${Fg}`,Mg="Escape",Xw="show",Yw="showing",Aa="hiding",Xo="offcanvas-backdrop",zg=".offcanvas.show",vk=`show${qo}`,Qw=`shown${qo}`,Jw=`hide${qo}`,Bg=`hidePrevented${qo}`,jg=`hidden${qo}`,wk=`resize${qo}`,xk=`click${qo}${Fg}`,Sk=`keydown.dismiss${qo}`,Zw='[data-bs-toggle="offcanvas"]',ex={backdrop:!0,keyboard:!0,scroll:!1},Ck={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Yo extends Xe{constructor(S,A){super(S,A),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return ex}static get DefaultType(){return Ck}static get NAME(){return bk}toggle(S){return this._isShown?this.hide():this.show(S)}show(S){if(this._isShown||le.trigger(this._element,vk,{relatedTarget:S}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ts().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Yw);const X=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Xw),this._element.classList.remove(Yw),le.trigger(this._element,Qw,{relatedTarget:S})};this._queueCallback(X,this._element,!0)}hide(){if(!this._isShown||le.trigger(this._element,Jw).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Aa),this._backdrop.hide();const A=()=>{this._element.classList.remove(Xw,Aa),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ts().reset(),le.trigger(this._element,jg)};this._queueCallback(A,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const S=()=>{if(this._config.backdrop==="static"){le.trigger(this._element,Bg);return}this.hide()},A=!!this._config.backdrop;return new $w({className:Xo,isVisible:A,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:A?S:null})}_initializeFocusTrap(){return new Ow({trapElement:this._element})}_addEventListeners(){le.on(this._element,Sk,S=>{if(S.key===Mg){if(this._config.keyboard){this.hide();return}le.trigger(this._element,Bg)}})}static jQueryInterface(S){return this.each(function(){const A=Yo.getOrCreateInstance(this,S);if(typeof S=="string"){if(A[S]===void 0||S.startsWith("_")||S==="constructor")throw new TypeError(`No method named "${S}"`);A[S](this)}})}}le.on(document,xk,Zw,function(H){const S=Ne.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&H.preventDefault(),b(this))return;le.one(S,jg,()=>{y(this)&&this.focus()});const A=Ne.findOne(zg);A&&A!==S&&Yo.getInstance(A).hide(),Yo.getOrCreateInstance(S).toggle(this)}),le.on(window,qw,()=>{for(const H of Ne.find(zg))Yo.getOrCreateInstance(H).show()}),le.on(window,wk,()=>{for(const H of Ne.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(H).position!=="fixed"&&Yo.getOrCreateInstance(H).hide()}),Bt(Yo),R(Yo);const tx={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ek=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Qo=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,nx=(H,S)=>{const A=H.nodeName.toLowerCase();return S.includes(A)?Ek.has(A)?!!Qo.test(H.nodeValue):!0:S.filter(X=>X instanceof RegExp).some(X=>X.test(A))};function _k(H,S,A){if(!H.length)return H;if(A&&typeof A=="function")return A(H);const ve=new window.DOMParser().parseFromString(H,"text/html"),Ae=[].concat(...ve.body.querySelectorAll("*"));for(const Ie of Ae){const Ct=Ie.nodeName.toLowerCase();if(!Object.keys(S).includes(Ct)){Ie.remove();continue}const ls=[].concat(...Ie.attributes),cs=[].concat(S["*"]||[],S[Ct]||[]);for(const yr of ls)nx(yr,cs)||Ie.removeAttribute(yr.nodeName)}return ve.body.innerHTML}const Tk="TemplateFactory",kk={allowList:tx,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ik={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Nk={entry:"(string|element|function|null)",selector:"(string|element)"};class $k extends ze{constructor(S){super(),this._config=this._getConfig(S)}static get Default(){return kk}static get DefaultType(){return Ik}static get NAME(){return Tk}getContent(){return Object.values(this._config.content).map(S=>this._resolvePossibleFunction(S)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(S){return this._checkContent(S),this._config.content={...this._config.content,...S},this}toHtml(){const S=document.createElement("div");S.innerHTML=this._maybeSanitize(this._config.template);for(const[ve,Ae]of Object.entries(this._config.content))this._setContent(S,Ae,ve);const A=S.children[0],X=this._resolvePossibleFunction(this._config.extraClass);return X&&A.classList.add(...X.split(" ")),A}_typeCheckConfig(S){super._typeCheckConfig(S),this._checkContent(S.content)}_checkContent(S){for(const[A,X]of Object.entries(S))super._typeCheckConfig({selector:A,entry:X},Nk)}_setContent(S,A,X){const ve=Ne.findOne(X,S);if(ve){if(A=this._resolvePossibleFunction(A),!A){ve.remove();return}if(m(A)){this._putElementInTemplate(g(A),ve);return}if(this._config.html){ve.innerHTML=this._maybeSanitize(A);return}ve.textContent=A}}_maybeSanitize(S){return this._config.sanitize?_k(S,this._config.allowList,this._config.sanitizeFn):S}_resolvePossibleFunction(S){return z(S,[this])}_putElementInTemplate(S,A){if(this._config.html){A.innerHTML="",A.append(S);return}A.textContent=S.textContent}}const Ak="tooltip",Rk=new Set(["sanitize","allowList","sanitizeFn"]),ad="fade",pf="modal",ld="show",rx=".tooltip-inner",Tc=`.${pf}`,mf="hide.bs.modal",cd="hover",Vg="focus",Ok="click",Tl="manual",Dk="hide",Pk="hidden",gf="show",Ug="shown",Lk="inserted",sx="click",Fk="focusin",kc="focusout",Wg="mouseenter",ix="mouseleave",Mk={AUTO:"auto",TOP:"top",RIGHT:O()?"left":"right",BOTTOM:"bottom",LEFT:O()?"right":"left"},zk={allowList:tx,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Bk={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class _i extends Xe{constructor(S,A){if(typeof s>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(S,A),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return zk}static get DefaultType(){return Bk}static get NAME(){return Ak}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),le.off(this._element.closest(Tc),mf,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const S=le.trigger(this._element,this.constructor.eventName(gf)),X=(v(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(S.defaultPrevented||!X)return;this._disposePopper();const ve=this._getTipElement();this._element.setAttribute("aria-describedby",ve.getAttribute("id"));const{container:Ae}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(Ae.append(ve),le.trigger(this._element,this.constructor.eventName(Lk))),this._popper=this._createPopper(ve),ve.classList.add(ld),"ontouchstart"in document.documentElement)for(const Ct of[].concat(...document.body.children))le.on(Ct,"mouseover",w);const Ie=()=>{le.trigger(this._element,this.constructor.eventName(Ug)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(Ie,this.tip,this._isAnimated())}hide(){if(!this._isShown()||le.trigger(this._element,this.constructor.eventName(Dk)).defaultPrevented)return;if(this._getTipElement().classList.remove(ld),"ontouchstart"in document.documentElement)for(const ve of[].concat(...document.body.children))le.off(ve,"mouseover",w);this._activeTrigger[Ok]=!1,this._activeTrigger[Vg]=!1,this._activeTrigger[cd]=!1,this._isHovered=null;const X=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),le.trigger(this._element,this.constructor.eventName(Pk)))};this._queueCallback(X,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(S){const A=this._getTemplateFactory(S).toHtml();if(!A)return null;A.classList.remove(ad,ld),A.classList.add(`bs-${this.constructor.NAME}-auto`);const X=h(this.constructor.NAME).toString();return A.setAttribute("id",X),this._isAnimated()&&A.classList.add(ad),A}setContent(S){this._newContent=S,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(S){return this._templateFactory?this._templateFactory.changeContent(S):this._templateFactory=new $k({...this._config,content:S,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[rx]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(S){return this.constructor.getOrCreateInstance(S.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ad)}_isShown(){return this.tip&&this.tip.classList.contains(ld)}_createPopper(S){const A=z(this._config.placement,[this,S,this._element]),X=Mk[A.toUpperCase()];return s.createPopper(this._element,S,this._getPopperConfig(X))}_getOffset(){const{offset:S}=this._config;return typeof S=="string"?S.split(",").map(A=>Number.parseInt(A,10)):typeof S=="function"?A=>S(A,this._element):S}_resolvePossibleFunction(S){return z(S,[this._element])}_getPopperConfig(S){const A={placement:S,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:X=>{this._getTipElement().setAttribute("data-popper-placement",X.state.placement)}}]};return{...A,...z(this._config.popperConfig,[A])}}_setListeners(){const S=this._config.trigger.split(" ");for(const A of S)if(A==="click")le.on(this._element,this.constructor.eventName(sx),this._config.selector,X=>{this._initializeOnDelegatedTarget(X).toggle()});else if(A!==Tl){const X=A===cd?this.constructor.eventName(Wg):this.constructor.eventName(Fk),ve=A===cd?this.constructor.eventName(ix):this.constructor.eventName(kc);le.on(this._element,X,this._config.selector,Ae=>{const Ie=this._initializeOnDelegatedTarget(Ae);Ie._activeTrigger[Ae.type==="focusin"?Vg:cd]=!0,Ie._enter()}),le.on(this._element,ve,this._config.selector,Ae=>{const Ie=this._initializeOnDelegatedTarget(Ae);Ie._activeTrigger[Ae.type==="focusout"?Vg:cd]=Ie._element.contains(Ae.relatedTarget),Ie._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},le.on(this._element.closest(Tc),mf,this._hideModalHandler)}_fixTitle(){const S=this._element.getAttribute("title");S&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",S),this._element.setAttribute("data-bs-original-title",S),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(S,A){clearTimeout(this._timeout),this._timeout=setTimeout(S,A)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(S){const A=_e.getDataAttributes(this._element);for(const X of Object.keys(A))Rk.has(X)&&delete A[X];return S={...A,...typeof S=="object"&&S?S:{}},S=this._mergeConfigObj(S),S=this._configAfterMerge(S),this._typeCheckConfig(S),S}_configAfterMerge(S){return S.container=S.container===!1?document.body:g(S.container),typeof S.delay=="number"&&(S.delay={show:S.delay,hide:S.delay}),typeof S.title=="number"&&(S.title=S.title.toString()),typeof S.content=="number"&&(S.content=S.content.toString()),S}_getDelegateConfig(){const S={};for(const[A,X]of Object.entries(this._config))this.constructor.Default[A]!==X&&(S[A]=X);return S.selector=!1,S.trigger="manual",S}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(S){return this.each(function(){const A=_i.getOrCreateInstance(this,S);if(typeof S=="string"){if(typeof A[S]>"u")throw new TypeError(`No method named "${S}"`);A[S]()}})}}R(_i);const kl="popover",jk=".popover-header",Vk=".popover-body",Uk={..._i.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Wk={..._i.DefaultType,content:"(null|string|element|function)"};class yf extends _i{static get Default(){return Uk}static get DefaultType(){return Wk}static get NAME(){return kl}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[jk]:this._getTitle(),[Vk]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(S){return this.each(function(){const A=yf.getOrCreateInstance(this,S);if(typeof S=="string"){if(typeof A[S]>"u")throw new TypeError(`No method named "${S}"`);A[S]()}})}}R(yf);const Hk="scrollspy",Hg=".bs.scrollspy",ox=".data-api",Gk=`activate${Hg}`,Gg=`click${Hg}`,Kg=`load${Hg}${ox}`,ax="dropdown-item",Js="active",lx='[data-bs-spy="scroll"]',ud="[href]",cx=".nav, .list-group",bf=".nav-link",qk=`${bf}, .nav-item > ${bf}, .list-group-item`,Il=".dropdown",Ra=".dropdown-toggle",Xk={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Yk={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class dd extends Xe{constructor(S,A){super(S,A),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Xk}static get DefaultType(){return Yk}static get NAME(){return Hk}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const S of this._observableSections.values())this._observer.observe(S)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(S){return S.target=g(S.target)||document.body,S.rootMargin=S.offset?`${S.offset}px 0px -30%`:S.rootMargin,typeof S.threshold=="string"&&(S.threshold=S.threshold.split(",").map(A=>Number.parseFloat(A))),S}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(le.off(this._config.target,Gg),le.on(this._config.target,Gg,ud,S=>{const A=this._observableSections.get(S.target.hash);if(A){S.preventDefault();const X=this._rootElement||window,ve=A.offsetTop-this._element.offsetTop;if(X.scrollTo){X.scrollTo({top:ve,behavior:"smooth"});return}X.scrollTop=ve}}))}_getNewObserver(){const S={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(A=>this._observerCallback(A),S)}_observerCallback(S){const A=Ie=>this._targetLinks.get(`#${Ie.target.id}`),X=Ie=>{this._previousScrollData.visibleEntryTop=Ie.target.offsetTop,this._process(A(Ie))},ve=(this._rootElement||document.documentElement).scrollTop,Ae=ve>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=ve;for(const Ie of S){if(!Ie.isIntersecting){this._activeTarget=null,this._clearActiveClass(A(Ie));continue}const Ct=Ie.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(Ae&&Ct){if(X(Ie),!ve)return;continue}!Ae&&!Ct&&X(Ie)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const S=Ne.find(ud,this._config.target);for(const A of S){if(!A.hash||b(A))continue;const X=Ne.findOne(decodeURI(A.hash),this._element);y(X)&&(this._targetLinks.set(decodeURI(A.hash),A),this._observableSections.set(A.hash,X))}}_process(S){this._activeTarget!==S&&(this._clearActiveClass(this._config.target),this._activeTarget=S,S.classList.add(Js),this._activateParents(S),le.trigger(this._element,Gk,{relatedTarget:S}))}_activateParents(S){if(S.classList.contains(ax)){Ne.findOne(Ra,S.closest(Il)).classList.add(Js);return}for(const A of Ne.parents(S,cx))for(const X of Ne.prev(A,qk))X.classList.add(Js)}_clearActiveClass(S){S.classList.remove(Js);const A=Ne.find(`${ud}.${Js}`,S);for(const X of A)X.classList.remove(Js)}static jQueryInterface(S){return this.each(function(){const A=dd.getOrCreateInstance(this,S);if(typeof S=="string"){if(A[S]===void 0||S.startsWith("_")||S==="constructor")throw new TypeError(`No method named "${S}"`);A[S]()}})}}le.on(window,Kg,()=>{for(const H of Ne.find(lx))dd.getOrCreateInstance(H)}),R(dd);const Qk="tab",Nl=".bs.tab",Jk=`hide${Nl}`,Zk=`hidden${Nl}`,dx=`show${Nl}`,vf=`shown${Nl}`,wf=`click${Nl}`,eI=`keydown${Nl}`,tI=`load${Nl}`,hd="ArrowLeft",D="ArrowRight",x="ArrowUp",T="ArrowDown",M="Home",ne="End",re="active",me="fade",Se="show",Re="dropdown",je=".dropdown-toggle",Ge=".dropdown-menu",Le=`:not(${je})`,wt='.list-group, .nav, [role="tablist"]',lt=".nav-item, .list-group-item",gt=`.nav-link${Le}, .list-group-item${Le}, [role="tab"]${Le}`,dt='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ft=`${gt}, ${dt}`,Yt=`.${re}[data-bs-toggle="tab"], .${re}[data-bs-toggle="pill"], .${re}[data-bs-toggle="list"]`;class Ft extends Xe{constructor(S){super(S),this._parent=this._element.closest(wt),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),le.on(this._element,eI,A=>this._keydown(A)))}static get NAME(){return Qk}show(){const S=this._element;if(this._elemIsActive(S))return;const A=this._getActiveElem(),X=A?le.trigger(A,Jk,{relatedTarget:S}):null;le.trigger(S,dx,{relatedTarget:A}).defaultPrevented||X&&X.defaultPrevented||(this._deactivate(A,S),this._activate(S,A))}_activate(S,A){if(!S)return;S.classList.add(re),this._activate(Ne.getElementFromSelector(S));const X=()=>{if(S.getAttribute("role")!=="tab"){S.classList.add(Se);return}S.removeAttribute("tabindex"),S.setAttribute("aria-selected",!0),this._toggleDropDown(S,!0),le.trigger(S,vf,{relatedTarget:A})};this._queueCallback(X,S,S.classList.contains(me))}_deactivate(S,A){if(!S)return;S.classList.remove(re),S.blur(),this._deactivate(Ne.getElementFromSelector(S));const X=()=>{if(S.getAttribute("role")!=="tab"){S.classList.remove(Se);return}S.setAttribute("aria-selected",!1),S.setAttribute("tabindex","-1"),this._toggleDropDown(S,!1),le.trigger(S,Zk,{relatedTarget:A})};this._queueCallback(X,S,S.classList.contains(me))}_keydown(S){if(![hd,D,x,T,M,ne].includes(S.key))return;S.stopPropagation(),S.preventDefault();const A=this._getChildren().filter(ve=>!b(ve));let X;if([M,ne].includes(S.key))X=A[S.key===M?0:A.length-1];else{const ve=[D,T].includes(S.key);X=j(A,S.target,ve,!0)}X&&(X.focus({preventScroll:!0}),Ft.getOrCreateInstance(X).show())}_getChildren(){return Ne.find(ft,this._parent)}_getActiveElem(){return this._getChildren().find(S=>this._elemIsActive(S))||null}_setInitialAttributes(S,A){this._setAttributeIfNotExists(S,"role","tablist");for(const X of A)this._setInitialAttributesOnChild(X)}_setInitialAttributesOnChild(S){S=this._getInnerElement(S);const A=this._elemIsActive(S),X=this._getOuterElement(S);S.setAttribute("aria-selected",A),X!==S&&this._setAttributeIfNotExists(X,"role","presentation"),A||S.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(S,"role","tab"),this._setInitialAttributesOnTargetPanel(S)}_setInitialAttributesOnTargetPanel(S){const A=Ne.getElementFromSelector(S);A&&(this._setAttributeIfNotExists(A,"role","tabpanel"),S.id&&this._setAttributeIfNotExists(A,"aria-labelledby",`${S.id}`))}_toggleDropDown(S,A){const X=this._getOuterElement(S);if(!X.classList.contains(Re))return;const ve=(Ae,Ie)=>{const Ct=Ne.findOne(Ae,X);Ct&&Ct.classList.toggle(Ie,A)};ve(je,re),ve(Ge,Se),X.setAttribute("aria-expanded",A)}_setAttributeIfNotExists(S,A,X){S.hasAttribute(A)||S.setAttribute(A,X)}_elemIsActive(S){return S.classList.contains(re)}_getInnerElement(S){return S.matches(ft)?S:Ne.findOne(ft,S)}_getOuterElement(S){return S.closest(lt)||S}static jQueryInterface(S){return this.each(function(){const A=Ft.getOrCreateInstance(this);if(typeof S=="string"){if(A[S]===void 0||S.startsWith("_")||S==="constructor")throw new TypeError(`No method named "${S}"`);A[S]()}})}}le.on(document,wf,dt,function(H){["A","AREA"].includes(this.tagName)&&H.preventDefault(),!b(this)&&Ft.getOrCreateInstance(this).show()}),le.on(window,tI,()=>{for(const H of Ne.find(Yt))Ft.getOrCreateInstance(H)}),R(Ft);const kt="toast",ht=".bs.toast",Rt=`mouseover${ht}`,Ht=`mouseout${ht}`,Qt=`focusin${ht}`,Gt=`focusout${ht}`,qn=`hide${ht}`,Is=`hidden${ht}`,Ti=`show${ht}`,Jr=`shown${ht}`,Zs="fade",Ns="hide",pn="show",$s="showing",ao={animation:"boolean",autohide:"boolean",delay:"number"},Ic={animation:!0,autohide:!0,delay:5e3};class Fn extends Xe{constructor(S,A){super(S,A),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Ic}static get DefaultType(){return ao}static get NAME(){return kt}show(){if(le.trigger(this._element,Ti).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Zs);const A=()=>{this._element.classList.remove($s),le.trigger(this._element,Jr),this._maybeScheduleHide()};this._element.classList.remove(Ns),C(this._element),this._element.classList.add(pn,$s),this._queueCallback(A,this._element,this._config.animation)}hide(){if(!this.isShown()||le.trigger(this._element,qn).defaultPrevented)return;const A=()=>{this._element.classList.add(Ns),this._element.classList.remove($s,pn),le.trigger(this._element,Is)};this._element.classList.add($s),this._queueCallback(A,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(pn),super.dispose()}isShown(){return this._element.classList.contains(pn)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(S,A){switch(S.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=A;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=A;break}}if(A){this._clearTimeout();return}const X=S.relatedTarget;this._element===X||this._element.contains(X)||this._maybeScheduleHide()}_setListeners(){le.on(this._element,Rt,S=>this._onInteraction(S,!0)),le.on(this._element,Ht,S=>this._onInteraction(S,!1)),le.on(this._element,Qt,S=>this._onInteraction(S,!0)),le.on(this._element,Gt,S=>this._onInteraction(S,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(S){return this.each(function(){const A=Fn.getOrCreateInstance(this,S);if(typeof S=="string"){if(typeof A[S]>"u")throw new TypeError(`No method named "${S}"`);A[S](this)}})}}return Bt(Fn),R(Fn),{Alert:Kn,Button:so,Carousel:Ys,Collapse:Sl,Dropdown:Nr,Modal:_l,Offcanvas:Yo,Popover:yf,ScrollSpy:dd,Tab:Ft,Toast:Fn,Tooltip:_i}})})(Oje);const Vje=()=>$.jsxs("div",{className:"footer",children:[$.jsxs("div",{className:"address",children:[$.jsx("h3",{children:"AveryBit Solutions Pvt. Ltd."}),$.jsx("p",{children:"36, Bicholi Hapsi Road, near Phoenix Hospital, Shukh Shanti Nagar, Indore"})]}),$.jsxs("div",{className:"contact",children:[$.jsx("h3",{children:"Contact"}),$.jsx("p",{children:"Email: hello@averybit.com"}),$.jsx("p",{children:"Phone: +91-6263628392"})]}),$.jsxs("div",{className:"socials",children:[$.jsx("h3",{children:"Follow Us"}),$.jsxs("div",{className:"social-icons",children:[$.jsx("a",{href:"",children:$.jsx("i",{className:"bx bxl-github"})}),$.jsx("a",{href:"",children:$.jsx("i",{className:"bx bxl-linkedin-square"})}),$.jsx("a",{href:"",children:$.jsx("i",{className:"bx bxl-facebook bg-color-primary"})}),$.jsx("a",{href:"",children:$.jsx("i",{className:"bx bxl-instagram"})}),$.jsx("a",{href:"",children:$.jsx("i",{className:"bx bxl-youtube"})})]})]})]});function Wc(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function h9(t){if(!Wc(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=h9(t[n])}),e}function sl(t,e,n={clone:!0}){const r=n.clone?Zt({},t):t;return Wc(t)&&Wc(e)&&Object.keys(e).forEach(s=>{s!=="__proto__"&&(Wc(e[s])&&s in t&&Wc(t[s])?r[s]=sl(t[s],e[s],n):n.clone?r[s]=Wc(e[s])?h9(e[s]):e[s]:r[s]=e[s])}),r}const Uje=Object.freeze(Object.defineProperty({__proto__:null,default:sl,isPlainObject:Wc},Symbol.toStringTag,{value:"Module"}));function zb(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const Wje=Object.freeze(Object.defineProperty({__proto__:null,default:zb},Symbol.toStringTag,{value:"Module"}));var f9={exports:{}},an={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EL=Symbol.for("react.element"),_L=Symbol.for("react.portal"),yT=Symbol.for("react.fragment"),bT=Symbol.for("react.strict_mode"),vT=Symbol.for("react.profiler"),wT=Symbol.for("react.provider"),xT=Symbol.for("react.context"),Hje=Symbol.for("react.server_context"),ST=Symbol.for("react.forward_ref"),CT=Symbol.for("react.suspense"),ET=Symbol.for("react.suspense_list"),_T=Symbol.for("react.memo"),TT=Symbol.for("react.lazy"),Gje=Symbol.for("react.offscreen"),p9;p9=Symbol.for("react.module.reference");function Uo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case EL:switch(t=t.type,t){case yT:case vT:case bT:case CT:case ET:return t;default:switch(t=t&&t.$$typeof,t){case Hje:case xT:case ST:case TT:case _T:case wT:return t;default:return e}}case _L:return e}}}an.ContextConsumer=xT;an.ContextProvider=wT;an.Element=EL;an.ForwardRef=ST;an.Fragment=yT;an.Lazy=TT;an.Memo=_T;an.Portal=_L;an.Profiler=vT;an.StrictMode=bT;an.Suspense=CT;an.SuspenseList=ET;an.isAsyncMode=function(){return!1};an.isConcurrentMode=function(){return!1};an.isContextConsumer=function(t){return Uo(t)===xT};an.isContextProvider=function(t){return Uo(t)===wT};an.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===EL};an.isForwardRef=function(t){return Uo(t)===ST};an.isFragment=function(t){return Uo(t)===yT};an.isLazy=function(t){return Uo(t)===TT};an.isMemo=function(t){return Uo(t)===_T};an.isPortal=function(t){return Uo(t)===_L};an.isProfiler=function(t){return Uo(t)===vT};an.isStrictMode=function(t){return Uo(t)===bT};an.isSuspense=function(t){return Uo(t)===CT};an.isSuspenseList=function(t){return Uo(t)===ET};an.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===yT||t===vT||t===bT||t===CT||t===ET||t===Gje||typeof t=="object"&&t!==null&&(t.$$typeof===TT||t.$$typeof===_T||t.$$typeof===wT||t.$$typeof===xT||t.$$typeof===ST||t.$$typeof===p9||t.getModuleId!==void 0)};an.typeOf=Uo;f9.exports=an;var oj=f9.exports;const Kje=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function m9(t){const e=`${t}`.match(Kje);return e&&e[1]||""}function g9(t,e=""){return t.displayName||t.name||m9(t)||e}function aj(t,e,n){const r=g9(e);return t.displayName||(r!==""?`${n}(${r})`:n)}function qje(t){if(t!=null){if(typeof t=="string")return t;if(typeof t=="function")return g9(t,"Component");if(typeof t=="object")switch(t.$$typeof){case oj.ForwardRef:return aj(t,t.render,"ForwardRef");case oj.Memo:return aj(t,t.type,"memo");default:return}}}const Xje=Object.freeze(Object.defineProperty({__proto__:null,default:qje,getFunctionName:m9},Symbol.toStringTag,{value:"Module"}));function Au(t){if(typeof t!="string")throw new Error(zb(7));return t.charAt(0).toUpperCase()+t.slice(1)}const Yje=Object.freeze(Object.defineProperty({__proto__:null,default:Au},Symbol.toStringTag,{value:"Module"}));function Qje(...t){return t.reduce((e,n)=>n==null?e:function(...s){e.apply(this,s),n.apply(this,s)},()=>{})}function Jje(t,e=166){let n;function r(...s){const i=()=>{t.apply(this,s)};clearTimeout(n),n=setTimeout(i,e)}return r.clear=()=>{clearTimeout(n)},r}function Zje(t,e){return()=>null}function eVe(t,e){var n,r;return N.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function y9(t){return t&&t.ownerDocument||document}function tVe(t){return y9(t).defaultView||window}function nVe(t,e){return()=>null}function b9(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const v9=typeof window<"u"?N.useLayoutEffect:N.useEffect;let lj=0;function rVe(t){const[e,n]=N.useState(t),r=t||e;return N.useEffect(()=>{e==null&&(lj+=1,n(`mui-${lj}`))},[e]),r}const cj=hu.useId;function sVe(t){if(cj!==void 0){const e=cj();return t??e}return rVe(t)}function iVe(t,e,n,r,s){return null}function oVe({controlled:t,default:e,name:n,state:r="value"}){const{current:s}=N.useRef(t!==void 0),[i,o]=N.useState(e),a=s?t:i,l=N.useCallback(c=>{s||o(c)},[]);return[a,l]}function aVe(t){const e=N.useRef(t);return v9(()=>{e.current=t}),N.useRef((...n)=>(0,e.current)(...n)).current}function lVe(...t){return N.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{b9(n,e)})},t)}class TL{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new TL}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,n()},e)}}let kT=!0,l2=!1;const cVe=new TL,uVe={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function dVe(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&uVe[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function hVe(t){t.metaKey||t.altKey||t.ctrlKey||(kT=!0)}function $N(){kT=!1}function fVe(){this.visibilityState==="hidden"&&l2&&(kT=!0)}function pVe(t){t.addEventListener("keydown",hVe,!0),t.addEventListener("mousedown",$N,!0),t.addEventListener("pointerdown",$N,!0),t.addEventListener("touchstart",$N,!0),t.addEventListener("visibilitychange",fVe,!0)}function mVe(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return kT||dVe(e)}function gVe(){const t=N.useCallback(s=>{s!=null&&pVe(s.ownerDocument)},[]),e=N.useRef(!1);function n(){return e.current?(l2=!0,cVe.start(100,()=>{l2=!1}),e.current=!1,!0):!1}function r(s){return mVe(s)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function w9(t,e){const n=Zt({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=Zt({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const s=t[r]||{},i=e[r];n[r]={},!i||!Object.keys(i)?n[r]=s:!s||!Object.keys(s)?n[r]=i:(n[r]=Zt({},i),Object.keys(s).forEach(o=>{n[r][o]=w9(s[o],i[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function yVe(t,e,n=void 0){const r={};return Object.keys(t).forEach(s=>{r[s]=t[s].reduce((i,o)=>{if(o){const a=e(o);a!==""&&i.push(a),n&&n[o]&&i.push(n[o])}return i},[]).join(" ")}),r}const uj=t=>t,bVe=()=>{let t=uj;return{configure(e){t=e},generate(e){return t(e)},reset(){t=uj}}},x9=bVe(),vVe={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function S9(t,e,n="Mui"){const r=vVe[e];return r?`${n}-${r}`:`${x9.generate(t)}-${e}`}function wVe(t,e,n="Mui"){const r={};return e.forEach(s=>{r[s]=S9(t,s,n)}),r}function xVe(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const SVe=Object.freeze(Object.defineProperty({__proto__:null,default:xVe},Symbol.toStringTag,{value:"Module"}));function C9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=C9(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function CVe(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=C9(t))&&(r&&(r+=" "),r+=e);return r}function EVe(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:w9(e.components[n].defaultProps,r)}const _Ve=["values","unit","step"],TVe=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>Zt({},n,{[r.key]:r.val}),{})};function E9(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,s=vl(t,_Ve),i=TVe(e),o=Object.keys(i);function a(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function l(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-r/100}${n})`}function c(h,f){const p=o.indexOf(f);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:f)-r/100}${n})`}function u(h){return o.indexOf(h)+1<o.length?c(h,o[o.indexOf(h)+1]):a(h)}function d(h){const f=o.indexOf(h);return f===0?a(o[1]):f===o.length-1?l(o[f]):c(h,o[o.indexOf(h)+1]).replace("@media","@media not all and")}return Zt({keys:o,values:i,up:a,down:l,between:c,only:u,not:d,unit:n},s)}const kVe={borderRadius:4};function Wy(t,e){return e?sl(t,e,{clone:!1}):t}const kL={xs:0,sm:600,md:900,lg:1200,xl:1536},dj={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${kL[t]}px)`};function oc(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const i=r.breakpoints||dj;return e.reduce((o,a,l)=>(o[i.up(i.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const i=r.breakpoints||dj;return Object.keys(e).reduce((o,a)=>{if(Object.keys(i.values||kL).indexOf(a)!==-1){const l=i.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function IVe(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,s)=>{const i=t.up(s);return r[i]={},r},{}))||{}}function NVe(t,e){return t.reduce((n,r)=>{const s=n[r];return(!s||Object.keys(s).length===0)&&delete n[r],n},e)}function IT(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((s,i)=>s&&s[i]?s[i]:null,t);if(r!=null)return r}return e.split(".").reduce((r,s)=>r&&r[s]!=null?r[s]:null,t)}function nC(t,e,n,r=n){let s;return typeof t=="function"?s=t(n):Array.isArray(t)?s=t[n]||r:s=IT(t,n)||r,e&&(s=e(s,r,t)),s}function pr(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:s}=t,i=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=IT(l,r)||{};return oc(o,a,d=>{let h=nC(c,s,d);return d===h&&typeof d=="string"&&(h=nC(c,s,`${e}${d==="default"?"":Au(d)}`,d)),n===!1?h:{[n]:h}})};return i.propTypes={},i.filterProps=[e],i}function $Ve(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const AVe={m:"margin",p:"padding"},RVe={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},hj={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},OVe=$Ve(t=>{if(t.length>2)if(hj[t])t=hj[t];else return[t];const[e,n]=t.split(""),r=AVe[e],s=RVe[n]||"";return Array.isArray(s)?s.map(i=>r+i):[r+s]}),IL=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],NL=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...IL,...NL];function ew(t,e,n,r){var s;const i=(s=IT(t,e,!1))!=null?s:n;return typeof i=="number"?o=>typeof o=="string"?o:i*o:Array.isArray(i)?o=>typeof o=="string"?o:i[o]:typeof i=="function"?i:()=>{}}function _9(t){return ew(t,"spacing",8)}function tw(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function DVe(t,e){return n=>t.reduce((r,s)=>(r[s]=tw(e,n),r),{})}function PVe(t,e,n,r){if(e.indexOf(n)===-1)return null;const s=OVe(n),i=DVe(s,r),o=t[n];return oc(t,o,i)}function T9(t,e){const n=_9(t.theme);return Object.keys(t).map(r=>PVe(t,e,r,n)).reduce(Wy,{})}function tr(t){return T9(t,IL)}tr.propTypes={};tr.filterProps=IL;function nr(t){return T9(t,NL)}nr.propTypes={};nr.filterProps=NL;function LVe(t=8){if(t.mui)return t;const e=_9({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(i=>{const o=e(i);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function NT(...t){const e=t.reduce((r,s)=>(s.filterProps.forEach(i=>{r[i]=s}),r),{}),n=r=>Object.keys(r).reduce((s,i)=>e[i]?Wy(s,e[i](r)):s,{});return n.propTypes={},n.filterProps=t.reduce((r,s)=>r.concat(s.filterProps),[]),n}function vo(t){return typeof t!="number"?t:`${t}px solid`}function Wo(t,e){return pr({prop:t,themeKey:"borders",transform:e})}const FVe=Wo("border",vo),MVe=Wo("borderTop",vo),zVe=Wo("borderRight",vo),BVe=Wo("borderBottom",vo),jVe=Wo("borderLeft",vo),VVe=Wo("borderColor"),UVe=Wo("borderTopColor"),WVe=Wo("borderRightColor"),HVe=Wo("borderBottomColor"),GVe=Wo("borderLeftColor"),KVe=Wo("outline",vo),qVe=Wo("outlineColor"),$T=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=ew(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:tw(e,r)});return oc(t,t.borderRadius,n)}return null};$T.propTypes={};$T.filterProps=["borderRadius"];NT(FVe,MVe,zVe,BVe,jVe,VVe,UVe,WVe,HVe,GVe,$T,KVe,qVe);const AT=t=>{if(t.gap!==void 0&&t.gap!==null){const e=ew(t.theme,"spacing",8),n=r=>({gap:tw(e,r)});return oc(t,t.gap,n)}return null};AT.propTypes={};AT.filterProps=["gap"];const RT=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=ew(t.theme,"spacing",8),n=r=>({columnGap:tw(e,r)});return oc(t,t.columnGap,n)}return null};RT.propTypes={};RT.filterProps=["columnGap"];const OT=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=ew(t.theme,"spacing",8),n=r=>({rowGap:tw(e,r)});return oc(t,t.rowGap,n)}return null};OT.propTypes={};OT.filterProps=["rowGap"];const XVe=pr({prop:"gridColumn"}),YVe=pr({prop:"gridRow"}),QVe=pr({prop:"gridAutoFlow"}),JVe=pr({prop:"gridAutoColumns"}),ZVe=pr({prop:"gridAutoRows"}),eUe=pr({prop:"gridTemplateColumns"}),tUe=pr({prop:"gridTemplateRows"}),nUe=pr({prop:"gridTemplateAreas"}),rUe=pr({prop:"gridArea"});NT(AT,RT,OT,XVe,YVe,QVe,JVe,ZVe,eUe,tUe,nUe,rUe);function gp(t,e){return e==="grey"?e:t}const sUe=pr({prop:"color",themeKey:"palette",transform:gp}),iUe=pr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:gp}),oUe=pr({prop:"backgroundColor",themeKey:"palette",transform:gp});NT(sUe,iUe,oUe);function Oi(t){return t<=1&&t!==0?`${t*100}%`:t}const aUe=pr({prop:"width",transform:Oi}),$L=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,s;const i=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||kL[n];return i?((s=t.theme)==null||(s=s.breakpoints)==null?void 0:s.unit)!=="px"?{maxWidth:`${i}${t.theme.breakpoints.unit}`}:{maxWidth:i}:{maxWidth:Oi(n)}};return oc(t,t.maxWidth,e)}return null};$L.filterProps=["maxWidth"];const lUe=pr({prop:"minWidth",transform:Oi}),cUe=pr({prop:"height",transform:Oi}),uUe=pr({prop:"maxHeight",transform:Oi}),dUe=pr({prop:"minHeight",transform:Oi});pr({prop:"size",cssProperty:"width",transform:Oi});pr({prop:"size",cssProperty:"height",transform:Oi});const hUe=pr({prop:"boxSizing"});NT(aUe,$L,lUe,cUe,uUe,dUe,hUe);const nw={border:{themeKey:"borders",transform:vo},borderTop:{themeKey:"borders",transform:vo},borderRight:{themeKey:"borders",transform:vo},borderBottom:{themeKey:"borders",transform:vo},borderLeft:{themeKey:"borders",transform:vo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:vo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:$T},color:{themeKey:"palette",transform:gp},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:gp},backgroundColor:{themeKey:"palette",transform:gp},p:{style:nr},pt:{style:nr},pr:{style:nr},pb:{style:nr},pl:{style:nr},px:{style:nr},py:{style:nr},padding:{style:nr},paddingTop:{style:nr},paddingRight:{style:nr},paddingBottom:{style:nr},paddingLeft:{style:nr},paddingX:{style:nr},paddingY:{style:nr},paddingInline:{style:nr},paddingInlineStart:{style:nr},paddingInlineEnd:{style:nr},paddingBlock:{style:nr},paddingBlockStart:{style:nr},paddingBlockEnd:{style:nr},m:{style:tr},mt:{style:tr},mr:{style:tr},mb:{style:tr},ml:{style:tr},mx:{style:tr},my:{style:tr},margin:{style:tr},marginTop:{style:tr},marginRight:{style:tr},marginBottom:{style:tr},marginLeft:{style:tr},marginX:{style:tr},marginY:{style:tr},marginInline:{style:tr},marginInlineStart:{style:tr},marginInlineEnd:{style:tr},marginBlock:{style:tr},marginBlockStart:{style:tr},marginBlockEnd:{style:tr},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:AT},rowGap:{style:OT},columnGap:{style:RT},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Oi},maxWidth:{style:$L},minWidth:{transform:Oi},height:{transform:Oi},maxHeight:{transform:Oi},minHeight:{transform:Oi},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function fUe(...t){const e=t.reduce((r,s)=>r.concat(Object.keys(s)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function pUe(t,e){return typeof t=="function"?t(e):t}function k9(){function t(n,r,s,i){const o={[n]:r,theme:s},a=i[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const h=IT(s,c)||{};return d?d(o):oc(o,r,p=>{let m=nC(h,u,p);return p===m&&typeof p=="string"&&(m=nC(h,u,`${n}${p==="default"?"":Au(p)}`,p)),l===!1?m:{[l]:m}})}function e(n){var r;const{sx:s,theme:i={}}=n||{};if(!s)return null;const o=(r=i.unstable_sxConfig)!=null?r:nw;function a(l){let c=l;if(typeof l=="function")c=l(i);else if(typeof l!="object")return l;if(!c)return null;const u=IVe(i.breakpoints),d=Object.keys(u);let h=u;return Object.keys(c).forEach(f=>{const p=pUe(c[f],i);if(p!=null)if(typeof p=="object")if(o[f])h=Wy(h,t(f,p,i,o));else{const m=oc({theme:i},p,g=>({[f]:g}));fUe(m,p)?h[f]=e({sx:p,theme:i}):h=Wy(h,m)}else h=Wy(h,t(f,p,i,o))}),NVe(d,h)}return Array.isArray(s)?s.map(a):a(s)}return e}const DT=k9();DT.filterProps=["sx"];function I9(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const mUe=["breakpoints","palette","spacing","shape"];function AL(t={},...e){const{breakpoints:n={},palette:r={},spacing:s,shape:i={}}=t,o=vl(t,mUe),a=E9(n),l=LVe(s);let c=sl({breakpoints:a,direction:"ltr",components:{},palette:Zt({mode:"light"},r),spacing:l,shape:Zt({},kVe,i)},o);return c.applyStyles=I9,c=e.reduce((u,d)=>sl(u,d),c),c.unstable_sxConfig=Zt({},nw,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return DT({sx:d,theme:this})},c}const gUe=Object.freeze(Object.defineProperty({__proto__:null,default:AL,private_createBreakpoints:E9,unstable_applyStyles:I9},Symbol.toStringTag,{value:"Module"}));function N9(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var yUe=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,bUe=N9(function(t){return yUe.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91});function vUe(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function wUe(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var xUe=function(){function t(n){var r=this;this._insertTag=function(s){var i;r.tags.length===0?r.insertionPoint?i=r.insertionPoint.nextSibling:r.prepend?i=r.container.firstChild:i=r.before:i=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,i),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(wUe(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var i=vUe(s);try{i.insertRule(r,i.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),hs="-ms-",rC="-moz-",Kt="-webkit-",$9="comm",RL="rule",OL="decl",SUe="@import",A9="@keyframes",CUe="@layer",EUe=Math.abs,PT=String.fromCharCode,_Ue=Object.assign;function TUe(t,e){return ns(t,0)^45?(((e<<2^ns(t,0))<<2^ns(t,1))<<2^ns(t,2))<<2^ns(t,3):0}function R9(t){return t.trim()}function kUe(t,e){return(t=e.exec(t))?t[0]:t}function qt(t,e,n){return t.replace(e,n)}function c2(t,e){return t.indexOf(e)}function ns(t,e){return t.charCodeAt(e)|0}function Bb(t,e,n){return t.slice(e,n)}function za(t){return t.length}function DL(t){return t.length}function r1(t,e){return e.push(t),t}function IUe(t,e){return t.map(e).join("")}var LT=1,Qp=1,O9=0,vi=0,br=0,xg="";function FT(t,e,n,r,s,i,o){return{value:t,root:e,parent:n,type:r,props:s,children:i,line:LT,column:Qp,length:o,return:""}}function uy(t,e){return _Ue(FT("",null,null,"",null,null,0),t,{length:-t.length},e)}function NUe(){return br}function $Ue(){return br=vi>0?ns(xg,--vi):0,Qp--,br===10&&(Qp=1,LT--),br}function Vi(){return br=vi<O9?ns(xg,vi++):0,Qp++,br===10&&(Qp=1,LT++),br}function il(){return ns(xg,vi)}function $1(){return vi}function rw(t,e){return Bb(xg,t,e)}function jb(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function D9(t){return LT=Qp=1,O9=za(xg=t),vi=0,[]}function P9(t){return xg="",t}function A1(t){return R9(rw(vi-1,u2(t===91?t+2:t===40?t+1:t)))}function AUe(t){for(;(br=il())&&br<33;)Vi();return jb(t)>2||jb(br)>3?"":" "}function RUe(t,e){for(;--e&&Vi()&&!(br<48||br>102||br>57&&br<65||br>70&&br<97););return rw(t,$1()+(e<6&&il()==32&&Vi()==32))}function u2(t){for(;Vi();)switch(br){case t:return vi;case 34:case 39:t!==34&&t!==39&&u2(br);break;case 40:t===41&&u2(t);break;case 92:Vi();break}return vi}function OUe(t,e){for(;Vi()&&t+br!==57;)if(t+br===84&&il()===47)break;return"/*"+rw(e,vi-1)+"*"+PT(t===47?t:Vi())}function DUe(t){for(;!jb(il());)Vi();return rw(t,vi)}function PUe(t){return P9(R1("",null,null,null,[""],t=D9(t),0,[0],t))}function R1(t,e,n,r,s,i,o,a,l){for(var c=0,u=0,d=o,h=0,f=0,p=0,m=1,g=1,y=1,b=0,v="",w=s,C=i,_=r,E=v;g;)switch(p=b,b=Vi()){case 40:if(p!=108&&ns(E,d-1)==58){c2(E+=qt(A1(b),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:E+=A1(b);break;case 9:case 10:case 13:case 32:E+=AUe(p);break;case 92:E+=RUe($1()-1,7);continue;case 47:switch(il()){case 42:case 47:r1(LUe(OUe(Vi(),$1()),e,n),l);break;default:E+="/"}break;case 123*m:a[c++]=za(E)*y;case 125*m:case 59:case 0:switch(b){case 0:case 125:g=0;case 59+u:y==-1&&(E=qt(E,/\f/g,"")),f>0&&za(E)-d&&r1(f>32?pj(E+";",r,n,d-1):pj(qt(E," ","")+";",r,n,d-2),l);break;case 59:E+=";";default:if(r1(_=fj(E,e,n,c,u,s,a,v,w=[],C=[],d),i),b===123)if(u===0)R1(E,e,_,_,w,i,d,a,C);else switch(h===99&&ns(E,3)===110?100:h){case 100:case 108:case 109:case 115:R1(t,_,_,r&&r1(fj(t,_,_,0,0,s,a,v,s,w=[],d),C),s,C,d,a,r?w:C);break;default:R1(E,_,_,_,[""],C,0,a,C)}}c=u=f=0,m=y=1,v=E="",d=o;break;case 58:d=1+za(E),f=p;default:if(m<1){if(b==123)--m;else if(b==125&&m++==0&&$Ue()==125)continue}switch(E+=PT(b),b*m){case 38:y=u>0?1:(E+="\f",-1);break;case 44:a[c++]=(za(E)-1)*y,y=1;break;case 64:il()===45&&(E+=A1(Vi())),h=il(),u=d=za(v=E+=DUe($1())),b++;break;case 45:p===45&&za(E)==2&&(m=0)}}return i}function fj(t,e,n,r,s,i,o,a,l,c,u){for(var d=s-1,h=s===0?i:[""],f=DL(h),p=0,m=0,g=0;p<r;++p)for(var y=0,b=Bb(t,d+1,d=EUe(m=o[p])),v=t;y<f;++y)(v=R9(m>0?h[y]+" "+b:qt(b,/&\f/g,h[y])))&&(l[g++]=v);return FT(t,e,n,s===0?RL:a,l,c,u)}function LUe(t,e,n){return FT(t,e,n,$9,PT(NUe()),Bb(t,2,-2),0)}function pj(t,e,n,r){return FT(t,e,n,OL,Bb(t,0,r),Bb(t,r+1,-1),r)}function yp(t,e){for(var n="",r=DL(t),s=0;s<r;s++)n+=e(t[s],s,t,e)||"";return n}function FUe(t,e,n,r){switch(t.type){case CUe:if(t.children.length)break;case SUe:case OL:return t.return=t.return||t.value;case $9:return"";case A9:return t.return=t.value+"{"+yp(t.children,r)+"}";case RL:t.value=t.props.join(",")}return za(n=yp(t.children,r))?t.return=t.value+"{"+n+"}":""}function MUe(t){var e=DL(t);return function(n,r,s,i){for(var o="",a=0;a<e;a++)o+=t[a](n,r,s,i)||"";return o}}function zUe(t){return function(e){e.root||(e=e.return)&&t(e)}}var BUe=function(e,n,r){for(var s=0,i=0;s=i,i=il(),s===38&&i===12&&(n[r]=1),!jb(i);)Vi();return rw(e,vi)},jUe=function(e,n){var r=-1,s=44;do switch(jb(s)){case 0:s===38&&il()===12&&(n[r]=1),e[r]+=BUe(vi-1,n,r);break;case 2:e[r]+=A1(s);break;case 4:if(s===44){e[++r]=il()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=PT(s)}while(s=Vi());return e},VUe=function(e,n){return P9(jUe(D9(e),n))},mj=new WeakMap,UUe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,s=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!mj.get(r))&&!s){mj.set(e,!0);for(var i=[],o=VUe(n,i),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=i[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},WUe=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function L9(t,e){switch(TUe(t,e)){case 5103:return Kt+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Kt+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return Kt+t+rC+t+hs+t+t;case 6828:case 4268:return Kt+t+hs+t+t;case 6165:return Kt+t+hs+"flex-"+t+t;case 5187:return Kt+t+qt(t,/(\w+).+(:[^]+)/,Kt+"box-$1$2"+hs+"flex-$1$2")+t;case 5443:return Kt+t+hs+"flex-item-"+qt(t,/flex-|-self/,"")+t;case 4675:return Kt+t+hs+"flex-line-pack"+qt(t,/align-content|flex-|-self/,"")+t;case 5548:return Kt+t+hs+qt(t,"shrink","negative")+t;case 5292:return Kt+t+hs+qt(t,"basis","preferred-size")+t;case 6060:return Kt+"box-"+qt(t,"-grow","")+Kt+t+hs+qt(t,"grow","positive")+t;case 4554:return Kt+qt(t,/([^-])(transform)/g,"$1"+Kt+"$2")+t;case 6187:return qt(qt(qt(t,/(zoom-|grab)/,Kt+"$1"),/(image-set)/,Kt+"$1"),t,"")+t;case 5495:case 3959:return qt(t,/(image-set\([^]*)/,Kt+"$1$`$1");case 4968:return qt(qt(t,/(.+:)(flex-)?(.*)/,Kt+"box-pack:$3"+hs+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Kt+t+t;case 4095:case 3583:case 4068:case 2532:return qt(t,/(.+)-inline(.+)/,Kt+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(za(t)-1-e>6)switch(ns(t,e+1)){case 109:if(ns(t,e+4)!==45)break;case 102:return qt(t,/(.+:)(.+)-([^]+)/,"$1"+Kt+"$2-$3$1"+rC+(ns(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~c2(t,"stretch")?L9(qt(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(ns(t,e+1)!==115)break;case 6444:switch(ns(t,za(t)-3-(~c2(t,"!important")&&10))){case 107:return qt(t,":",":"+Kt)+t;case 101:return qt(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Kt+(ns(t,14)===45?"inline-":"")+"box$3$1"+Kt+"$2$3$1"+hs+"$2box$3")+t}break;case 5936:switch(ns(t,e+11)){case 114:return Kt+t+hs+qt(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return Kt+t+hs+qt(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return Kt+t+hs+qt(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return Kt+t+hs+t+t}return t}var HUe=function(e,n,r,s){if(e.length>-1&&!e.return)switch(e.type){case OL:e.return=L9(e.value,e.length);break;case A9:return yp([uy(e,{value:qt(e.value,"@","@"+Kt)})],s);case RL:if(e.length)return IUe(e.props,function(i){switch(kUe(i,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return yp([uy(e,{props:[qt(i,/:(read-\w+)/,":"+rC+"$1")]})],s);case"::placeholder":return yp([uy(e,{props:[qt(i,/:(plac\w+)/,":"+Kt+"input-$1")]}),uy(e,{props:[qt(i,/:(plac\w+)/,":"+rC+"$1")]}),uy(e,{props:[qt(i,/:(plac\w+)/,hs+"input-$1")]})],s)}return""})}},GUe=[HUe],F9=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var g=m.getAttribute("data-emotion");g.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var s=e.stylisPlugins||GUe,i={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var g=m.getAttribute("data-emotion").split(" "),y=1;y<g.length;y++)i[g[y]]=!0;a.push(m)});var l,c=[UUe,WUe];{var u,d=[FUe,zUe(function(m){u.insert(m)})],h=MUe(c.concat(s,d)),f=function(g){return yp(PUe(g),h)};l=function(g,y,b,v){u=b,f(g?g+"{"+y.styles+"}":y.styles),v&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new xUe({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:i,registered:{},insert:l};return p.sheet.hydrate(a),p},M9={exports:{}},ln={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qr=typeof Symbol=="function"&&Symbol.for,PL=Qr?Symbol.for("react.element"):60103,LL=Qr?Symbol.for("react.portal"):60106,MT=Qr?Symbol.for("react.fragment"):60107,zT=Qr?Symbol.for("react.strict_mode"):60108,BT=Qr?Symbol.for("react.profiler"):60114,jT=Qr?Symbol.for("react.provider"):60109,VT=Qr?Symbol.for("react.context"):60110,FL=Qr?Symbol.for("react.async_mode"):60111,UT=Qr?Symbol.for("react.concurrent_mode"):60111,WT=Qr?Symbol.for("react.forward_ref"):60112,HT=Qr?Symbol.for("react.suspense"):60113,KUe=Qr?Symbol.for("react.suspense_list"):60120,GT=Qr?Symbol.for("react.memo"):60115,KT=Qr?Symbol.for("react.lazy"):60116,qUe=Qr?Symbol.for("react.block"):60121,XUe=Qr?Symbol.for("react.fundamental"):60117,YUe=Qr?Symbol.for("react.responder"):60118,QUe=Qr?Symbol.for("react.scope"):60119;function no(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case PL:switch(t=t.type,t){case FL:case UT:case MT:case BT:case zT:case HT:return t;default:switch(t=t&&t.$$typeof,t){case VT:case WT:case KT:case GT:case jT:return t;default:return e}}case LL:return e}}}function z9(t){return no(t)===UT}ln.AsyncMode=FL;ln.ConcurrentMode=UT;ln.ContextConsumer=VT;ln.ContextProvider=jT;ln.Element=PL;ln.ForwardRef=WT;ln.Fragment=MT;ln.Lazy=KT;ln.Memo=GT;ln.Portal=LL;ln.Profiler=BT;ln.StrictMode=zT;ln.Suspense=HT;ln.isAsyncMode=function(t){return z9(t)||no(t)===FL};ln.isConcurrentMode=z9;ln.isContextConsumer=function(t){return no(t)===VT};ln.isContextProvider=function(t){return no(t)===jT};ln.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===PL};ln.isForwardRef=function(t){return no(t)===WT};ln.isFragment=function(t){return no(t)===MT};ln.isLazy=function(t){return no(t)===KT};ln.isMemo=function(t){return no(t)===GT};ln.isPortal=function(t){return no(t)===LL};ln.isProfiler=function(t){return no(t)===BT};ln.isStrictMode=function(t){return no(t)===zT};ln.isSuspense=function(t){return no(t)===HT};ln.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===MT||t===UT||t===BT||t===zT||t===HT||t===KUe||typeof t=="object"&&t!==null&&(t.$$typeof===KT||t.$$typeof===GT||t.$$typeof===jT||t.$$typeof===VT||t.$$typeof===WT||t.$$typeof===XUe||t.$$typeof===YUe||t.$$typeof===QUe||t.$$typeof===qUe)};ln.typeOf=no;M9.exports=ln;var JUe=M9.exports,B9=JUe,ZUe={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},e4e={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},j9={};j9[B9.ForwardRef]=ZUe;j9[B9.Memo]=e4e;var t4e=!0;function n4e(t,e,n){var r="";return n.split(" ").forEach(function(s){t[s]!==void 0?e.push(t[s]+";"):r+=s+" "}),r}var V9=function(e,n,r){var s=e.key+"-"+n.name;(r===!1||t4e===!1)&&e.registered[s]===void 0&&(e.registered[s]=n.styles)},U9=function(e,n,r){V9(e,n,r);var s=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var i=n;do e.insert(n===i?"."+s:"",i,e.sheet,!0),i=i.next;while(i!==void 0)}};function r4e(t){for(var e=0,n,r=0,s=t.length;s>=4;++r,s-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var s4e={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},i4e=/[A-Z]|^ms/g,o4e=/_EMO_([^_]+?)_([^]*?)_EMO_/g,W9=function(e){return e.charCodeAt(1)===45},gj=function(e){return e!=null&&typeof e!="boolean"},AN=N9(function(t){return W9(t)?t:t.replace(i4e,"-$&").toLowerCase()}),yj=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(o4e,function(r,s,i){return Ba={name:s,styles:i,next:Ba},s})}return s4e[e]!==1&&!W9(e)&&typeof n=="number"&&n!==0?n+"px":n};function Vb(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Ba={name:n.name,styles:n.styles,next:Ba},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Ba={name:r.name,styles:r.styles,next:Ba},r=r.next;var s=n.styles+";";return s}return a4e(t,e,n)}case"function":{if(t!==void 0){var i=Ba,o=n(t);return Ba=i,Vb(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function a4e(t,e,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=Vb(t,e,n[s])+";";else for(var i in n){var o=n[i];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=i+"{"+e[o]+"}":gj(o)&&(r+=AN(i)+":"+yj(i,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)gj(o[a])&&(r+=AN(i)+":"+yj(i,o[a])+";");else{var l=Vb(t,e,o);switch(i){case"animation":case"animationName":{r+=AN(i)+":"+l+";";break}default:r+=i+"{"+l+"}"}}}return r}var bj=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Ba,ML=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var s=!0,i="";Ba=void 0;var o=e[0];o==null||o.raw===void 0?(s=!1,i+=Vb(r,n,o)):i+=o[0];for(var a=1;a<e.length;a++)i+=Vb(r,n,e[a]),s&&(i+=o[a]);bj.lastIndex=0;for(var l="",c;(c=bj.exec(i))!==null;)l+="-"+c[1];var u=r4e(i)+l;return{name:u,styles:i,next:Ba}},l4e=function(e){return e()},H9=hu.useInsertionEffect?hu.useInsertionEffect:!1,c4e=H9||l4e,vj=H9||N.useLayoutEffect,G9=N.createContext(typeof HTMLElement<"u"?F9({key:"css"}):null),u4e=G9.Provider,K9=function(e){return N.forwardRef(function(n,r){var s=N.useContext(G9);return e(n,s,r)})},qT=N.createContext({}),RN={exports:{}},wj;function q9(){return wj||(wj=1,function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(n){for(var r=1;r<arguments.length;r++){var s=arguments[r];for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])}return n},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(RN)),RN.exports}q9();var d4e=K9(function(t,e){var n=t.styles,r=ML([n],void 0,N.useContext(qT)),s=N.useRef();return vj(function(){var i=e.key+"-global",o=new e.sheet.constructor({key:i,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+i+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",i),o.hydrate([l])),s.current=[o,a],function(){o.flush()}},[e]),vj(function(){var i=s.current,o=i[0],a=i[1];if(a){i[1]=!1;return}if(r.next!==void 0&&U9(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function X9(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return ML(e)}var h4e=function(){var e=X9.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},f4e=bUe,p4e=function(e){return e!=="theme"},xj=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?f4e:p4e},Sj=function(e,n,r){var s;if(n){var i=n.shouldForwardProp;s=e.__emotion_forwardProp&&i?function(o){return e.__emotion_forwardProp(o)&&i(o)}:i}return typeof s!="function"&&r&&(s=e.__emotion_forwardProp),s},m4e=function(e){var n=e.cache,r=e.serialized,s=e.isStringTag;return V9(n,r,s),c4e(function(){return U9(n,r,s)}),null},g4e=function t(e,n){var r=e.__emotion_real===e,s=r&&e.__emotion_base||e,i,o;n!==void 0&&(i=n.label,o=n.target);var a=Sj(e,n,r),l=a||xj(s),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(i!==void 0&&d.push("label:"+i+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var h=u.length,f=1;f<h;f++)d.push(u[f],u[0][f])}var p=K9(function(m,g,y){var b=c&&m.as||s,v="",w=[],C=m;if(m.theme==null){C={};for(var _ in m)C[_]=m[_];C.theme=N.useContext(qT)}typeof m.className=="string"?v=n4e(g.registered,w,m.className):m.className!=null&&(v=m.className+" ");var E=ML(d.concat(w),g.registered,C);v+=g.key+"-"+E.name,o!==void 0&&(v+=" "+o);var I=c&&a===void 0?xj(b):l,O={};for(var R in m)c&&R==="as"||I(R)&&(O[R]=m[R]);return O.className=v,O.ref=y,N.createElement(N.Fragment,null,N.createElement(m4e,{cache:g,serialized:E,isStringTag:typeof b=="string"}),N.createElement(b,O))});return p.displayName=i!==void 0?i:"Styled("+(typeof s=="string"?s:s.displayName||s.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=s,p.__emotion_styles=d,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(m,g){return t(m,Zt({},n,g,{shouldForwardProp:Sj(p,g,!0)})).apply(void 0,d)},p}},y4e=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],d2=g4e.bind();y4e.forEach(function(t){d2[t]=d2(t)});let h2;typeof document=="object"&&(h2=F9({key:"css",prepend:!0}));function b4e(t){const{injectFirst:e,children:n}=t;return e&&h2?$.jsx(u4e,{value:h2,children:n}):n}function v4e(t){return t==null||Object.keys(t).length===0}function w4e(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?s=>e(v4e(s)?n:s):e;return $.jsx(d4e,{styles:r})}function x4e(t,e){return d2(t,e)}const S4e=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))},C4e=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:w4e,StyledEngineProvider:b4e,ThemeContext:qT,css:X9,default:x4e,internal_processStyles:S4e,keyframes:h4e},Symbol.toStringTag,{value:"Module"}));function E4e(t){return Object.keys(t).length===0}function _4e(t=null){const e=N.useContext(qT);return!e||E4e(e)?t:e}const T4e=AL();function k4e(t=T4e){return _4e(t)}function I4e({props:t,name:e,defaultTheme:n,themeId:r}){let s=k4e(n);return r&&(s=s[r]||s),EVe({theme:s,name:e,props:t})}const N4e=["sx"],$4e=t=>{var e,n;const r={systemProps:{},otherProps:{}},s=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:nw;return Object.keys(t).forEach(i=>{s[i]?r.systemProps[i]=t[i]:r.otherProps[i]=t[i]}),r};function A4e(t){const{sx:e}=t,n=vl(t,N4e),{systemProps:r,otherProps:s}=$4e(n);let i;return Array.isArray(e)?i=[r,...e]:typeof e=="function"?i=(...o)=>{const a=e(...o);return Wc(a)?Zt({},r,a):r}:i=Zt({},r,e),Zt({},s,{sx:i})}const R4e=Object.freeze(Object.defineProperty({__proto__:null,default:DT,extendSxProp:A4e,unstable_createStyleFunctionSx:k9,unstable_defaultSxConfig:nw},Symbol.toStringTag,{value:"Module"}));function O4e(t,e){return Zt({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}var mr={},Y9={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(Y9);var zL=Y9.exports;const D4e=wi(Wje),P4e=wi(SVe);var Q9=zL;Object.defineProperty(mr,"__esModule",{value:!0});mr.alpha=tY;mr.blend=q4e;mr.colorChannel=void 0;var L4e=mr.darken=jL;mr.decomposeColor=Fo;mr.emphasize=nY;var F4e=mr.getContrastRatio=U4e;mr.getLuminance=sC;mr.hexToRgb=J9;mr.hslToRgb=eY;var M4e=mr.lighten=VL;mr.private_safeAlpha=W4e;mr.private_safeColorChannel=void 0;mr.private_safeDarken=H4e;mr.private_safeEmphasize=K4e;mr.private_safeLighten=G4e;mr.recomposeColor=Sg;mr.rgbToHex=V4e;var Cj=Q9(D4e),z4e=Q9(P4e);function BL(t,e=0,n=1){return(0,z4e.default)(t,e,n)}function J9(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,s)=>s<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function B4e(t){const e=t.toString(16);return e.length===1?`0${e}`:e}function Fo(t){if(t.type)return t;if(t.charAt(0)==="#")return Fo(J9(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error((0,Cj.default)(9,t));let r=t.substring(e+1,t.length-1),s;if(n==="color"){if(r=r.split(" "),s=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(s)===-1)throw new Error((0,Cj.default)(10,s))}else r=r.split(",");return r=r.map(i=>parseFloat(i)),{type:n,values:r,colorSpace:s}}const Z9=t=>{const e=Fo(t);return e.values.slice(0,3).map((n,r)=>e.type.indexOf("hsl")!==-1&&r!==0?`${n}%`:n).join(" ")};mr.colorChannel=Z9;const j4e=(t,e)=>{try{return Z9(t)}catch{return t}};mr.private_safeColorChannel=j4e;function Sg(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((s,i)=>i<3?parseInt(s,10):s):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function V4e(t){if(t.indexOf("#")===0)return t;const{values:e}=Fo(t);return`#${e.map((n,r)=>B4e(r===3?Math.round(255*n):n)).join("")}`}function eY(t){t=Fo(t);const{values:e}=t,n=e[0],r=e[1]/100,s=e[2]/100,i=r*Math.min(s,1-s),o=(c,u=(c+n/30)%12)=>s-i*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),Sg({type:a,values:l})}function sC(t){t=Fo(t);let e=t.type==="hsl"||t.type==="hsla"?Fo(eY(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function U4e(t,e){const n=sC(t),r=sC(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function tY(t,e){return t=Fo(t),e=BL(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,Sg(t)}function W4e(t,e,n){try{return tY(t,e)}catch{return t}}function jL(t,e){if(t=Fo(t),e=BL(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return Sg(t)}function H4e(t,e,n){try{return jL(t,e)}catch{return t}}function VL(t,e){if(t=Fo(t),e=BL(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return Sg(t)}function G4e(t,e,n){try{return VL(t,e)}catch{return t}}function nY(t,e=.15){return sC(t)>.5?jL(t,e):VL(t,e)}function K4e(t,e,n){try{return nY(t,e)}catch{return t}}function q4e(t,e,n,r=1){const s=(l,c)=>Math.round((l**(1/r)*(1-n)+c**(1/r)*n)**r),i=Fo(t),o=Fo(e),a=[s(i.values[0],o.values[0]),s(i.values[1],o.values[1]),s(i.values[2],o.values[2])];return Sg({type:"rgb",values:a})}const Ub={black:"#000",white:"#fff"},X4e={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},kf={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},If={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},dy={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Nf={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},$f={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},Af={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Y4e=["mode","contrastThreshold","tonalOffset"],Ej={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Ub.white,default:Ub.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},ON={text:{primary:Ub.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Ub.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function _j(t,e,n,r){const s=r.light||r,i=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=M4e(t.main,s):e==="dark"&&(t.dark=L4e(t.main,i)))}function Q4e(t="light"){return t==="dark"?{main:Nf[200],light:Nf[50],dark:Nf[400]}:{main:Nf[700],light:Nf[400],dark:Nf[800]}}function J4e(t="light"){return t==="dark"?{main:kf[200],light:kf[50],dark:kf[400]}:{main:kf[500],light:kf[300],dark:kf[700]}}function Z4e(t="light"){return t==="dark"?{main:If[500],light:If[300],dark:If[700]}:{main:If[700],light:If[400],dark:If[800]}}function eWe(t="light"){return t==="dark"?{main:$f[400],light:$f[300],dark:$f[700]}:{main:$f[700],light:$f[500],dark:$f[900]}}function tWe(t="light"){return t==="dark"?{main:Af[400],light:Af[300],dark:Af[700]}:{main:Af[800],light:Af[500],dark:Af[900]}}function nWe(t="light"){return t==="dark"?{main:dy[400],light:dy[300],dark:dy[700]}:{main:"#ed6c02",light:dy[500],dark:dy[900]}}function rWe(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,s=vl(t,Y4e),i=t.primary||Q4e(e),o=t.secondary||J4e(e),a=t.error||Z4e(e),l=t.info||eWe(e),c=t.success||tWe(e),u=t.warning||nWe(e);function d(m){return F4e(m,ON.text.primary)>=n?ON.text.primary:Ej.text.primary}const h=({color:m,name:g,mainShade:y=500,lightShade:b=300,darkShade:v=700})=>{if(m=Zt({},m),!m.main&&m[y]&&(m.main=m[y]),!m.hasOwnProperty("main"))throw new Error(zb(11,g?` (${g})`:"",y));if(typeof m.main!="string")throw new Error(zb(12,g?` (${g})`:"",JSON.stringify(m.main)));return _j(m,"light",b,r),_j(m,"dark",v,r),m.contrastText||(m.contrastText=d(m.main)),m},f={dark:ON,light:Ej};return sl(Zt({common:Zt({},Ub),mode:e,primary:h({color:i,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:c,name:"success"}),grey:X4e,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r},f[e]),s)}const sWe=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function iWe(t){return Math.round(t*1e5)/1e5}const Tj={textTransform:"uppercase"},kj='"Roboto", "Helvetica", "Arial", sans-serif';function oWe(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=kj,fontSize:s=14,fontWeightLight:i=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d}=n,h=vl(n,sWe),f=s/14,p=d||(y=>`${y/c*f}rem`),m=(y,b,v,w,C)=>Zt({fontFamily:r,fontWeight:y,fontSize:p(b),lineHeight:v},r===kj?{letterSpacing:`${iWe(w/b)}em`}:{},C,u),g={h1:m(i,96,1.167,-1.5),h2:m(i,60,1.2,-.5),h3:m(o,48,1.167,0),h4:m(o,34,1.235,.25),h5:m(o,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(o,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(o,16,1.5,.15),body2:m(o,14,1.43,.15),button:m(a,14,1.75,.4,Tj),caption:m(o,12,1.66,.4),overline:m(o,12,2.66,1,Tj),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return sl(Zt({htmlFontSize:c,pxToRem:p,fontFamily:r,fontSize:s,fontWeightLight:i,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},g),h,{clone:!1})}const aWe=.2,lWe=.14,cWe=.12;function Mn(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${aWe})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${lWe})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${cWe})`].join(",")}const uWe=["none",Mn(0,2,1,-1,0,1,1,0,0,1,3,0),Mn(0,3,1,-2,0,2,2,0,0,1,5,0),Mn(0,3,3,-2,0,3,4,0,0,1,8,0),Mn(0,2,4,-1,0,4,5,0,0,1,10,0),Mn(0,3,5,-1,0,5,8,0,0,1,14,0),Mn(0,3,5,-1,0,6,10,0,0,1,18,0),Mn(0,4,5,-2,0,7,10,1,0,2,16,1),Mn(0,5,5,-3,0,8,10,1,0,3,14,2),Mn(0,5,6,-3,0,9,12,1,0,3,16,2),Mn(0,6,6,-3,0,10,14,1,0,4,18,3),Mn(0,6,7,-4,0,11,15,1,0,4,20,3),Mn(0,7,8,-4,0,12,17,2,0,5,22,4),Mn(0,7,8,-4,0,13,19,2,0,5,24,4),Mn(0,7,9,-4,0,14,21,2,0,5,26,4),Mn(0,8,9,-5,0,15,22,2,0,6,28,5),Mn(0,8,10,-5,0,16,24,2,0,6,30,5),Mn(0,8,11,-5,0,17,26,2,0,6,32,5),Mn(0,9,11,-5,0,18,28,2,0,7,34,6),Mn(0,9,12,-6,0,19,29,2,0,7,36,6),Mn(0,10,13,-6,0,20,31,3,0,8,38,7),Mn(0,10,13,-6,0,21,33,3,0,8,40,7),Mn(0,10,14,-6,0,22,35,3,0,8,42,7),Mn(0,11,14,-7,0,23,36,3,0,9,44,8),Mn(0,11,15,-7,0,24,38,3,0,9,46,8)],dWe=["duration","easing","delay"],hWe={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},fWe={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Ij(t){return`${Math.round(t)}ms`}function pWe(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function mWe(t){const e=Zt({},hWe,t.easing),n=Zt({},fWe,t.duration);return Zt({getAutoHeightDuration:pWe,create:(s=["all"],i={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=i;return vl(i,dWe),(Array.isArray(s)?s:[s]).map(c=>`${c} ${typeof o=="string"?o:Ij(o)} ${a} ${typeof l=="string"?l:Ij(l)}`).join(",")}},t,{easing:e,duration:n})}const gWe={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},yWe=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function bWe(t={},...e){const{mixins:n={},palette:r={},transitions:s={},typography:i={}}=t,o=vl(t,yWe);if(t.vars)throw new Error(zb(18));const a=rWe(r),l=AL(t);let c=sl(l,{mixins:O4e(l.breakpoints,n),palette:a,shadows:uWe.slice(),typography:oWe(a,i),transitions:mWe(s),zIndex:Zt({},gWe)});return c=sl(c,o),c=e.reduce((u,d)=>sl(u,d),c),c.unstable_sxConfig=Zt({},nw,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return DT({sx:d,theme:this})},c}const rY=bWe(),sY="$$material";function vWe({props:t,name:e}){return I4e({props:t,name:e,defaultTheme:rY,themeId:sY})}var sw={},DN={exports:{}},Nj;function wWe(){return Nj||(Nj=1,function(t){function e(n,r){if(n==null)return{};var s={},i=Object.keys(n),o,a;for(a=0;a<i.length;a++)o=i[a],!(r.indexOf(o)>=0)&&(s[o]=n[o]);return s}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(DN)),DN.exports}const xWe=wi(C4e),SWe=wi(Uje),CWe=wi(Yje),EWe=wi(Xje),_We=wi(gUe),TWe=wi(R4e);var Cg=zL;Object.defineProperty(sw,"__esModule",{value:!0});var kWe=sw.default=BWe;sw.shouldForwardProp=O1;sw.systemDefaultTheme=void 0;var mo=Cg(q9()),f2=Cg(wWe()),$j=DWe(xWe),IWe=SWe;Cg(CWe);Cg(EWe);var NWe=Cg(_We),$We=Cg(TWe);const AWe=["ownerState"],RWe=["variants"],OWe=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function iY(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(iY=function(r){return r?n:e})(t)}function DWe(t,e){if(t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=iY(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in t)if(i!=="default"&&Object.prototype.hasOwnProperty.call(t,i)){var o=s?Object.getOwnPropertyDescriptor(t,i):null;o&&(o.get||o.set)?Object.defineProperty(r,i,o):r[i]=t[i]}return r.default=t,n&&n.set(t,r),r}function PWe(t){return Object.keys(t).length===0}function LWe(t){return typeof t=="string"&&t.charCodeAt(0)>96}function O1(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const FWe=sw.systemDefaultTheme=(0,NWe.default)(),MWe=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function s1({defaultTheme:t,theme:e,themeId:n}){return PWe(e)?t:e[n]||e}function zWe(t){return t?(e,n)=>n[t]:null}function D1(t,e){let{ownerState:n}=e,r=(0,f2.default)(e,AWe);const s=typeof t=="function"?t((0,mo.default)({ownerState:n},r)):t;if(Array.isArray(s))return s.flatMap(i=>D1(i,(0,mo.default)({ownerState:n},r)));if(s&&typeof s=="object"&&Array.isArray(s.variants)){const{variants:i=[]}=s;let a=(0,f2.default)(s,RWe);return i.forEach(l=>{let c=!0;typeof l.props=="function"?c=l.props((0,mo.default)({ownerState:n},r,n)):Object.keys(l.props).forEach(u=>{(n==null?void 0:n[u])!==l.props[u]&&r[u]!==l.props[u]&&(c=!1)}),c&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style((0,mo.default)({ownerState:n},r,n)):l.style))}),a}return s}function BWe(t={}){const{themeId:e,defaultTheme:n=FWe,rootShouldForwardProp:r=O1,slotShouldForwardProp:s=O1}=t,i=o=>(0,$We.default)((0,mo.default)({},o,{theme:s1((0,mo.default)({},o,{defaultTheme:n,themeId:e}))}));return i.__mui_systemSx=!0,(o,a={})=>{(0,$j.internal_processStyles)(o,C=>C.filter(_=>!(_!=null&&_.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:d,overridesResolver:h=zWe(MWe(c))}=a,f=(0,f2.default)(a,OWe),p=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,m=d||!1;let g,y=O1;c==="Root"||c==="root"?y=r:c?y=s:LWe(o)&&(y=void 0);const b=(0,$j.default)(o,(0,mo.default)({shouldForwardProp:y,label:g},f)),v=C=>typeof C=="function"&&C.__emotion_real!==C||(0,IWe.isPlainObject)(C)?_=>D1(C,(0,mo.default)({},_,{theme:s1({theme:_.theme,defaultTheme:n,themeId:e})})):C,w=(C,..._)=>{let E=v(C);const I=_?_.map(v):[];l&&h&&I.push(z=>{const B=s1((0,mo.default)({},z,{defaultTheme:n,themeId:e}));if(!B.components||!B.components[l]||!B.components[l].styleOverrides)return null;const j=B.components[l].styleOverrides,G={};return Object.entries(j).forEach(([U,Q])=>{G[U]=D1(Q,(0,mo.default)({},z,{theme:B}))}),h(z,G)}),l&&!p&&I.push(z=>{var B;const j=s1((0,mo.default)({},z,{defaultTheme:n,themeId:e})),G=j==null||(B=j.components)==null||(B=B[l])==null?void 0:B.variants;return D1({variants:G},(0,mo.default)({},z,{theme:j}))}),m||I.push(i);const O=I.length-_.length;if(Array.isArray(C)&&O>0){const z=new Array(O).fill("");E=[...C,...z],E.raw=[...C.raw,...z]}const R=b(E,...I);return o.muiName&&(R.muiName=o.muiName),R};return b.withConfig&&(w.withConfig=b.withConfig),w}}function jWe(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const VWe=t=>jWe(t)&&t!=="classes",UWe=kWe({themeId:sY,defaultTheme:rY,rootShouldForwardProp:VWe});function WWe(t){return S9("MuiSvgIcon",t)}wVe("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const HWe=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],GWe=t=>{const{color:e,fontSize:n,classes:r}=t,s={root:["root",e!=="inherit"&&`color${Au(e)}`,`fontSize${Au(n)}`]};return yVe(s,WWe,r)},KWe=UWe("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${Au(n.color)}`],e[`fontSize${Au(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,s,i,o,a,l,c,u,d,h,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(s=t.transitions)==null||(s=s.duration)==null?void 0:s.shorter}),fontSize:{inherit:"inherit",small:((i=t.typography)==null||(o=i.pxToRem)==null?void 0:o.call(i,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=t.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[e.fontSize],color:(d=(h=(t.vars||t).palette)==null||(h=h[e.color])==null?void 0:h.main)!=null?d:{action:(f=(t.vars||t).palette)==null||(f=f.action)==null?void 0:f.active,disabled:(p=(t.vars||t).palette)==null||(p=p.action)==null?void 0:p.disabled,inherit:void 0}[e.color]}}),p2=N.forwardRef(function(e,n){const r=vWe({props:e,name:"MuiSvgIcon"}),{children:s,className:i,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:h="0 0 24 24"}=r,f=vl(r,HWe),p=N.isValidElement(s)&&s.type==="svg",m=Zt({},r,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:h,hasSvgAsChild:p}),g={};u||(g.viewBox=h);const y=GWe(m);return $.jsxs(KWe,Zt({as:a,className:CVe(y.root,i),focusable:"false",color:c,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},g,f,p&&s.props,{ownerState:m,children:[p?s.props.children:s,d?$.jsx("title",{children:d}):null]}))});p2.muiName="SvgIcon";function UL(t,e){function n(r,s){return $.jsx(p2,Zt({"data-testid":`${e}Icon`,ref:s},r,{children:t}))}return n.muiName=p2.muiName,N.memo(N.forwardRef(n))}const qWe={configure:t=>{x9.configure(t)}},XWe=Object.freeze(Object.defineProperty({__proto__:null,capitalize:Au,createChainedFunction:Qje,createSvgIcon:UL,debounce:Jje,deprecatedPropType:Zje,isMuiElement:eVe,ownerDocument:y9,ownerWindow:tVe,requirePropFactory:nVe,setRef:b9,unstable_ClassNameGenerator:qWe,unstable_useEnhancedEffect:v9,unstable_useId:sVe,unsupportedProp:iVe,useControlled:oVe,useEventCallback:aVe,useForkRef:lVe,useIsFocusVisible:gVe},Symbol.toStringTag,{value:"Module"})),YWe=UL($.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m-.4 4.25-7.07 4.42c-.32.2-.74.2-1.06 0L4.4 8.25c-.25-.16-.4-.43-.4-.72 0-.67.73-1.07 1.3-.72L12 11l6.7-4.19c.57-.35 1.3.05 1.3.72 0 .29-.15.56-.4.72"}),"EmailRounded"),QWe=UL($.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");function JWe(){const[t,e]=N.useState();return N.useEffect(()=>{bn.get("/api/mcqquestions").then(n=>n.data.myData).then(n=>e(n))},[]),t}Pd(),Pd(),Pd(),Pd();function ZWe(){const t=Ks(),e=A4(),n=JWe(),[r,s]=N.useState(new Date().toLocaleDateString()),[i,o]=N.useState();N.useState();const a=kP();return N.useEffect(()=>{s(new Date().toLocaleDateString()),console.log(new Date().toLocaleDateString()),e&&n&&(o(e.length+n.length),console.log(i))},[e,n]),$.jsx("div",{className:"herosection",children:a.map(l=>$.jsxs("div",{className:"card user-dashboard-card",children:[$.jsx("div",{className:"assessment-role-title",children:$.jsx("h1",{className:"headTest",children:l.AssessmentTitle})}),$.jsxs("div",{className:"card-body assessment-start-card-body",children:[$.jsxs("div",{className:"assessment-details",children:[$.jsxs("div",{children:[$.jsx("i",{className:"bx bx-question-mark assessment-details-icon"}),$.jsx("p",{children:"Questions:"})]}),$.jsx("p",{children:i})]}),$.jsxs("div",{className:"assessment-details",children:[$.jsxs("div",{children:[$.jsx("i",{className:"bx bx-stopwatch assessment-details-icon"}),$.jsx("p",{children:"Duration:"})]}),$.jsxs("p",{children:[l.AssessmentDuration," Min"]})]}),$.jsxs("div",{className:"assessment-details",children:[$.jsxs("div",{children:[$.jsx("i",{className:"bx bx-calendar assessment-details-icon"}),$.jsx("p",{children:"Assessment Date:"})]}),$.jsx("p",{children:l.AssessmentDate})]}),$.jsxs("div",{className:"assessment-details",children:[$.jsxs("div",{children:[$.jsx("i",{className:"bx bxs-watch assessment-details-icon"}),$.jsx("p",{children:"Start Time:"})]}),$.jsx("p",{children:l.AssessmentStartTime})]}),$.jsxs("div",{className:"assessment-details",children:[$.jsxs("div",{children:[$.jsx("i",{className:"bx bxs-watch assessment-details-icon"}),$.jsx("p",{children:"End Time:"})]}),$.jsx("p",{children:l.AssessmentEndTime})]}),$.jsx("div",{className:"start-assesment-btn",children:l.startDate===r?$.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>t(`/${l._id}/termsandcondition`),children:"Start Assessment"}):$.jsx("button",{type:"button",className:"btn btn-primary",onClick:()=>t(`/${l._id}/termsandcondition`),children:"Start Assessment"})})]})]},l.id))})}var m2={},oY={};const eHe=wi(lOe);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var e=i(N),n=i(zX),r=eHe,s=["children","onClick","replace","to","state","activeClassName","className","activeStyle","style","isActive"];function i(m){return m&&m.__esModule?m:{default:m}}function o(m,g){var y=Object.keys(m);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(m);g&&(b=b.filter(function(v){return Object.getOwnPropertyDescriptor(m,v).enumerable})),y.push.apply(y,b)}return y}function a(m){for(var g=1;g<arguments.length;g++){var y=arguments[g]!=null?arguments[g]:{};g%2?o(Object(y),!0).forEach(function(b){l(m,b,y[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(y)):o(Object(y)).forEach(function(b){Object.defineProperty(m,b,Object.getOwnPropertyDescriptor(y,b))})}return m}function l(m,g,y){return g in m?Object.defineProperty(m,g,{value:y,enumerable:!0,configurable:!0,writable:!0}):m[g]=y,m}function c(m){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},c(m)}function u(m,g){if(m==null)return{};var y=d(m,g),b,v;if(Object.getOwnPropertySymbols){var w=Object.getOwnPropertySymbols(m);for(v=0;v<w.length;v++)b=w[v],!(g.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(m,b)&&(y[b]=m[b])}return y}function d(m,g){if(m==null)return{};var y={},b=Object.keys(m),v,w;for(w=0;w<b.length;w++)v=b[w],!(g.indexOf(v)>=0)&&(y[v]=m[v]);return y}var h=function(g){return!!(g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)},f=function(g){var y=g.children,b=g.onClick,v=g.replace,w=g.to,C=g.state,_=g.activeClassName,E=g.className,I=g.activeStyle,O=g.style,R=g.isActive,z=u(g,s),B=c(w)==="object"?w.pathname||"":w,j=(0,r.useNavigate)(),G=(0,r.useHref)(typeof w=="string"?{pathname:w}:w),U=(0,r.useMatch)(B),Q=(0,r.useLocation)(),se=e.default.Children.only(y),V=!!(R?typeof R=="function"?R(U,Q):R:U),W=function(J){y.props.onClick&&y.props.onClick(J),b&&b(J),!J.defaultPrevented&&J.button===0&&!h(J)&&(J.preventDefault(),j(w,{replace:v,state:C}))};return e.default.cloneElement(se,a(a({},z),{},{className:[E,se.props.className,V?_:null].join(" ").trim(),style:V?a(a({},O),I):O,href:G,onClick:W}))};f.propTypes={children:n.default.element.isRequired,onClick:n.default.func,replace:n.default.bool,to:n.default.oneOfType([n.default.string,n.default.object]).isRequired,state:n.default.object,className:n.default.string,activeClassName:n.default.string,style:n.default.objectOf(n.default.oneOfType([n.default.string,n.default.number])),activeStyle:n.default.objectOf(n.default.oneOfType([n.default.string,n.default.number])),isActive:n.default.oneOfType([n.default.func,n.default.bool])},f.defaultProps={replace:!1,activeClassName:"active",onClick:null,className:null,style:null,activeStyle:null,isActive:null};var p=f;t.default=p})(oY);(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"LinkContainer",{enumerable:!0,get:function(){return e.default}});var e=n(oY);function n(r){return r&&r.__esModule?r:{default:r}}})(m2);function g2(){return g2=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},g2.apply(this,arguments)}var tHe={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(t){},onComplete:function(t){},preStringTyped:function(t,e){},onStringTyped:function(t,e){},onLastStringBackspaced:function(t){},onTypingPaused:function(t,e){},onTypingResumed:function(t,e){},onReset:function(t){},onStop:function(t,e){},onStart:function(t,e){},onDestroy:function(t){}},nHe=new(function(){function t(){}var e=t.prototype;return e.load=function(n,r,s){if(n.el=typeof s=="string"?document.querySelector(s):s,n.options=g2({},tHe,r),n.isInput=n.el.tagName.toLowerCase()==="input",n.attr=n.options.attr,n.bindInputFocusEvents=n.options.bindInputFocusEvents,n.showCursor=!n.isInput&&n.options.showCursor,n.cursorChar=n.options.cursorChar,n.cursorBlinking=!0,n.elContent=n.attr?n.el.getAttribute(n.attr):n.el.textContent,n.contentType=n.options.contentType,n.typeSpeed=n.options.typeSpeed,n.startDelay=n.options.startDelay,n.backSpeed=n.options.backSpeed,n.smartBackspace=n.options.smartBackspace,n.backDelay=n.options.backDelay,n.fadeOut=n.options.fadeOut,n.fadeOutClass=n.options.fadeOutClass,n.fadeOutDelay=n.options.fadeOutDelay,n.isPaused=!1,n.strings=n.options.strings.map(function(c){return c.trim()}),n.stringsElement=typeof n.options.stringsElement=="string"?document.querySelector(n.options.stringsElement):n.options.stringsElement,n.stringsElement){n.strings=[],n.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var i=Array.prototype.slice.apply(n.stringsElement.children),o=i.length;if(o)for(var a=0;a<o;a+=1)n.strings.push(i[a].innerHTML.trim())}for(var l in n.strPos=0,n.currentElContent=this.getCurrentElContent(n),n.currentElContent&&n.currentElContent.length>0&&(n.strPos=n.currentElContent.length-1,n.strings.unshift(n.currentElContent)),n.sequence=[],n.strings)n.sequence[l]=l;n.arrayPos=0,n.stopNum=0,n.loop=n.options.loop,n.loopCount=n.options.loopCount,n.curLoop=0,n.shuffle=n.options.shuffle,n.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},n.typingComplete=!1,n.autoInsertCss=n.options.autoInsertCss,n.autoInsertCss&&(this.appendCursorAnimationCss(n),this.appendFadeOutAnimationCss(n))},e.getCurrentElContent=function(n){return n.attr?n.el.getAttribute(n.attr):n.isInput?n.el.value:n.contentType==="html"?n.el.innerHTML:n.el.textContent},e.appendCursorAnimationCss=function(n){var r="data-typed-js-cursor-css";if(n.showCursor&&!document.querySelector("["+r+"]")){var s=document.createElement("style");s.setAttribute(r,"true"),s.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(s)}},e.appendFadeOutAnimationCss=function(n){var r="data-typed-fadeout-js-css";if(n.fadeOut&&!document.querySelector("["+r+"]")){var s=document.createElement("style");s.setAttribute(r,"true"),s.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(s)}},t}()),Aj=new(function(){function t(){}var e=t.prototype;return e.typeHtmlChars=function(n,r,s){if(s.contentType!=="html")return r;var i=n.substring(r).charAt(0);if(i==="<"||i==="&"){var o;for(o=i==="<"?">":";";n.substring(r+1).charAt(0)!==o&&!(1+ ++r>n.length););r++}return r},e.backSpaceHtmlChars=function(n,r,s){if(s.contentType!=="html")return r;var i=n.substring(r).charAt(0);if(i===">"||i===";"){var o;for(o=i===">"?"<":"&";n.substring(r-1).charAt(0)!==o&&!(--r<0););r--}return r},t}()),rHe=function(){function t(n,r){nHe.load(this,r,n),this.begin()}var e=t.prototype;return e.toggle=function(){this.pause.status?this.start():this.stop()},e.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},e.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},e.destroy=function(){this.reset(!1),this.options.onDestroy(this)},e.reset=function(n){n===void 0&&(n=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,n&&(this.insertCursor(),this.options.onReset(this),this.begin())},e.begin=function(){var n=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){n.strPos===0?n.typewrite(n.strings[n.sequence[n.arrayPos]],n.strPos):n.backspace(n.strings[n.sequence[n.arrayPos]],n.strPos)},this.startDelay)},e.typewrite=function(n,r){var s=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var i=this.humanizer(this.typeSpeed),o=1;this.pause.status!==!0?this.timeout=setTimeout(function(){r=Aj.typeHtmlChars(n,r,s);var a=0,l=n.substring(r);if(l.charAt(0)==="^"&&/^\^\d+/.test(l)){var c=1;c+=(l=/\d+/.exec(l)[0]).length,a=parseInt(l),s.temporaryPause=!0,s.options.onTypingPaused(s.arrayPos,s),n=n.substring(0,r)+n.substring(r+c),s.toggleBlinking(!0)}if(l.charAt(0)==="`"){for(;n.substring(r+o).charAt(0)!=="`"&&(o++,!(r+o>n.length)););var u=n.substring(0,r),d=n.substring(u.length+1,r+o),h=n.substring(r+o+1);n=u+d+h,o--}s.timeout=setTimeout(function(){s.toggleBlinking(!1),r>=n.length?s.doneTyping(n,r):s.keepTyping(n,r,o),s.temporaryPause&&(s.temporaryPause=!1,s.options.onTypingResumed(s.arrayPos,s))},a)},i):this.setPauseStatus(n,r,!0)},e.keepTyping=function(n,r,s){r===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var i=n.substring(0,r+=s);this.replaceText(i),this.typewrite(n,r)},e.doneTyping=function(n,r){var s=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){s.backspace(n,r)},this.backDelay))},e.backspace=function(n,r){var s=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var i=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){r=Aj.backSpaceHtmlChars(n,r,s);var o=n.substring(0,r);if(s.replaceText(o),s.smartBackspace){var a=s.strings[s.arrayPos+1];s.stopNum=a&&o===a.substring(0,r)?r:0}r>s.stopNum?(r--,s.backspace(n,r)):r<=s.stopNum&&(s.arrayPos++,s.arrayPos===s.strings.length?(s.arrayPos=0,s.options.onLastStringBackspaced(),s.shuffleStringsIfNeeded(),s.begin()):s.typewrite(s.strings[s.sequence[s.arrayPos]],r))},i)}else this.setPauseStatus(n,r,!1)},e.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},e.setPauseStatus=function(n,r,s){this.pause.typewrite=s,this.pause.curString=n,this.pause.curStrPos=r},e.toggleBlinking=function(n){this.cursor&&(this.pause.status||this.cursorBlinking!==n&&(this.cursorBlinking=n,n?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},e.humanizer=function(n){return Math.round(Math.random()*n/2)+n},e.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},e.initFadeOut=function(){var n=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){n.arrayPos++,n.replaceText(""),n.strings.length>n.arrayPos?n.typewrite(n.strings[n.sequence[n.arrayPos]],0):(n.typewrite(n.strings[0],0),n.arrayPos=0)},this.fadeOutDelay)},e.replaceText=function(n){this.attr?this.el.setAttribute(this.attr,n):this.isInput?this.el.value=n:this.contentType==="html"?this.el.innerHTML=n:this.el.textContent=n},e.bindFocusEvents=function(){var n=this;this.isInput&&(this.el.addEventListener("focus",function(r){n.stop()}),this.el.addEventListener("blur",function(r){n.el.value&&n.el.value.length!==0||n.start()}))},e.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},t}();const sHe=N.memo(({style:t,className:e,typedRef:n,parseRef:r,stopped:s,children:i,startWhenVisible:o,...a})=>{const l=N.useRef(null),c=N.useMemo(()=>{var d;return[...Object.values(a).filter(h=>typeof h=="boolean"||typeof h=="number"||typeof h=="string"),(d=a.strings)==null?void 0:d.join(",")]},[a]);N.useEffect(()=>{const d=r&&r(l)||l.current,h=new rHe(d,{...a});if((s||o)&&(h==null||h.stop()),o){const f=new IntersectionObserver(([p])=>{p.isIntersecting&&(h==null||h.start(),f.disconnect())});f.observe(d)}return n&&h&&n(h),()=>{h.destroy()}},c);const u=i?kn.cloneElement(i,{ref:l}):kn.createElement("span",{style:t,ref:l});return kn.createElement("span",{style:t,className:e,"data-testid":"react-typed"},u)}),iHe=()=>$.jsx($.Fragment,{children:$.jsxs("div",{className:"navbar-candidate",children:[$.jsxs("h2",{children:["Welcome to ",$.jsx(sHe,{style:{color:"#50BCB6h"},strings:["Candidate Assessment Website","Averybit"],typeSpeed:40,backSpeed:50,loop:!0})]}),$.jsx(hBe,{children:$.jsxs(TN,{title:"👤Profile",style:{color:"white",borderWidth:1,backgroundColor:"white",borderRadius:5},children:[$.jsx(m2.LinkContainer,{to:"/userid/profile",children:$.jsx(TN.Item,{children:" 👤Profile"})}),$.jsx(m2.LinkContainer,{to:"/",children:$.jsx(TN.Item,{children:" ↪️Logout"})})]})})]})}),oHe=()=>$.jsxs("div",{className:"sidebar",children:[$.jsx("div",{className:"sidebar-logo-div",children:$.jsx("img",{src:HP,alt:"",className:"sidebar-logo"})}),$.jsxs("div",{className:"sidebar-naivgation",children:[$.jsx("div",{children:$.jsx("h2",{children:$.jsx(E1,{to:"/userid/assessments",children:"Dashboard"})})}),$.jsx("div",{children:$.jsx("h2",{children:$.jsx(E1,{to:"/userid/archivedexams",children:"Archived Exams"})})}),$.jsx("div",{children:$.jsx("h2",{children:$.jsx(E1,{to:"/userid/support",children:"Support"})})})]})]});function aHe(){return $.jsxs("div",{className:"user-side-dashboard",children:[$.jsx("div",{className:"sidebar-outer-div",children:$.jsx(oHe,{})}),$.jsxs("div",{className:"rest-section",children:[$.jsx("div",{className:"navbar-outer-div",children:$.jsx(iHe,{})}),$.jsx("div",{className:"hero-section",children:$.jsx(zD,{})}),$.jsx("div",{className:"footer-outer-div",children:$.jsx(Vje,{})})]})]})}var lHe="firebase",cHe="10.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */el(lHe,cHe,"app");const uHe={apiKey:"AIzaSyDCAI3Du9IawS_52mMQtwZRbV_rNvci97c",authDomain:"digital-recruitment-44f66.firebaseapp.com",projectId:"digital-recruitment-44f66",storageBucket:"digital-recruitment-44f66.appspot.com",messagingSenderId:"226538096640",appId:"1:226538096640:web:f70f760570fa6945df30e5",measurementId:"G-8XRZ1D67WT"};X8(uHe);iT();const dHe=iT();fFe(dHe,t=>{if(t){const e=t.uid;console.log(e)}});function hHe(){return $.jsx("div",{className:"App",children:$.jsx(zD,{})})}var fHe={exports:{}};/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */(function(t,e){(function(n,r){t.exports=r()})(Mo,function(){const n=new Map,r={set(D,x,T){n.has(D)||n.set(D,new Map);const M=n.get(D);M.has(x)||M.size===0?M.set(x,T):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(M.keys())[0]}.`)},get:(D,x)=>n.has(D)&&n.get(D).get(x)||null,remove(D,x){if(!n.has(D))return;const T=n.get(D);T.delete(x),T.size===0&&n.delete(D)}},s="transitionend",i=D=>(D&&window.CSS&&window.CSS.escape&&(D=D.replace(/#([^\s"#']+)/g,(x,T)=>`#${CSS.escape(T)}`)),D),o=D=>{D.dispatchEvent(new Event(s))},a=D=>!(!D||typeof D!="object")&&(D.jquery!==void 0&&(D=D[0]),D.nodeType!==void 0),l=D=>a(D)?D.jquery?D[0]:D:typeof D=="string"&&D.length>0?document.querySelector(i(D)):null,c=D=>{if(!a(D)||D.getClientRects().length===0)return!1;const x=getComputedStyle(D).getPropertyValue("visibility")==="visible",T=D.closest("details:not([open])");if(!T)return x;if(T!==D){const M=D.closest("summary");if(M&&M.parentNode!==T||M===null)return!1}return x},u=D=>!D||D.nodeType!==Node.ELEMENT_NODE||!!D.classList.contains("disabled")||(D.disabled!==void 0?D.disabled:D.hasAttribute("disabled")&&D.getAttribute("disabled")!=="false"),d=D=>{if(!document.documentElement.attachShadow)return null;if(typeof D.getRootNode=="function"){const x=D.getRootNode();return x instanceof ShadowRoot?x:null}return D instanceof ShadowRoot?D:D.parentNode?d(D.parentNode):null},h=()=>{},f=D=>{D.offsetHeight},p=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,m=[],g=()=>document.documentElement.dir==="rtl",y=D=>{var x;x=()=>{const T=p();if(T){const M=D.NAME,ne=T.fn[M];T.fn[M]=D.jQueryInterface,T.fn[M].Constructor=D,T.fn[M].noConflict=()=>(T.fn[M]=ne,D.jQueryInterface)}},document.readyState==="loading"?(m.length||document.addEventListener("DOMContentLoaded",()=>{for(const T of m)T()}),m.push(x)):x()},b=(D,x=[],T=D)=>typeof D=="function"?D(...x):T,v=(D,x,T=!0)=>{if(!T)return void b(D);const M=(me=>{if(!me)return 0;let{transitionDuration:Se,transitionDelay:Re}=window.getComputedStyle(me);const je=Number.parseFloat(Se),Ge=Number.parseFloat(Re);return je||Ge?(Se=Se.split(",")[0],Re=Re.split(",")[0],1e3*(Number.parseFloat(Se)+Number.parseFloat(Re))):0})(x)+5;let ne=!1;const re=({target:me})=>{me===x&&(ne=!0,x.removeEventListener(s,re),b(D))};x.addEventListener(s,re),setTimeout(()=>{ne||o(x)},M)},w=(D,x,T,M)=>{const ne=D.length;let re=D.indexOf(x);return re===-1?!T&&M?D[ne-1]:D[0]:(re+=T?1:-1,M&&(re=(re+ne)%ne),D[Math.max(0,Math.min(re,ne-1))])},C=/[^.]*(?=\..*)\.|.*/,_=/\..*/,E=/::\d+$/,I={};let O=1;const R={mouseenter:"mouseover",mouseleave:"mouseout"},z=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function B(D,x){return x&&`${x}::${O++}`||D.uidEvent||O++}function j(D){const x=B(D);return D.uidEvent=x,I[x]=I[x]||{},I[x]}function G(D,x,T=null){return Object.values(D).find(M=>M.callable===x&&M.delegationSelector===T)}function U(D,x,T){const M=typeof x=="string",ne=M?T:x||T;let re=W(D);return z.has(re)||(re=D),[M,ne,re]}function Q(D,x,T,M,ne){if(typeof x!="string"||!D)return;let[re,me,Se]=U(x,T,M);x in R&&(me=(gt=>function(dt){if(!dt.relatedTarget||dt.relatedTarget!==dt.delegateTarget&&!dt.delegateTarget.contains(dt.relatedTarget))return gt.call(this,dt)})(me));const Re=j(D),je=Re[Se]||(Re[Se]={}),Ge=G(je,me,re?T:null);if(Ge)return void(Ge.oneOff=Ge.oneOff&&ne);const Le=B(me,x.replace(C,"")),wt=re?function(lt,gt,dt){return function ft(Yt){const Ft=lt.querySelectorAll(gt);for(let{target:kt}=Yt;kt&&kt!==this;kt=kt.parentNode)for(const Ut of Ft)if(Ut===kt)return J(Yt,{delegateTarget:kt}),ft.oneOff&&L.off(lt,Yt.type,gt,dt),dt.apply(kt,[Yt])}}(D,T,me):function(lt,gt){return function dt(ft){return J(ft,{delegateTarget:lt}),dt.oneOff&&L.off(lt,ft.type,gt),gt.apply(lt,[ft])}}(D,me);wt.delegationSelector=re?T:null,wt.callable=me,wt.oneOff=ne,wt.uidEvent=Le,je[Le]=wt,D.addEventListener(Se,wt,re)}function se(D,x,T,M,ne){const re=G(x[T],M,ne);re&&(D.removeEventListener(T,re,!!ne),delete x[T][re.uidEvent])}function V(D,x,T,M){const ne=x[T]||{};for(const[re,me]of Object.entries(ne))re.includes(M)&&se(D,x,T,me.callable,me.delegationSelector)}function W(D){return D=D.replace(_,""),R[D]||D}const L={on(D,x,T,M){Q(D,x,T,M,!1)},one(D,x,T,M){Q(D,x,T,M,!0)},off(D,x,T,M){if(typeof x!="string"||!D)return;const[ne,re,me]=U(x,T,M),Se=me!==x,Re=j(D),je=Re[me]||{},Ge=x.startsWith(".");if(re===void 0){if(Ge)for(const Le of Object.keys(Re))V(D,Re,Le,x.slice(1));for(const[Le,wt]of Object.entries(je)){const lt=Le.replace(E,"");Se&&!x.includes(lt)||se(D,Re,me,wt.callable,wt.delegationSelector)}}else{if(!Object.keys(je).length)return;se(D,Re,me,re,ne?T:null)}},trigger(D,x,T){if(typeof x!="string"||!D)return null;const M=p();let ne=null,re=!0,me=!0,Se=!1;x!==W(x)&&M&&(ne=M.Event(x,T),M(D).trigger(ne),re=!ne.isPropagationStopped(),me=!ne.isImmediatePropagationStopped(),Se=ne.isDefaultPrevented());const Re=J(new Event(x,{bubbles:re,cancelable:!0}),T);return Se&&Re.preventDefault(),me&&D.dispatchEvent(Re),Re.defaultPrevented&&ne&&ne.preventDefault(),Re}};function J(D,x={}){for(const[T,M]of Object.entries(x))try{D[T]=M}catch{Object.defineProperty(D,T,{configurable:!0,get:()=>M})}return D}function Z(D){if(D==="true")return!0;if(D==="false")return!1;if(D===Number(D).toString())return Number(D);if(D===""||D==="null")return null;if(typeof D!="string")return D;try{return JSON.parse(decodeURIComponent(D))}catch{return D}}function ie(D){return D.replace(/[A-Z]/g,x=>`-${x.toLowerCase()}`)}const ue={setDataAttribute(D,x,T){D.setAttribute(`data-bs-${ie(x)}`,T)},removeDataAttribute(D,x){D.removeAttribute(`data-bs-${ie(x)}`)},getDataAttributes(D){if(!D)return{};const x={},T=Object.keys(D.dataset).filter(M=>M.startsWith("bs")&&!M.startsWith("bsConfig"));for(const M of T){let ne=M.replace(/^bs/,"");ne=ne.charAt(0).toLowerCase()+ne.slice(1,ne.length),x[ne]=Z(D.dataset[M])}return x},getDataAttribute:(D,x)=>Z(D.getAttribute(`data-bs-${ie(x)}`))};class de{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(x){return x=this._mergeConfigObj(x),x=this._configAfterMerge(x),this._typeCheckConfig(x),x}_configAfterMerge(x){return x}_mergeConfigObj(x,T){const M=a(T)?ue.getDataAttribute(T,"config"):{};return{...this.constructor.Default,...typeof M=="object"?M:{},...a(T)?ue.getDataAttributes(T):{},...typeof x=="object"?x:{}}}_typeCheckConfig(x,T=this.constructor.DefaultType){for(const[ne,re]of Object.entries(T)){const me=x[ne],Se=a(me)?"element":(M=me)==null?`${M}`:Object.prototype.toString.call(M).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(re).test(Se))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${ne}" provided type "${Se}" but expected type "${re}".`)}var M}}class ye extends de{constructor(x,T){super(),(x=l(x))&&(this._element=x,this._config=this._getConfig(T),r.set(this._element,this.constructor.DATA_KEY,this))}dispose(){r.remove(this._element,this.constructor.DATA_KEY),L.off(this._element,this.constructor.EVENT_KEY);for(const x of Object.getOwnPropertyNames(this))this[x]=null}_queueCallback(x,T,M=!0){v(x,T,M)}_getConfig(x){return x=this._mergeConfigObj(x,this._element),x=this._configAfterMerge(x),this._typeCheckConfig(x),x}static getInstance(x){return r.get(l(x),this.DATA_KEY)}static getOrCreateInstance(x,T={}){return this.getInstance(x)||new this(x,typeof T=="object"?T:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(x){return`${x}${this.EVENT_KEY}`}}const Ee=D=>{let x=D.getAttribute("data-bs-target");if(!x||x==="#"){let T=D.getAttribute("href");if(!T||!T.includes("#")&&!T.startsWith("."))return null;T.includes("#")&&!T.startsWith("#")&&(T=`#${T.split("#")[1]}`),x=T&&T!=="#"?T.trim():null}return x?x.split(",").map(T=>i(T)).join(","):null},ge={find:(D,x=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(x,D)),findOne:(D,x=document.documentElement)=>Element.prototype.querySelector.call(x,D),children:(D,x)=>[].concat(...D.children).filter(T=>T.matches(x)),parents(D,x){const T=[];let M=D.parentNode.closest(x);for(;M;)T.push(M),M=M.parentNode.closest(x);return T},prev(D,x){let T=D.previousElementSibling;for(;T;){if(T.matches(x))return[T];T=T.previousElementSibling}return[]},next(D,x){let T=D.nextElementSibling;for(;T;){if(T.matches(x))return[T];T=T.nextElementSibling}return[]},focusableChildren(D){const x=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(T=>`${T}:not([tabindex^="-"])`).join(",");return this.find(x,D).filter(T=>!u(T)&&c(T))},getSelectorFromElement(D){const x=Ee(D);return x&&ge.findOne(x)?x:null},getElementFromSelector(D){const x=Ee(D);return x?ge.findOne(x):null},getMultipleElementsFromSelector(D){const x=Ee(D);return x?ge.find(x):[]}},Pe=(D,x="hide")=>{const T=`click.dismiss${D.EVENT_KEY}`,M=D.NAME;L.on(document,T,`[data-bs-dismiss="${M}"]`,function(ne){if(["A","AREA"].includes(this.tagName)&&ne.preventDefault(),u(this))return;const re=ge.getElementFromSelector(this)||this.closest(`.${M}`);D.getOrCreateInstance(re)[x]()})},We=".bs.alert",le=`close${We}`,Ve=`closed${We}`;class Je extends ye{static get NAME(){return"alert"}close(){if(L.trigger(this._element,le).defaultPrevented)return;this._element.classList.remove("show");const x=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,x)}_destroyElement(){this._element.remove(),L.trigger(this._element,Ve),this.dispose()}static jQueryInterface(x){return this.each(function(){const T=Je.getOrCreateInstance(this);if(typeof x=="string"){if(T[x]===void 0||x.startsWith("_")||x==="constructor")throw new TypeError(`No method named "${x}"`);T[x](this)}})}}Pe(Je,"close"),y(Je);const at='[data-bs-toggle="button"]';class _e extends ye{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(x){return this.each(function(){const T=_e.getOrCreateInstance(this);x==="toggle"&&T[x]()})}}L.on(document,"click.bs.button.data-api",at,D=>{D.preventDefault();const x=D.target.closest(at);_e.getOrCreateInstance(x).toggle()}),y(_e);const ze=".bs.swipe",it=`touchstart${ze}`,Xe=`touchmove${ze}`,xn=`touchend${ze}`,Ne=`pointerdown${ze}`,Bt=`pointerup${ze}`,At={endCallback:null,leftCallback:null,rightCallback:null},Sn={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Wt extends de{constructor(x,T){super(),this._element=x,x&&Wt.isSupported()&&(this._config=this._getConfig(T),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return At}static get DefaultType(){return Sn}static get NAME(){return"swipe"}dispose(){L.off(this._element,ze)}_start(x){this._supportPointerEvents?this._eventIsPointerPenTouch(x)&&(this._deltaX=x.clientX):this._deltaX=x.touches[0].clientX}_end(x){this._eventIsPointerPenTouch(x)&&(this._deltaX=x.clientX-this._deltaX),this._handleSwipe(),b(this._config.endCallback)}_move(x){this._deltaX=x.touches&&x.touches.length>1?0:x.touches[0].clientX-this._deltaX}_handleSwipe(){const x=Math.abs(this._deltaX);if(x<=40)return;const T=x/this._deltaX;this._deltaX=0,T&&b(T>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(L.on(this._element,Ne,x=>this._start(x)),L.on(this._element,Bt,x=>this._end(x)),this._element.classList.add("pointer-event")):(L.on(this._element,it,x=>this._start(x)),L.on(this._element,Xe,x=>this._move(x)),L.on(this._element,xn,x=>this._end(x)))}_eventIsPointerPenTouch(x){return this._supportPointerEvents&&(x.pointerType==="pen"||x.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const tn=".bs.carousel",rt=".data-api",Vt="next",Cn="prev",Kn="left",ro="right",Es=`slide${tn}`,Ea=`slid${tn}`,Ho=`keydown${tn}`,vc=`mouseenter${tn}`,wc=`mouseleave${tn}`,Qh=`dragstart${tn}`,so=`load${tn}${rt}`,Jh=`click${tn}${rt}`,Ci="carousel",xc="active",Yu=".active",Zh=".carousel-item",ef=Yu+Zh,Eg={ArrowLeft:ro,ArrowRight:Kn},ae={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},he={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class be extends ye{constructor(x,T){super(x,T),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=ge.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Ci&&this.cycle()}static get Default(){return ae}static get DefaultType(){return he}static get NAME(){return"carousel"}next(){this._slide(Vt)}nextWhenVisible(){!document.hidden&&c(this._element)&&this.next()}prev(){this._slide(Cn)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?L.one(this._element,Ea,()=>this.cycle()):this.cycle())}to(x){const T=this._getItems();if(x>T.length-1||x<0)return;if(this._isSliding)return void L.one(this._element,Ea,()=>this.to(x));const M=this._getItemIndex(this._getActive());if(M===x)return;const ne=x>M?Vt:Cn;this._slide(ne,T[x])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(x){return x.defaultInterval=x.interval,x}_addEventListeners(){this._config.keyboard&&L.on(this._element,Ho,x=>this._keydown(x)),this._config.pause==="hover"&&(L.on(this._element,vc,()=>this.pause()),L.on(this._element,wc,()=>this._maybeEnableCycle())),this._config.touch&&Wt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const T of ge.find(".carousel-item img",this._element))L.on(T,Qh,M=>M.preventDefault());const x={leftCallback:()=>this._slide(this._directionToOrder(Kn)),rightCallback:()=>this._slide(this._directionToOrder(ro)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new Wt(this._element,x)}_keydown(x){if(/input|textarea/i.test(x.target.tagName))return;const T=Eg[x.key];T&&(x.preventDefault(),this._slide(this._directionToOrder(T)))}_getItemIndex(x){return this._getItems().indexOf(x)}_setActiveIndicatorElement(x){if(!this._indicatorsElement)return;const T=ge.findOne(Yu,this._indicatorsElement);T.classList.remove(xc),T.removeAttribute("aria-current");const M=ge.findOne(`[data-bs-slide-to="${x}"]`,this._indicatorsElement);M&&(M.classList.add(xc),M.setAttribute("aria-current","true"))}_updateInterval(){const x=this._activeElement||this._getActive();if(!x)return;const T=Number.parseInt(x.getAttribute("data-bs-interval"),10);this._config.interval=T||this._config.defaultInterval}_slide(x,T=null){if(this._isSliding)return;const M=this._getActive(),ne=x===Vt,re=T||w(this._getItems(),M,ne,this._config.wrap);if(re===M)return;const me=this._getItemIndex(re),Se=Le=>L.trigger(this._element,Le,{relatedTarget:re,direction:this._orderToDirection(x),from:this._getItemIndex(M),to:me});if(Se(Es).defaultPrevented||!M||!re)return;const Re=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(me),this._activeElement=re;const je=ne?"carousel-item-start":"carousel-item-end",Ge=ne?"carousel-item-next":"carousel-item-prev";re.classList.add(Ge),f(re),M.classList.add(je),re.classList.add(je),this._queueCallback(()=>{re.classList.remove(je,Ge),re.classList.add(xc),M.classList.remove(xc,Ge,je),this._isSliding=!1,Se(Ea)},M,this._isAnimated()),Re&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return ge.findOne(ef,this._element)}_getItems(){return ge.find(Zh,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(x){return g()?x===Kn?Cn:Vt:x===Kn?Vt:Cn}_orderToDirection(x){return g()?x===Cn?Kn:ro:x===Cn?ro:Kn}static jQueryInterface(x){return this.each(function(){const T=be.getOrCreateInstance(this,x);if(typeof x!="number"){if(typeof x=="string"){if(T[x]===void 0||x.startsWith("_")||x==="constructor")throw new TypeError(`No method named "${x}"`);T[x]()}}else T.to(x)})}}L.on(document,Jh,"[data-bs-slide], [data-bs-slide-to]",function(D){const x=ge.getElementFromSelector(this);if(!x||!x.classList.contains(Ci))return;D.preventDefault();const T=be.getOrCreateInstance(x),M=this.getAttribute("data-bs-slide-to");return M?(T.to(M),void T._maybeEnableCycle()):ue.getDataAttribute(this,"slide")==="next"?(T.next(),void T._maybeEnableCycle()):(T.prev(),void T._maybeEnableCycle())}),L.on(window,so,()=>{const D=ge.find('[data-bs-ride="carousel"]');for(const x of D)be.getOrCreateInstance(x)}),y(be);const Te=".bs.collapse",Be=`show${Te}`,mt=`shown${Te}`,Ze=`hide${Te}`,He=`hidden${Te}`,bt=`click${Te}.data-api`,nt="show",hn="collapse",Pn="collapsing",ct=`:scope .${hn} .${hn}`,Xt='[data-bs-toggle="collapse"]',En={parent:null,toggle:!0},qs={parent:"(null|element)",toggle:"boolean"};class Zn extends ye{constructor(x,T){super(x,T),this._isTransitioning=!1,this._triggerArray=[];const M=ge.find(Xt);for(const ne of M){const re=ge.getSelectorFromElement(ne),me=ge.find(re).filter(Se=>Se===this._element);re!==null&&me.length&&this._triggerArray.push(ne)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return En}static get DefaultType(){return qs}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let x=[];if(this._config.parent&&(x=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(ne=>ne!==this._element).map(ne=>Zn.getOrCreateInstance(ne,{toggle:!1}))),x.length&&x[0]._isTransitioning||L.trigger(this._element,Be).defaultPrevented)return;for(const ne of x)ne.hide();const T=this._getDimension();this._element.classList.remove(hn),this._element.classList.add(Pn),this._element.style[T]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const M=`scroll${T[0].toUpperCase()+T.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Pn),this._element.classList.add(hn,nt),this._element.style[T]="",L.trigger(this._element,mt)},this._element,!0),this._element.style[T]=`${this._element[M]}px`}hide(){if(this._isTransitioning||!this._isShown()||L.trigger(this._element,Ze).defaultPrevented)return;const x=this._getDimension();this._element.style[x]=`${this._element.getBoundingClientRect()[x]}px`,f(this._element),this._element.classList.add(Pn),this._element.classList.remove(hn,nt);for(const T of this._triggerArray){const M=ge.getElementFromSelector(T);M&&!this._isShown(M)&&this._addAriaAndCollapsedClass([T],!1)}this._isTransitioning=!0,this._element.style[x]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(Pn),this._element.classList.add(hn),L.trigger(this._element,He)},this._element,!0)}_isShown(x=this._element){return x.classList.contains(nt)}_configAfterMerge(x){return x.toggle=!!x.toggle,x.parent=l(x.parent),x}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const x=this._getFirstLevelChildren(Xt);for(const T of x){const M=ge.getElementFromSelector(T);M&&this._addAriaAndCollapsedClass([T],this._isShown(M))}}_getFirstLevelChildren(x){const T=ge.find(ct,this._config.parent);return ge.find(x,this._config.parent).filter(M=>!T.includes(M))}_addAriaAndCollapsedClass(x,T){if(x.length)for(const M of x)M.classList.toggle("collapsed",!T),M.setAttribute("aria-expanded",T)}static jQueryInterface(x){const T={};return typeof x=="string"&&/show|hide/.test(x)&&(T.toggle=!1),this.each(function(){const M=Zn.getOrCreateInstance(this,T);if(typeof x=="string"){if(M[x]===void 0)throw new TypeError(`No method named "${x}"`);M[x]()}})}}L.on(document,bt,Xt,function(D){(D.target.tagName==="A"||D.delegateTarget&&D.delegateTarget.tagName==="A")&&D.preventDefault();for(const x of ge.getMultipleElementsFromSelector(this))Zn.getOrCreateInstance(x,{toggle:!1}).toggle()}),y(Zn);var fn="top",er="bottom",Ln="right",cn="left",Go="auto",Ei=[fn,er,Ln,cn],Xs="start",vt="end",gr="clippingParents",Ir="viewport",nn="popper",_a="reference",Sc=Ei.reduce(function(D,x){return D.concat([x+"-"+Xs,x+"-"+vt])},[]),Qu=[].concat(Ei,[Go]).reduce(function(D,x){return D.concat([x,x+"-"+Xs,x+"-"+vt])},[]),iw="beforeRead",ow="read",_g="afterRead",Tg="beforeMain",aw="main",lw="afterMain",cw="beforeWrite",uw="write",dw="afterWrite",hw=[iw,ow,_g,Tg,aw,lw,cw,uw,dw];function io(D){return D?(D.nodeName||"").toLowerCase():null}function _s(D){if(D==null)return window;if(D.toString()!=="[object Window]"){var x=D.ownerDocument;return x&&x.defaultView||window}return D}function Ys(D){return D instanceof _s(D).Element||D instanceof Element}function Qs(D){return D instanceof _s(D).HTMLElement||D instanceof HTMLElement}function fw(D){return typeof ShadowRoot<"u"&&(D instanceof _s(D).ShadowRoot||D instanceof ShadowRoot)}const wl={name:"applyStyles",enabled:!0,phase:"write",fn:function(D){var x=D.state;Object.keys(x.elements).forEach(function(T){var M=x.styles[T]||{},ne=x.attributes[T]||{},re=x.elements[T];Qs(re)&&io(re)&&(Object.assign(re.style,M),Object.keys(ne).forEach(function(me){var Se=ne[me];Se===!1?re.removeAttribute(me):re.setAttribute(me,Se===!0?"":Se)}))})},effect:function(D){var x=D.state,T={popper:{position:x.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(x.elements.popper.style,T.popper),x.styles=T,x.elements.arrow&&Object.assign(x.elements.arrow.style,T.arrow),function(){Object.keys(x.elements).forEach(function(M){var ne=x.elements[M],re=x.attributes[M]||{},me=Object.keys(x.styles.hasOwnProperty(M)?x.styles[M]:T[M]).reduce(function(Se,Re){return Se[Re]="",Se},{});Qs(ne)&&io(ne)&&(Object.assign(ne.style,me),Object.keys(re).forEach(function(Se){ne.removeAttribute(Se)}))})}},requires:["computeStyles"]};function oo(D){return D.split("-")[0]}var xl=Math.max,tf=Math.min,Cc=Math.round;function kg(){var D=navigator.userAgentData;return D!=null&&D.brands&&Array.isArray(D.brands)?D.brands.map(function(x){return x.brand+"/"+x.version}).join(" "):navigator.userAgent}function pw(){return!/^((?!chrome|android).)*safari/i.test(kg())}function Ta(D,x,T){x===void 0&&(x=!1),T===void 0&&(T=!1);var M=D.getBoundingClientRect(),ne=1,re=1;x&&Qs(D)&&(ne=D.offsetWidth>0&&Cc(M.width)/D.offsetWidth||1,re=D.offsetHeight>0&&Cc(M.height)/D.offsetHeight||1);var me=(Ys(D)?_s(D):window).visualViewport,Se=!pw()&&T,Re=(M.left+(Se&&me?me.offsetLeft:0))/ne,je=(M.top+(Se&&me?me.offsetTop:0))/re,Ge=M.width/ne,Le=M.height/re;return{width:Ge,height:Le,top:je,right:Re+Ge,bottom:je+Le,left:Re,x:Re,y:je}}function ka(D){var x=Ta(D),T=D.offsetWidth,M=D.offsetHeight;return Math.abs(x.width-T)<=1&&(T=x.width),Math.abs(x.height-M)<=1&&(M=x.height),{x:D.offsetLeft,y:D.offsetTop,width:T,height:M}}function Ju(D,x){var T=x.getRootNode&&x.getRootNode();if(D.contains(x))return!0;if(T&&fw(T)){var M=x;do{if(M&&D.isSameNode(M))return!0;M=M.parentNode||M.host}while(M)}return!1}function Ko(D){return _s(D).getComputedStyle(D)}function XT(D){return["table","td","th"].indexOf(io(D))>=0}function Ia(D){return((Ys(D)?D.ownerDocument:D.document)||window.document).documentElement}function nf(D){return io(D)==="html"?D:D.assignedSlot||D.parentNode||(fw(D)?D.host:null)||Ia(D)}function mw(D){return Qs(D)&&Ko(D).position!=="fixed"?D.offsetParent:null}function Zu(D){for(var x=_s(D),T=mw(D);T&&XT(T)&&Ko(T).position==="static";)T=mw(T);return T&&(io(T)==="html"||io(T)==="body"&&Ko(T).position==="static")?x:T||function(M){var ne=/firefox/i.test(kg());if(/Trident/i.test(kg())&&Qs(M)&&Ko(M).position==="fixed")return null;var re=nf(M);for(fw(re)&&(re=re.host);Qs(re)&&["html","body"].indexOf(io(re))<0;){var me=Ko(re);if(me.transform!=="none"||me.perspective!=="none"||me.contain==="paint"||["transform","perspective"].indexOf(me.willChange)!==-1||ne&&me.willChange==="filter"||ne&&me.filter&&me.filter!=="none")return re;re=re.parentNode}return null}(D)||x}function ed(D){return["top","bottom"].indexOf(D)>=0?"x":"y"}function td(D,x,T){return xl(D,tf(x,T))}function gw(D){return Object.assign({},{top:0,right:0,bottom:0,left:0},D)}function Sl(D,x){return x.reduce(function(T,M){return T[M]=D,T},{})}const Ig={name:"arrow",enabled:!0,phase:"main",fn:function(D){var x,T=D.state,M=D.name,ne=D.options,re=T.elements.arrow,me=T.modifiersData.popperOffsets,Se=oo(T.placement),Re=ed(Se),je=[cn,Ln].indexOf(Se)>=0?"height":"width";if(re&&me){var Ge=function(Qt,Gt){return gw(typeof(Qt=typeof Qt=="function"?Qt(Object.assign({},Gt.rects,{placement:Gt.placement})):Qt)!="number"?Qt:Sl(Qt,Ei))}(ne.padding,T),Le=ka(re),wt=Re==="y"?fn:cn,lt=Re==="y"?er:Ln,gt=T.rects.reference[je]+T.rects.reference[Re]-me[Re]-T.rects.popper[je],dt=me[Re]-T.rects.reference[Re],ft=Zu(re),Yt=ft?Re==="y"?ft.clientHeight||0:ft.clientWidth||0:0,Ft=gt/2-dt/2,kt=Ge[wt],Ut=Yt-Le[je]-Ge[lt],ht=Yt/2-Le[je]/2+Ft,Rt=td(kt,ht,Ut),Ht=Re;T.modifiersData[M]=((x={})[Ht]=Rt,x.centerOffset=Rt-ht,x)}},effect:function(D){var x=D.state,T=D.options.element,M=T===void 0?"[data-popper-arrow]":T;M!=null&&(typeof M!="string"||(M=x.elements.popper.querySelector(M)))&&Ju(x.elements.popper,M)&&(x.elements.arrow=M)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function nd(D){return D.split("-")[1]}var Cl={top:"auto",right:"auto",bottom:"auto",left:"auto"};function rf(D){var x,T=D.popper,M=D.popperRect,ne=D.placement,re=D.variation,me=D.offsets,Se=D.position,Re=D.gpuAcceleration,je=D.adaptive,Ge=D.roundOffsets,Le=D.isFixed,wt=me.x,lt=wt===void 0?0:wt,gt=me.y,dt=gt===void 0?0:gt,ft=typeof Ge=="function"?Ge({x:lt,y:dt}):{x:lt,y:dt};lt=ft.x,dt=ft.y;var Yt=me.hasOwnProperty("x"),Ft=me.hasOwnProperty("y"),kt=cn,Ut=fn,ht=window;if(je){var Rt=Zu(T),Ht="clientHeight",Qt="clientWidth";Rt===_s(T)&&Ko(Rt=Ia(T)).position!=="static"&&Se==="absolute"&&(Ht="scrollHeight",Qt="scrollWidth"),(ne===fn||(ne===cn||ne===Ln)&&re===vt)&&(Ut=er,dt-=(Le&&Rt===ht&&ht.visualViewport?ht.visualViewport.height:Rt[Ht])-M.height,dt*=Re?1:-1),ne!==cn&&(ne!==fn&&ne!==er||re!==vt)||(kt=Ln,lt-=(Le&&Rt===ht&&ht.visualViewport?ht.visualViewport.width:Rt[Qt])-M.width,lt*=Re?1:-1)}var Gt,qn=Object.assign({position:Se},je&&Cl),Is=Ge===!0?function(Ti,Jr){var Zs=Ti.x,Ns=Ti.y,pn=Jr.devicePixelRatio||1;return{x:Cc(Zs*pn)/pn||0,y:Cc(Ns*pn)/pn||0}}({x:lt,y:dt},_s(T)):{x:lt,y:dt};return lt=Is.x,dt=Is.y,Re?Object.assign({},qn,((Gt={})[Ut]=Ft?"0":"",Gt[kt]=Yt?"0":"",Gt.transform=(ht.devicePixelRatio||1)<=1?"translate("+lt+"px, "+dt+"px)":"translate3d("+lt+"px, "+dt+"px, 0)",Gt)):Object.assign({},qn,((x={})[Ut]=Ft?dt+"px":"",x[kt]=Yt?lt+"px":"",x.transform="",x))}const Ng={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(D){var x=D.state,T=D.options,M=T.gpuAcceleration,ne=M===void 0||M,re=T.adaptive,me=re===void 0||re,Se=T.roundOffsets,Re=Se===void 0||Se,je={placement:oo(x.placement),variation:nd(x.placement),popper:x.elements.popper,popperRect:x.rects.popper,gpuAcceleration:ne,isFixed:x.options.strategy==="fixed"};x.modifiersData.popperOffsets!=null&&(x.styles.popper=Object.assign({},x.styles.popper,rf(Object.assign({},je,{offsets:x.modifiersData.popperOffsets,position:x.options.strategy,adaptive:me,roundOffsets:Re})))),x.modifiersData.arrow!=null&&(x.styles.arrow=Object.assign({},x.styles.arrow,rf(Object.assign({},je,{offsets:x.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:Re})))),x.attributes.popper=Object.assign({},x.attributes.popper,{"data-popper-placement":x.placement})},data:{}};var rd={passive:!0};const $g={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(D){var x=D.state,T=D.instance,M=D.options,ne=M.scroll,re=ne===void 0||ne,me=M.resize,Se=me===void 0||me,Re=_s(x.elements.popper),je=[].concat(x.scrollParents.reference,x.scrollParents.popper);return re&&je.forEach(function(Ge){Ge.addEventListener("scroll",T.update,rd)}),Se&&Re.addEventListener("resize",T.update,rd),function(){re&&je.forEach(function(Ge){Ge.removeEventListener("scroll",T.update,rd)}),Se&&Re.removeEventListener("resize",T.update,rd)}},data:{}};var yw={left:"right",right:"left",bottom:"top",top:"bottom"};function sf(D){return D.replace(/left|right|bottom|top/g,function(x){return yw[x]})}var YT={start:"end",end:"start"};function bw(D){return D.replace(/start|end/g,function(x){return YT[x]})}function Ag(D){var x=_s(D);return{scrollLeft:x.pageXOffset,scrollTop:x.pageYOffset}}function Rg(D){return Ta(Ia(D)).left+Ag(D).scrollLeft}function of(D){var x=Ko(D),T=x.overflow,M=x.overflowX,ne=x.overflowY;return/auto|scroll|overlay|hidden/.test(T+ne+M)}function Og(D){return["html","body","#document"].indexOf(io(D))>=0?D.ownerDocument.body:Qs(D)&&of(D)?D:Og(nf(D))}function sd(D,x){var T;x===void 0&&(x=[]);var M=Og(D),ne=M===((T=D.ownerDocument)==null?void 0:T.body),re=_s(M),me=ne?[re].concat(re.visualViewport||[],of(M)?M:[]):M,Se=x.concat(me);return ne?Se:Se.concat(sd(nf(me)))}function Na(D){return Object.assign({},D,{left:D.x,top:D.y,right:D.x+D.width,bottom:D.y+D.height})}function vw(D,x,T){return x===Ir?Na(function(M,ne){var re=_s(M),me=Ia(M),Se=re.visualViewport,Re=me.clientWidth,je=me.clientHeight,Ge=0,Le=0;if(Se){Re=Se.width,je=Se.height;var wt=pw();(wt||!wt&&ne==="fixed")&&(Ge=Se.offsetLeft,Le=Se.offsetTop)}return{width:Re,height:je,x:Ge+Rg(M),y:Le}}(D,T)):Ys(x)?function(M,ne){var re=Ta(M,!1,ne==="fixed");return re.top=re.top+M.clientTop,re.left=re.left+M.clientLeft,re.bottom=re.top+M.clientHeight,re.right=re.left+M.clientWidth,re.width=M.clientWidth,re.height=M.clientHeight,re.x=re.left,re.y=re.top,re}(x,T):Na(function(M){var ne,re=Ia(M),me=Ag(M),Se=(ne=M.ownerDocument)==null?void 0:ne.body,Re=xl(re.scrollWidth,re.clientWidth,Se?Se.scrollWidth:0,Se?Se.clientWidth:0),je=xl(re.scrollHeight,re.clientHeight,Se?Se.scrollHeight:0,Se?Se.clientHeight:0),Ge=-me.scrollLeft+Rg(M),Le=-me.scrollTop;return Ko(Se||re).direction==="rtl"&&(Ge+=xl(re.clientWidth,Se?Se.clientWidth:0)-Re),{width:Re,height:je,x:Ge,y:Le}}(Ia(D)))}function ww(D){var x,T=D.reference,M=D.element,ne=D.placement,re=ne?oo(ne):null,me=ne?nd(ne):null,Se=T.x+T.width/2-M.width/2,Re=T.y+T.height/2-M.height/2;switch(re){case fn:x={x:Se,y:T.y-M.height};break;case er:x={x:Se,y:T.y+T.height};break;case Ln:x={x:T.x+T.width,y:Re};break;case cn:x={x:T.x-M.width,y:Re};break;default:x={x:T.x,y:T.y}}var je=re?ed(re):null;if(je!=null){var Ge=je==="y"?"height":"width";switch(me){case Xs:x[je]=x[je]-(T[Ge]/2-M[Ge]/2);break;case vt:x[je]=x[je]+(T[Ge]/2-M[Ge]/2)}}return x}function Ec(D,x){x===void 0&&(x={});var T=x,M=T.placement,ne=M===void 0?D.placement:M,re=T.strategy,me=re===void 0?D.strategy:re,Se=T.boundary,Re=Se===void 0?gr:Se,je=T.rootBoundary,Ge=je===void 0?Ir:je,Le=T.elementContext,wt=Le===void 0?nn:Le,lt=T.altBoundary,gt=lt!==void 0&&lt,dt=T.padding,ft=dt===void 0?0:dt,Yt=gw(typeof ft!="number"?ft:Sl(ft,Ei)),Ft=wt===nn?_a:nn,kt=D.rects.popper,Ut=D.elements[gt?Ft:wt],ht=function(Jr,Zs,Ns,pn){var $s=Zs==="clippingParents"?function(un){var H=sd(nf(un)),S=["absolute","fixed"].indexOf(Ko(un).position)>=0&&Qs(un)?Zu(un):un;return Ys(S)?H.filter(function(A){return Ys(A)&&Ju(A,S)&&io(A)!=="body"}):[]}(Jr):[].concat(Zs),ao=[].concat($s,[Ns]),Ic=ao[0],Fn=ao.reduce(function(un,H){var S=vw(Jr,H,pn);return un.top=xl(S.top,un.top),un.right=tf(S.right,un.right),un.bottom=tf(S.bottom,un.bottom),un.left=xl(S.left,un.left),un},vw(Jr,Ic,pn));return Fn.width=Fn.right-Fn.left,Fn.height=Fn.bottom-Fn.top,Fn.x=Fn.left,Fn.y=Fn.top,Fn}(Ys(Ut)?Ut:Ut.contextElement||Ia(D.elements.popper),Re,Ge,me),Rt=Ta(D.elements.reference),Ht=ww({reference:Rt,element:kt,strategy:"absolute",placement:ne}),Qt=Na(Object.assign({},kt,Ht)),Gt=wt===nn?Qt:Rt,qn={top:ht.top-Gt.top+Yt.top,bottom:Gt.bottom-ht.bottom+Yt.bottom,left:ht.left-Gt.left+Yt.left,right:Gt.right-ht.right+Yt.right},Is=D.modifiersData.offset;if(wt===nn&&Is){var Ti=Is[ne];Object.keys(qn).forEach(function(Jr){var Zs=[Ln,er].indexOf(Jr)>=0?1:-1,Ns=[fn,er].indexOf(Jr)>=0?"y":"x";qn[Jr]+=Ti[Ns]*Zs})}return qn}function QT(D,x){x===void 0&&(x={});var T=x,M=T.placement,ne=T.boundary,re=T.rootBoundary,me=T.padding,Se=T.flipVariations,Re=T.allowedAutoPlacements,je=Re===void 0?Qu:Re,Ge=nd(M),Le=Ge?Se?Sc:Sc.filter(function(gt){return nd(gt)===Ge}):Ei,wt=Le.filter(function(gt){return je.indexOf(gt)>=0});wt.length===0&&(wt=Le);var lt=wt.reduce(function(gt,dt){return gt[dt]=Ec(D,{placement:dt,boundary:ne,rootBoundary:re,padding:me})[oo(dt)],gt},{});return Object.keys(lt).sort(function(gt,dt){return lt[gt]-lt[dt]})}const xw={name:"flip",enabled:!0,phase:"main",fn:function(D){var x=D.state,T=D.options,M=D.name;if(!x.modifiersData[M]._skip){for(var ne=T.mainAxis,re=ne===void 0||ne,me=T.altAxis,Se=me===void 0||me,Re=T.fallbackPlacements,je=T.padding,Ge=T.boundary,Le=T.rootBoundary,wt=T.altBoundary,lt=T.flipVariations,gt=lt===void 0||lt,dt=T.allowedAutoPlacements,ft=x.options.placement,Yt=oo(ft),Ft=Re||(Yt!==ft&&gt?function(un){if(oo(un)===Go)return[];var H=sf(un);return[bw(un),H,bw(H)]}(ft):[sf(ft)]),kt=[ft].concat(Ft).reduce(function(un,H){return un.concat(oo(H)===Go?QT(x,{placement:H,boundary:Ge,rootBoundary:Le,padding:je,flipVariations:gt,allowedAutoPlacements:dt}):H)},[]),Ut=x.rects.reference,ht=x.rects.popper,Rt=new Map,Ht=!0,Qt=kt[0],Gt=0;Gt<kt.length;Gt++){var qn=kt[Gt],Is=oo(qn),Ti=nd(qn)===Xs,Jr=[fn,er].indexOf(Is)>=0,Zs=Jr?"width":"height",Ns=Ec(x,{placement:qn,boundary:Ge,rootBoundary:Le,altBoundary:wt,padding:je}),pn=Jr?Ti?Ln:cn:Ti?er:fn;Ut[Zs]>ht[Zs]&&(pn=sf(pn));var $s=sf(pn),ao=[];if(re&&ao.push(Ns[Is]<=0),Se&&ao.push(Ns[pn]<=0,Ns[$s]<=0),ao.every(function(un){return un})){Qt=qn,Ht=!1;break}Rt.set(qn,ao)}if(Ht)for(var Ic=function(un){var H=kt.find(function(S){var A=Rt.get(S);if(A)return A.slice(0,un).every(function(X){return X})});if(H)return Qt=H,"break"},Fn=gt?3:1;Fn>0&&Ic(Fn)!=="break";Fn--);x.placement!==Qt&&(x.modifiersData[M]._skip=!0,x.placement=Qt,x.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function $a(D,x,T){return T===void 0&&(T={x:0,y:0}),{top:D.top-x.height-T.y,right:D.right-x.width+T.x,bottom:D.bottom-x.height+T.y,left:D.left-x.width-T.x}}function Sw(D){return[fn,Ln,er,cn].some(function(x){return D[x]>=0})}const id={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(D){var x=D.state,T=D.name,M=x.rects.reference,ne=x.rects.popper,re=x.modifiersData.preventOverflow,me=Ec(x,{elementContext:"reference"}),Se=Ec(x,{altBoundary:!0}),Re=$a(me,M),je=$a(Se,ne,re),Ge=Sw(Re),Le=Sw(je);x.modifiersData[T]={referenceClippingOffsets:Re,popperEscapeOffsets:je,isReferenceHidden:Ge,hasPopperEscaped:Le},x.attributes.popper=Object.assign({},x.attributes.popper,{"data-popper-reference-hidden":Ge,"data-popper-escaped":Le})}},Cw={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(D){var x=D.state,T=D.options,M=D.name,ne=T.offset,re=ne===void 0?[0,0]:ne,me=Qu.reduce(function(Ge,Le){return Ge[Le]=function(wt,lt,gt){var dt=oo(wt),ft=[cn,fn].indexOf(dt)>=0?-1:1,Yt=typeof gt=="function"?gt(Object.assign({},lt,{placement:wt})):gt,Ft=Yt[0],kt=Yt[1];return Ft=Ft||0,kt=(kt||0)*ft,[cn,Ln].indexOf(dt)>=0?{x:kt,y:Ft}:{x:Ft,y:kt}}(Le,x.rects,re),Ge},{}),Se=me[x.placement],Re=Se.x,je=Se.y;x.modifiersData.popperOffsets!=null&&(x.modifiersData.popperOffsets.x+=Re,x.modifiersData.popperOffsets.y+=je),x.modifiersData[M]=me}},Dg={name:"popperOffsets",enabled:!0,phase:"read",fn:function(D){var x=D.state,T=D.name;x.modifiersData[T]=ww({reference:x.rects.reference,element:x.rects.popper,strategy:"absolute",placement:x.placement})},data:{}},Ew={name:"preventOverflow",enabled:!0,phase:"main",fn:function(D){var x=D.state,T=D.options,M=D.name,ne=T.mainAxis,re=ne===void 0||ne,me=T.altAxis,Se=me!==void 0&&me,Re=T.boundary,je=T.rootBoundary,Ge=T.altBoundary,Le=T.padding,wt=T.tether,lt=wt===void 0||wt,gt=T.tetherOffset,dt=gt===void 0?0:gt,ft=Ec(x,{boundary:Re,rootBoundary:je,padding:Le,altBoundary:Ge}),Yt=oo(x.placement),Ft=nd(x.placement),kt=!Ft,Ut=ed(Yt),ht=Ut==="x"?"y":"x",Rt=x.modifiersData.popperOffsets,Ht=x.rects.reference,Qt=x.rects.popper,Gt=typeof dt=="function"?dt(Object.assign({},x.rects,{placement:x.placement})):dt,qn=typeof Gt=="number"?{mainAxis:Gt,altAxis:Gt}:Object.assign({mainAxis:0,altAxis:0},Gt),Is=x.modifiersData.offset?x.modifiersData.offset[x.placement]:null,Ti={x:0,y:0};if(Rt){if(re){var Jr,Zs=Ut==="y"?fn:cn,Ns=Ut==="y"?er:Ln,pn=Ut==="y"?"height":"width",$s=Rt[Ut],ao=$s+ft[Zs],Ic=$s-ft[Ns],Fn=lt?-Qt[pn]/2:0,un=Ft===Xs?Ht[pn]:Qt[pn],H=Ft===Xs?-Qt[pn]:-Ht[pn],S=x.elements.arrow,A=lt&&S?ka(S):{width:0,height:0},X=x.modifiersData["arrow#persistent"]?x.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ve=X[Zs],Ae=X[Ns],Ie=td(0,Ht[pn],A[pn]),Ct=kt?Ht[pn]/2-Fn-Ie-ve-qn.mainAxis:un-Ie-ve-qn.mainAxis,ls=kt?-Ht[pn]/2+Fn+Ie+Ae+qn.mainAxis:H+Ie+Ae+qn.mainAxis,cs=x.elements.arrow&&Zu(x.elements.arrow),yr=cs?Ut==="y"?cs.clientTop||0:cs.clientLeft||0:0,ki=(Jr=Is==null?void 0:Is[Ut])!=null?Jr:0,Ii=$s+ls-ki,fd=td(lt?tf(ao,$s+Ct-ki-yr):ao,$s,lt?xl(Ic,Ii):Ic);Rt[Ut]=fd,Ti[Ut]=fd-$s}if(Se){var hx,Nc=Ut==="x"?fn:cn,lY=Ut==="x"?er:Ln,pd=Rt[ht],fx=ht==="y"?"height":"width",XL=pd+ft[Nc],YL=pd-ft[lY],nI=[fn,cn].indexOf(Yt)!==-1,QL=(hx=Is==null?void 0:Is[ht])!=null?hx:0,JL=nI?XL:pd-Ht[fx]-Qt[fx]-QL+qn.altAxis,ZL=nI?pd+Ht[fx]+Qt[fx]-QL-qn.altAxis:YL,eF=lt&&nI?function(cY,uY,rI){var tF=td(cY,uY,rI);return tF>rI?rI:tF}(JL,pd,ZL):td(lt?JL:XL,pd,lt?ZL:YL);Rt[ht]=eF,Ti[ht]=eF-pd}x.modifiersData[M]=Ti}},requiresIfExists:["offset"]};function JT(D,x,T){T===void 0&&(T=!1);var M,ne,re=Qs(x),me=Qs(x)&&function(Le){var wt=Le.getBoundingClientRect(),lt=Cc(wt.width)/Le.offsetWidth||1,gt=Cc(wt.height)/Le.offsetHeight||1;return lt!==1||gt!==1}(x),Se=Ia(x),Re=Ta(D,me,T),je={scrollLeft:0,scrollTop:0},Ge={x:0,y:0};return(re||!re&&!T)&&((io(x)!=="body"||of(Se))&&(je=(M=x)!==_s(M)&&Qs(M)?{scrollLeft:(ne=M).scrollLeft,scrollTop:ne.scrollTop}:Ag(M)),Qs(x)?((Ge=Ta(x,!0)).x+=x.clientLeft,Ge.y+=x.clientTop):Se&&(Ge.x=Rg(Se))),{x:Re.left+je.scrollLeft-Ge.x,y:Re.top+je.scrollTop-Ge.y,width:Re.width,height:Re.height}}function ZT(D){var x=new Map,T=new Set,M=[];function ne(re){T.add(re.name),[].concat(re.requires||[],re.requiresIfExists||[]).forEach(function(me){if(!T.has(me)){var Se=x.get(me);Se&&ne(Se)}}),M.push(re)}return D.forEach(function(re){x.set(re.name,re)}),D.forEach(function(re){T.has(re.name)||ne(re)}),M}var _w={placement:"bottom",modifiers:[],strategy:"absolute"};function Tw(){for(var D=arguments.length,x=new Array(D),T=0;T<D;T++)x[T]=arguments[T];return!x.some(function(M){return!(M&&typeof M.getBoundingClientRect=="function")})}function af(D){D===void 0&&(D={});var x=D,T=x.defaultModifiers,M=T===void 0?[]:T,ne=x.defaultOptions,re=ne===void 0?_w:ne;return function(me,Se,Re){Re===void 0&&(Re=re);var je,Ge,Le={placement:"bottom",orderedModifiers:[],options:Object.assign({},_w,re),modifiersData:{},elements:{reference:me,popper:Se},attributes:{},styles:{}},wt=[],lt=!1,gt={state:Le,setOptions:function(ft){var Yt=typeof ft=="function"?ft(Le.options):ft;dt(),Le.options=Object.assign({},re,Le.options,Yt),Le.scrollParents={reference:Ys(me)?sd(me):me.contextElement?sd(me.contextElement):[],popper:sd(Se)};var Ft,kt,Ut=function(ht){var Rt=ZT(ht);return hw.reduce(function(Ht,Qt){return Ht.concat(Rt.filter(function(Gt){return Gt.phase===Qt}))},[])}((Ft=[].concat(M,Le.options.modifiers),kt=Ft.reduce(function(ht,Rt){var Ht=ht[Rt.name];return ht[Rt.name]=Ht?Object.assign({},Ht,Rt,{options:Object.assign({},Ht.options,Rt.options),data:Object.assign({},Ht.data,Rt.data)}):Rt,ht},{}),Object.keys(kt).map(function(ht){return kt[ht]})));return Le.orderedModifiers=Ut.filter(function(ht){return ht.enabled}),Le.orderedModifiers.forEach(function(ht){var Rt=ht.name,Ht=ht.options,Qt=Ht===void 0?{}:Ht,Gt=ht.effect;if(typeof Gt=="function"){var qn=Gt({state:Le,name:Rt,instance:gt,options:Qt});wt.push(qn||function(){})}}),gt.update()},forceUpdate:function(){if(!lt){var ft=Le.elements,Yt=ft.reference,Ft=ft.popper;if(Tw(Yt,Ft)){Le.rects={reference:JT(Yt,Zu(Ft),Le.options.strategy==="fixed"),popper:ka(Ft)},Le.reset=!1,Le.placement=Le.options.placement,Le.orderedModifiers.forEach(function(Gt){return Le.modifiersData[Gt.name]=Object.assign({},Gt.data)});for(var kt=0;kt<Le.orderedModifiers.length;kt++)if(Le.reset!==!0){var Ut=Le.orderedModifiers[kt],ht=Ut.fn,Rt=Ut.options,Ht=Rt===void 0?{}:Rt,Qt=Ut.name;typeof ht=="function"&&(Le=ht({state:Le,options:Ht,name:Qt,instance:gt})||Le)}else Le.reset=!1,kt=-1}}},update:(je=function(){return new Promise(function(ft){gt.forceUpdate(),ft(Le)})},function(){return Ge||(Ge=new Promise(function(ft){Promise.resolve().then(function(){Ge=void 0,ft(je())})})),Ge}),destroy:function(){dt(),lt=!0}};if(!Tw(me,Se))return gt;function dt(){wt.forEach(function(ft){return ft()}),wt=[]}return gt.setOptions(Re).then(function(ft){!lt&&Re.onFirstUpdate&&Re.onFirstUpdate(ft)}),gt}}var ek=af(),tk=af({defaultModifiers:[$g,Dg,Ng,wl]}),Pg=af({defaultModifiers:[$g,Dg,Ng,wl,Cw,xw,Ew,Ig,id]});const kw=Object.freeze(Object.defineProperty({__proto__:null,afterMain:lw,afterRead:_g,afterWrite:dw,applyStyles:wl,arrow:Ig,auto:Go,basePlacements:Ei,beforeMain:Tg,beforeRead:iw,beforeWrite:cw,bottom:er,clippingParents:gr,computeStyles:Ng,createPopper:Pg,createPopperBase:ek,createPopperLite:tk,detectOverflow:Ec,end:vt,eventListeners:$g,flip:xw,hide:id,left:cn,main:aw,modifierPhases:hw,offset:Cw,placements:Qu,popper:nn,popperGenerator:af,popperOffsets:Dg,preventOverflow:Ew,read:ow,reference:_a,right:Ln,start:Xs,top:fn,variationPlacements:Sc,viewport:Ir,write:uw},Symbol.toStringTag,{value:"Module"})),Iw="dropdown",Nr=".bs.dropdown",lf=".data-api",nk="ArrowUp",Lg="ArrowDown",Nw=`hide${Nr}`,rk=`hidden${Nr}`,sk=`show${Nr}`,$w=`shown${Nr}`,Aw=`click${Nr}${lf}`,ik=`keydown${Nr}${lf}`,cf=`keyup${Nr}${lf}`,_c="show",El='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',ok=`${El}.${_c}`,uf=".dropdown-menu",Rw=g()?"top-end":"top-start",ak=g()?"top-start":"top-end",lk=g()?"bottom-end":"bottom-start",Ow=g()?"bottom-start":"bottom-end",Dw=g()?"left-start":"right-start",Pw=g()?"right-start":"left-start",df={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Lw={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Ts extends ye{constructor(x,T){super(x,T),this._popper=null,this._parent=this._element.parentNode,this._menu=ge.next(this._element,uf)[0]||ge.prev(this._element,uf)[0]||ge.findOne(uf,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return df}static get DefaultType(){return Lw}static get NAME(){return Iw}toggle(){return this._isShown()?this.hide():this.show()}show(){if(u(this._element)||this._isShown())return;const x={relatedTarget:this._element};if(!L.trigger(this._element,sk,x).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const T of[].concat(...document.body.children))L.on(T,"mouseover",h);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(_c),this._element.classList.add(_c),L.trigger(this._element,$w,x)}}hide(){if(u(this._element)||!this._isShown())return;const x={relatedTarget:this._element};this._completeHide(x)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(x){if(!L.trigger(this._element,Nw,x).defaultPrevented){if("ontouchstart"in document.documentElement)for(const T of[].concat(...document.body.children))L.off(T,"mouseover",h);this._popper&&this._popper.destroy(),this._menu.classList.remove(_c),this._element.classList.remove(_c),this._element.setAttribute("aria-expanded","false"),ue.removeDataAttribute(this._menu,"popper"),L.trigger(this._element,rk,x)}}_getConfig(x){if(typeof(x=super._getConfig(x)).reference=="object"&&!a(x.reference)&&typeof x.reference.getBoundingClientRect!="function")throw new TypeError(`${Iw.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return x}_createPopper(){if(kw===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let x=this._element;this._config.reference==="parent"?x=this._parent:a(this._config.reference)?x=l(this._config.reference):typeof this._config.reference=="object"&&(x=this._config.reference);const T=this._getPopperConfig();this._popper=Pg(x,this._menu,T)}_isShown(){return this._menu.classList.contains(_c)}_getPlacement(){const x=this._parent;if(x.classList.contains("dropend"))return Dw;if(x.classList.contains("dropstart"))return Pw;if(x.classList.contains("dropup-center"))return"top";if(x.classList.contains("dropdown-center"))return"bottom";const T=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return x.classList.contains("dropup")?T?ak:Rw:T?Ow:lk}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:x}=this._config;return typeof x=="string"?x.split(",").map(T=>Number.parseInt(T,10)):typeof x=="function"?T=>x(T,this._element):x}_getPopperConfig(){const x={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(ue.setDataAttribute(this._menu,"popper","static"),x.modifiers=[{name:"applyStyles",enabled:!1}]),{...x,...b(this._config.popperConfig,[x])}}_selectMenuItem({key:x,target:T}){const M=ge.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(ne=>c(ne));M.length&&w(M,T,x===Lg,!M.includes(T)).focus()}static jQueryInterface(x){return this.each(function(){const T=Ts.getOrCreateInstance(this,x);if(typeof x=="string"){if(T[x]===void 0)throw new TypeError(`No method named "${x}"`);T[x]()}})}static clearMenus(x){if(x.button===2||x.type==="keyup"&&x.key!=="Tab")return;const T=ge.find(ok);for(const M of T){const ne=Ts.getInstance(M);if(!ne||ne._config.autoClose===!1)continue;const re=x.composedPath(),me=re.includes(ne._menu);if(re.includes(ne._element)||ne._config.autoClose==="inside"&&!me||ne._config.autoClose==="outside"&&me||ne._menu.contains(x.target)&&(x.type==="keyup"&&x.key==="Tab"||/input|select|option|textarea|form/i.test(x.target.tagName)))continue;const Se={relatedTarget:ne._element};x.type==="click"&&(Se.clickEvent=x),ne._completeHide(Se)}}static dataApiKeydownHandler(x){const T=/input|textarea/i.test(x.target.tagName),M=x.key==="Escape",ne=[nk,Lg].includes(x.key);if(!ne&&!M||T&&!M)return;x.preventDefault();const re=this.matches(El)?this:ge.prev(this,El)[0]||ge.next(this,El)[0]||ge.findOne(El,x.delegateTarget.parentNode),me=Ts.getOrCreateInstance(re);if(ne)return x.stopPropagation(),me.show(),void me._selectMenuItem(x);me._isShown()&&(x.stopPropagation(),me.hide(),re.focus())}}L.on(document,ik,El,Ts.dataApiKeydownHandler),L.on(document,ik,uf,Ts.dataApiKeydownHandler),L.on(document,Aw,Ts.clearMenus),L.on(document,cf,Ts.clearMenus),L.on(document,Aw,El,function(D){D.preventDefault(),Ts.getOrCreateInstance(this).toggle()}),y(Ts);const Fw="backdrop",ck="show",ks=`mousedown.bs.${Fw}`,uk={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},dk={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Mw extends de{constructor(x){super(),this._config=this._getConfig(x),this._isAppended=!1,this._element=null}static get Default(){return uk}static get DefaultType(){return dk}static get NAME(){return Fw}show(x){if(!this._config.isVisible)return void b(x);this._append();const T=this._getElement();this._config.isAnimated&&f(T),T.classList.add(ck),this._emulateAnimation(()=>{b(x)})}hide(x){this._config.isVisible?(this._getElement().classList.remove(ck),this._emulateAnimation(()=>{this.dispose(),b(x)})):b(x)}dispose(){this._isAppended&&(L.off(this._element,ks),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const x=document.createElement("div");x.className=this._config.className,this._config.isAnimated&&x.classList.add("fade"),this._element=x}return this._element}_configAfterMerge(x){return x.rootElement=l(x.rootElement),x}_append(){if(this._isAppended)return;const x=this._getElement();this._config.rootElement.append(x),L.on(x,ks,()=>{b(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(x){v(x,this._getElement(),this._config.isAnimated)}}const hf=".bs.focustrap",zw=`focusin${hf}`,Bw=`keydown.tab${hf}`,jw="backward",hk={autofocus:!0,trapElement:null},fk={autofocus:"boolean",trapElement:"element"};class Vw extends de{constructor(x){super(),this._config=this._getConfig(x),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return hk}static get DefaultType(){return fk}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),L.off(document,hf),L.on(document,zw,x=>this._handleFocusin(x)),L.on(document,Bw,x=>this._handleKeydown(x)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,L.off(document,hf))}_handleFocusin(x){const{trapElement:T}=this._config;if(x.target===document||x.target===T||T.contains(x.target))return;const M=ge.focusableChildren(T);M.length===0?T.focus():this._lastTabNavDirection===jw?M[M.length-1].focus():M[0].focus()}_handleKeydown(x){x.key==="Tab"&&(this._lastTabNavDirection=x.shiftKey?jw:"forward")}}const Uw=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Ww=".sticky-top",od="padding-right",Hw="margin-right";class ff{constructor(){this._element=document.body}getWidth(){const x=document.documentElement.clientWidth;return Math.abs(window.innerWidth-x)}hide(){const x=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,od,T=>T+x),this._setElementAttributes(Uw,od,T=>T+x),this._setElementAttributes(Ww,Hw,T=>T-x)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,od),this._resetElementAttributes(Uw,od),this._resetElementAttributes(Ww,Hw)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(x,T,M){const ne=this.getWidth();this._applyManipulationCallback(x,re=>{if(re!==this._element&&window.innerWidth>re.clientWidth+ne)return;this._saveInitialAttribute(re,T);const me=window.getComputedStyle(re).getPropertyValue(T);re.style.setProperty(T,`${M(Number.parseFloat(me))}px`)})}_saveInitialAttribute(x,T){const M=x.style.getPropertyValue(T);M&&ue.setDataAttribute(x,T,M)}_resetElementAttributes(x,T){this._applyManipulationCallback(x,M=>{const ne=ue.getDataAttribute(M,T);ne!==null?(ue.removeDataAttribute(M,T),M.style.setProperty(T,ne)):M.style.removeProperty(T)})}_applyManipulationCallback(x,T){if(a(x))T(x);else for(const M of ge.find(x,this._element))T(M)}}const as=".bs.modal",pk=`hide${as}`,mk=`hidePrevented${as}`,Gw=`hidden${as}`,Kw=`show${as}`,gk=`shown${as}`,yk=`resize${as}`,_l=`click.dismiss${as}`,bk=`mousedown.dismiss${as}`,HL=`keydown.dismiss${as}`,qo=`click${as}.data-api`,Fg="modal-open",qw="show",Mg="modal-static",Xw={backdrop:!0,focus:!0,keyboard:!0},Yw={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Aa extends ye{constructor(x,T){super(x,T),this._dialog=ge.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ff,this._addEventListeners()}static get Default(){return Xw}static get DefaultType(){return Yw}static get NAME(){return"modal"}toggle(x){return this._isShown?this.hide():this.show(x)}show(x){this._isShown||this._isTransitioning||L.trigger(this._element,Kw,{relatedTarget:x}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Fg),this._adjustDialog(),this._backdrop.show(()=>this._showElement(x)))}hide(){this._isShown&&!this._isTransitioning&&(L.trigger(this._element,pk).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(qw),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){L.off(window,as),L.off(this._dialog,as),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Mw({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Vw({trapElement:this._element})}_showElement(x){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const T=ge.findOne(".modal-body",this._dialog);T&&(T.scrollTop=0),f(this._element),this._element.classList.add(qw),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,L.trigger(this._element,gk,{relatedTarget:x})},this._dialog,this._isAnimated())}_addEventListeners(){L.on(this._element,HL,x=>{x.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),L.on(window,yk,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),L.on(this._element,bk,x=>{L.one(this._element,_l,T=>{this._element===x.target&&this._element===T.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Fg),this._resetAdjustments(),this._scrollBar.reset(),L.trigger(this._element,Gw)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(L.trigger(this._element,mk).defaultPrevented)return;const x=this._element.scrollHeight>document.documentElement.clientHeight,T=this._element.style.overflowY;T==="hidden"||this._element.classList.contains(Mg)||(x||(this._element.style.overflowY="hidden"),this._element.classList.add(Mg),this._queueCallback(()=>{this._element.classList.remove(Mg),this._queueCallback(()=>{this._element.style.overflowY=T},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const x=this._element.scrollHeight>document.documentElement.clientHeight,T=this._scrollBar.getWidth(),M=T>0;if(M&&!x){const ne=g()?"paddingLeft":"paddingRight";this._element.style[ne]=`${T}px`}if(!M&&x){const ne=g()?"paddingRight":"paddingLeft";this._element.style[ne]=`${T}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(x,T){return this.each(function(){const M=Aa.getOrCreateInstance(this,x);if(typeof x=="string"){if(M[x]===void 0)throw new TypeError(`No method named "${x}"`);M[x](T)}})}}L.on(document,qo,'[data-bs-toggle="modal"]',function(D){const x=ge.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&D.preventDefault(),L.one(x,Kw,M=>{M.defaultPrevented||L.one(x,Gw,()=>{c(this)&&this.focus()})});const T=ge.findOne(".modal.show");T&&Aa.getInstance(T).hide(),Aa.getOrCreateInstance(x).toggle(this)}),Pe(Aa),y(Aa);const Xo=".bs.offcanvas",zg=".data-api",vk=`load${Xo}${zg}`,Qw="show",Jw="showing",Bg="hiding",jg=".offcanvas.show",wk=`show${Xo}`,xk=`shown${Xo}`,Sk=`hide${Xo}`,Zw=`hidePrevented${Xo}`,ex=`hidden${Xo}`,Ck=`resize${Xo}`,Yo=`click${Xo}${zg}`,GL=`keydown.dismiss${Xo}`,tx={backdrop:!0,keyboard:!0,scroll:!1},Ek={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Qo extends ye{constructor(x,T){super(x,T),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return tx}static get DefaultType(){return Ek}static get NAME(){return"offcanvas"}toggle(x){return this._isShown?this.hide():this.show(x)}show(x){this._isShown||L.trigger(this._element,wk,{relatedTarget:x}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new ff().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Jw),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Qw),this._element.classList.remove(Jw),L.trigger(this._element,xk,{relatedTarget:x})},this._element,!0))}hide(){this._isShown&&(L.trigger(this._element,Sk).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Bg),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Qw,Bg),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new ff().reset(),L.trigger(this._element,ex)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const x=!!this._config.backdrop;return new Mw({className:"offcanvas-backdrop",isVisible:x,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:x?()=>{this._config.backdrop!=="static"?this.hide():L.trigger(this._element,Zw)}:null})}_initializeFocusTrap(){return new Vw({trapElement:this._element})}_addEventListeners(){L.on(this._element,GL,x=>{x.key==="Escape"&&(this._config.keyboard?this.hide():L.trigger(this._element,Zw))})}static jQueryInterface(x){return this.each(function(){const T=Qo.getOrCreateInstance(this,x);if(typeof x=="string"){if(T[x]===void 0||x.startsWith("_")||x==="constructor")throw new TypeError(`No method named "${x}"`);T[x](this)}})}}L.on(document,Yo,'[data-bs-toggle="offcanvas"]',function(D){const x=ge.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&D.preventDefault(),u(this))return;L.one(x,ex,()=>{c(this)&&this.focus()});const T=ge.findOne(jg);T&&T!==x&&Qo.getInstance(T).hide(),Qo.getOrCreateInstance(x).toggle(this)}),L.on(window,vk,()=>{for(const D of ge.find(jg))Qo.getOrCreateInstance(D).show()}),L.on(window,Ck,()=>{for(const D of ge.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(D).position!=="fixed"&&Qo.getOrCreateInstance(D).hide()}),Pe(Qo),y(Qo);const nx={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},_k=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Tk=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,kk=(D,x)=>{const T=D.nodeName.toLowerCase();return x.includes(T)?!_k.has(T)||!!Tk.test(D.nodeValue):x.filter(M=>M instanceof RegExp).some(M=>M.test(T))},Ik={allowList:nx,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Nk={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},$k={entry:"(string|element|function|null)",selector:"(string|element)"};class Ak extends de{constructor(x){super(),this._config=this._getConfig(x)}static get Default(){return Ik}static get DefaultType(){return Nk}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(x=>this._resolvePossibleFunction(x)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(x){return this._checkContent(x),this._config.content={...this._config.content,...x},this}toHtml(){const x=document.createElement("div");x.innerHTML=this._maybeSanitize(this._config.template);for(const[ne,re]of Object.entries(this._config.content))this._setContent(x,re,ne);const T=x.children[0],M=this._resolvePossibleFunction(this._config.extraClass);return M&&T.classList.add(...M.split(" ")),T}_typeCheckConfig(x){super._typeCheckConfig(x),this._checkContent(x.content)}_checkContent(x){for(const[T,M]of Object.entries(x))super._typeCheckConfig({selector:T,entry:M},$k)}_setContent(x,T,M){const ne=ge.findOne(M,x);ne&&((T=this._resolvePossibleFunction(T))?a(T)?this._putElementInTemplate(l(T),ne):this._config.html?ne.innerHTML=this._maybeSanitize(T):ne.textContent=T:ne.remove())}_maybeSanitize(x){return this._config.sanitize?function(T,M,ne){if(!T.length)return T;if(ne&&typeof ne=="function")return ne(T);const re=new window.DOMParser().parseFromString(T,"text/html"),me=[].concat(...re.body.querySelectorAll("*"));for(const Se of me){const Re=Se.nodeName.toLowerCase();if(!Object.keys(M).includes(Re)){Se.remove();continue}const je=[].concat(...Se.attributes),Ge=[].concat(M["*"]||[],M[Re]||[]);for(const Le of je)kk(Le,Ge)||Se.removeAttribute(Le.nodeName)}return re.body.innerHTML}(x,this._config.allowList,this._config.sanitizeFn):x}_resolvePossibleFunction(x){return b(x,[this])}_putElementInTemplate(x,T){if(this._config.html)return T.innerHTML="",void T.append(x);T.textContent=x.textContent}}const Rk=new Set(["sanitize","allowList","sanitizeFn"]),ad="fade",pf="show",ld=".modal",rx="hide.bs.modal",Tc="hover",mf="focus",cd={AUTO:"auto",TOP:"top",RIGHT:g()?"left":"right",BOTTOM:"bottom",LEFT:g()?"right":"left"},Vg={allowList:nx,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ok={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Tl extends ye{constructor(x,T){if(kw===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(x,T),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Vg}static get DefaultType(){return Ok}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),L.off(this._element.closest(ld),rx,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const x=L.trigger(this._element,this.constructor.eventName("show")),T=(d(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(x.defaultPrevented||!T)return;this._disposePopper();const M=this._getTipElement();this._element.setAttribute("aria-describedby",M.getAttribute("id"));const{container:ne}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(ne.append(M),L.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(M),M.classList.add(pf),"ontouchstart"in document.documentElement)for(const re of[].concat(...document.body.children))L.on(re,"mouseover",h);this._queueCallback(()=>{L.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!L.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(pf),"ontouchstart"in document.documentElement)for(const x of[].concat(...document.body.children))L.off(x,"mouseover",h);this._activeTrigger.click=!1,this._activeTrigger[mf]=!1,this._activeTrigger[Tc]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),L.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(x){const T=this._getTemplateFactory(x).toHtml();if(!T)return null;T.classList.remove(ad,pf),T.classList.add(`bs-${this.constructor.NAME}-auto`);const M=(ne=>{do ne+=Math.floor(1e6*Math.random());while(document.getElementById(ne));return ne})(this.constructor.NAME).toString();return T.setAttribute("id",M),this._isAnimated()&&T.classList.add(ad),T}setContent(x){this._newContent=x,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(x){return this._templateFactory?this._templateFactory.changeContent(x):this._templateFactory=new Ak({...this._config,content:x,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(x){return this.constructor.getOrCreateInstance(x.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(ad)}_isShown(){return this.tip&&this.tip.classList.contains(pf)}_createPopper(x){const T=b(this._config.placement,[this,x,this._element]),M=cd[T.toUpperCase()];return Pg(this._element,x,this._getPopperConfig(M))}_getOffset(){const{offset:x}=this._config;return typeof x=="string"?x.split(",").map(T=>Number.parseInt(T,10)):typeof x=="function"?T=>x(T,this._element):x}_resolvePossibleFunction(x){return b(x,[this._element])}_getPopperConfig(x){const T={placement:x,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:M=>{this._getTipElement().setAttribute("data-popper-placement",M.state.placement)}}]};return{...T,...b(this._config.popperConfig,[T])}}_setListeners(){const x=this._config.trigger.split(" ");for(const T of x)if(T==="click")L.on(this._element,this.constructor.eventName("click"),this._config.selector,M=>{this._initializeOnDelegatedTarget(M).toggle()});else if(T!=="manual"){const M=T===Tc?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),ne=T===Tc?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");L.on(this._element,M,this._config.selector,re=>{const me=this._initializeOnDelegatedTarget(re);me._activeTrigger[re.type==="focusin"?mf:Tc]=!0,me._enter()}),L.on(this._element,ne,this._config.selector,re=>{const me=this._initializeOnDelegatedTarget(re);me._activeTrigger[re.type==="focusout"?mf:Tc]=me._element.contains(re.relatedTarget),me._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},L.on(this._element.closest(ld),rx,this._hideModalHandler)}_fixTitle(){const x=this._element.getAttribute("title");x&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",x),this._element.setAttribute("data-bs-original-title",x),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(x,T){clearTimeout(this._timeout),this._timeout=setTimeout(x,T)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(x){const T=ue.getDataAttributes(this._element);for(const M of Object.keys(T))Rk.has(M)&&delete T[M];return x={...T,...typeof x=="object"&&x?x:{}},x=this._mergeConfigObj(x),x=this._configAfterMerge(x),this._typeCheckConfig(x),x}_configAfterMerge(x){return x.container=x.container===!1?document.body:l(x.container),typeof x.delay=="number"&&(x.delay={show:x.delay,hide:x.delay}),typeof x.title=="number"&&(x.title=x.title.toString()),typeof x.content=="number"&&(x.content=x.content.toString()),x}_getDelegateConfig(){const x={};for(const[T,M]of Object.entries(this._config))this.constructor.Default[T]!==M&&(x[T]=M);return x.selector=!1,x.trigger="manual",x}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(x){return this.each(function(){const T=Tl.getOrCreateInstance(this,x);if(typeof x=="string"){if(T[x]===void 0)throw new TypeError(`No method named "${x}"`);T[x]()}})}}y(Tl);const Dk={...Tl.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Pk={...Tl.DefaultType,content:"(null|string|element|function)"};class gf extends Tl{static get Default(){return Dk}static get DefaultType(){return Pk}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(x){return this.each(function(){const T=gf.getOrCreateInstance(this,x);if(typeof x=="string"){if(T[x]===void 0)throw new TypeError(`No method named "${x}"`);T[x]()}})}}y(gf);const Ug=".bs.scrollspy",Lk=`activate${Ug}`,sx=`click${Ug}`,Fk=`load${Ug}.data-api`,kc="active",Wg="[href]",ix=".nav-link",Mk=`${ix}, .nav-item > ${ix}, .list-group-item`,zk={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Bk={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class _i extends ye{constructor(x,T){super(x,T),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return zk}static get DefaultType(){return Bk}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const x of this._observableSections.values())this._observer.observe(x)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(x){return x.target=l(x.target)||document.body,x.rootMargin=x.offset?`${x.offset}px 0px -30%`:x.rootMargin,typeof x.threshold=="string"&&(x.threshold=x.threshold.split(",").map(T=>Number.parseFloat(T))),x}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(L.off(this._config.target,sx),L.on(this._config.target,sx,Wg,x=>{const T=this._observableSections.get(x.target.hash);if(T){x.preventDefault();const M=this._rootElement||window,ne=T.offsetTop-this._element.offsetTop;if(M.scrollTo)return void M.scrollTo({top:ne,behavior:"smooth"});M.scrollTop=ne}}))}_getNewObserver(){const x={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(T=>this._observerCallback(T),x)}_observerCallback(x){const T=me=>this._targetLinks.get(`#${me.target.id}`),M=me=>{this._previousScrollData.visibleEntryTop=me.target.offsetTop,this._process(T(me))},ne=(this._rootElement||document.documentElement).scrollTop,re=ne>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=ne;for(const me of x){if(!me.isIntersecting){this._activeTarget=null,this._clearActiveClass(T(me));continue}const Se=me.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(re&&Se){if(M(me),!ne)return}else re||Se||M(me)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const x=ge.find(Wg,this._config.target);for(const T of x){if(!T.hash||u(T))continue;const M=ge.findOne(decodeURI(T.hash),this._element);c(M)&&(this._targetLinks.set(decodeURI(T.hash),T),this._observableSections.set(T.hash,M))}}_process(x){this._activeTarget!==x&&(this._clearActiveClass(this._config.target),this._activeTarget=x,x.classList.add(kc),this._activateParents(x),L.trigger(this._element,Lk,{relatedTarget:x}))}_activateParents(x){if(x.classList.contains("dropdown-item"))ge.findOne(".dropdown-toggle",x.closest(".dropdown")).classList.add(kc);else for(const T of ge.parents(x,".nav, .list-group"))for(const M of ge.prev(T,Mk))M.classList.add(kc)}_clearActiveClass(x){x.classList.remove(kc);const T=ge.find(`${Wg}.${kc}`,x);for(const M of T)M.classList.remove(kc)}static jQueryInterface(x){return this.each(function(){const T=_i.getOrCreateInstance(this,x);if(typeof x=="string"){if(T[x]===void 0||x.startsWith("_")||x==="constructor")throw new TypeError(`No method named "${x}"`);T[x]()}})}}L.on(window,Fk,()=>{for(const D of ge.find('[data-bs-spy="scroll"]'))_i.getOrCreateInstance(D)}),y(_i);const kl=".bs.tab",jk=`hide${kl}`,Vk=`hidden${kl}`,Uk=`show${kl}`,Wk=`shown${kl}`,yf=`click${kl}`,Hk=`keydown${kl}`,KL=`load${kl}`,Hg="ArrowLeft",ox="ArrowRight",Gk="ArrowUp",Gg="ArrowDown",Kg="Home",ax="End",Js="active",lx="fade",ud="show",cx=".dropdown-toggle",bf=`:not(${cx})`,Kk='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',ux=`.nav-link${bf}, .list-group-item${bf}, [role="tab"]${bf}, ${Kk}`,qk=`.${Js}[data-bs-toggle="tab"], .${Js}[data-bs-toggle="pill"], .${Js}[data-bs-toggle="list"]`;class Il extends ye{constructor(x){super(x),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),L.on(this._element,Hk,T=>this._keydown(T)))}static get NAME(){return"tab"}show(){const x=this._element;if(this._elemIsActive(x))return;const T=this._getActiveElem(),M=T?L.trigger(T,jk,{relatedTarget:x}):null;L.trigger(x,Uk,{relatedTarget:T}).defaultPrevented||M&&M.defaultPrevented||(this._deactivate(T,x),this._activate(x,T))}_activate(x,T){x&&(x.classList.add(Js),this._activate(ge.getElementFromSelector(x)),this._queueCallback(()=>{x.getAttribute("role")==="tab"?(x.removeAttribute("tabindex"),x.setAttribute("aria-selected",!0),this._toggleDropDown(x,!0),L.trigger(x,Wk,{relatedTarget:T})):x.classList.add(ud)},x,x.classList.contains(lx)))}_deactivate(x,T){x&&(x.classList.remove(Js),x.blur(),this._deactivate(ge.getElementFromSelector(x)),this._queueCallback(()=>{x.getAttribute("role")==="tab"?(x.setAttribute("aria-selected",!1),x.setAttribute("tabindex","-1"),this._toggleDropDown(x,!1),L.trigger(x,Vk,{relatedTarget:T})):x.classList.remove(ud)},x,x.classList.contains(lx)))}_keydown(x){if(![Hg,ox,Gk,Gg,Kg,ax].includes(x.key))return;x.stopPropagation(),x.preventDefault();const T=this._getChildren().filter(ne=>!u(ne));let M;if([Kg,ax].includes(x.key))M=T[x.key===Kg?0:T.length-1];else{const ne=[ox,Gg].includes(x.key);M=w(T,x.target,ne,!0)}M&&(M.focus({preventScroll:!0}),Il.getOrCreateInstance(M).show())}_getChildren(){return ge.find(ux,this._parent)}_getActiveElem(){return this._getChildren().find(x=>this._elemIsActive(x))||null}_setInitialAttributes(x,T){this._setAttributeIfNotExists(x,"role","tablist");for(const M of T)this._setInitialAttributesOnChild(M)}_setInitialAttributesOnChild(x){x=this._getInnerElement(x);const T=this._elemIsActive(x),M=this._getOuterElement(x);x.setAttribute("aria-selected",T),M!==x&&this._setAttributeIfNotExists(M,"role","presentation"),T||x.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(x,"role","tab"),this._setInitialAttributesOnTargetPanel(x)}_setInitialAttributesOnTargetPanel(x){const T=ge.getElementFromSelector(x);T&&(this._setAttributeIfNotExists(T,"role","tabpanel"),x.id&&this._setAttributeIfNotExists(T,"aria-labelledby",`${x.id}`))}_toggleDropDown(x,T){const M=this._getOuterElement(x);if(!M.classList.contains("dropdown"))return;const ne=(re,me)=>{const Se=ge.findOne(re,M);Se&&Se.classList.toggle(me,T)};ne(cx,Js),ne(".dropdown-menu",ud),M.setAttribute("aria-expanded",T)}_setAttributeIfNotExists(x,T,M){x.hasAttribute(T)||x.setAttribute(T,M)}_elemIsActive(x){return x.classList.contains(Js)}_getInnerElement(x){return x.matches(ux)?x:ge.findOne(ux,x)}_getOuterElement(x){return x.closest(".nav-item, .list-group-item")||x}static jQueryInterface(x){return this.each(function(){const T=Il.getOrCreateInstance(this);if(typeof x=="string"){if(T[x]===void 0||x.startsWith("_")||x==="constructor")throw new TypeError(`No method named "${x}"`);T[x]()}})}}L.on(document,yf,Kk,function(D){["A","AREA"].includes(this.tagName)&&D.preventDefault(),u(this)||Il.getOrCreateInstance(this).show()}),L.on(window,KL,()=>{for(const D of ge.find(qk))Il.getOrCreateInstance(D)}),y(Il);const Ra=".bs.toast",Xk=`mouseover${Ra}`,Yk=`mouseout${Ra}`,dd=`focusin${Ra}`,Qk=`focusout${Ra}`,qL=`hide${Ra}`,Nl=`hidden${Ra}`,Jk=`show${Ra}`,Zk=`shown${Ra}`,dx="hide",vf="show",wf="showing",eI={animation:"boolean",autohide:"boolean",delay:"number"},tI={animation:!0,autohide:!0,delay:5e3};class hd extends ye{constructor(x,T){super(x,T),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return tI}static get DefaultType(){return eI}static get NAME(){return"toast"}show(){L.trigger(this._element,Jk).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(dx),f(this._element),this._element.classList.add(vf,wf),this._queueCallback(()=>{this._element.classList.remove(wf),L.trigger(this._element,Zk),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(L.trigger(this._element,qL).defaultPrevented||(this._element.classList.add(wf),this._queueCallback(()=>{this._element.classList.add(dx),this._element.classList.remove(wf,vf),L.trigger(this._element,Nl)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(vf),super.dispose()}isShown(){return this._element.classList.contains(vf)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(x,T){switch(x.type){case"mouseover":case"mouseout":this._hasMouseInteraction=T;break;case"focusin":case"focusout":this._hasKeyboardInteraction=T}if(T)return void this._clearTimeout();const M=x.relatedTarget;this._element===M||this._element.contains(M)||this._maybeScheduleHide()}_setListeners(){L.on(this._element,Xk,x=>this._onInteraction(x,!0)),L.on(this._element,Yk,x=>this._onInteraction(x,!1)),L.on(this._element,dd,x=>this._onInteraction(x,!0)),L.on(this._element,Qk,x=>this._onInteraction(x,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(x){return this.each(function(){const T=hd.getOrCreateInstance(this,x);if(typeof x=="string"){if(T[x]===void 0)throw new TypeError(`No method named "${x}"`);T[x](this)}})}}return Pe(hd),y(hd),{Alert:Je,Button:_e,Carousel:be,Collapse:Zn,Dropdown:Ts,Modal:Aa,Offcanvas:Qo,Popover:gf,ScrollSpy:_i,Tab:Il,Toast:hd,Tooltip:Tl}})})(fHe);const pHe=VZ({reducer:{getAssessment:Ete}});function mHe(){const t=kP();return console.log(t),$.jsx("div",{className:"archieved-exams",children:$.jsxs("table",{className:"table table-dark table-striped",children:[$.jsx("thead",{children:$.jsxs("tr",{children:[$.jsx("th",{scope:"col",children:"Exam Name"}),$.jsx("th",{scope:"col",children:"Score"}),$.jsx("th",{scope:"col",children:"Date"})]})}),$.jsx("tbody",{className:"",children:t.map(e=>$.jsxs("tr",{children:[$.jsx("td",{children:e.assessmentName}),$.jsx("td",{children:e.status}),$.jsx("td",{children:e.date})]}))})]})})}const gHe="/assets/sman-BcANdNQr.png";function yHe(){const[t,e]=N.useState({name:"",mobile:"",email:"",message:""}),[n,r]=N.useState({}),s=a=>{const{name:l,value:c}=a.target;e({...t,[l]:c}),r({...n,[l]:""})},i=()=>{const a={};return t.name.trim()||(a.name="Name is required"),t.email.trim()?/^\S+@\S+\.\S+$/.test(t.email)||(a.email="Email is invalid"):a.email="Email is required",t.mobile.trim()?/^\d{10}$/.test(t.mobile)||(a.mobile="Mobile is invalid"):a.mobile="Mobile is required",t.message.trim()||(a.message="Message is required"),r(a),Object.keys(a).length===0},o=async a=>{if(a.preventDefault(),i())try{const l=await bn.post("http://localhost:3005/contacts",t);l&&(console.log(l),alert("Successfully send "))}catch(l){alert("Error:",l),console.log(l)}};return $.jsx("div",{id:"main",children:$.jsx(pp,{children:$.jsx(mp,{children:$.jsx(Zd,{children:$.jsxs("div",{id:"formContainer",style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[$.jsxs("div",{children:[$.jsx("img",{src:gHe,alt:"",id:"sMan",className:"support-img"}),$.jsx("h1",{style:{textAlign:"center"},children:"Support"}),$.jsx("p",{className:"para",children:"24/7 Hours Support"})]}),$.jsxs("div",{className:"label-input-field",children:[$.jsxs("h6",{className:"inputText",children:[$.jsx("span",{style:{color:"red"},children:"*"}),"Enter Name :"]}),$.jsx("input",{className:"support-input",type:"text",placeholder:"Enter Name",name:"name",alue:t.name,required:!0,onChange:s}),n.name&&$.jsxs("h6",{style:{color:"red",marginLeft:"2%"},children:["❗",n.name]})]}),$.jsxs("div",{className:"label-input-field",children:[$.jsxs("h6",{className:"inputText",children:[$.jsx("span",{style:{color:"red"},children:"*"}),"Enter Mobile :"]}),$.jsx("input",{className:"support-input",type:"text",placeholder:"Enter Mobile",required:!0,name:"mobile",onChange:s,alue:t.mobile}),n.mobile&&$.jsxs("h6",{style:{color:"red",marginLeft:"2%"},children:["❗",n.mobile]})]}),$.jsxs("div",{className:"label-input-field",children:[$.jsxs("h6",{className:"inputText",children:[$.jsx("span",{style:{color:"red"},children:"*"}),"Enter Email :"]}),$.jsx("input",{className:"support-input",type:"email",placeholder:"Enter Email",required:!0,name:"email",alue:t.email,onChange:s}),n.email&&$.jsxs("h6",{style:{color:"red",marginLeft:"2%"},children:["❗",n.email]})]}),$.jsxs("div",{className:"label-input-field",children:[$.jsxs("h6",{className:"inputText",children:[$.jsx("span",{style:{color:"red"},children:"*"}),"Message"]}),$.jsx("textarea",{placeholder:"Message...",rows:6,cols:60,required:!0,name:"message",alue:t.message,onChange:s}),n.message&&$.jsxs("h6",{style:{color:"red",marginLeft:"2%"},children:["❗",n.message]})]}),$.jsx(Fb,{variant:"success",type:"submit",onClick:o,children:"Send Message"})]})})})})})}const bHe="data:image/webp;base64,UklGRpYJAABXRUJQVlA4IIoJAACwMgCdASrIAMgAPpFCnUqlo6KhprOpyLASCWNu4XKQ79x8kyK2tX6PiPUMw2NvB5ovNp9NXoAdMFz9HtIZBMzPokQy6CWgzsXlQGV/RlmNKoppXkD/a97N6MBRO8LLqvDBZdVFYpTfohkYQltDQazGIQCdq3VjjUOM6QI9pdr6pDbGBGwJMspo5yv4mpNEAnhJDQ34EAqzQhB4pW4XLBBu12iS2Sb5hzrhZdVJ6HubbUDYczeJhbcgx1DkhBbYyGGtp1pVtZpgIBO2sJOIzbsFRnq6WZVZeqU7sHQxX9muJrbhmZ7v0RuzfuHss/LtUeBYR3o1EoNRE7F1CkWuSoNHWKgf3PBZ2r8IJ2Eo6OyhbLeJa5PS5hQvLjmir22kVSVO4b3/ZvZefFIm3eRjf1ruNU+KiuHfYo081K9oUvRStlCeGlVKbDHToeK3ZSKsUazkFm1Bk3gtfMJrBnB7lnmhLcaM2C2LEbY6ReycJ/nenP0gx92g+nshPKU4shfkToRgTpH4JQ072AwcnlAg7lypO09vXEnhgsuq8MFlgAAA/v8mwf/pX0n8KZGCAAP2orJgPp9rCyQkkj9RNHIt9+fDvj1ouc1aTag5VKpHguhbaH+pJFghEzpy01ooxbNdLFQcKdXzEFIqVQdzOMdQb2nYYydbz+6nEIOYZFXUjBAyWOOeGMRT6c7hG1x3UjMBWiryohVES6VcKoeIgKF4U8CqXiY4Dw3V8EUoIxXAog3BrXbPUF72lM+ufx+FGdTRaP/1/5co4WWOERkQBtUgpeO3QEKh2GuD7ThKKvYFS7FdyAzx6QF7uU6SBYc3fCdBzqq8mMIhO/PaeqJEFmXkfpmGicpoKAGCPwobX6noAO/OEGM1lIfXtldWU0JwIO5HSaLwoxuoSC1+ar1gjazmpD5t6VmHOBEZwjIIM2p4186rfNWWfOu+LnZGcqwV06e0F/3Crup2CE8jj61Tv7jelE3ASYscsY4D27mC2wD690uxvRpHEGKdReyztV2d3zSKVfR5hIWRxAwUUTiJytSmRVcb/JpoBY+HO0d+SEmaXrpiD80I08OwjO0qaUbfzADt2BSq5PWQZYOUE1LcTAtcupQ86nOZCURrw9p5DCFsX9pk0ju4/2MAzoRAjc3EFUY67iKwfZe4KA3Ih+ybJRTWayVZMRJZb1WhX9nsY5/zEgQYe3OsUO83KKUp3UwrKgDkiEMr5e0/37GUDUQus4LfDnnNyMbHv3C3awU7RGM42momoovX7JmmHU5IZh+OGDRiCa2KUVZ/OU0Ek8HE0E2Me4nEiprO3RomFlprsllAfIf3HVF6JbdFOemRxR9Q2okQUC7XA494AR9TtezlXxHY8tAUMeIU38hFjqUPcWPlDlF5EnlBJv7+UKbuis0d/qncLpOoPvxPRSlPRVAiZ24r6dAgS9ZNkkrHpfoukVnjqMJpe5dtP4PQqPzdzzRU/nSVz2QLOJdzmpuuivnAv1hybKt++lVS2djIW+H4ZTjkgHwYA/g/mOqEH4rookOdD1LzgYBpqUpfw+NN+IuX3Ld3QP0/cBrKIiJKrw4azuetqZMUTkou0gGRFsKDh080dux1sUgOqxkQH8z5ugSSm4CDSTE+fZgjtPi7iN3gRmvLnK8NbKHhsEbZNOlnMYEcXCDbDC70LAmPH0WS+MFHMVj082kUZv1KW2iQSa/tGV1ysHoSLHPYzucKenNCV4hH6Yd5ezmc+v2LHNRVFbdt2xDzaRgN+s09PCGSvsYTYVd3Wyv8niVhvUUCEOHJkBbdvHQ5bAHxX0/eyukDCKIM8s3NgiCnRytGREv3OH8Ts9Fumn086aUZKshFdkJPpK3lFrN0RSHqLkGYmP9cewKzds8C3gNhN81y9TOzbWKl/JJF3gt1+hH+NdsVIQ3PLZ+JtsWl7QFnrAidzD3fvW9oQcXm53wbMc0z3r1MHfDJ3HFTwAl6pJZa/JMXQSq9ZbfQpoKsSDWC8pdd59zG8pXBs2uZL+yO/VOeLnr0+s1o24xCr/lAKV2r4lv1ATb0oDUvUXvTdDK9ntgg0dx0u08830VVwvKuoje7SLnediDj1WyergPk0iEPtE45PA9sSUgr2R+hcZKRc9ajMkvokElJ2cFKp+x99iqp5Q0ANrETaIAUxCS1xlRKXYvJuBWBd1SdZ00BAdBF4AGCU6d/iAya6ntVoPXz7xJdTS1elb1bCVmhnE9t+FhvWqCjOzJES+arKG37deqrSERJGuR46uGlCIT/KMTIC3bW7E6/RT/iQh3Gv5Eg+RQ1w8hyrdBrPBiggb+362H5jm3g4dRT1psKdwNd17z+Ca/fLDrMZWYH3ne438O0nco8aR8leH51Jke07jykG2j1BiJIfLy0uKUTl8xDUdQF1M+L2iKUwpB/gClaLN9OJZwATUprMKJd+Et96s8+ZcxQvM1uuOCaWSeSwhZ3rIz9ubWP8xXM0AHxiYCr2fRCKSVPmRzJOKlfvGph0v81AkHzWL0faSu2WIH+jPZu3CdzV9uVTyWsPONLAAG0LMDJ8SmPlSYYLnDckonKwAGhpsFusmG9P3XcsthXOlefhJT5zlBOhOwq1vvhIYUBIKBZ383hWMVOnx9sWvjMXLakBlXtjyfkKVqJ5eT/11JUUdj3mB5fBGybcbcsaZpen4ETLboZ2E1t+AR2Vi96qNkkNErhH+4PtJ8R6JgHAbCyS/BgEwphY3aMMUd5F09Xv7n9ax+bi9RVfx8z8jLEk+yAdU/chCcvQBwxJETuOveFeD94aJkXaA+Q8D5JjSTqAIUc8oFZwTGqBKKhKRcAHWQ9CenwradjZ+XGTP7x1o5a94XgJTaG+MrEtYm9WxKaitdmnQmqrSENTYBIQFXlEzrU0erFEBOaiyy/boI9J4AdtE1BTDmczJvn+vEHRKcG5h6wfZB8l3D0kZCHl5fKVU3an8EFrVmbgddAJlxl/svp2GSFZnGS1W9GyQ/OlP4aOE39qr8rfMiKbB9vf8bbj9kLhlZeq85FhjhjoP7LfNmfPNi3vtYJ3lwN/QS2VG1Et2jMbA+ilLr0xdodJREQB3VBiZE9YgKDoViR7SKE2n3HZfnDhP7fiNCsPGUimv2RYeLqoSzTJV8dTbVTQ0UFb50XCVFGfVmg0npfYVLUnaSLbYu6r5vpNrWVkeD6llLtN8yZPv+gfMnkTQLPO8Pag7XhK57K03lAv/Q9yWLBcDwr2BfnqlcLRvUj8Yw1xIGSTX4EC7I5LAAAAAAAAAA=";var WL={},PN={};const vHe=wi(XWe);var Rj;function wHe(){return Rj||(Rj=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=vHe}(PN)),PN}var xHe=zL;Object.defineProperty(WL,"__esModule",{value:!0});var aY=WL.default=void 0,SHe=xHe(wHe()),CHe=$;aY=WL.default=(0,SHe.default)((0,CHe.jsx)("path",{d:"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56-.35-.12-.74-.03-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99"}),"Call");function EHe(){N.useRef(null);const[t,e]=N.useState(!1),n=()=>e(!1);return $.jsxs("div",{id:"Details",children:[$.jsxs("div",{id:"firstDetails",children:[$.jsx("img",{src:bHe,alt:"user",id:"logo"}),$.jsx("h1",{style:{textAlign:"center",marginTop:"1%",alignSelf:"center"},children:"User Profile"})]}),$.jsx("hr",{id:"line"}),$.jsxs("div",{style:{paddingBottom:"3%"},children:[$.jsx(pp,{class:"container",children:$.jsx(mp,{className:"row",children:$.jsx(Zd,{lg:6,children:$.jsxs("div",{className:"detailsContainer",children:[$.jsx(QWe,{style:{}}),$.jsx("h3",{children:"Name: prashu tripathi"})]})})})}),$.jsx(pp,{class:"container",children:$.jsx(mp,{className:"row",children:$.jsx(Zd,{lg:6,children:$.jsxs("div",{className:"detailsContainer",children:[$.jsx(aY,{style:{}}),$.jsxs("h3",{children:["Mobile: ",$.jsx("span",{className:"details-user",children:"+91 9098077658"})]})]})})})}),$.jsx(pp,{class:"container",children:$.jsx(mp,{className:"row",children:$.jsx(Zd,{lg:6,children:$.jsxs("div",{className:"detailsContainer",children:[$.jsx(YWe,{style:{}}),$.jsx("div",{children:$.jsxs("h3",{children:["Email: ",$.jsx("span",{className:"details-user",children:"p@gmail.com"})]})})]})})})})]}),$.jsxs(cy,{show:t,onHide:n,animation:!1,style:{justifyContent:"center",alignItems:"center"},children:[$.jsx(cy.Header,{closeButton:!0,children:$.jsx(cy.Title,{children:"Edit Profile"})}),$.jsxs(cy.Body,{children:[$.jsx("h6",{children:"Enter Name :"}),$.jsx("input",{className:"input",type:"number",placeholder:"Enter Name"}),$.jsx("h6",{children:"Enter Mobile Number :"}),$.jsx("input",{className:"input",type:"number",placeholder:"Enter Mobile Number"}),$.jsx("h6",{children:"Enter Email :"}),$.jsx("input",{className:"input",type:"email",placeholder:"Enter Email"})]}),$.jsxs(cy.Footer,{children:[$.jsx(Fb,{variant:"secondary",onClick:n,children:"Close"}),$.jsx(Fb,{variant:"primary",onClick:n,children:"Update Profile"})]})]})]})}const Rf={totalQuestions:40,attempted:28,timeTaken:"20:00 mins",correctAnswers:15,partialCorrectAnswers:0,score:45},Of=({title:t,value:e})=>$.jsx("div",{className:"col-6 mb-3",children:$.jsx("div",{className:"card",children:$.jsxs("div",{className:"card-body",children:[$.jsx("h5",{className:"card-title",children:t}),$.jsx("p",{className:"card-text",children:e})]})})}),_He=()=>{const t=Ks(),e=()=>{t("/userid/assessments")};return $.jsxs("div",{className:"container result-page",children:[$.jsxs("div",{className:"row",children:[$.jsx(Of,{title:"Total Questions",value:Rf.totalQuestions}),$.jsx(Of,{title:"Attempted",value:Rf.attempted}),$.jsx(Of,{title:"Time Taken",value:Rf.timeTaken}),$.jsx(Of,{title:"Correct Answers",value:Rf.correctAnswers}),$.jsx(Of,{title:"Partial Correct Answers",value:Rf.partialCorrectAnswers}),$.jsx(Of,{title:"Score",value:Rf.score})]}),$.jsx("div",{className:"d-flex justify-content-center mt-4",children:$.jsx("button",{className:"btn btn-primary",onClick:e,children:"Back to Assessment"})})]})},THe=b8([{path:"",element:$.jsx(hHe,{}),children:[{path:"/",element:$.jsx($je,{})},{path:"/register",element:$.jsx(Rje,{})},{path:"/userid",element:$.jsx(aHe,{}),children:[{path:"/userid/assessments",element:$.jsx(ZWe,{})},{path:"/userid/archivedexams",element:$.jsx(mHe,{})},{path:"/userid/support",element:$.jsx(yHe,{})},{path:"/userid/profile",element:$.jsx(EHe,{})}]},{path:"/:assessmentid/termsandcondition",element:$.jsx(TDe,{})},{path:"/:assessmentid/scanfaceid",element:$.jsx(DDe,{})},{path:"/:assessmentid/assessment",element:$.jsx(_De,{})},{path:"/:assessmentid/guidlinesvoilated",element:$.jsx(EDe,{})},{path:"/:assessmentid/result",element:$.jsx(_He,{})}]}]);LN.createRoot(document.getElementById("root")).render($.jsx(kn.StrictMode,{children:$.jsx(rZ,{store:pHe,children:$.jsx(w8,{router:THe})})}));
